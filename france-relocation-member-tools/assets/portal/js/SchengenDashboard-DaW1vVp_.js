import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as h}from"./vendor-react-F9Y4d3HK.js";import{a as f}from"./vendor-utils-C5RVuWu4.js";import{c as G,aH as re,aI as ne,aJ as ie,aK as le,aL as de,aM as oe,A as M,a2 as ce,b as F,B as Y,F as ee,aN as me,aO as xe,C as te,O as V,ax as ue,ah as he,aP as ge,l as H,X as pe,aQ as ye,aR as be,P as fe,a as je,Y as Z,Z as Ne}from"./main-Bk41-_7-.js";import{X as we}from"./x-circle-VSaiW88y.js";import{A as ve}from"./alert-circle-_hVY-EqD.js";import{B as Se}from"./briefcase-Br1k_Fp6.js";import{T as De}from"./trash-2-DOR6lgGe.js";import{C as Te}from"./chevron-up-d2ZLJh5w.js";import{C as Ce}from"./chevron-down-D_CJpXpM.js";import{L as _}from"./loader-2-DWDEknmH.js";import{P as ke}from"./plane-BP5RC6cP.js";import{D as Ee}from"./download-C775b_iI.js";import{C as R,L as q}from"./lock-DiquRCuG.js";import{S as Me}from"./send-ALm8BN_A.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=G("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=G("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=G("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Ae={yellowThreshold:60,redThreshold:80,emailAlerts:!1,upcomingTripReminders:!0};function Le(){const{data:t=[],isLoading:a,isError:l}=re(),{data:i=Ae,isLoading:r}=ne(),n=ie(),s=le(),d=de(),c=oe(),x=!a&&!r,p=l,N=h.useMemo(()=>[...t].sort((m,g)=>new Date(g.startDate).getTime()-new Date(m.startDate).getTime()),[t]),S=h.useCallback(m=>n.mutateAsync(m),[n]),D=h.useCallback((m,g)=>s.mutateAsync({id:m,data:g}),[s]),b=h.useCallback(m=>d.mutateAsync(m),[d]),j=h.useCallback(m=>c.mutateAsync(m),[c]),o=n.isPending||s.isPending||d.isPending||c.isPending;return{trips:N,settings:i,isLoaded:x,isError:p,isSaving:o,addTrip:S,updateTrip:D,deleteTrip:b,updateSettings:j}}const J=90,W=180;function E(t){if(t instanceof Date){const a=t.toISOString().split("T")[0];return new Date(a+"T00:00:00Z")}return new Date(t+"T00:00:00Z")}function O(){const a=new Date().toISOString().split("T")[0];return new Date(a+"T00:00:00Z")}function A(t){return t.toISOString().split("T")[0]}function se(t,a=O()){const l=E(a),i=new Date(l.getTime()-(W-1)*24*60*60*1e3),r=new Set;return t.forEach(n=>{const s=E(n.startDate),d=E(n.endDate);if(s>l)return;const c=s<i?i:s,x=d>l?l:d;if(c<=x){const p=new Date(c);for(;p<=x;)r.add(A(p)),p.setTime(p.getTime()+24*60*60*1e3)}}),r.size}function Ie(t,a=O()){const l=E(a),i=new Date(l.getTime()-(W-1)*24*60*60*1e3),r=new Set;return t.forEach(n=>{const s=E(n.startDate),d=E(n.endDate);if(s>l)return;const c=s<i?i:s,x=d>l?l:d;if(c<=x){const p=new Date(c);for(;p<=x;)r.add(A(p)),p.setTime(p.getTime()+24*60*60*1e3)}}),r}function Ue(t,a={yellow:60,red:80}){return t>=J?"critical":t>=a.red?"danger":t>=a.yellow?"warning":"safe"}function ze(t,a=O()){const l=Ie(t,a);if(l.size===0)return null;const r=Array.from(l).sort()[0],n=E(r);return n.setTime(n.getTime()+W*24*60*60*1e3),A(n)}function Re(t,a={yellow:60,red:80}){const l=O(),i=se(t,l),r=Math.max(0,J-i),n=l,s=new Date(l.getTime()-(W-1)*24*60*60*1e3);return{daysUsed:i,daysRemaining:r,windowStart:A(s),windowEnd:A(n),status:Ue(i,a),nextExpiration:ze(t,l),statusThresholds:a}}function ae(t,a){const l=E(t),i=E(a),r=Math.abs(i.getTime()-l.getTime());return Math.floor(r/(1e3*60*60*24))+1}function U(t){return ae(t.startDate,t.endDate)}function We(t,a,l){const i=E(a),r=E(l),n=new Date(i);let s=0;for(;n<=r;){const d={id:"temp",startDate:a,endDate:A(n),country:"France",category:"personal",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},c=[...t,d],x=se(c,n);if(s=Math.max(s,x),x>J)return{wouldViolate:!0,projectedDaysUsed:x,earliestSafeEntry:null,maxTripLength:null,message:`This trip would exceed the 90-day limit on ${A(n)} with ${x} days used.`};n.setTime(n.getTime()+24*60*60*1e3)}return{wouldViolate:!1,projectedDaysUsed:s,earliestSafeEntry:a,maxTripLength:ae(a,l),message:`This trip is safe. Maximum days used during trip: ${s}/90.`}}function P(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function Oe(t,a){const l=new Date(t),i=new Date(a);return t===a?P(t):l.getMonth()===i.getMonth()&&l.getFullYear()===i.getFullYear()?`${l.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${i.getDate()}, ${i.getFullYear()}`:l.getFullYear()===i.getFullYear()?`${l.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${i.toLocaleDateString("en-US",{month:"short",day:"numeric"})}, ${i.getFullYear()}`:`${P(t)} - ${P(a)}`}const $e={safe:{stroke:"stroke-green-500",text:"text-green-600",bg:"bg-green-50"},warning:{stroke:"stroke-yellow-500",text:"text-yellow-600",bg:"bg-yellow-50"},danger:{stroke:"stroke-orange-500",text:"text-orange-600",bg:"bg-orange-50"},critical:{stroke:"stroke-red-500",text:"text-red-600",bg:"bg-red-50"}},Ye={sm:{container:"w-24 h-24",svgSize:96,strokeWidth:6,radius:42,textSize:"text-2xl",labelSize:"text-xs"},md:{container:"w-36 h-36",svgSize:144,strokeWidth:8,radius:64,textSize:"text-4xl",labelSize:"text-sm"},lg:{container:"w-48 h-48",svgSize:192,strokeWidth:10,radius:86,textSize:"text-5xl",labelSize:"text-base"}};function Ve({daysUsed:t,daysRemaining:a,status:l,size:i="md",className:r}){const n=$e[l],s=Ye[i],d=Math.min(t/90*100,100),c=2*Math.PI*s.radius,x=c-d/100*c;return e.jsxs("div",{className:f("relative inline-flex",s.container,r),children:[e.jsxs("svg",{className:"transform -rotate-90",width:s.svgSize,height:s.svgSize,"aria-hidden":"true",children:[e.jsx("circle",{cx:s.svgSize/2,cy:s.svgSize/2,r:s.radius,fill:"none",strokeWidth:s.strokeWidth,className:"stroke-gray-200"}),e.jsx("circle",{cx:s.svgSize/2,cy:s.svgSize/2,r:s.radius,fill:"none",strokeWidth:s.strokeWidth,strokeLinecap:"round",strokeDasharray:c,strokeDashoffset:x,className:f("transition-all duration-500",n.stroke)})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:f("font-bold",s.textSize,n.text),"aria-label":`${t} days used`,children:t}),e.jsx("span",{className:f("text-gray-500",s.labelSize),children:"of 90 days"})]}),e.jsx("div",{role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":90,"aria-label":`Schengen days: ${t} used, ${a} remaining`,className:"sr-only"})]})}const He={safe:{label:"Safe",bgColor:"bg-green-50",textColor:"text-green-700",borderColor:"border-green-200",Icon:ce},warning:{label:"Warning",bgColor:"bg-yellow-50",textColor:"text-yellow-700",borderColor:"border-yellow-200",Icon:M},danger:{label:"Danger",bgColor:"bg-orange-50",textColor:"text-orange-700",borderColor:"border-orange-200",Icon:ve},critical:{label:"Critical",bgColor:"bg-red-50",textColor:"text-red-700",borderColor:"border-red-200",Icon:we}},Be={sm:{badge:"px-2 py-0.5 text-xs",icon:"w-3 h-3"},md:{badge:"px-2.5 py-1 text-sm",icon:"w-4 h-4"},lg:{badge:"px-3 py-1.5 text-base",icon:"w-5 h-5"}};function Ge({status:t,showLabel:a=!0,size:l="md",className:i}){const r=He[t],n=Be[l],s=r.Icon;return e.jsxs("span",{className:f("inline-flex items-center gap-1 rounded-full border font-medium",r.bgColor,r.textColor,r.borderColor,n.badge,i),children:[e.jsx(s,{className:n.icon,"aria-hidden":"true"}),a&&e.jsx("span",{children:r.label})]})}const _e=["Austria","Belgium","Bulgaria","Croatia","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland"];function K({trip:t,existingTrips:a,onSubmit:l,onCancel:i,className:r}){const n=!!t,[s,d]=h.useState((t==null?void 0:t.startDate)||""),[c,x]=h.useState((t==null?void 0:t.endDate)||""),[p,N]=h.useState((t==null?void 0:t.country)||"France"),[S,D]=h.useState((t==null?void 0:t.category)||"personal"),[b,j]=h.useState((t==null?void 0:t.notes)||""),[o,m]=h.useState(null),[g,v]=h.useState(null);h.useEffect(()=>{if(s&&c){const u=n?a.filter($=>$.id!==t.id):a,T=We(u,s,c);T.wouldViolate?m(T.message):T.projectedDaysUsed>=80?m(`This trip will bring you to ${T.projectedDaysUsed}/90 days - approaching the limit.`):T.projectedDaysUsed>=60?m(`This trip will bring you to ${T.projectedDaysUsed}/90 days.`):m(null)}else m(null)},[s,c,a,n,t]);const y=u=>{if(u.preventDefault(),v(null),!s||!c){v("Please enter both start and end dates.");return}if(new Date(c)<new Date(s)){v("End date must be on or after start date.");return}if(U({startDate:s,endDate:c})>90){v("A single trip cannot exceed 90 days.");return}l({startDate:s,endDate:c,country:p,category:S,notes:b.trim()||void 0})},w=s&&c?U({startDate:s,endDate:c}):null;return e.jsxs("form",{onSubmit:y,className:f("space-y-4",r),children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(F,{className:"w-4 h-4 inline mr-1","aria-hidden":"true"}),"Start Date"]}),e.jsx("input",{type:"date",id:"startDate",value:s,onChange:u=>d(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(F,{className:"w-4 h-4 inline mr-1","aria-hidden":"true"}),"End Date"]}),e.jsx("input",{type:"date",id:"endDate",value:c,onChange:u=>x(u.target.value),min:s,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),w!==null&&e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-lg",children:["Duration: ",e.jsxs("span",{className:"font-medium",children:[w," day",w!==1?"s":""]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-1","aria-hidden":"true"}),"Country"]}),e.jsx("select",{id:"country",value:p,onChange:u=>N(u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:_e.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{role:"radiogroup","aria-labelledby":"category-label",children:[e.jsxs("span",{id:"category-label",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(Se,{className:"w-4 h-4 inline mr-1","aria-hidden":"true"}),"Category"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"category",value:"personal",checked:S==="personal",onChange:()=>D("personal"),className:"text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Personal"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"category",value:"business",checked:S==="business",onChange:()=>D("business"),className:"text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Business"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:[e.jsx(ee,{className:"w-4 h-4 inline mr-1","aria-hidden":"true"}),"Notes (optional)"]}),e.jsx("textarea",{id:"notes",value:b,onChange:u=>j(u.target.value),rows:2,placeholder:"e.g., Visa appointment, apartment hunting...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none"})]}),o&&e.jsxs("div",{className:"flex gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),e.jsx("p",{className:"text-sm text-amber-800",children:o})]}),g&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:g})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-white bg-primary-600 hover:bg-primary-700 rounded-lg font-medium transition-colors",children:n?"Save Changes":"Add Trip"})]})]})}function Je({trips:t,currentWindowStart:a,onEdit:l,onDelete:i,className:r}){const[n,s]=h.useState("date"),[d,c]=h.useState("desc"),[x,p]=h.useState(null),N=o=>{n===o?c(m=>m==="asc"?"desc":"asc"):(s(o),c("desc"))},S=[...t].sort((o,m)=>{let g=0;switch(n){case"date":g=new Date(o.startDate).getTime()-new Date(m.startDate).getTime();break;case"country":g=o.country.localeCompare(m.country);break;case"duration":g=U(o)-U(m);break}return d==="asc"?g:-g}),D=o=>new Date(o.endDate)>=new Date(a),b=o=>{x===o?(i(o),p(null)):(p(o),setTimeout(()=>p(null),3e3))};if(t.length===0)return e.jsxs("div",{className:f("text-center py-12",r),children:[e.jsx(Y,{className:"w-12 h-12 text-gray-300 mx-auto mb-4","aria-hidden":"true"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No trips recorded"}),e.jsx("p",{className:"text-gray-500",children:"Add your first trip to start tracking your Schengen days."})]});const j=({field:o})=>n!==o?null:d==="asc"?e.jsx(Te,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"});return e.jsxs("div",{className:f("overflow-hidden",r),children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 bg-gray-50 border-b border-gray-200 text-sm font-medium text-gray-600",children:[e.jsxs("button",{onClick:()=>N("date"),className:"col-span-4 flex items-center gap-1 text-left hover:text-gray-900",children:[e.jsx(F,{className:"w-4 h-4","aria-hidden":"true"}),"Dates",e.jsx(j,{field:"date"})]}),e.jsxs("button",{onClick:()=>N("country"),className:"col-span-3 flex items-center gap-1 text-left hover:text-gray-900",children:[e.jsx(Y,{className:"w-4 h-4","aria-hidden":"true"}),"Country",e.jsx(j,{field:"country"})]}),e.jsxs("button",{onClick:()=>N("duration"),className:"col-span-2 flex items-center gap-1 text-left hover:text-gray-900",children:["Days",e.jsx(j,{field:"duration"})]}),e.jsx("div",{className:"col-span-3 text-right",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-gray-100",children:S.map(o=>{const m=U(o),g=D(o);return e.jsxs("div",{className:f("grid grid-cols-12 gap-4 px-4 py-3 items-center",g?"bg-white":"bg-gray-50 opacity-75"),children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:Oe(o.startDate,o.endDate)}),o.notes&&e.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:o.notes})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("span",{className:"text-sm text-gray-700",children:o.country}),e.jsx("span",{className:f("ml-2 text-xs px-1.5 py-0.5 rounded",o.category==="business"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:o.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[m," day",m!==1?"s":""]}),!g&&e.jsx("span",{className:"block text-xs text-gray-400",children:"outside window"})]}),e.jsxs("div",{className:"col-span-3 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>l(o),className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors","aria-label":`Edit trip to ${o.country}`,children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(o.id),className:f("p-2 rounded-lg transition-colors",x===o.id?"text-white bg-red-600 hover:bg-red-700":"text-gray-400 hover:text-red-600 hover:bg-red-50"),"aria-label":x===o.id?"Confirm delete":`Delete trip to ${o.country}`,children:e.jsx(De,{className:"w-4 h-4"})})]})]},o.id)})})]})}function Xe(){const[t,a]=h.useState(""),[l,i]=h.useState(""),[r,n]=h.useState(null),s=xe(),d=()=>{!t||!l||s.mutate({startDate:t,endDate:l},{onSuccess:p=>{n(p)}})},c=()=>{a(""),i(""),n(null)},x=t&&l&&new Date(l)>=new Date(t);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(B,{className:"w-5 h-5 text-primary-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Trip Planning Tool"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Check if a planned trip would violate the 90/180 rule"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"planning-start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),e.jsx("input",{type:"date",id:"planning-start-date",value:t,onChange:p=>a(p.target.value),className:"pl-10 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-primary-500 focus:ring-1 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"planning-end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),e.jsx("input",{type:"date",id:"planning-end-date",value:l,onChange:p=>i(p.target.value),min:t,className:"pl-10 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-primary-500 focus:ring-1 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:d,disabled:!x||s.isPending,className:f("inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors",x&&!s.isPending?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:s.isPending?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}),"Calculating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4","aria-hidden":"true"}),"Check Trip"]})}),r&&e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Reset"})]}),r&&e.jsx("div",{className:f("rounded-lg p-4 border",r.wouldViolate?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[r.wouldViolate?e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}):e.jsx(te,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:f("font-semibold",r.wouldViolate?"text-red-800":"text-green-800"),children:r.wouldViolate?"This trip would violate the 90/180 rule":"This trip is safe"}),e.jsx("p",{className:f("text-sm mt-1",r.wouldViolate?"text-red-700":"text-green-700"),children:r.wouldViolate?`You would exceed the limit by ${r.daysOverLimit} day${r.daysOverLimit!==1?"s":""}.`:`You would use ${r.maxDaysUsed} of your 90 days.`}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Trip Length"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[r.proposedLength," day",r.proposedLength!==1?"s":""]})]}),e.jsxs("div",{className:"bg-white/60 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Max Days Used"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.maxDaysUsed})]})]}),r.wouldViolate&&e.jsxs("div",{className:"mt-4 space-y-3",children:[r.earliestSafeDate&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(V,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Earliest safe start date:"})," ",P(r.earliestSafeDate)]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(V,{className:"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:["Max safe trip length from ",P(t),":"]})," ",r.maxSafeLength," day",r.maxSafeLength!==1?"s":""]})]})]})]})]})}),s.isError&&e.jsx("div",{className:"rounded-lg p-4 bg-red-50 border border-red-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(M,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("p",{className:"text-sm",children:"Failed to simulate trip. Please try again."})]})})]})}const Ze=["S","M","T","W","T","F","S"],qe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ke=["January","February","March","April","May","June","July","August","September","October","November","December"],Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function et({trips:t,windowStart:a,windowEnd:l}){const i=h.useMemo(()=>new Date().toISOString().split("T")[0],[]),r=h.useMemo(()=>new Date(i),[i]),[n,s]=h.useState(r.getMonth()),[d,c]=h.useState(r.getFullYear()),x=h.useMemo(()=>{const b=new Map;return t.forEach(j=>{const o=new Date(j.startDate),m=new Date(j.endDate),g=new Date(o);for(;g<=m;){const v=g.toISOString().split("T")[0];b.set(v,j),g.setDate(g.getDate()+1)}}),b},[t]),p=h.useMemo(()=>{const b=[],j=new Date(d,n,1),o=new Date(d,n+1,0),m=new Date(a),g=new Date(l),v=j.getDay();for(let w=v-1;w>=0;w--){const u=new Date(d,n,-w),T=u.toISOString().split("T")[0];b.push({date:u,isCurrentMonth:!1,isToday:!1,isInWindow:u>=m&&u<=g,trip:x.get(T)||null,isFuture:u>r})}for(let w=1;w<=o.getDate();w++){const u=new Date(d,n,w),T=u.toISOString().split("T")[0];b.push({date:u,isCurrentMonth:!0,isToday:T===i,isInWindow:u>=m&&u<=g,trip:x.get(T)||null,isFuture:u>r})}const y=6-o.getDay();for(let w=1;w<=y;w++){const u=new Date(d,n+1,w),T=u.toISOString().split("T")[0];b.push({date:u,isCurrentMonth:!1,isToday:!1,isInWindow:u>=m&&u<=g,trip:x.get(T)||null,isFuture:u>r})}return b},[n,d,x,a,l,r,i]),N=()=>{n===0?(s(11),c(d-1)):s(n-1)},S=()=>{n===11?(s(0),c(d+1)):s(n+1)},D=()=>{s(r.getMonth()),c(r.getFullYear())};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("button",{onClick:N,className:"p-1 sm:p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Previous month",children:e.jsx(ue,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600","aria-hidden":"true"})}),e.jsx("button",{onClick:S,className:"p-1 sm:p-1.5 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Next month",children:e.jsx(he,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600","aria-hidden":"true"})}),e.jsxs("h3",{className:"text-sm sm:text-lg font-semibold text-gray-900 ml-1 sm:ml-2",children:[e.jsx("span",{className:"hidden sm:inline",children:Ke[n]}),e.jsx("span",{className:"sm:hidden",children:Qe[n]})," ",d]})]}),e.jsx("button",{onClick:D,className:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",children:"Today"})]}),e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:qe.map((b,j)=>e.jsxs("div",{className:"py-1.5 sm:py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("span",{className:"hidden sm:inline",children:b}),e.jsx("span",{className:"sm:hidden",children:Ze[j]})]},b))}),e.jsx("div",{className:"grid grid-cols-7",children:p.map((b,j)=>{const{date:o,isCurrentMonth:m,isToday:g,isInWindow:v,trip:y,isFuture:w}=b;return e.jsxs("div",{className:f("relative min-h-[44px] sm:min-h-[60px] p-0.5 sm:p-1 border-b border-r border-gray-100",!m&&"bg-gray-50",g&&"bg-primary-50"),children:[e.jsx("span",{className:f("inline-flex items-center justify-center w-5 h-5 sm:w-6 sm:h-6 text-xs sm:text-sm rounded-full",g&&"bg-primary-600 text-white font-medium",!g&&m&&"text-gray-900",!g&&!m&&"text-gray-400"),children:o.getDate()}),y&&e.jsxs("div",{className:f("mt-0.5 sm:mt-1 px-0.5 sm:px-1 py-0.5 rounded text-[10px] sm:text-xs truncate",w?"bg-blue-100 text-blue-700 border border-dashed border-blue-300":v?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600"),title:`${y.country}${w?" (planned)":""}`,children:[e.jsx(ke,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 inline-block sm:mr-0.5","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Trip to "}),e.jsx("span",{className:"hidden sm:inline",children:y.country.slice(0,3)})]}),v&&!y&&m&&e.jsx("div",{className:"absolute bottom-0.5 sm:bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 rounded-full bg-green-400",title:"In current 180-day window"})]},j)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 p-2 sm:p-3 border-t border-gray-200 text-[10px] sm:text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded bg-primary-100 border border-primary-200"}),e.jsx("span",{className:"hidden sm:inline",children:"Past trip (in window)"}),e.jsx("span",{className:"sm:hidden",children:"In window"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded bg-blue-100 border border-dashed border-blue-300"}),e.jsx("span",{className:"hidden sm:inline",children:"Future trip"}),e.jsx("span",{className:"sm:hidden",children:"Future"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 rounded bg-gray-100 border border-gray-200"}),e.jsx("span",{className:"hidden sm:inline",children:"Past trip (outside window)"}),e.jsx("span",{className:"sm:hidden",children:"Outside"})]})]})]})}function tt({disabled:t}){const[a,l]=h.useState(!1),[i,r]=h.useState(null),n=h.useRef(null),s=ge(),d=()=>{s.mutate(void 0,{onSuccess:N=>{r(N),l(!0)}})},c=()=>{var N;(N=n.current)!=null&&N.contentWindow&&n.current.contentWindow.print()},x=()=>{if(!i)return;const N=new Blob([i.html],{type:"text/html"}),S=URL.createObjectURL(N),D=document.createElement("a");D.href=S,D.download=i.filename.replace(".pdf",".html"),document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(S)},p=()=>{l(!1),r(null)};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,disabled:t||s.isPending,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Export Schengen report as PDF",children:s.isPending?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-4 h-4","aria-hidden":"true"}),"Export Report"]})}),e.jsx(H,{isOpen:a,onClose:p,title:"Schengen Report Preview",size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[(i==null?void 0:i.summary)&&e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.daysUsed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Days Used"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.daysRemaining}),e.jsx("p",{className:"text-xs text-gray-500",children:"Remaining"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:i.summary.status}),e.jsx("p",{className:"text-xs text-gray-500",children:"Status"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary.tripCount}),e.jsx("p",{className:"text-xs text-gray-500",children:"Trips"})]})]}),(i==null?void 0:i.html)&&e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white",style:{height:"400px"},children:e.jsx("iframe",{ref:n,srcDoc:i.html,title:"Report Preview",className:"w-full h-full",sandbox:"allow-same-origin"})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Close"}),e.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:[e.jsx(Ee,{className:"w-4 h-4","aria-hidden":"true"}),"Download HTML"]}),e.jsxs("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700",children:[e.jsx(Pe,{className:"w-4 h-4","aria-hidden":"true"}),"Print / Save as PDF"]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:`Tip: Use your browser's "Print to PDF" option to save as a PDF file`})]})}),s.isError&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg flex items-center gap-3",children:[e.jsx("p",{className:"text-sm text-red-800",children:"Failed to generate report. Please try again."}),e.jsx("button",{onClick:()=>s.reset(),className:"text-red-600 hover:text-red-800","aria-label":"Dismiss error",children:e.jsx(pe,{className:"w-4 h-4","aria-hidden":"true"})})]})]})}function yt(){const{trips:t,settings:a,isLoaded:l,addTrip:i,updateTrip:r,deleteTrip:n,updateSettings:s}=Le(),{data:d,isLoading:c}=ye(),x=be(),[p,N]=h.useState(!1),[S,D]=h.useState(null),[b,j]=h.useState("trips"),[o,m]=h.useState(null),[g,v]=h.useState(null),y=h.useMemo(()=>Re(t,{yellow:a.yellowThreshold,red:a.redThreshold}),[t,a.yellowThreshold,a.redThreshold]),w=async C=>{v(null);try{await i(C),N(!1)}catch(k){const I=k instanceof Error?k.message:"Failed to add trip";v(I),console.error("Failed to add trip:",k)}},u=async C=>{if(S){v(null);try{await r(S.id,C),D(null)}catch(k){const I=k instanceof Error?k.message:"Failed to update trip";v(I),console.error("Failed to update trip:",k)}}},T=async C=>{v(null);try{await n(C)}catch(k){const I=k instanceof Error?k.message:"Failed to delete trip";v(I),console.error("Failed to delete trip:",k)}},$=C=>{D(C)},z=()=>{N(!1),D(null)},X=(d==null?void 0:d.canAddTrip)??!0,L=(d==null?void 0:d.isPremium)??!0;return!l||c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3",role:"status","aria-label":"Loading"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Schengen Tracker"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your 90/180 day Schengen zone compliance"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[L&&e.jsx(tt,{}),e.jsxs("button",{onClick:()=>N(!0),disabled:!X,className:f("inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors",X?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:[e.jsx(fe,{className:"w-5 h-5","aria-hidden":"true"}),"Add Trip"]})]})]}),!L&&d&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"w-5 h-5 text-amber-600","aria-hidden":"true"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-amber-800",children:["Free Plan: ",d.tripCount," of ",d.tripLimit," trips used"]}),e.jsx("p",{className:"text-sm text-amber-700",children:"Upgrade to Premium for unlimited trips, planning tools, and PDF reports"})]})]}),d.upgradeUrl&&e.jsxs("a",{href:d.upgradeUrl,className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-colors",children:[e.jsx(R,{className:"w-4 h-4","aria-hidden":"true"}),"Upgrade"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6 flex flex-col items-center justify-center",children:[e.jsx(Ve,{daysUsed:y.daysUsed,daysRemaining:y.daysRemaining,status:y.status,size:"lg"}),e.jsx("div",{className:"mt-4",children:e.jsx(Ge,{status:y.status,size:"lg"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:f("card p-4 border-l-4",y.status==="safe"&&"border-l-green-500",y.status==="warning"&&"border-l-yellow-500",y.status==="danger"&&"border-l-orange-500",y.status==="critical"&&"border-l-red-500"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(je,{className:"w-5 h-5 text-gray-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Days Remaining"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.daysRemaining})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-gray-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Current 180-Day Window"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[P(y.windowStart)," - ",P(y.windowEnd)]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[y.nextExpiration&&e.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-blue-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Next Day Expires"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:P(y.nextExpiration)}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"A day will drop off the 180-day window"})]})]})}),e.jsx("div",{className:"card p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5","aria-hidden":"true"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"The 90/180 Rule"}),e.jsx("p",{children:"Non-EU citizens may stay up to 90 days within any 180-day period in the Schengen area without a visa."})]})]})})]})]}),y.status==="warning"&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-yellow-600 flex-shrink-0","aria-hidden":"true"}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("span",{className:"font-medium",children:"Approaching limit:"})," You have used ",y.daysUsed," of your 90 days. Plan future travel carefully to avoid overstaying."]})]}),y.status==="danger"&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-orange-600 flex-shrink-0","aria-hidden":"true"}),e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("span",{className:"font-medium",children:"Warning:"})," You have used ",y.daysUsed," of your 90 days. Limited travel remaining in this window."]})]}),y.status==="critical"&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0","aria-hidden":"true"}),e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("span",{className:"font-medium",children:"Limit reached:"})," You have used all 90 days allowed in this 180-day window. Additional travel may result in overstay violations."]})]}),g&&e.jsxs("div",{className:"flex items-center justify-between gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-red-600 flex-shrink-0","aria-hidden":"true"}),e.jsx("p",{className:"text-sm text-red-800",children:g})]}),e.jsx("button",{onClick:()=>v(null),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Dismiss"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex gap-6","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>j("trips"),className:f("pb-3 px-1 border-b-2 font-medium text-sm transition-colors",b==="trips"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4","aria-hidden":"true"}),"Trip List"]})}),e.jsx("button",{onClick:()=>j("calendar"),className:f("pb-3 px-1 border-b-2 font-medium text-sm transition-colors",b==="calendar"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4","aria-hidden":"true"}),"Calendar View",!L&&e.jsx(q,{className:"w-3 h-3 text-gray-400","aria-hidden":"true"})]})}),e.jsx("button",{onClick:()=>j("planning"),className:f("pb-3 px-1 border-b-2 font-medium text-sm transition-colors",b==="planning"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4","aria-hidden":"true"}),"Planning Tool",!L&&e.jsx(q,{className:"w-3 h-3 text-gray-400","aria-hidden":"true"})]})}),e.jsx("button",{onClick:()=>j("settings"),className:f("pb-3 px-1 border-b-2 font-medium text-sm transition-colors",b==="settings"?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4","aria-hidden":"true"}),"Settings"]})})]})}),b==="trips"&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Trips"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," trip",t.length!==1?"s":""]})]}),e.jsx(Je,{trips:t,currentWindowStart:y.windowStart,onEdit:$,onDelete:T})]}),b==="calendar"&&(L?e.jsx(et,{trips:t,windowStart:y.windowStart,windowEnd:y.windowEnd}):e.jsx(Q,{feature:"Calendar View",description:"Visualize your trips on an interactive calendar to better understand your travel patterns and plan future trips.",upgradeUrl:d==null?void 0:d.upgradeUrl})),b==="planning"&&(L?e.jsx("div",{className:"card p-6",children:e.jsx(Xe,{})}):e.jsx(Q,{feature:"Planning Tool",description:"Use the 'What If' calculator to check if a planned trip would violate the 90/180 rule before you book.",upgradeUrl:d==null?void 0:d.upgradeUrl})),b==="settings"&&e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Z,{className:"w-5 h-5 text-primary-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tracker Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configure alerts and notification preferences"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ne,{className:"w-5 h-5 text-blue-600","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Email Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Receive email notifications when approaching your 90-day limit"})]})]}),e.jsx("button",{onClick:()=>s({emailAlerts:!a.emailAlerts}),className:f("relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",a.emailAlerts?"bg-primary-600":"bg-gray-200"),role:"switch","aria-checked":a.emailAlerts,children:e.jsx("span",{className:f("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a.emailAlerts?"translate-x-5":"translate-x-0")})})]}),a.emailAlerts&&e.jsx("div",{className:"mt-4 ml-14 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Alert thresholds:"})," You will receive email alerts when you reach 60 days (warning), 80 days (danger), and 85 days (urgent)."]})}),a.emailAlerts&&e.jsxs("div",{className:"mt-4 ml-14",children:[e.jsx("button",{onClick:()=>{m(null),x.mutate(void 0,{onSuccess:C=>{m({type:C.success?"success":"error",text:C.message})},onError:C=>{m({type:"error",text:C instanceof Error?C.message:"Failed to send test alert"})}})},disabled:x.isPending,className:f("inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors",x.isPending?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4","aria-hidden":"true"}),"Send Test Alert"]})}),o&&e.jsxs("div",{className:f("mt-3 p-3 rounded-lg flex items-center gap-2 text-sm",o.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:[o.type==="success"?e.jsx(te,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}):e.jsx(M,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),o.text]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Warning Thresholds"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Warning Level"}),e.jsxs("p",{className:"text-lg font-bold text-yellow-900",children:[a.yellowThreshold," days"]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Status turns yellow"})]}),e.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Danger Level"}),e.jsxs("p",{className:"text-lg font-bold text-orange-900",children:[a.redThreshold," days"]}),e.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Status turns red"})]})]})]})]}),e.jsx(H,{isOpen:p,onClose:z,title:"Add Trip",size:"md",children:e.jsx(K,{existingTrips:t,onSubmit:w,onCancel:z})}),e.jsx(H,{isOpen:!!S,onClose:z,title:"Edit Trip",size:"md",children:S&&e.jsx(K,{trip:S,existingTrips:t,onSubmit:u,onCancel:z})})]})}function Q({feature:t,description:a,upgradeUrl:l}){return e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"w-8 h-8 text-amber-600","aria-hidden":"true"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[t," is a Premium Feature"]}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:a}),l&&e.jsxs("a",{href:l,className:"inline-flex items-center gap-2 px-6 py-3 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-colors",children:[e.jsx(R,{className:"w-5 h-5","aria-hidden":"true"}),"Upgrade to Premium"]})]})}export{yt as default};
