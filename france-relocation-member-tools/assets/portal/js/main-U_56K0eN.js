const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TasksView-BHHKTBIH.js","./vendor-query-D8MH73Ff.js","./vendor-react-F9Y4d3HK.js","./vendor-utils-C5RVuWu4.js","./useVirtualization-CB_CFqiQ.js","./vendor-virtual-Bs6oCvg1.js","./filter-CKw6_N-U.js","./circle-Mqmmedi3.js","./more-vertical-C9wrXvh5.js","./grip-vertical-xxZlnXRN.js","./loader-2-r8mPVWED.js","./flag-2VkeVu2Q.js","./trash-2-BGiHOsva.js","./DocumentsView--q0gXs7m.js","./alert-circle-4etKYwiJ.js","./download-DFQtvF_0.js","./shield-BKXtVvpW.js","./external-link-CogCauVk.js","./chevron-up-BjDs9Y-b.js","./chevron-down-DXxFnjbr.js","./MessagesView-4RA6D1kt.js","./pen-BAmMN1Pe.js","./send-DWvesl3k.js","./arrow-left-B_R7aMul.js","./check-circle-2-DUqlHCQM.js","./TimelineView-Pb6-ZLFQ.js","./user-plus-CHzEDnHy.js","./SettingsView-CB-guQCy.js","./save-9K1OJPac.js","./HelpView-Cxuy0eMO.js","./book-CvhVAFUl.js","./plane-BUQ7dO3Y.js","./briefcase-CNYgF8i5.js","./graduation-cap-DAztssoQ.js","./GuidesView-BXgDyvbY.js","./heart-D2YCBckC.js","./car-CiRZiVVz.js","./dollar-sign-CFFrqd8r.js","./FamilyView-c2jWaG_F.js","./lock-BigJrpuq.js","./ProfileView-GSeeoTce.js","./ChecklistsView-BLst5RsN.js","./GlossaryView-Cvdo25jL.js","./building-2-C_TWWhsG.js","./copy-DbuQcdZB.js","./KnowledgeBaseChat-S0uCUgJG.js","./building-DE02zIkk.js","./MembershipView-YrrCtH7e.js","./x-circle-DrM9SjOc.js","./ResearchView-De6p-Abf.js","./SchengenDashboard-BnB_egCm.js"])))=>i.map(i=>d[i]);
var be=Object.defineProperty;var ve=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>ve(e,typeof t!="symbol"?t+"":t,n);import{u as m,a as u,b as l,j as s,Q as ke,c as je}from"./vendor-query-D8MH73Ff.js";import{a as Se,r as b,R as Ne}from"./vendor-react-F9Y4d3HK.js";import{c as Te,a as S}from"./vendor-utils-C5RVuWu4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var W={},re=Se;W.createRoot=re.createRoot,W.hydrateRoot=re.hydrateRoot;const we="modulepreload",Ce=function(e,t){return new URL(e,t).href},ae={},N=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),v=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=Promise.allSettled(n.map(f=>{if(f=Ce(f,i),f in ae)return;ae[f]=!0;const x=f.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(!!i)for(let w=d.length-1;w>=0;w--){const C=d[w];if(C.href===f&&(!x||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${k}`))return;const T=document.createElement("link");if(T.rel=x?"stylesheet":we,x||(T.as="script"),T.crossOrigin="",T.href=f,v&&T.setAttribute("nonce",v),document.head.appendChild(T),x)return new Promise((w,C)=>{T.addEventListener("load",w),T.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})},Y=1e3,Q=60*Y,qe=60*Q,y={DYNAMIC:10*Y,DEFAULT:30*Y,SHORT:Q,MEDIUM:5*Q,LONG:qe},Z={SUPPORT_UNREAD:Q},_e={MIN_QUERY_LENGTH:2};function X(){return window.fraPortalData||{apiUrl:"/wp-json/fra-portal/v1",nonce:"",userId:0,siteUrl:"",pluginUrl:"",isAdmin:!1}}async function r(e,t={}){const n=X(),i=`${n.apiUrl}${e}`,{signal:o,...c}=t,d=await fetch(i,{...c,signal:o,headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce,...c.headers},credentials:"same-origin"});if(!d.ok){const p=await d.json().catch(()=>({message:"An error occurred"}));throw new Error(p.message||`HTTP error ${d.status}`)}return d.json()}async function ee(e,t,n){const i=X(),o=`${i.apiUrl}${e}`,c=await fetch(o,{method:"POST",headers:{"X-WP-Nonce":i.nonce},credentials:"same-origin",body:t,signal:n});if(!c.ok){const d=await c.json().catch(()=>({message:"Request failed"}));throw new Error(d.message||`HTTP error ${c.status}`)}return c.json()}function Ee(e,t={}){const n=new AbortController;return{promise:r(e,{...t,signal:n.signal}),abort:()=>n.abort()}}const me={get:()=>r("/dashboard"),dismissWelcomeBanner:()=>r("/welcome-banner/dismiss",{method:"POST"})},Fe={list:()=>r("/projects"),get:e=>r(`/projects/${e}`),create:e=>r("/projects",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>r(`/projects/${e}`,{method:"DELETE"})},O={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.stage&&n.set("stage",t.stage),t!=null&&t.status&&n.set("status",t.status),t!=null&&t.task_type&&n.set("task_type",t.task_type);const i=n.toString();return r(`/projects/${e}/tasks${i?`?${i}`:""}`)},get:e=>r(`/tasks/${e}`),create:(e,t)=>r(`/projects/${e}/tasks`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>r(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>r(`/tasks/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),delete:e=>r(`/tasks/${e}`,{method:"DELETE"}),reorder:e=>r("/tasks/reorder",{method:"POST",body:JSON.stringify({order:e})})},Pe={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.limit&&n.set("limit",String(t.limit)),t!=null&&t.offset&&n.set("offset",String(t.offset)),t!=null&&t.grouped&&n.set("grouped","true");const i=n.toString();return r(`/projects/${e}/activity${i?`?${i}`:""}`)}},L={me:()=>r("/me"),updateProfile:e=>r("/me",{method:"PUT",body:JSON.stringify(e)}),getSettings:()=>r("/me/settings"),updateSettings:e=>r("/me/settings",{method:"PUT",body:JSON.stringify(e)}),deleteAccount:e=>r("/account/delete",{method:"POST",body:JSON.stringify({confirmation:e})})},K={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.category&&n.set("category",t.category),t!=null&&t.file_type&&n.set("file_type",t.file_type);const i=n.toString();return r(`/projects/${e}/files${i?`?${i}`:""}`)},get:e=>r(`/files/${e}`),upload:(e,t,n,i)=>{const o=new FormData;return o.append("file",t),n!=null&&n.category&&o.append("category",n.category),n!=null&&n.description&&o.append("description",n.description),ee(`/projects/${e}/files`,o,i)},update:(e,t)=>r(`/files/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>r(`/files/${e}`,{method:"DELETE"}),download:e=>{const t=X();return`${t.apiUrl}/files/${e}/download?_wpnonce=${t.nonce}`}},A={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.task_id&&n.set("task_id",String(t.task_id)),t!=null&&t.pinned&&n.set("pinned","true");const i=n.toString();return r(`/projects/${e}/notes${i?`?${i}`:""}`)},get:e=>r(`/notes/${e}`),create:(e,t)=>r(`/projects/${e}/notes`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>r(`/notes/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>r(`/notes/${e}`,{method:"DELETE"}),togglePin:e=>r(`/notes/${e}/pin`,{method:"PATCH"})},J={get:()=>r("/profile"),update:e=>r("/profile",{method:"PUT",body:JSON.stringify(e)}),getCompletion:()=>r("/profile/completion"),reset:e=>r("/profile/reset",{method:"POST",body:JSON.stringify({confirmation:e})})},P={list:e=>{const t=new URLSearchParams;e&&t.set("visa_type",e);const n=t.toString();return r(`/checklists${n?`?${n}`:""}`)},get:e=>r(`/checklists/${e}`),updateItem:(e,t,n)=>r(`/checklists/${e}/items/${t}`,{method:"PUT",body:JSON.stringify(n)}),getTaskChecklist:e=>r(`/tasks/${e}/checklist`),updateTaskChecklistItem:(e,t,n)=>r(`/tasks/${e}/checklist/${t}`,{method:"PUT",body:JSON.stringify({completed:n})}),addTaskChecklistItem:(e,t)=>r(`/tasks/${e}/checklist`,{method:"POST",body:JSON.stringify({title:t})}),deleteTaskChecklistItem:(e,t)=>r(`/tasks/${e}/checklist/${t}`,{method:"DELETE"})},De={getAll:()=>r("/glossary")},ye={verify:e=>r("/verify",{method:"POST",body:JSON.stringify(e)}),verifyFile:(e,t,n)=>{const i=new FormData;return i.append("file",t),i.append("verification_type",n),ee(`/projects/${e}/verify`,i)},getHistory:e=>r(`/projects/${e}/verify/history`)},te={list:()=>r("/guides"),get:e=>r(`/guides/${e}`),getPersonalized:e=>r(`/guides/${e}/personalized`),generateAI:e=>r(`/guides/${e}/generate`,{method:"POST"})},se={send:(e,t)=>r("/chat",{method:"POST",body:JSON.stringify(e),signal:t}),sendCancellable:e=>Ee("/chat",{method:"POST",body:JSON.stringify(e)}),getCategories:()=>r("/chat/categories"),searchTopics:(e,t)=>r(`/chat/search?q=${encodeURIComponent(e)}`,{signal:t})},_={getInfo:()=>r("/membership"),getSubscriptions:()=>r("/membership/subscriptions"),getPayments:()=>r("/membership/payments"),cancelSubscription:e=>r(`/membership/subscriptions/${e}/cancel`,{method:"POST"}),suspendSubscription:e=>r(`/membership/subscriptions/${e}/suspend`,{method:"POST"}),resumeSubscription:e=>r(`/membership/subscriptions/${e}/resume`,{method:"POST"}),getUpgradeOptions:()=>r("/membership/upgrade-options")},Me={searchCommunes:(e,t)=>{const n=new URLSearchParams;return e.department&&n.set("department",e.department),e.q&&n.set("q",e.q),e.limit&&n.set("limit",String(e.limit)),r(`/research/communes/search?${n.toString()}`,{signal:t})},generateReport:e=>r("/research/report/generate",{method:"POST",body:JSON.stringify(e)}),saveReport:e=>r(`/research/report/${e}/save`,{method:"POST"}),getSavedReports:()=>r("/research/saved")},D={getTickets:()=>r("/support/tickets"),getTicket:e=>r(`/support/tickets/${e}`),createTicket:e=>r("/support/tickets",{method:"POST",body:JSON.stringify(e)}),replyToTicket:(e,t)=>r(`/support/tickets/${e}/reply`,{method:"POST",body:JSON.stringify(t)}),deleteTicket:e=>r(`/support/tickets/${e}`,{method:"DELETE"}),getUnreadCount:()=>r("/support/unread-count")},V={getFeatureStatus:()=>r("/family/feature-status"),getAll:()=>r("/family"),get:e=>r(`/family/${e}`),create:e=>r("/family",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>r(`/family/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>r(`/family/${e}`,{method:"DELETE"})},g={getTrips:()=>r("/schengen/trips"),getTrip:e=>r(`/schengen/trips/${e}`),createTrip:e=>r("/schengen/trips",{method:"POST",body:JSON.stringify({start_date:e.startDate,end_date:e.endDate,country:e.country,category:e.category,notes:e.notes})}),updateTrip:(e,t)=>r(`/schengen/trips/${e}`,{method:"PUT",body:JSON.stringify({...t.startDate!==void 0&&{start_date:t.startDate},...t.endDate!==void 0&&{end_date:t.endDate},...t.country!==void 0&&{country:t.country},...t.category!==void 0&&{category:t.category},...t.notes!==void 0&&{notes:t.notes}})}),deleteTrip:e=>r(`/schengen/trips/${e}`,{method:"DELETE"}),getSummary:()=>r("/schengen/summary"),getSettings:()=>r("/schengen/settings"),updateSettings:e=>r("/schengen/settings",{method:"PUT",body:JSON.stringify(e)}),getFeatureStatus:()=>r("/schengen/feature-status"),simulateTrip:e=>r("/schengen/simulate",{method:"POST",body:JSON.stringify({start_date:e.startDate,end_date:e.endDate})}),generateReport:()=>r("/schengen/report"),testAlert:()=>r("/schengen/test-alert",{method:"POST"}),storeLocation:e=>r("/schengen/location",{method:"POST",body:JSON.stringify(e)}),getLocationHistory:e=>r("/schengen/location/history",{method:"GET",...e&&{headers:{"X-Query-Params":JSON.stringify(e)}}}),getTodayStatus:()=>r("/schengen/location/today"),geocode:(e,t)=>r("/schengen/location/geocode",{method:"POST",body:JSON.stringify({lat:e,lng:t})}),deleteLocation:e=>r(`/schengen/location/${e}`,{method:"DELETE"}),clearLocationHistory:()=>r("/schengen/location/clear",{method:"POST"}),getLocationSettings:()=>r("/schengen/location/settings"),updateLocationSettings:e=>r("/schengen/location/settings",{method:"PUT",body:JSON.stringify({trackingEnabled:e.tracking_enabled,dailyReminder:e.daily_reminder,autoDetect:e.auto_detect})}),detectFromIP:()=>r("/schengen/location/detect"),getCalendarProviders:()=>r("/schengen/calendar/providers"),getCalendarConnections:()=>r("/schengen/calendar/connections"),connectCalendar:e=>r("/schengen/calendar/connect",{method:"POST",body:JSON.stringify({provider:e})}),disconnectCalendar:e=>r(`/schengen/calendar/connections/${e}`,{method:"DELETE"}),syncCalendar:e=>r(`/schengen/calendar/connections/${e}/sync`,{method:"POST"}),getCalendarEvents:e=>r(`/schengen/calendar/events${e?`?status=${e}`:""}`),importCalendarEvents:e=>r("/schengen/calendar/events/import",{method:"POST",body:JSON.stringify({event_ids:e})}),skipCalendarEvents:e=>r("/schengen/calendar/events/skip",{method:"POST",body:JSON.stringify({event_ids:e})}),importICalFile:e=>{const t=new FormData;return t.append("file",e),ee("/schengen/calendar/import-ical",t)},getJurisdictions:e=>r(e?`/schengen/jurisdictions?type=${e}`:"/schengen/jurisdictions"),getJurisdiction:e=>r(`/schengen/jurisdictions/${e}`),getTrackedJurisdictions:()=>r("/schengen/jurisdictions/tracked"),addTrackedJurisdiction:e=>r("/schengen/jurisdictions/tracked",{method:"POST",body:JSON.stringify({code:e})}),removeTrackedJurisdiction:e=>r(`/schengen/jurisdictions/tracked/${e}`,{method:"DELETE"}),getJurisdictionSummary:(e,t)=>r(t?`/schengen/jurisdictions/${e}/summary?date=${t}`:`/schengen/jurisdictions/${e}/summary`),getMultiJurisdictionSummary:()=>r("/schengen/jurisdictions/summary"),getNotifications:(e=!1)=>r(e?"/schengen/notifications?unread_only=true":"/schengen/notifications"),getNotificationUnreadCount:()=>r("/schengen/notifications/unread-count"),markNotificationRead:e=>r(`/schengen/notifications/${e}/read`,{method:"POST"}),markAllNotificationsRead:()=>r("/schengen/notifications/read-all",{method:"POST"}),deleteNotification:e=>r(`/schengen/notifications/${e}`,{method:"DELETE"}),getPushStatus:()=>r("/schengen/push/status"),subscribePush:e=>r("/schengen/push/subscribe",{method:"POST",body:JSON.stringify(e)}),unsubscribePush:e=>r("/schengen/push/unsubscribe",{method:"POST",body:JSON.stringify({endpoint:e})}),getVapidKey:()=>r("/schengen/push/vapid-key"),getNotificationPreferences:()=>r("/schengen/notifications/preferences"),updateNotificationPreferences:e=>r("/schengen/notifications/preferences",{method:"PUT",body:JSON.stringify(e)}),sendTestNotification:()=>r("/schengen/notifications/test",{method:"POST"})},a={dashboard:["dashboard"],projects:["projects"],project:e=>["project",e],tasks:(e,t)=>["tasks",e,t],task:e=>["task",e],taskChecklist:e=>["taskChecklist",e],activity:e=>["activity",e],user:["user"],userSettings:["userSettings"],files:(e,t)=>["files",e,t],file:e=>["file",e],notes:(e,t)=>["notes",e,t],note:e=>["note",e],profile:["profile"],profileCompletion:["profileCompletion"],checklists:e=>["checklists",e],checklist:e=>["checklist",e],documentTypes:["documentTypes"],generatedDocuments:e=>["generatedDocuments",e],glossary:["glossary"],glossarySearch:e=>["glossary","search",e],verificationHistory:e=>["verificationHistory",e],guides:["guides"],chatSearch:e=>["chatSearch",e],guide:e=>["guide",e],personalizedGuide:e=>["personalizedGuide",e],chatCategories:["chatCategories"],membership:["membership"],subscriptions:["subscriptions"],payments:["payments"],upgradeOptions:["upgradeOptions"],supportTickets:["supportTickets"],supportTicket:e=>["supportTicket",e],supportUnreadCount:["supportUnreadCount"],savedReports:["savedReports"],familyMembers:["familyMembers"],familyMember:e=>["familyMember",e],familyFeatureStatus:["familyFeatureStatus"],schengenTrips:["schengenTrips"],schengenTrip:e=>["schengenTrip",e],schengenSummary:["schengenSummary"],schengenSettings:["schengenSettings"],schengenFeatureStatus:["schengenFeatureStatus"],schengenLocationHistory:["schengenLocationHistory"],schengenLocationToday:["schengenLocationToday"],schengenLocationSettings:["schengenLocationSettings"]};function he(){return m({queryKey:a.dashboard,queryFn:me.get,staleTime:y.DEFAULT})}function Oe(){const e=u();return l({mutationFn:me.dismissWelcomeBanner,onSuccess:()=>{e.setQueryData(a.dashboard,t=>t&&{...t,welcome_banner:null})}})}function pe(){return m({queryKey:a.user,queryFn:L.me,staleTime:y.MEDIUM})}function ss(){const e=u();return l({mutationFn:t=>L.updateProfile(t),onSuccess:t=>{e.setQueryData(a.user,t)}})}function Le(){return m({queryKey:a.userSettings,queryFn:L.getSettings,staleTime:y.MEDIUM})}function ns(){const e=u();return l({mutationFn:t=>L.updateSettings(t),onMutate:async t=>{await e.cancelQueries({queryKey:a.userSettings});const n=e.getQueryData(a.userSettings);return n&&e.setQueryData(a.userSettings,{...n,...t}),{previousSettings:n}},onError:(t,n,i)=>{i!=null&&i.previousSettings&&e.setQueryData(a.userSettings,i.previousSettings)},onSuccess:t=>{e.setQueryData(a.userSettings,t)}})}function rs(){return l({mutationFn:e=>L.deleteAccount(e)})}function as(){const e=u();return l({mutationFn:t=>J.reset(t),onSuccess:()=>{e.invalidateQueries()}})}function Ke(){const e=u();return l({mutationFn:({id:t,data:n})=>Fe.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:a.dashboard}),e.invalidateQueries({queryKey:a.projects}),e.setQueryData(a.project(t.id),t)}})}function is(e,t){return m({queryKey:a.tasks(e,t),queryFn:()=>O.list(e,t),enabled:e>0,staleTime:y.DEFAULT})}function os(e){const t=u();return l({mutationFn:n=>O.create(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.tasks(e)}),t.invalidateQueries({queryKey:a.dashboard})}})}function cs(){const e=u();return l({mutationFn:({id:t,data:n})=>O.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:a.tasks(t.project_id)}),e.invalidateQueries({queryKey:a.dashboard}),e.setQueryData(a.task(t.id),t)}})}function ls(){const e=u();return l({mutationFn:({id:t,status:n})=>O.updateStatus(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:a.tasks(t.project_id)}),e.invalidateQueries({queryKey:a.dashboard}),e.setQueryData(a.task(t.id),t)}})}function us(){const e=u();return l({mutationFn:({id:t,projectId:n})=>O.delete(t).then(i=>({...i,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.tasks(n.projectId)}),e.invalidateQueries({queryKey:a.dashboard})}})}function ds(e,t){return m({queryKey:a.activity(e),queryFn:()=>Pe.list(e,t),enabled:e>0,staleTime:y.DYNAMIC})}function ms(e,t){return m({queryKey:a.files(e,t),queryFn:()=>K.list(e,t),enabled:e>0,staleTime:y.DEFAULT})}function ys(e){const t=u();return l({mutationFn:({file:n,data:i})=>K.upload(e,n,i),onSuccess:()=>{t.invalidateQueries({queryKey:a.files(e)}),t.invalidateQueries({queryKey:a.dashboard})}})}function hs(){const e=u();return l({mutationFn:({id:t,data:n})=>K.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:a.files(t.project_id)}),e.setQueryData(a.file(t.id),t)}})}function ps(){const e=u();return l({mutationFn:({id:t,projectId:n})=>K.delete(t).then(i=>({...i,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.files(n.projectId)}),e.invalidateQueries({queryKey:a.dashboard})}})}function gs(){return{download:e=>{const t=K.download(e);window.open(t,"_blank")}}}function fs(e,t){return m({queryKey:a.notes(e,t),queryFn:()=>A.list(e,t),enabled:e>0,staleTime:y.DEFAULT})}function xs(e){const t=u();return l({mutationFn:n=>A.create(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.notes(e)}),t.invalidateQueries({queryKey:a.activity(e)})}})}function bs(){const e=u();return l({mutationFn:({id:t,data:n})=>A.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:a.notes(t.project_id)}),e.setQueryData(a.note(t.id),t)}})}function vs(){const e=u();return l({mutationFn:({id:t,projectId:n})=>A.delete(t).then(i=>({...i,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.notes(n.projectId)})}})}function ks(){const e=u();return l({mutationFn:t=>A.togglePin(t),onSuccess:t=>{e.invalidateQueries({queryKey:a.notes(t.project_id)}),e.setQueryData(a.note(t.id),t)}})}function js(){return m({queryKey:a.profile,queryFn:J.get,staleTime:y.MEDIUM})}function Ss(){const e=u();return l({mutationFn:t=>J.update(t),onMutate:async t=>{await e.cancelQueries({queryKey:a.profile});const n=e.getQueryData(a.profile);return n&&e.setQueryData(a.profile,{...n,...t}),{previousProfile:n}},onError:(t,n,i)=>{i!=null&&i.previousProfile&&e.setQueryData(a.profile,i.previousProfile)},onSuccess:t=>{e.setQueryData(a.profile,t),e.invalidateQueries({queryKey:a.profileCompletion})}})}function Ns(){return m({queryKey:a.profileCompletion,queryFn:J.getCompletion,staleTime:y.SHORT})}function Ts(e){return m({queryKey:a.checklists(e),queryFn:()=>P.list(e),staleTime:y.SHORT})}function ws(){const e=u();return l({mutationFn:({checklistType:t,itemId:n,data:i})=>P.updateItem(t,n,i),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.checklist(n.checklistType)}),e.invalidateQueries({queryKey:a.checklists()})}})}function Cs(e){return m({queryKey:a.taskChecklist(e),queryFn:()=>P.getTaskChecklist(e),enabled:e>0,staleTime:y.DEFAULT})}function qs(e){const t=u();return l({mutationFn:({itemId:n,completed:i})=>P.updateTaskChecklistItem(e,n,i),onSuccess:()=>{t.invalidateQueries({queryKey:a.taskChecklist(e)})}})}function _s(e){const t=u();return l({mutationFn:n=>P.addTaskChecklistItem(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.taskChecklist(e)})}})}function Es(e){const t=u();return l({mutationFn:n=>P.deleteTaskChecklistItem(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.taskChecklist(e)})}})}function Fs(){return m({queryKey:a.glossary,queryFn:De.getAll,staleTime:y.LONG})}function Ps(e){const t=u();return l({mutationFn:({file:n,verificationType:i})=>ye.verifyFile(e,n,i),onSuccess:()=>{t.invalidateQueries({queryKey:a.verificationHistory(e)})}})}function Ds(e){return m({queryKey:a.verificationHistory(e),queryFn:()=>ye.getHistory(e),enabled:e>0,staleTime:y.SHORT})}function Ms(){return m({queryKey:a.guides,queryFn:te.list,staleTime:y.MEDIUM})}function Os(e){return m({queryKey:a.personalizedGuide(e),queryFn:()=>te.getPersonalized(e),enabled:!!e,staleTime:y.MEDIUM})}function Ls(){const e=u();return l({mutationFn:t=>te.generateAI(t),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.personalizedGuide(n)})}})}function Ks(){return m({queryKey:a.chatCategories,queryFn:se.getCategories,staleTime:y.LONG})}function As(){return l({mutationFn:e=>se.send(e)})}function Us(e){return m({queryKey:a.chatSearch(e),queryFn:()=>se.searchTopics(e),enabled:e.length>=_e.MIN_QUERY_LENGTH,staleTime:y.DEFAULT})}function Rs(){return m({queryKey:a.membership,queryFn:_.getInfo,staleTime:y.MEDIUM})}function $s(){return m({queryKey:a.subscriptions,queryFn:_.getSubscriptions,staleTime:y.MEDIUM})}function Qs(){return m({queryKey:a.payments,queryFn:_.getPayments,staleTime:y.MEDIUM})}function Is(){const e=u();return l({mutationFn:t=>_.cancelSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:a.subscriptions}),e.invalidateQueries({queryKey:a.membership})}})}function Hs(){const e=u();return l({mutationFn:t=>_.suspendSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:a.subscriptions}),e.invalidateQueries({queryKey:a.membership})}})}function Js(){const e=u();return l({mutationFn:t=>_.resumeSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:a.subscriptions}),e.invalidateQueries({queryKey:a.membership})}})}function Vs(){return m({queryKey:a.upgradeOptions,queryFn:_.getUpgradeOptions,staleTime:y.LONG})}function zs(){return m({queryKey:a.supportTickets,queryFn:D.getTickets,staleTime:y.DEFAULT})}function Gs(e){return m({queryKey:a.supportTicket(e||0),queryFn:()=>{if(!e)throw new Error("ticketId is required");return D.getTicket(e)},enabled:!!e,staleTime:y.DYNAMIC})}function Bs(){return m({queryKey:a.supportUnreadCount,queryFn:D.getUnreadCount,staleTime:y.DEFAULT,refetchInterval:Z.SUPPORT_UNREAD})}function Ws(){const e=u();return l({mutationFn:D.createTicket,onSuccess:()=>{e.invalidateQueries({queryKey:a.supportTickets}),e.invalidateQueries({queryKey:a.supportUnreadCount})}})}function Ys(){const e=u();return l({mutationFn:({ticketId:t,content:n})=>D.replyToTicket(t,{content:n}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.supportTickets}),e.invalidateQueries({queryKey:a.supportTicket(n.ticketId)})}})}function Zs(){const e=u();return l({mutationFn:D.deleteTicket,onSuccess:()=>{e.invalidateQueries({queryKey:a.supportTickets}),e.invalidateQueries({queryKey:a.supportUnreadCount})}})}function Xs(){return m({queryKey:a.savedReports,queryFn:Me.getSavedReports,staleTime:y.SHORT})}function en(){return m({queryKey:a.familyMembers,queryFn:V.getAll,staleTime:y.DEFAULT})}function tn(){const e=u();return l({mutationFn:V.create,onSuccess:()=>{e.invalidateQueries({queryKey:a.familyMembers})}})}function sn(){const e=u();return l({mutationFn:({memberId:t,data:n})=>V.update(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:a.familyMembers})}})}function nn(){const e=u();return l({mutationFn:V.delete,onSuccess:()=>{e.invalidateQueries({queryKey:a.familyMembers})}})}function rn(){return m({queryKey:a.schengenTrips,queryFn:g.getTrips,staleTime:y.DEFAULT})}function an(){return m({queryKey:a.schengenSettings,queryFn:g.getSettings,staleTime:y.MEDIUM})}function on(){const e=u();return l({mutationFn:g.createTrip,onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenTrips}),e.invalidateQueries({queryKey:a.schengenSummary})}})}function cn(){const e=u();return l({mutationFn:({id:t,data:n})=>g.updateTrip(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenTrips}),e.invalidateQueries({queryKey:a.schengenSummary})}})}function ln(){const e=u();return l({mutationFn:g.deleteTrip,onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenTrips}),e.invalidateQueries({queryKey:a.schengenSummary})}})}function un(){const e=u();return l({mutationFn:t=>g.updateSettings(t),onSuccess:t=>{e.setQueryData(a.schengenSettings,t),e.invalidateQueries({queryKey:a.schengenSummary})}})}function dn(){return m({queryKey:a.schengenFeatureStatus,queryFn:g.getFeatureStatus,staleTime:y.MEDIUM})}function mn(){return l({mutationFn:g.simulateTrip})}function yn(){return l({mutationFn:g.generateReport})}function hn(){return l({mutationFn:g.testAlert})}function pn(e){return m({queryKey:a.schengenLocationHistory,queryFn:()=>g.getLocationHistory(e),staleTime:y.DEFAULT})}function gn(){return m({queryKey:a.schengenLocationToday,queryFn:g.getTodayStatus,staleTime:y.DEFAULT})}function fn(){const e=u();return l({mutationFn:g.storeLocation,onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenLocationHistory}),e.invalidateQueries({queryKey:a.schengenLocationToday})}})}function xn(){const e=u();return l({mutationFn:g.deleteLocation,onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenLocationHistory}),e.invalidateQueries({queryKey:a.schengenLocationToday})}})}function bn(){const e=u();return l({mutationFn:g.clearLocationHistory,onSuccess:()=>{e.invalidateQueries({queryKey:a.schengenLocationHistory}),e.invalidateQueries({queryKey:a.schengenLocationToday})}})}function vn(){return m({queryKey:["schengenIPDetection"],queryFn:g.detectFromIP,staleTime:y.MEDIUM,retry:1})}function kn(){return m({queryKey:["calendarProviders"],queryFn:g.getCalendarProviders,staleTime:y.LONG,throwOnError:!1})}function jn(){return m({queryKey:["calendarConnections"],queryFn:g.getCalendarConnections,staleTime:y.DEFAULT,throwOnError:!1})}function Sn(){return l({mutationFn:g.connectCalendar,onSuccess:e=>{e.authUrl&&(window.location.href=e.authUrl)}})}function Nn(){const e=u();return l({mutationFn:g.disconnectCalendar,onSuccess:()=>{e.invalidateQueries({queryKey:["calendarConnections"]}),e.invalidateQueries({queryKey:["calendarEvents"]})}})}function Tn(){const e=u();return l({mutationFn:g.syncCalendar,onSuccess:()=>{e.invalidateQueries({queryKey:["calendarConnections"]}),e.invalidateQueries({queryKey:["calendarEvents"]})}})}function wn(e){return m({queryKey:["calendarEvents",e],queryFn:()=>g.getCalendarEvents(e),staleTime:y.DEFAULT,throwOnError:!1})}function Cn(){const e=u();return l({mutationFn:g.importCalendarEvents,onSuccess:()=>{e.invalidateQueries({queryKey:["calendarEvents"]}),e.invalidateQueries({queryKey:a.schengenTrips}),e.invalidateQueries({queryKey:a.schengenSummary})}})}function qn(){const e=u();return l({mutationFn:g.skipCalendarEvents,onSuccess:()=>{e.invalidateQueries({queryKey:["calendarEvents"]})}})}function _n(){const e=u();return l({mutationFn:g.importICalFile,onSuccess:()=>{e.invalidateQueries({queryKey:["calendarEvents"]})}})}function En(e){return m({queryKey:["jurisdictions",e],queryFn:()=>g.getJurisdictions(e),staleTime:y.LONG,throwOnError:!1})}function Fn(){return m({queryKey:["trackedJurisdictions"],queryFn:g.getTrackedJurisdictions,staleTime:y.DEFAULT,throwOnError:!1})}function Pn(){const e=u();return l({mutationFn:g.addTrackedJurisdiction,onSuccess:()=>{e.invalidateQueries({queryKey:["trackedJurisdictions"]}),e.invalidateQueries({queryKey:["multiJurisdictionSummary"]})}})}function Dn(){const e=u();return l({mutationFn:g.removeTrackedJurisdiction,onSuccess:()=>{e.invalidateQueries({queryKey:["trackedJurisdictions"]}),e.invalidateQueries({queryKey:["multiJurisdictionSummary"]})}})}function Mn(){return m({queryKey:["multiJurisdictionSummary"],queryFn:g.getMultiJurisdictionSummary,staleTime:y.DEFAULT,throwOnError:!1})}function On(e=!1){return m({queryKey:["notifications",e],queryFn:()=>g.getNotifications(e),staleTime:y.DYNAMIC,throwOnError:!1,refetchInterval:Z.SUPPORT_UNREAD})}function Ln(){return m({queryKey:["notificationUnreadCount"],queryFn:g.getNotificationUnreadCount,staleTime:y.DYNAMIC,refetchInterval:Z.SUPPORT_UNREAD})}function Kn(){const e=u();return l({mutationFn:g.markNotificationRead,onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notificationUnreadCount"]})}})}function An(){const e=u();return l({mutationFn:g.markAllNotificationsRead,onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notificationUnreadCount"]})}})}function Un(){const e=u();return l({mutationFn:g.deleteNotification,onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]}),e.invalidateQueries({queryKey:["notificationUnreadCount"]})}})}const Ae={colors:{primary:"#22c55e",secondary:"#3b82f6",accent:"#f59e0b",sidebarBg:"#1f2937",sidebarText:"#ffffff",headerBg:"#ffffff"},layout:{showWpHeader:!1,showWpFooter:!1,showPromoBanner:!1,sidebarPosition:"left",sidebarCollapsed:!1},branding:{title:"Members Portal",logoUrl:""},features:{notifications:!0,fileUpload:!0},menu:[{id:"dashboard",label:"Dashboard",icon:"LayoutDashboard",path:"/dashboard"},{id:"tasks",label:"Tasks",icon:"CheckSquare",path:"/tasks"},{id:"checklists",label:"Checklists",icon:"ClipboardList",path:"/checklists"},{id:"timeline",label:"Timeline",icon:"Calendar",path:"/timeline"},{id:"messages",label:"Messages",icon:"MessageSquare",path:"/messages"},{id:"research",label:"Explore France",icon:"MapPin",path:"/research"},{id:"chat",label:"Ask AI",icon:"Bot",path:"/chat"},{id:"documents",label:"Documents",icon:"FileText",path:"/documents"},{id:"guides",label:"Guides",icon:"BookOpen",path:"/guides"},{id:"glossary",label:"Glossary",icon:"BookMarked",path:"/glossary"},{id:"schengen",label:"Schengen Tracker",icon:"Globe",path:"/schengen"},{id:"files",label:"Files",icon:"FolderOpen",path:"/files"},{id:"profile",label:"My Profile",icon:"User",path:"/profile"},{id:"family",label:"Family Members",icon:"Users",path:"/family"},{id:"membership",label:"Membership",icon:"CreditCard",path:"/membership"},{id:"settings",label:"Settings",icon:"Settings",path:"/settings"},{id:"help",label:"Help",icon:"HelpCircle",path:"/help"}],customCss:""},Ue=()=>typeof window<"u"&&window.PORTAL_SETTINGS?window.PORTAL_SETTINGS:Ae,Re=()=>{if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("view");if(t)return t}return"dashboard"},U=Te((e,t)=>{const n=Ue();return{user:null,setUser:i=>e({user:i}),currentProject:null,setCurrentProject:i=>e({currentProject:i}),settings:n,updateSettings:i=>e(o=>({settings:{...o.settings,...i}})),sidebarCollapsed:n.layout.sidebarCollapsed,toggleSidebar:()=>e(i=>({sidebarCollapsed:!i.sidebarCollapsed})),setSidebarCollapsed:i=>e({sidebarCollapsed:i}),activeView:Re(),setActiveView:i=>e({activeView:i}),settingsTab:null,setSettingsTab:i=>e({settingsTab:i}),taskFilters:{stage:null,status:null,taskType:null},setTaskFilters:i=>e(o=>({taskFilters:{...o.taskFilters,...i}})),resetTaskFilters:()=>e({taskFilters:{stage:null,status:null,taskType:null}}),activeModal:null,modalData:null,openModal:(i,o=null)=>e({activeModal:i,modalData:o}),closeModal:()=>e({activeModal:null,modalData:null}),getMenuItems:()=>t().settings.menu,isMenuItemVisible:i=>t().settings.menu.some(o=>o.id===i)}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),h=(e,t)=>{const n=b.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:p="",children:v,...f},x)=>b.createElement("svg",{ref:x,...$e,width:o,height:o,stroke:i,strokeWidth:d?Number(c)*24/Number(o):c,className:["lucide",`lucide-${Qe(e)}`,p].join(" "),...f},[...t.map(([k,j])=>b.createElement(k,j)),...Array.isArray(v)?v:[v]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=h("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=h("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=h("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=h("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=h("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=h("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=h("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=h("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=h("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=h("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=h("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=h("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=h("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=h("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=h("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=h("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=h("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=h("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=h("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=h("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=h("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=h("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=h("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=h("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=h("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=h("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=h("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=h("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=h("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=h("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=h("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=h("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=h("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=h("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class ht extends b.Component{constructor(n){super(n);B(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});B(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null}),window.location.hash="#dashboard",window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,i){console.error("ErrorBoundary caught an error:",n,i),this.props.onError&&this.props.onError(n,i)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx(pt,{error:this.state.error,onRetry:this.handleRetry,onGoHome:this.handleGoHome}):this.props.children}}function pt({error:e,onRetry:t,onGoHome:n}){return s.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",role:"alert","aria-live":"assertive",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(E,{className:"w-8 h-8 text-red-600","aria-hidden":"true"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try again or return to the dashboard."}),e&&!1,s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsxs("button",{onClick:t,className:"btn btn-primary flex items-center gap-2",children:[s.jsx(ot,{className:"w-4 h-4","aria-hidden":"true"}),"Try Again"]}),s.jsxs("button",{onClick:n,className:"btn btn-secondary flex items-center gap-2",children:[s.jsx(nt,{className:"w-4 h-4","aria-hidden":"true"}),"Go to Dashboard"]})]})]})})}const gt={LayoutDashboard:fe,CheckSquare:Ge,FileText:ne,MessageSquare:H,Users:yt,Settings:lt,HelpCircle:st,FolderOpen:oe,FolderKanban:oe,BookOpen:Ve,Calendar:I,ClipboardList:Ze,BookMarked:Je,Bot:ze,User:M,CreditCard:Xe,MapPin:at,Headphones:tt,Globe:et},R={project:["dashboard","tasks","checklists","timeline","messages"],resources:["research","chat","documents","guides","glossary","schengen","files"],account:["profile","family","membership","support","settings","help"]},ft=e=>e?{project:[...e.project,...R.project.filter(t=>!e.project.includes(t))],resources:[...e.resources,...R.resources.filter(t=>!e.resources.includes(t))],account:[...e.account,...R.account.filter(t=>!e.account.includes(t))]}:R,xt=(e,t)=>{const n=ft(t),i=[{id:"project",label:"PROJECT",itemIds:n.project},{id:"resources",label:"RESOURCES",itemIds:n.resources},{id:"account",label:"ACCOUNT",itemIds:n.account}],o=e.reduce((c,d)=>(c[d.id]=d,c),{});return i.map(c=>({...c,items:c.itemIds.map(d=>o[d]).filter(d=>d!==void 0)})).filter(c=>c.items.length>0)};function bt(){const{sidebarCollapsed:e,toggleSidebar:t,activeView:n,setActiveView:i,settings:o}=U(),{data:c}=Le(),d=o.menu,p=xt(d,c==null?void 0:c.menu_order),v={"--sidebar-bg":o.colors.sidebarBg,"--sidebar-text":o.colors.sidebarText};return s.jsxs("aside",{className:S("sidebar flex flex-col",e?"sidebar-collapsed":"sidebar-expanded"),style:v,children:[s.jsxs("div",{className:"flex items-center h-16 px-4 border-b border-gray-700/50",children:[!e&&s.jsxs("div",{className:"flex items-center gap-3",children:[o.branding.logoUrl?s.jsx("img",{src:o.branding.logoUrl,alt:o.branding.title,className:"h-8 w-auto"}):s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:o.colors.primary},children:s.jsx("span",{className:"text-white font-bold text-sm",children:"R2F"})}),s.jsx("span",{className:"font-semibold text-sidebar-textActive",children:o.branding.title})]}),e&&s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mx-auto",style:{backgroundColor:o.colors.primary},children:s.jsx("span",{className:"text-white font-bold text-sm",children:"R"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin",children:p.map(f=>s.jsxs("div",{className:"mb-6",children:[!e&&s.jsx("h3",{className:"px-4 mb-2 text-xs font-semibold text-sidebar-text/60 uppercase tracking-wider",children:f.label}),s.jsx("ul",{className:"space-y-1 px-2",children:f.items.map(x=>{const k=gt[x.icon]||fe,j=n===x.id,T=()=>{x.id==="dashboard"?window.location.reload():i(x.id)};return s.jsx("li",{children:s.jsxs("button",{onClick:T,className:S("nav-item w-full",j&&"nav-item-active",e&&"justify-center px-2"),title:e?x.label:void 0,children:[s.jsx(k,{className:"w-5 h-5 flex-shrink-0"}),!e&&s.jsx("span",{children:x.label})]})},x.id)})})]},f.id))}),s.jsx("button",{onClick:t,className:"flex items-center justify-center h-12 border-t border-gray-700/50 text-sidebar-text hover:text-sidebar-textActive transition-colors",title:e?"Expand sidebar":"Collapse sidebar",children:e?s.jsx(Ye,{className:"w-5 h-5"}):s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"w-5 h-5"}),s.jsx("span",{className:"ml-2 text-sm",children:"Collapse"})]})})]})}const vt={dashboard:"Dashboard",tasks:"Tasks",timeline:"Timeline",messages:"Messages",documents:"Documents",guides:"Guides",files:"Files",family:"Family Members",settings:"Settings",help:"Help & Support",profile:"My Profile",checklists:"Checklists",glossary:"Glossary",chat:"Ask AI",membership:"Membership"};function kt(){var f,x;const{activeView:e}=U(),{data:t}=pe(),{data:n}=he(),[i,o]=b.useState(!1),c=b.useRef(null),d=vt[e]||"Dashboard";b.useEffect(()=>{const k=j=>{c.current&&!c.current.contains(j.target)&&o(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const p=[];(f=n==null?void 0:n.task_stats)!=null&&f.overdue&&n.task_stats.overdue>0&&p.push({id:"overdue",type:"warning",title:`${n.task_stats.overdue} Overdue Task${n.task_stats.overdue>1?"s":""}`,message:"You have tasks that need immediate attention",time:"Now"}),n!=null&&n.upcoming_tasks&&n.upcoming_tasks.length>0&&p.push({id:"upcoming",type:"info",title:"Upcoming Deadlines",message:`${n.upcoming_tasks.length} tasks due soon`,time:"Today"}),(x=n==null?void 0:n.project)!=null&&x.days_until_move&&n.project.days_until_move<=30&&p.push({id:"move-date",type:"info",title:"Move Date Approaching",message:`${n.project.days_until_move} days until your move`,time:"Reminder"});const v=p.length;return s.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:d})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative hidden md:block",children:[s.jsx(ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),s.jsx("input",{type:"search",placeholder:"Search...","aria-label":"Search across portal",className:"w-64 pl-10 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"relative",ref:c,children:[s.jsxs("button",{onClick:()=>o(!i),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors","aria-label":`Notifications${v>0?` (${v} new)`:""}`,children:[s.jsx(He,{className:"w-5 h-5"}),v>0&&s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),i&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),s.jsx("button",{onClick:()=>o(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:s.jsx(z,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:p.length>0?s.jsx("div",{className:"divide-y divide-gray-100",children:p.map(k=>s.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:k.type==="warning"?s.jsx(E,{className:"w-5 h-5 text-yellow-500"}):k.type==="success"?s.jsx(F,{className:"w-5 h-5 text-green-500"}):s.jsx(rt,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.title}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:k.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:k.time})]})]})},k.id))}):s.jsxs("div",{className:"px-4 py-8 text-center",children:[s.jsx(F,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up!"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No new notifications"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200",children:[t!=null&&t.avatar_url?s.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-8 h-8 rounded-full"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(M,{className:"w-4 h-4 text-gray-500"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:(t==null?void 0:t.display_name)||"Loading..."}),s.jsx("p",{className:"text-xs text-gray-500",children:t!=null&&t.is_member?"Member":"Free"})]})]})]})]})}function jt({stages:e,className:t}){return s.jsxs("div",{className:S("card",t),children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Progress Tracker"})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200",children:s.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${St(e)}%`}})}),s.jsx("div",{className:"relative flex justify-between",children:e.map((n,i)=>s.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/e.length}%`},children:[s.jsx("div",{className:S("w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all z-10",n.status==="completed"&&"bg-primary-500 border-primary-500",n.status==="current"&&"bg-white border-primary-500",n.status==="upcoming"&&"bg-white border-gray-300"),children:n.status==="completed"?s.jsx(Be,{className:"w-5 h-5 text-white"}):s.jsx("span",{className:S("text-sm font-medium",n.status==="current"?"text-primary-500":"text-gray-400"),children:i+1})}),s.jsxs("div",{className:"mt-3 text-center",children:[s.jsx("p",{className:S("text-sm font-medium",n.status==="completed"&&"text-primary-600",n.status==="current"&&"text-gray-900",n.status==="upcoming"&&"text-gray-400"),children:n.title}),n.total>0&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[n.completed,"/",n.total," tasks"]})]}),n.status==="current"&&n.total>0&&s.jsxs("div",{className:"mt-2 w-full max-w-[80px]",children:[s.jsx("div",{className:"progress-bar h-1",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${n.percentage}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1",children:[n.percentage,"%"]})]})]},n.slug))})]})})]})}function St(e){const t=e.filter(c=>c.status==="completed").length,n=e.find(c=>c.status==="current"),i=e.findIndex(c=>c.status==="current");if(e.length===0)return 0;const o=t/e.length*100;if(n&&i>=0){const c=100/e.length,d=n.percentage/100*c;return o+d}return o}function le({task:e,onClick:t}){const n={todo:"status-todo",in_progress:"status-in-progress",waiting:"status-waiting",done:"status-done"},i={low:"priority-low",medium:"priority-medium",high:"priority-high",urgent:"priority-urgent"},o=c=>{t&&(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t())};return s.jsxs("div",{onClick:t,onKeyDown:o,role:t?"button":void 0,tabIndex:t?0:void 0,className:S("flex items-center justify-between p-3 rounded-lg border transition-colors",e.is_overdue?"border-red-200 bg-red-50":"border-gray-200 bg-white hover:bg-gray-50",t&&"cursor-pointer"),children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),e.is_overdue&&s.jsx(E,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsx("span",{className:S("badge text-xs",n[e.status]),children:e.status_label}),s.jsx("span",{className:S("badge text-xs",i[e.priority]),children:e.priority_label}),e.due_date&&s.jsxs("span",{className:S("flex items-center gap-1 text-xs",e.is_overdue?"text-red-600":"text-gray-500"),children:[s.jsx(I,{className:"w-3 h-3"}),Nt(e.due_date,e.days_until_due)]})]})]}),e.task_type==="team"&&s.jsx("span",{className:"badge badge-blue text-xs ml-2",children:"Team"})]})}function Nt(e,t){return t===null?new Date(e).toLocaleDateString():t===0?"Today":t===1?"Tomorrow":t===-1?"Yesterday":t<0?`${Math.abs(t)} days ago`:t<=7?`In ${t} days`:new Date(e).toLocaleDateString()}const Tt={"check-circle":F,"plus-circle":ce,pencil:it,trash:dt,"arrows-right-left":Ie,"arrow-up-tray":mt,"document-text":ne,"chat-bubble-bottom-center-text":H,"user-plus":M,user:M,envelope:H,"arrow-right":ge,"folder-plus":ce};function wt({activities:e}){return s.jsxs("div",{className:"card h-full",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),s.jsx("div",{className:"card-body overflow-y-auto max-h-[500px] scrollbar-thin",children:e.length>0?s.jsx("div",{className:"space-y-4",children:e.map(t=>s.jsx(Ct,{activity:t},t.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(H,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No recent activity"})]})})]})}function Ct({activity:e}){const t=Tt[e.action_icon]||F;return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:e.user_avatar?s.jsx("img",{src:e.user_avatar,alt:e.user_name,className:"w-8 h-8 rounded-full"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(M,{className:"w-4 h-4 text-gray-500"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(t,{className:"w-4 h-4 text-gray-400"}),s.jsxs("p",{className:"text-sm text-gray-900",children:[s.jsx("span",{className:"font-medium",children:e.user_name})," ",s.jsx("span",{className:"text-gray-600",children:e.action_label.toLowerCase()})]})]}),e.description&&e.description!==e.action_label&&s.jsx("p",{className:"text-sm text-gray-600 mt-0.5 truncate",children:e.description}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.relative_time})]})]})}function qt({banner:e}){const[t,n]=b.useState(!0),i=Oe(),o=async()=>{n(!1);try{await i.mutateAsync()}catch(c){console.error("Failed to dismiss banner:",c)}};return t?s.jsx("div",{className:"rounded-lg border-2 p-4 md:p-5 mb-6",style:{backgroundColor:e.bg_color,borderColor:e.border_color},role:"region","aria-label":"Welcome message",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:e.border_color},children:s.jsx(ut,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),s.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.message})]})]}),s.jsx("button",{onClick:o,className:"flex-shrink-0 p-1.5 rounded-full hover:bg-black/10 transition-colors","aria-label":"Dismiss welcome message",disabled:i.isPending,children:s.jsx(z,{className:"w-5 h-5 text-gray-600"})})]})}):null}const _t={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};function Et({isOpen:e,onClose:t,title:n,size:i="md",children:o,footer:c,showHeader:d=!0}){const p=b.useRef(null);b.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",f),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",f),document.body.style.overflow="unset"}},[e,t]);const v=f=>{f.target===p.current&&t()};return e?s.jsx("div",{ref:p,role:"presentation",onClick:v,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-in fade-in duration-200",children:s.jsxs("div",{className:S("w-full bg-white rounded-xl shadow-xl animate-in zoom-in-95 duration-200",_t[i]),children:[d&&n&&s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),s.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:S(d&&n?"px-6 py-4":"",!d&&"relative"),children:o}),c&&s.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:c})]})}):null}const Ft={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};function Rn({isOpen:e,onClose:t,title:n,children:i,footer:o,side:c="right",width:d="md"}){const p=b.useRef(null);b.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",f),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",f),document.body.style.overflow="unset"}},[e,t]);const v=f=>{f.target===p.current&&t()};return e?s.jsx("div",{ref:p,role:"presentation",onClick:v,className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in duration-200",children:s.jsxs("div",{className:S("fixed inset-y-0 w-full bg-white shadow-xl flex flex-col",Ft[d],c==="right"?"right-0 animate-in slide-in-from-right":"left-0 animate-in slide-in-from-left","duration-300"),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n||"Details"}),s.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:i}),o&&s.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:o})]})}):null}function ue(){const{data:e,isLoading:t,error:n}=he(),{setActiveView:i,setSettingsTab:o}=U(),[c,d]=b.useState(!1),[p,v]=b.useState(""),f=Ke();if(t)return s.jsx(Pt,{});if(n)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"card p-8 text-center",children:[s.jsx(E,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Dashboard"}),s.jsx("p",{className:"text-gray-600",children:n.message})]})});if(!e)return null;const{project:x,stages:k,task_stats:j,profile_visa_label:T,welcome_banner:w,upcoming_tasks:C,overdue_tasks:G,recent_activity:xe}=e;return s.jsxs("div",{className:"p-6 space-y-6",children:[w&&s.jsx(qt,{banner:w}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:x.title}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[T?s.jsx("span",{children:T}):s.jsxs("button",{onClick:()=>{o("visa-profile"),i("settings")},className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 hover:underline",children:[s.jsx(ne,{className:"w-4 h-4"}),s.jsx("span",{children:"Set your visa type in your profile"})]}),x.target_move_date&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-2",children:""}),s.jsx(I,{className:"w-4 h-4 inline-block mr-1"}),x.days_until_move!==null&&x.days_until_move>0?s.jsxs("span",{children:[x.days_until_move," days until move"]}):s.jsxs("span",{children:["Move date: ",new Date(x.target_move_date).toLocaleDateString()]})]})]})]}),s.jsxs("button",{className:"btn btn-primary",onClick:()=>{v(x.target_move_date||""),d(!0)},children:[s.jsx(I,{className:"w-4 h-4"}),"Update Move Date"]})]}),s.jsx(Et,{isOpen:c,onClose:()=>d(!1),title:"Update Move Date",size:"sm",footer:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{p&&x.id&&f.mutate({id:x.id,data:{target_move_date:p}},{onSuccess:()=>{d(!1)}})},disabled:f.isPending,children:f.isPending?"Saving...":"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"When are you planning to move to France? This helps us prioritize your tasks and deadlines."}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"move-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Move Date"}),s.jsx("input",{id:"move-date",type:"date",value:p,onChange:q=>v(q.target.value),className:"input",min:new Date().toISOString().split("T")[0]})]})]})}),s.jsx(jt,{stages:k}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx($,{label:"Tasks Completed",value:`${j.completed}/${j.total}`,subtext:`${j.percentage}% complete`,icon:F,color:"green",onClick:()=>i("tasks")}),s.jsx($,{label:"In Progress",value:j.in_progress,subtext:"Tasks being worked on",icon:ie,color:"blue",onClick:()=>i("tasks")}),s.jsx($,{label:"To Do",value:j.todo,subtext:"Tasks remaining",icon:ie,color:"gray",onClick:()=>i("tasks")}),s.jsx($,{label:"Overdue",value:j.overdue,subtext:j.overdue>0?"Need attention!":"All on track",icon:E,color:j.overdue>0?"red":"green",onClick:()=>i("tasks")})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[G.length>0&&s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:[s.jsx(E,{className:"w-5 h-5"}),"Overdue Tasks"]}),s.jsx("span",{className:"badge badge-red",children:G.length})]}),s.jsx("div",{className:"card-body space-y-3",children:G.slice(0,5).map(q=>s.jsx(le,{task:q},q.id))})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Tasks"}),s.jsxs("button",{onClick:()=>i("tasks"),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:["View all",s.jsx(ge,{className:"w-4 h-4"})]})]}),s.jsx("div",{className:"card-body",children:C.length>0?s.jsx("div",{className:"space-y-3",children:C.map(q=>s.jsx(le,{task:q},q.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(F,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No upcoming tasks due soon!"})]})})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(wt,{activities:xe})})]})]})}function $({label:e,value:t,subtext:n,icon:i,color:o,onClick:c}){const d={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",gray:"bg-gray-50 text-gray-600",red:"bg-red-50 text-red-600",yellow:"bg-yellow-50 text-yellow-600"};return s.jsx("button",{type:"button",onClick:c,className:"card p-5 w-full text-left hover:shadow-md transition-shadow cursor-pointer","aria-label":`${e}: ${t}. ${n}. Click to view tasks.`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]}),s.jsx("div",{className:S("p-2 rounded-lg",d[o]),children:s.jsx(i,{className:"w-5 h-5"})})]})})}function Pt(){return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"h-20 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"h-40 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>s.jsx("div",{className:"h-28 bg-gray-200 rounded-lg animate-pulse"},e))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 h-96 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"h-96 bg-gray-200 rounded-lg animate-pulse"})]})]})}const Dt=b.lazy(()=>N(()=>import("./TasksView-BHHKTBIH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),Mt=b.lazy(()=>N(()=>import("./DocumentsView--q0gXs7m.js"),__vite__mapDeps([13,1,2,3,14,4,5,8,15,16,12,17,18,19,6]),import.meta.url)),Ot=b.lazy(()=>N(()=>import("./MessagesView-4RA6D1kt.js"),__vite__mapDeps([20,1,2,3,8,21,12,22,23,10,24,14]),import.meta.url)),Lt=b.lazy(()=>N(()=>import("./TimelineView-Pb6-ZLFQ.js"),__vite__mapDeps([25,1,2,3,26,11,7]),import.meta.url)),Kt=b.lazy(()=>N(()=>import("./SettingsView-CB-guQCy.js"),__vite__mapDeps([27,1,2,3,10,28,12,18,19,9]),import.meta.url)),At=b.lazy(()=>N(()=>import("./HelpView-Cxuy0eMO.js"),__vite__mapDeps([29,1,2,3,19,30,14,17,31,32,33]),import.meta.url)),Ut=b.lazy(()=>N(()=>import("./GuidesView-BXgDyvbY.js"),__vite__mapDeps([34,1,2,3,35,32,33,36,16,10,22,14,37,17]),import.meta.url)),Rt=b.lazy(()=>N(()=>import("./FamilyView-c2jWaG_F.js"),__vite__mapDeps([38,1,2,3,14,26,39,35,21,12,11]),import.meta.url)),$t=b.lazy(()=>N(()=>import("./ProfileView-GSeeoTce.js"),__vite__mapDeps([40,1,2,3,10,28,14,32,37,18,19]),import.meta.url)),Qt=b.lazy(()=>N(()=>import("./ChecklistsView-BLst5RsN.js"),__vite__mapDeps([41,1,2,3,24,7,18,19,21,6,31]),import.meta.url)),It=b.lazy(()=>N(()=>import("./GlossaryView-Cvdo25jL.js"),__vite__mapDeps([42,1,2,3,30,14,43,35,19,44]),import.meta.url)),Ht=b.lazy(()=>N(()=>import("./KnowledgeBaseChat-S0uCUgJG.js"),__vite__mapDeps([45,1,2,3,10,46,36,37,35,44,14,22]),import.meta.url)),Jt=b.lazy(()=>N(()=>import("./MembershipView-YrrCtH7e.js"),__vite__mapDeps([47,1,2,3,48,14,10]),import.meta.url)),Vt=b.lazy(()=>N(()=>import("./ResearchView-De6p-Abf.js"),__vite__mapDeps([49,1,2,23,43,10,46,14,28,3]),import.meta.url)),zt=b.lazy(()=>N(()=>import("./SchengenDashboard-BnB_egCm.js"),__vite__mapDeps([50,1,2,3,48,14,32,12,18,19,10,31,15,39,22]),import.meta.url));function Gt(){return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3",role:"status","aria-label":"Loading view"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Loading..."})]})})}function Bt(){const{activeView:e}=U(),t=b.useMemo(()=>{switch(e){case"dashboard":return s.jsx(ue,{});case"tasks":return s.jsx(Dt,{});case"messages":return s.jsx(Ot,{});case"documents":case"files":return s.jsx(Mt,{});case"timeline":return s.jsx(Lt,{});case"guides":return s.jsx(Ut,{});case"family":return s.jsx(Rt,{});case"settings":return s.jsx(Kt,{});case"help":return s.jsx(At,{});case"profile":return s.jsx($t,{});case"checklists":return s.jsx(Qt,{});case"glossary":return s.jsx(It,{});case"chat":return s.jsx(Ht,{});case"membership":return s.jsx(Jt,{});case"research":return s.jsx(Vt,{});case"schengen":return s.jsx(zt,{});default:return s.jsx(ue,{})}},[e]);return s.jsx(b.Suspense,{fallback:s.jsx(Gt,{}),children:t})}function Wt(){const{sidebarCollapsed:e,setUser:t}=U(),{data:n}=pe();return b.useEffect(()=>{n&&t(n)},[n,t]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(bt,{}),s.jsxs("div",{className:S("transition-all duration-300",e?"ml-16":"ml-64"),children:[s.jsx(kt,{}),s.jsx("main",{className:"min-h-[calc(100vh-4rem)]",children:s.jsx(ht,{children:s.jsx(Bt,{})})})]})]})}const Yt=new ke({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),de=document.getElementById("fra-portal-root");de&&W.createRoot(de).render(s.jsx(Ne.StrictMode,{children:s.jsx(je,{client:Yt,children:s.jsx(Wt,{})})}));export{ss as $,E as A,at as B,F as C,Rn as D,ks as E,ne as F,vs as G,bs as H,xs as I,Bs as J,tt as K,fs as L,H as M,zs as N,rt as O,ce as P,Ws as Q,Gs as R,ct as S,Ys as T,M as U,Zs as V,ds as W,z as X,lt as Y,He as Z,pe as _,ie as a,gn as a$,rs as a0,as as a1,Be as a2,ot as a3,js as a4,Ns as a5,Ss as a6,Le as a7,ns as a8,yt as a9,$s as aA,Qs as aB,Vs as aC,Is as aD,Hs as aE,Js as aF,Me as aG,rn as aH,an as aI,on as aJ,cn as aK,ln as aL,un as aM,Fn as aN,et as aO,it as aP,mn as aQ,kn as aR,jn as aS,wn as aT,Sn as aU,Nn as aV,Tn as aW,Cn as aX,qn as aY,_n as aZ,yn as a_,Xe as aa,ze as ab,Je as ac,Ze as ad,st as ae,Ve as af,fe as ag,Ye as ah,nt as ai,ut as aj,ge as ak,As as al,Os as am,Ls as an,Ms as ao,en as ap,tn as aq,sn as ar,nn as as,Ts as at,ws as au,Fs as av,Ks as aw,We as ax,Us as ay,Rs as az,I as b,fn as b0,pn as b1,xn as b2,bn as b3,vn as b4,En as b5,Mn as b6,Pn as b7,Dn as b8,On as b9,Ln as ba,Kn as bb,An as bc,Un as bd,dn as be,hn as bf,ht as bg,h as c,qs as d,_s as e,Es as f,Ge as g,cs as h,ls as i,us as j,os as k,Et as l,U as m,he as n,is as o,ys as p,mt as q,oe as r,ps as s,hs as t,Cs as u,gs as v,Ps as w,Ds as x,Xs as y,ms as z};
