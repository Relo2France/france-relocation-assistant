import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as y}from"./vendor-react-F9Y4d3HK.js";import{a as f}from"./vendor-utils-C5RVuWu4.js";import{c as S,ap as A,a9 as v,F as k,C as b,U as j,b as P,aq as U,ar as E,X as L,as as R}from"./main-vhZnEWW8.js";import{A as M}from"./alert-circle-YSI-scOL.js";import{U as N}from"./user-plus-hibN_HBJ.js";import{C as F,L as q}from"./lock-Due9eXm6.js";import{H as B}from"./heart-DIAgH1zW.js";import{P as V}from"./pen-BMmMvnGX.js";import{T as D}from"./trash-2-WlGyayW-.js";import{F as I}from"./flag-Dtfk1utd.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=S("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),z={spouse:"Spouse",child:"Child",parent:"Parent",other:"Other"},_={spouse:B,child:T,parent:j,other:j},w={pending:{label:"Pending",color:"bg-gray-100 text-gray-600",icon:M},applied:{label:"Applied",color:"bg-blue-100 text-blue-600",icon:k},approved:{label:"Approved",color:"bg-green-100 text-green-600",icon:b},not_required:{label:"Not Required",color:"bg-gray-100 text-gray-500",icon:b}};function re(){const{data:s,isLoading:i,error:n}=A(),[x,d]=y.useState(!1),[t,l]=y.useState(null),[u,o]=y.useState(null),a=(s==null?void 0:s.members)||[],c=(s==null?void 0:s.canEdit)??!1,m=(s==null?void 0:s.featureEnabled)??!1;if(i)return e.jsx($,{});if(n)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(M,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Family Members"}),e.jsx("p",{className:"text-gray-600",children:"Please try refreshing the page."})]})});const h=a.filter(r=>{const p=r.documents;return p.passport&&p.birthCertificate&&p.photos&&(r.relationship!=="spouse"||p.marriageCertificate)}).length,g=a.filter(r=>r.visaStatus==="approved"||r.visaStatus==="not_required").length;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Family Members"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your family's relocation details and documents"})]}),c?e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Add Member"]}):e.jsx(C,{})]}),!m&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-amber-900",children:"Premium Feature"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Family member management is available with our Premium plan. Upgrade to add, edit, and track visa applications for your family members."}),e.jsx("a",{href:"/membership/",className:"inline-flex items-center gap-1 mt-2 text-sm font-medium text-amber-700 hover:text-amber-800",children:"Learn about Premium →"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Family Members"})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h,"/",a.length]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Documents Complete"})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(b,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[g,"/",a.length]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Visas Ready"})]})]})})]}),a.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(v,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No family members added"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add family members to track their visa applications and documents"}),c?e.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary inline-flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),"Add First Member"]}):e.jsx(C,{})]}):e.jsx("div",{className:"space-y-4",children:a.map(r=>e.jsx(H,{member:r,canEdit:c,onEdit:()=>l(r),onDelete:()=>o(r)},r.id))}),(x||t)&&c&&e.jsx(O,{member:t,onClose:()=>{d(!1),l(null)}}),u&&c&&e.jsx(Y,{member:u,onClose:()=>o(null)})]})}function C(){return e.jsxs("a",{href:"/membership/",className:"btn bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Upgrade to Add Members"]})}function H({member:s,canEdit:i,onEdit:n,onDelete:x}){const d=_[s.relationship]||j,t=w[s.visaStatus]||w.pending,l=t.icon,u=m=>{if(!m)return null;const h=new Date(m),g=new Date;let r=g.getFullYear()-h.getFullYear();const p=g.getMonth()-h.getMonth();return(p<0||p===0&&g.getDate()<h.getDate())&&r--,r},o=[{key:"passport",label:"Passport"},{key:"birthCertificate",label:"Birth Certificate"},...s.relationship==="spouse"?[{key:"marriageCertificate",label:"Marriage Certificate"}]:[],{key:"photos",label:"Photos"}],a=o.filter(m=>s.documents[m.key]).length,c=u(s.birthDate);return e.jsx("div",{className:"card p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:e.jsx(d,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[z[s.relationship]||s.relationship,c!==null&&` · ${c} years old`]})]}),i&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(D,{className:"w-4 h-4"})})]}),!i&&e.jsx("div",{className:"p-2 text-gray-300",title:"Upgrade to edit",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-sm",children:[s.nationality&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(I,{className:"w-4 h-4"}),s.nationality]}),s.birthDate&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(P,{className:"w-4 h-4"}),new Date(s.birthDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),e.jsxs("div",{className:f("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",t.color),children:[e.jsx(l,{className:"w-3 h-3"}),t.label]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Documents"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[a,"/",o.length," complete"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:f("h-full rounded-full transition-all",a===o.length?"bg-green-500":"bg-primary-500"),style:{width:`${a/o.length*100}%`}})}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map(m=>{const h=s.documents[m.key];return e.jsxs("span",{className:f("text-xs px-2 py-1 rounded-full",h?"bg-green-100 text-green-700":"bg-red-100 text-red-600"),children:[h?"✓":"!"," ",m.label]},m.key)})})]}),s.notes&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:s.notes})})]})]})})}function O({member:s,onClose:i}){const n=U(),x=E(),d=n.isPending||x.isPending,[t,l]=y.useState({name:(s==null?void 0:s.name)||"",relationship:(s==null?void 0:s.relationship)||"spouse",birthDate:(s==null?void 0:s.birthDate)||"",nationality:(s==null?void 0:s.nationality)||"",visaStatus:(s==null?void 0:s.visaStatus)||"pending",notes:(s==null?void 0:s.notes)||"",documents:(s==null?void 0:s.documents)||{passport:!1,birthCertificate:!1,marriageCertificate:!1,photos:!1}}),u=async a=>{a.preventDefault();try{s?await x.mutateAsync({memberId:s.id,data:t}):await n.mutateAsync(t),i()}catch(c){console.error("Failed to save family member:",c)}},o=a=>{l({...t,documents:{...t.documents,[a]:!t.documents[a]}})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s?"Edit Family Member":"Add Family Member"}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:e.jsx(L,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{id:"family-member-name",type:"text",value:t.name,onChange:a=>l({...t,name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-relationship",className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship"}),e.jsxs("select",{id:"family-member-relationship",value:t.relationship,onChange:a=>l({...t,relationship:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"spouse",children:"Spouse"}),e.jsx("option",{value:"child",children:"Child"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-birthdate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{id:"family-member-birthdate",type:"date",value:t.birthDate,onChange:a=>l({...t,birthDate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-nationality",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),e.jsx("input",{id:"family-member-nationality",type:"text",value:t.nationality,onChange:a=>l({...t,nationality:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-visa-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Status"}),e.jsxs("select",{id:"family-member-visa-status",value:t.visaStatus,onChange:a=>l({...t,visaStatus:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"not_required",children:"Not Required"})]})]}),e.jsxs("fieldset",{children:[e.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documents"}),e.jsx("div",{className:"space-y-2",children:[{key:"passport",label:"Passport"},{key:"birthCertificate",label:"Birth Certificate"},{key:"marriageCertificate",label:"Marriage Certificate"},{key:"photos",label:"Visa Photos"}].map(a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.documents[a.key]||!1,onChange:()=>o(a.key),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:a.label})]},a.key))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"family-member-notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),e.jsx("textarea",{id:"family-member-notes",value:t.notes,onChange:a=>l({...t,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",disabled:d,children:d?"Saving...":s?"Save Changes":"Add Member"})]})]})]})})}function Y({member:s,onClose:i}){const n=R(),x=async()=>{try{await n.mutateAsync(s.id),i()}catch(d){console.error("Failed to delete family member:",d)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(D,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Remove Family Member?"}),e.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to remove ",e.jsx("strong",{children:s.name}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:n.isPending,children:"Cancel"}),e.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",disabled:n.isPending,children:n.isPending?"Removing...":"Remove"})]})]})})})}function $(){return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-6"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[1,2,3].map(s=>e.jsx("div",{className:"card p-4",children:e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})},s))}),e.jsx("div",{className:"space-y-4",children:[1,2].map(s=>e.jsx("div",{className:"card p-5",children:e.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"})},s))})]})}export{re as default};
