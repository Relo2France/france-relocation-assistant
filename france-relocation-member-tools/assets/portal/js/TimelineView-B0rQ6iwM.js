import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as f}from"./vendor-react-F9Y4d3HK.js";import{a as N}from"./vendor-utils-C5RVuWu4.js";import{n as v,W as y,a as h,M as b,q as w,Y as _,C as k}from"./main-CnfMNQCA.js";import{U as S}from"./user-plus-Cqygw60l.js";import{F as T}from"./flag-e-dwsy4z.js";import{C as D}from"./circle-DrXHGBX9.js";const p={task_created:D,task_completed:k,task_updated:_,file_uploaded:w,note_created:b,stage_changed:T,project_created:S,default:h},u={task_created:"bg-blue-100 text-blue-600",task_completed:"bg-green-100 text-green-600",task_updated:"bg-gray-100 text-gray-600",file_uploaded:"bg-purple-100 text-purple-600",note_created:"bg-yellow-100 text-yellow-600",stage_changed:"bg-indigo-100 text-indigo-600",project_created:"bg-primary-100 text-primary-600",default:"bg-gray-100 text-gray-600"};function P(){var x;const{data:s,isLoading:i}=v(),d=((x=s==null?void 0:s.project)==null?void 0:x.id)||0,{data:r=[],isLoading:o}=y(d,{limit:100}),j=f.useMemo(()=>{const a={};return r.forEach(t=>{const c=new Date(t.created_at),l=c.toISOString().split("T")[0];if(!a[l]){const g=new Date,m=new Date(g);m.setDate(m.getDate()-1);let n;l===g.toISOString().split("T")[0]?n="Today":l===m.toISOString().split("T")[0]?n="Yesterday":n=c.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),a[l]={date:l,label:n,activities:[]}}a[l].activities.push(t)}),Object.values(a).sort((t,c)=>new Date(c.date).getTime()-new Date(t.date).getTime())},[r]);return i||o?e.jsx(I,{}):s!=null&&s.project?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Timeline"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your relocation journey progress"})]}),r.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(h,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No activity yet"}),e.jsx("p",{className:"text-gray-600",children:"Your activity timeline will appear here as you progress through your relocation"})]}):e.jsx("div",{className:"space-y-8",children:j.map(a=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:a.label}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[a.activities.length," ",a.activities.length===1?"event":"events"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-4",children:a.activities.map(t=>e.jsx(C,{activity:t},t.id))})]})]},a.date))})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),e.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})})}function C({activity:s}){const i=p[s.action]||p.default,d=u[s.action]||u.default,r=o=>new Date(o).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return e.jsxs("div",{className:"relative flex gap-4 pl-0",children:[e.jsx("div",{className:N("relative z-10 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",d),children:e.jsx(i,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 card p-4 -mt-1",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.user_avatar,alt:s.user_name,className:"w-8 h-8 rounded-full"}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.user_name})," ",e.jsx("span",{className:"text-gray-600",children:s.description})]})})]}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:r(s.created_at)})]})})]})}function I(){return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),e.jsx("div",{className:"space-y-8",children:[1,2].map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(i=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"flex-1 card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})})]})})]},i))})]})]},s))})]})}export{P as default};
