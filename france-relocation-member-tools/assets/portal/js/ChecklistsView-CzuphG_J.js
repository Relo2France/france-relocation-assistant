import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as b}from"./vendor-react-F9Y4d3HK.js";import{a as m}from"./vendor-utils-C5RVuWu4.js";import{c as E,a as V,a2 as D,X as M,n as O,at as $,au as q,F as z}from"./main-BufQ2QZ_.js";import{C as B}from"./check-circle-2-D6fvAGu1.js";import{C as I}from"./circle-C5Cmw05G.js";import{C as R}from"./chevron-up-6ABcwjnY.js";import{C as H}from"./chevron-down-f1SBCYIO.js";import{P as U}from"./pen-CeCtEGcW.js";import{F as X}from"./filter-8CVdTo-8.js";import{P as G}from"./plane-BCaj097n.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=E("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=E("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),K={pending:{icon:I,color:"text-gray-400",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:"Not Started"},in_progress:{icon:I,color:"text-yellow-500",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",label:"In Progress"},complete:{icon:B,color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",label:"Complete"}};function Q({item:s,onUpdate:l,isUpdating:r=!1}){const[o,x]=b.useState(!1),[y,g]=b.useState(!1),[p,u]=b.useState(s.notes||""),i=K[s.status],t=i.icon,c=()=>{const h={pending:"in_progress",in_progress:"complete",complete:"pending"};l(s.id,{status:h[s.status]})},v=h=>{l(s.id,{status:h})},w=()=>{l(s.id,{handled_own:!s.handled_own})},C=()=>{l(s.id,{notes:p}),g(!1)},f=()=>{u(s.notes||""),g(!1)};return e.jsx("div",{className:m("card transition-all",i.borderColor,"border-l-4",o&&"ring-2 ring-primary-100"),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:c,disabled:r,className:m("flex-shrink-0 mt-0.5 transition-all hover:scale-110",i.color,r&&"opacity-50 cursor-not-allowed"),children:e.jsx(t,{className:m("w-5 h-5",s.status==="in_progress"&&"fill-current")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1",children:[e.jsx("h3",{className:m("font-medium text-gray-900",s.status==="complete"&&"line-through text-gray-500"),children:s.title}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full whitespace-nowrap",children:[e.jsx(V,{className:"w-3 h-3"}),s.lead_time]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[e.jsxs("select",{value:s.status,onChange:h=>v(h.target.value),disabled:r,className:m("text-xs px-2 py-1 rounded-md border transition-colors",i.borderColor,i.bgColor,i.color,"font-medium cursor-pointer",r&&"opacity-50 cursor-not-allowed"),children:[e.jsx("option",{value:"pending",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"complete",children:"Complete"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.handled_own,onChange:w,disabled:r,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"I handled this myself"})]}),e.jsx("button",{onClick:()=>x(!o),className:"ml-auto text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-3 h-3"}),"Less"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-3 h-3"}),"Notes"]})})]})]})]}),o&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("label",{htmlFor:`checklist-notes-${s.id}`,className:"text-sm font-medium text-gray-700",children:"Notes"}),!y&&e.jsxs("button",{onClick:()=>g(!0),className:"text-xs text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),"Edit"]})]}),y?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{id:`checklist-notes-${s.id}`,value:p,onChange:h=>u(h.target.value),placeholder:"Add notes about this item...",rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:C,disabled:r,className:"btn btn-primary btn-sm",children:[e.jsx(D,{className:"w-3 h-3"}),"Save"]}),e.jsxs("button",{onClick:f,disabled:r,className:"btn btn-secondary btn-sm",children:[e.jsx(M,{className:"w-3 h-3"}),"Cancel"]})]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:s.notes?e.jsx("p",{className:"whitespace-pre-wrap bg-gray-50 rounded-lg p-3",children:s.notes}):e.jsx("p",{className:"text-gray-400 italic",children:"No notes yet"})})]})]})})}function de(){var P;const[s,l]=b.useState("all"),[r,o]=b.useState("default"),{data:x,isLoading:y}=O(),g=(P=x==null?void 0:x.project)==null?void 0:P.visa_type,{data:p=[],isLoading:u}=$(g),i=q(),t=p.find(a=>a.type==="visa-application"),c=p.find(a=>a.type==="relocation"),v=a=>{let n=[...a];if(s==="pending"?n=n.filter(d=>d.status!=="complete"):s==="complete"&&(n=n.filter(d=>d.status==="complete")),r==="lead_time")n.sort((d,N)=>{const k=j=>j.includes("week")?parseInt(j)*7*24*60:j.includes("day")?parseInt(j)*24*60:j.includes("hour")||j.includes("min")?parseInt(j)*60:0;return k(N.lead_time)-k(d.lead_time)});else if(r==="status"){const d={pending:0,in_progress:1,complete:2};n.sort((N,k)=>d[N.status]-d[k.status])}else n.sort((d,N)=>d.sort_order-N.sort_order);return n},w=t?v(t.items):[],C=c?v(c.items):[],f=((t==null?void 0:t.items.length)||0)+((c==null?void 0:c.items.length)||0),h=((t==null?void 0:t.items.filter(a=>a.status==="complete").length)||0)+((c==null?void 0:c.items.filter(a=>a.status==="complete").length)||0),S=f>0?Math.round(h/f*100):0,_=(a,n,d)=>{i.mutate({checklistType:a,itemId:n,data:d})};if(y||u)return e.jsx(W,{});if(!(x!=null&&x.project))return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),e.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})});const A=s!=="all"||r!=="default";return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Checklists"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your visa application and relocation document preparation"})]}),e.jsx("div",{className:"card mb-6 bg-gradient-to-br from-primary-50 to-primary-100/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-600 flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Overall Progress"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h," of ",f," items complete"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-700",children:[S,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Complete"})]})]}),e.jsx("div",{className:"h-3 bg-white/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-600 rounded-full transition-all duration-500",style:{width:`${S}%`}})})]})}),e.jsx("div",{className:"card mb-6",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[e.jsx("button",{onClick:()=>l("all"),className:m("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",s==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"All"}),e.jsx("button",{onClick:()=>l("pending"),className:m("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",s==="pending"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Pending"}),e.jsx("button",{onClick:()=>l("complete"),className:m("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",s==="complete"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Complete"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:r,onChange:a=>o(a.target.value),className:"select text-sm py-1.5",children:[e.jsx("option",{value:"default",children:"Default Order"}),e.jsx("option",{value:"lead_time",children:"Lead Time"}),e.jsx("option",{value:"status",children:"Status"})]}),A&&e.jsxs("button",{onClick:()=>{l("all"),o("default")},className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),"Clear"]})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[t&&e.jsx(L,{checklist:t,filteredItems:w,icon:G,iconColor:"text-blue-600",iconBg:"bg-blue-100",onUpdateItem:(a,n)=>_("visa-application",a,n),isUpdating:i.isPending}),c&&e.jsx(L,{checklist:c,filteredItems:C,icon:z,iconColor:"text-purple-600",iconBg:"bg-purple-100",onUpdateItem:(a,n)=>_("relocation",a,n),isUpdating:i.isPending})]}),w.length===0&&C.length===0&&f>0&&e.jsxs("div",{className:"card p-8 text-center mt-6",children:[e.jsx(I,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"No items match your filters"}),e.jsx("button",{onClick:()=>{l("all"),o("default")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Clear filters"})]}),p.length===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No checklists available"}),e.jsx("p",{className:"text-gray-600",children:"Checklists will be available once your project is set up with a visa type."})]})]})}function L({checklist:s,filteredItems:l,icon:r,iconColor:o,iconBg:x,onUpdateItem:y,isUpdating:g}){const p=s.items.filter(t=>t.status==="complete").length,u=s.items.length,i=u>0?Math.round(p/u*100):0;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:m("w-10 h-10 rounded-lg flex items-center justify-center",x),children:e.jsx(r,{className:m("w-5 h-5",o)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p," of ",u," items complete"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[i,"%"]})})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:m("h-full rounded-full transition-all duration-500",o.replace("text-","bg-")),style:{width:`${i}%`}})})]}),e.jsx("div",{className:"p-6",children:l.length>0?e.jsx("div",{className:"space-y-3",children:l.map(t=>e.jsx(Q,{item:t,onUpdate:y,isUpdating:g},t.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No items to show with current filters"})})]})}function W(){return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 w-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-24 bg-gray-100 rounded animate-pulse"})]})]}),e.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded-full animate-pulse"})]})}),e.jsx("div",{className:"card mb-6",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})})}),[1,2].map(s=>e.jsxs("div",{className:"card mb-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-200 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 w-40 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-28 bg-gray-100 rounded animate-pulse"})]})]}),e.jsx("div",{className:"h-8 w-12 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full animate-pulse"})]}),e.jsx("div",{className:"p-6 space-y-3",children:[1,2,3].map(l=>e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 animate-pulse flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded animate-pulse w-1/2"})]})]})},l))})]},s))]})}export{de as default};
