import{j as u}from"./vendor-query-D8MH73Ff.js";import{g as Ha,r as M,R as re}from"./vendor-react-F9Y4d3HK.js";import{c as bi,F as $e,B as Mt,a9 as wi,S as tr,ai as Ni,aG as nr,X as Ci,C as xo,a as qa,a3 as Ua,ah as Ya}from"./main-DeiWcA9L.js";import{A as ji}from"./arrow-left-fEhkSSrU.js";import{B as rr}from"./building-2-Ck4MwFQ4.js";import{L as St}from"./loader-2-BG_6oU2u.js";import{B as Xa}from"./building-B2bk7Kuh.js";import{A as yo}from"./alert-circle-Dm3wqbfz.js";import{S as Wa}from"./save-ByZscVpO.js";import"./vendor-utils-C5RVuWu4.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=bi("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=bi("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);var Qi={exports:{}},es="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ts=es,ns=ts;function Mi(){}function Si(){}Si.resetWarningCache=Mi;var rs=function(){function e(r,o,i,a,s,l){if(l!==ns){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Si,resetWarningCache:Mi};return n.PropTypes=n,n};Qi.exports=rs();var os=Qi.exports;const E=Ha(os);class ae{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let o=0;o<this._n&&o<32;o++){const i=n[o],a=t+i,s=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,o,i,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,o=t[--n],a=r+o,i=o-(a-r),!i););n>0&&(i<0&&t[n-1]<0||i>0&&t[n-1]>0)&&(o=i*2,r=a+o,o==r-a&&(a=r))}return a}}function*is(e){for(const t of e)yield*t}function Ei(e){return Array.from(is(e))}function Je(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(o);++r<o;)i[r]=e+r*n;return i}var $=1e-6,Et=1e-12,I=Math.PI,te=I/2,ln=I/4,ue=I*2,Y=180/I,D=I/180,V=Math.abs,ut=Math.atan,me=Math.atan2,T=Math.cos,Vt=Math.ceil,Ai=Math.exp,or=Math.hypot,un=Math.log,Gn=Math.pow,Z=Math.sin,Ne=Math.sign||function(e){return e>0?1:e<0?-1:0},oe=Math.sqrt,Tr=Math.tan;function ki(e){return e>1?0:e<-1?I:Math.acos(e)}function fe(e){return e>1?te:e<-1?-te:Math.asin(e)}function vo(e){return(e=Z(e/2))*e}function J(){}function mn(e,t){e&&bo.hasOwnProperty(e.type)&&bo[e.type](e,t)}var _o={Feature:function(e,t){mn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;++r<o;)mn(n[r].geometry,t)}},bo={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ir(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)ir(n[r],t,0)},Polygon:function(e,t){wo(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)wo(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;++r<o;)mn(n[r],t)}};function ir(e,t,n){var r=-1,o=e.length-n,i;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function wo(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ir(e[n],t,1);t.polygonEnd()}function je(e,t){e&&_o.hasOwnProperty(e.type)?_o[e.type](e,t):mn(e,t)}var fn=new ae,dn=new ae,Pi,Zi,ar,sr,cr,Pe={point:J,lineStart:J,lineEnd:J,polygonStart:function(){fn=new ae,Pe.lineStart=as,Pe.lineEnd=ss},polygonEnd:function(){var e=+fn;dn.add(e<0?ue+e:e),this.lineStart=this.lineEnd=this.point=J},sphere:function(){dn.add(ue)}};function as(){Pe.point=cs}function ss(){Ri(Pi,Zi)}function cs(e,t){Pe.point=Ri,Pi=e,Zi=t,e*=D,t*=D,ar=e,sr=T(t=t/2+ln),cr=Z(t)}function Ri(e,t){e*=D,t*=D,t=t/2+ln;var n=e-ar,r=n>=0?1:-1,o=r*n,i=T(t),a=Z(t),s=cr*a,l=sr*i+s*T(o),m=s*r*Z(o);fn.add(me(m,l)),ar=e,sr=i,cr=a}function ls(e){return dn=new ae,je(e,Pe),dn*2}function hn(e){return[me(e[1],e[0]),fe(e[2])]}function Ye(e){var t=e[0],n=e[1],r=T(n);return[r*T(t),r*Z(t),Z(n)]}function Ht(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ot(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Vn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function qt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function pn(e){var t=oe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var K,de,ee,ve,Ue,Fi,Li,nt,wt,Ge,ze,Le={point:lr,lineStart:No,lineEnd:Co,polygonStart:function(){Le.point=Bi,Le.lineStart=us,Le.lineEnd=ms,wt=new ae,Pe.polygonStart()},polygonEnd:function(){Pe.polygonEnd(),Le.point=lr,Le.lineStart=No,Le.lineEnd=Co,fn<0?(K=-(ee=180),de=-(ve=90)):wt>$?ve=90:wt<-$&&(de=-90),ze[0]=K,ze[1]=ee},sphere:function(){K=-(ee=180),de=-(ve=90)}};function lr(e,t){Ge.push(ze=[K=e,ee=e]),t<de&&(de=t),t>ve&&(ve=t)}function Ti(e,t){var n=Ye([e*D,t*D]);if(nt){var r=ot(nt,n),o=[r[1],-r[0],0],i=ot(o,r);pn(i),i=hn(i);var a=e-Ue,s=a>0?1:-1,l=i[0]*Y*s,m,c=V(a)>180;c^(s*Ue<l&&l<s*e)?(m=i[1]*Y,m>ve&&(ve=m)):(l=(l+360)%360-180,c^(s*Ue<l&&l<s*e)?(m=-i[1]*Y,m<de&&(de=m)):(t<de&&(de=t),t>ve&&(ve=t))),c?e<Ue?ye(K,e)>ye(K,ee)&&(ee=e):ye(e,ee)>ye(K,ee)&&(K=e):ee>=K?(e<K&&(K=e),e>ee&&(ee=e)):e>Ue?ye(K,e)>ye(K,ee)&&(ee=e):ye(e,ee)>ye(K,ee)&&(K=e)}else Ge.push(ze=[K=e,ee=e]);t<de&&(de=t),t>ve&&(ve=t),nt=n,Ue=e}function No(){Le.point=Ti}function Co(){ze[0]=K,ze[1]=ee,Le.point=lr,nt=null}function Bi(e,t){if(nt){var n=e-Ue;wt.add(V(n)>180?n+(n>0?360:-360):n)}else Fi=e,Li=t;Pe.point(e,t),Ti(e,t)}function us(){Pe.lineStart()}function ms(){Bi(Fi,Li),Pe.lineEnd(),V(wt)>$&&(K=-(ee=180)),ze[0]=K,ze[1]=ee,nt=null}function ye(e,t){return(t-=e)<0?t+360:t}function fs(e,t){return e[0]-t[0]}function jo(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ds(e){var t,n,r,o,i,a,s;if(ve=ee=-(K=de=1/0),Ge=[],je(e,Le),n=Ge.length){for(Ge.sort(fs),t=1,r=Ge[0],i=[r];t<n;++t)o=Ge[t],jo(r,o[0])||jo(r,o[1])?(ye(r[0],o[1])>ye(r[0],r[1])&&(r[1]=o[1]),ye(o[0],r[1])>ye(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,n=i.length-1,t=0,r=i[n];t<=n;r=o,++t)o=i[t],(s=ye(r[1],o[0]))>a&&(a=s,K=o[0],ee=r[1])}return Ge=ze=null,K===1/0||de===1/0?[[NaN,NaN],[NaN,NaN]]:[[K,de],[ee,ve]]}var ht,gn,xn,yn,vn,_n,bn,wn,ur,mr,fr,$i,Di,se,ce,le,Qe={sphere:J,point:Br,lineStart:Qo,lineEnd:Mo,polygonStart:function(){Qe.lineStart=gs,Qe.lineEnd=xs},polygonEnd:function(){Qe.lineStart=Qo,Qe.lineEnd=Mo}};function Br(e,t){e*=D,t*=D;var n=T(t);Bt(n*T(e),n*Z(e),Z(t))}function Bt(e,t,n){++ht,xn+=(e-xn)/ht,yn+=(t-yn)/ht,vn+=(n-vn)/ht}function Qo(){Qe.point=hs}function hs(e,t){e*=D,t*=D;var n=T(t);se=n*T(e),ce=n*Z(e),le=Z(t),Qe.point=ps,Bt(se,ce,le)}function ps(e,t){e*=D,t*=D;var n=T(t),r=n*T(e),o=n*Z(e),i=Z(t),a=me(oe((a=ce*i-le*o)*a+(a=le*r-se*i)*a+(a=se*o-ce*r)*a),se*r+ce*o+le*i);gn+=a,_n+=a*(se+(se=r)),bn+=a*(ce+(ce=o)),wn+=a*(le+(le=i)),Bt(se,ce,le)}function Mo(){Qe.point=Br}function gs(){Qe.point=ys}function xs(){zi($i,Di),Qe.point=Br}function ys(e,t){$i=e,Di=t,e*=D,t*=D,Qe.point=zi;var n=T(t);se=n*T(e),ce=n*Z(e),le=Z(t),Bt(se,ce,le)}function zi(e,t){e*=D,t*=D;var n=T(t),r=n*T(e),o=n*Z(e),i=Z(t),a=ce*i-le*o,s=le*r-se*i,l=se*o-ce*r,m=or(a,s,l),c=fe(m),f=m&&-c/m;ur.add(f*a),mr.add(f*s),fr.add(f*l),gn+=c,_n+=c*(se+(se=r)),bn+=c*(ce+(ce=o)),wn+=c*(le+(le=i)),Bt(se,ce,le)}function vs(e){ht=gn=xn=yn=vn=_n=bn=wn=0,ur=new ae,mr=new ae,fr=new ae,je(e,Qe);var t=+ur,n=+mr,r=+fr,o=or(t,n,r);return o<Et&&(t=_n,n=bn,r=wn,gn<$&&(t=xn,n=yn,r=vn),o=or(t,n,r),o<Et)?[NaN,NaN]:[me(n,t)*Y,fe(r/o)*Y]}function Ke(e){return function(){return e}}function dr(e,t){function n(r,o){return r=e(r,o),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,o){return r=t.invert(r,o),r&&e.invert(r[0],r[1])}),n}function hr(e,t){return[V(e)>I?e+Math.round(-e/ue)*ue:e,t]}hr.invert=hr;function $r(e,t,n){return(e%=ue)?t||n?dr(Eo(e),Ao(t,n)):Eo(e):t||n?Ao(t,n):hr}function So(e){return function(t,n){return t+=e,[t>I?t-ue:t<-I?t+ue:t,n]}}function Eo(e){var t=So(e);return t.invert=So(-e),t}function Ao(e,t){var n=T(e),r=Z(e),o=T(t),i=Z(t);function a(s,l){var m=T(l),c=T(s)*m,f=Z(s)*m,d=Z(l),h=d*n+c*r;return[me(f*o-h*i,c*n-d*r),fe(h*o+f*i)]}return a.invert=function(s,l){var m=T(l),c=T(s)*m,f=Z(s)*m,d=Z(l),h=d*o-f*i;return[me(f*o+d*i,c*n+h*r),fe(h*n-c*r)]},a}function Oi(e){e=$r(e[0]*D,e[1]*D,e.length>2?e[2]*D:0);function t(n){return n=e(n[0]*D,n[1]*D),n[0]*=Y,n[1]*=Y,n}return t.invert=function(n){return n=e.invert(n[0]*D,n[1]*D),n[0]*=Y,n[1]*=Y,n},t}function Ii(e,t,n,r,o,i){if(n){var a=T(t),s=Z(t),l=r*n;o==null?(o=t+r*ue,i=t-l/2):(o=ko(a,o),i=ko(a,i),(r>0?o<i:o>i)&&(o+=r*ue));for(var m,c=o;r>0?c>i:c<i;c-=l)m=hn([a,-s*T(c),-s*Z(c)]),e.point(m[0],m[1])}}function ko(e,t){t=Ye(t),t[0]-=e,pn(t);var n=ki(-t[1]);return((-t[2]<0?-n:n)+ue-$)%ue}function _s(){var e=Ke([0,0]),t=Ke(90),n=Ke(6),r,o,i={point:a};function a(l,m){r.push(l=o(l,m)),l[0]*=Y,l[1]*=Y}function s(){var l=e.apply(this,arguments),m=t.apply(this,arguments)*D,c=n.apply(this,arguments)*D;return r=[],o=$r(-l[0]*D,-l[1]*D,0).invert,Ii(i,m,c,1),l={type:"Polygon",coordinates:[r]},r=o=null,l}return s.center=function(l){return arguments.length?(e=typeof l=="function"?l:Ke([+l[0],+l[1]]),s):e},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Ke(+l),s):t},s.precision=function(l){return arguments.length?(n=typeof l=="function"?l:Ke(+l),s):n},s}function Gi(){var e=[],t;return{point:function(n,r,o){t.push([n,r,o])},lineStart:function(){e.push(t=[])},lineEnd:J,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function en(e,t){return V(e[0]-t[0])<$&&V(e[1]-t[1])<$}function Ut(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Vi(e,t,n,r,o){var i=[],a=[],s,l;if(e.forEach(function(p){if(!((v=p.length-1)<=0)){var v,y=p[0],g=p[v],_;if(en(y,g)){if(!y[2]&&!g[2]){for(o.lineStart(),s=0;s<v;++s)o.point((y=p[s])[0],y[1]);o.lineEnd();return}g[0]+=2*$}i.push(_=new Ut(y,p,null,!0)),a.push(_.o=new Ut(y,null,_,!1)),i.push(_=new Ut(g,p,null,!1)),a.push(_.o=new Ut(g,null,_,!0))}}),!!i.length){for(a.sort(t),Po(i),Po(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var m=i[0],c,f;;){for(var d=m,h=!0;d.v;)if((d=d.n)===m)return;c=d.z,o.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(s=0,l=c.length;s<l;++s)o.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,o);d=d.n}else{if(h)for(c=d.p.z,s=c.length-1;s>=0;--s)o.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,o);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);o.lineEnd()}}}function Po(e){if(t=e.length){for(var t,n=0,r=e[0],o;++n<t;)r.n=o=e[n],o.p=r,r=o;r.n=o=e[0],o.p=r}}function Hn(e){return V(e[0])<=I?e[0]:Ne(e[0])*((V(e[0])+I)%ue-I)}function Hi(e,t){var n=Hn(t),r=t[1],o=Z(r),i=[Z(n),-T(n),0],a=0,s=0,l=new ae;o===1?r=te+$:o===-1&&(r=-te-$);for(var m=0,c=e.length;m<c;++m)if(d=(f=e[m]).length)for(var f,d,h=f[d-1],p=Hn(h),v=h[1]/2+ln,y=Z(v),g=T(v),_=0;_<d;++_,p=N,y=j,g=S,h=x){var x=f[_],N=Hn(x),Q=x[1]/2+ln,j=Z(Q),S=T(Q),A=N-p,k=A>=0?1:-1,B=k*A,F=B>I,G=y*j;if(l.add(me(G*k*Z(B),g*S+G*T(B))),a+=F?A+k*ue:A,F^p>=n^N>=n){var q=ot(Ye(h),Ye(x));pn(q);var b=ot(i,q);pn(b);var w=(F^A>=0?-1:1)*fe(b[2]);(r>w||r===w&&(q[0]||q[1]))&&(s+=F^A>=0?1:-1)}}return(a<-$||a<$&&l<-Et)^s&1}function qi(e,t,n,r){return function(o){var i=t(o),a=Gi(),s=t(a),l=!1,m,c,f,d={point:h,lineStart:v,lineEnd:y,polygonStart:function(){d.point=g,d.lineStart=_,d.lineEnd=x,c=[],m=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=y,c=Ei(c);var N=Hi(m,r);c.length?(l||(o.polygonStart(),l=!0),Vi(c,ws,N,n,o)):N&&(l||(o.polygonStart(),l=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),l&&(o.polygonEnd(),l=!1),c=m=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function h(N,Q){e(N,Q)&&o.point(N,Q)}function p(N,Q){i.point(N,Q)}function v(){d.point=p,i.lineStart()}function y(){d.point=h,i.lineEnd()}function g(N,Q){f.push([N,Q]),s.point(N,Q)}function _(){s.lineStart(),f=[]}function x(){g(f[0][0],f[0][1]),s.lineEnd();var N=s.clean(),Q=a.result(),j,S=Q.length,A,k,B;if(f.pop(),m.push(f),f=null,!!S){if(N&1){if(k=Q[0],(A=k.length-1)>0){for(l||(o.polygonStart(),l=!0),o.lineStart(),j=0;j<A;++j)o.point((B=k[j])[0],B[1]);o.lineEnd()}return}S>1&&N&2&&Q.push(Q.pop().concat(Q.shift())),c.push(Q.filter(bs))}}return d}}function bs(e){return e.length>1}function ws(e,t){return((e=e.x)[0]<0?e[1]-te-$:te-e[1])-((t=t.x)[0]<0?t[1]-te-$:te-t[1])}const pr=qi(function(){return!0},Ns,js,[-I,-te]);function Ns(e){var t=NaN,n=NaN,r=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(i,a){var s=i>0?I:-I,l=V(i-t);V(l-I)<$?(e.point(t,n=(n+a)/2>0?te:-te),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(i,n),o=0):r!==s&&l>=I&&(V(t-r)<$&&(t-=r*$),V(i-s)<$&&(i-=s*$),n=Cs(t,n,i,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),o=0),e.point(t=i,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-o}}}function Cs(e,t,n,r){var o,i,a=Z(e-n);return V(a)>$?ut((Z(t)*(i=T(r))*Z(n)-Z(r)*(o=T(t))*Z(e))/(o*i*a)):(t+r)/2}function js(e,t,n,r){var o;if(e==null)o=n*te,r.point(-I,o),r.point(0,o),r.point(I,o),r.point(I,0),r.point(I,-o),r.point(0,-o),r.point(-I,-o),r.point(-I,0),r.point(-I,o);else if(V(e[0]-t[0])>$){var i=e[0]<t[0]?I:-I;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(t[0],t[1])}function Ui(e){var t=T(e),n=6*D,r=t>0,o=V(t)>$;function i(c,f,d,h){Ii(h,e,n,d,c,f)}function a(c,f){return T(c)*T(f)>t}function s(c){var f,d,h,p,v;return{lineStart:function(){p=h=!1,v=1},point:function(y,g){var _=[y,g],x,N=a(y,g),Q=r?N?0:m(y,g):N?m(y+(y<0?I:-I),g):0;if(!f&&(p=h=N)&&c.lineStart(),N!==h&&(x=l(f,_),(!x||en(f,x)||en(_,x))&&(_[2]=1)),N!==h)v=0,N?(c.lineStart(),x=l(_,f),c.point(x[0],x[1])):(x=l(f,_),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(o&&f&&r^N){var j;!(Q&d)&&(j=l(_,f,!0))&&(v=0,r?(c.lineStart(),c.point(j[0][0],j[0][1]),c.point(j[1][0],j[1][1]),c.lineEnd()):(c.point(j[1][0],j[1][1]),c.lineEnd(),c.lineStart(),c.point(j[0][0],j[0][1],3)))}N&&(!f||!en(f,_))&&c.point(_[0],_[1]),f=_,h=N,d=Q},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return v|(p&&h)<<1}}}function l(c,f,d){var h=Ye(c),p=Ye(f),v=[1,0,0],y=ot(h,p),g=Ht(y,y),_=y[0],x=g-_*_;if(!x)return!d&&c;var N=t*g/x,Q=-t*_/x,j=ot(v,y),S=qt(v,N),A=qt(y,Q);Vn(S,A);var k=j,B=Ht(S,k),F=Ht(k,k),G=B*B-F*(Ht(S,S)-1);if(!(G<0)){var q=oe(G),b=qt(k,(-B-q)/F);if(Vn(b,S),b=hn(b),!d)return b;var w=c[0],C=f[0],P=c[1],L=f[1],R;C<w&&(R=w,w=C,C=R);var z=C-w,O=V(z-I)<$,H=O||z<$;if(!O&&L<P&&(R=P,P=L,L=R),H?O?P+L>0^b[1]<(V(b[0]-w)<$?P:L):P<=b[1]&&b[1]<=L:z>I^(w<=b[0]&&b[0]<=C)){var X=qt(k,(-B+q)/F);return Vn(X,S),[b,hn(X)]}}}function m(c,f){var d=r?e:I-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return qi(a,s,i,r?[0,-e]:[-I,e-I])}function Qs(e,t,n,r,o,i){var a=e[0],s=e[1],l=t[0],m=t[1],c=0,f=1,d=l-a,h=m-s,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-s,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=a+c*d,e[1]=s+c*h),f<1&&(t[0]=a+f*d,t[1]=s+f*h),!0}}}}}var pt=1e9,Yt=-pt;function Tn(e,t,n,r){function o(m,c){return e<=m&&m<=n&&t<=c&&c<=r}function i(m,c,f,d){var h=0,p=0;if(m==null||(h=a(m,f))!==(p=a(c,f))||l(m,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function a(m,c){return V(m[0]-e)<$?c>0?0:3:V(m[0]-n)<$?c>0?2:1:V(m[1]-t)<$?c>0?1:0:c>0?3:2}function s(m,c){return l(m.x,c.x)}function l(m,c){var f=a(m,1),d=a(c,1);return f!==d?f-d:f===0?c[1]-m[1]:f===1?m[0]-c[0]:f===2?m[1]-c[1]:c[0]-m[0]}return function(m){var c=m,f=Gi(),d,h,p,v,y,g,_,x,N,Q,j,S={point:A,lineStart:G,lineEnd:q,polygonStart:B,polygonEnd:F};function A(w,C){o(w,C)&&c.point(w,C)}function k(){for(var w=0,C=0,P=h.length;C<P;++C)for(var L=h[C],R=1,z=L.length,O=L[0],H,X,U=O[0],W=O[1];R<z;++R)H=U,X=W,O=L[R],U=O[0],W=O[1],X<=r?W>r&&(U-H)*(r-X)>(W-X)*(e-H)&&++w:W<=r&&(U-H)*(r-X)<(W-X)*(e-H)&&--w;return w}function B(){c=f,d=[],h=[],j=!0}function F(){var w=k(),C=j&&w,P=(d=Ei(d)).length;(C||P)&&(m.polygonStart(),C&&(m.lineStart(),i(null,null,1,m),m.lineEnd()),P&&Vi(d,s,w,i,m),m.polygonEnd()),c=m,d=h=p=null}function G(){S.point=b,h&&h.push(p=[]),Q=!0,N=!1,_=x=NaN}function q(){d&&(b(v,y),g&&N&&f.rejoin(),d.push(f.result())),S.point=A,N&&c.lineEnd()}function b(w,C){var P=o(w,C);if(h&&p.push([w,C]),Q)v=w,y=C,g=P,Q=!1,P&&(c.lineStart(),c.point(w,C));else if(P&&N)c.point(w,C);else{var L=[_=Math.max(Yt,Math.min(pt,_)),x=Math.max(Yt,Math.min(pt,x))],R=[w=Math.max(Yt,Math.min(pt,w)),C=Math.max(Yt,Math.min(pt,C))];Qs(L,R,e,t,n,r)?(N||(c.lineStart(),c.point(L[0],L[1])),c.point(R[0],R[1]),P||c.lineEnd(),j=!1):P&&(c.lineStart(),c.point(w,C),j=!1)}_=w,x=C,N=P}return S}}function Ms(){var e=0,t=0,n=960,r=500,o,i,a;return a={stream:function(s){return o&&i===s?o:o=Tn(e,t,n,r)(i=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1],o=i=null,a):[[e,t],[n,r]]}}}var gr,xr,tn,nn,it={sphere:J,point:J,lineStart:Ss,lineEnd:J,polygonStart:J,polygonEnd:J};function Ss(){it.point=As,it.lineEnd=Es}function Es(){it.point=it.lineEnd=J}function As(e,t){e*=D,t*=D,xr=e,tn=Z(t),nn=T(t),it.point=ks}function ks(e,t){e*=D,t*=D;var n=Z(t),r=T(t),o=V(e-xr),i=T(o),a=Z(o),s=r*a,l=nn*n-tn*r*i,m=tn*n+nn*r*i;gr.add(me(oe(s*s+l*l),m)),xr=e,tn=n,nn=r}function Yi(e){return gr=new ae,je(e,it),+gr}var yr=[null,null],Ps={type:"LineString",coordinates:yr};function Nn(e,t){return yr[0]=e,yr[1]=t,Yi(Ps)}var Zo={Feature:function(e,t){return Cn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;++r<o;)if(Cn(n[r].geometry,t))return!0;return!1}},Ro={Sphere:function(){return!0},Point:function(e,t){return Fo(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(Fo(n[r],t))return!0;return!1},LineString:function(e,t){return Lo(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(Lo(n[r],t))return!0;return!1},Polygon:function(e,t){return To(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(To(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;++r<o;)if(Cn(n[r],t))return!0;return!1}};function Cn(e,t){return e&&Ro.hasOwnProperty(e.type)?Ro[e.type](e,t):!1}function Fo(e,t){return Nn(e,t)===0}function Lo(e,t){for(var n,r,o,i=0,a=e.length;i<a;i++){if(r=Nn(e[i],t),r===0||i>0&&(o=Nn(e[i],e[i-1]),o>0&&n<=o&&r<=o&&(n+r-o)*(1-Math.pow((n-r)/o,2))<Et*o))return!0;n=r}return!1}function To(e,t){return!!Hi(e.map(Zs),Xi(t))}function Zs(e){return e=e.map(Xi),e.pop(),e}function Xi(e){return[e[0]*D,e[1]*D]}function Rs(e,t){return(e&&Zo.hasOwnProperty(e.type)?Zo[e.type]:Cn)(e,t)}function Bo(e,t,n){var r=Je(e,t-$,n).concat(t);return function(o){return r.map(function(i){return[o,i]})}}function $o(e,t,n){var r=Je(e,t-$,n).concat(t);return function(o){return r.map(function(i){return[i,o]})}}function Dr(){var e,t,n,r,o,i,a,s,l=10,m=l,c=90,f=360,d,h,p,v,y=2.5;function g(){return{type:"MultiLineString",coordinates:_()}}function _(){return Je(Vt(r/c)*c,n,c).map(p).concat(Je(Vt(s/f)*f,a,f).map(v)).concat(Je(Vt(t/l)*l,e,l).filter(function(x){return V(x%c)>$}).map(d)).concat(Je(Vt(i/m)*m,o,m).filter(function(x){return V(x%f)>$}).map(h))}return g.lines=function(){return _().map(function(x){return{type:"LineString",coordinates:x}})},g.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(v(a).slice(1),p(n).reverse().slice(1),v(s).reverse().slice(1))]}},g.extent=function(x){return arguments.length?g.extentMajor(x).extentMinor(x):g.extentMinor()},g.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],s=+x[0][1],a=+x[1][1],r>n&&(x=r,r=n,n=x),s>a&&(x=s,s=a,a=x),g.precision(y)):[[r,s],[n,a]]},g.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],i=+x[0][1],o=+x[1][1],t>e&&(x=t,t=e,e=x),i>o&&(x=i,i=o,o=x),g.precision(y)):[[t,i],[e,o]]},g.step=function(x){return arguments.length?g.stepMajor(x).stepMinor(x):g.stepMinor()},g.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],g):[c,f]},g.stepMinor=function(x){return arguments.length?(l=+x[0],m=+x[1],g):[l,m]},g.precision=function(x){return arguments.length?(y=+x,d=Bo(i,o,90),h=$o(t,e,y),p=Bo(s,a,90),v=$o(r,n,y),g):y},g.extentMajor([[-180,-90+$],[180,90-$]]).extentMinor([[-180,-80-$],[180,80+$]])}function Fs(){return Dr()()}function Ls(e,t){var n=e[0]*D,r=e[1]*D,o=t[0]*D,i=t[1]*D,a=T(r),s=Z(r),l=T(i),m=Z(i),c=a*T(n),f=a*Z(n),d=l*T(o),h=l*Z(o),p=2*fe(oe(vo(i-r)+a*l*vo(o-n))),v=Z(p),y=p?function(g){var _=Z(g*=p)/v,x=Z(p-g)/v,N=x*c+_*d,Q=x*f+_*h,j=x*s+_*m;return[me(Q,N)*Y,me(j,oe(N*N+Q*Q))*Y]}:function(){return[n*Y,r*Y]};return y.distance=p,y}const At=e=>e;var qn=new ae,vr=new ae,Wi,Ki,_r,br,Te={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Te.lineStart=Ts,Te.lineEnd=$s},polygonEnd:function(){Te.lineStart=Te.lineEnd=Te.point=J,qn.add(V(vr)),vr=new ae},result:function(){var e=qn/2;return qn=new ae,e}};function Ts(){Te.point=Bs}function Bs(e,t){Te.point=Ji,Wi=_r=e,Ki=br=t}function Ji(e,t){vr.add(br*e-_r*t),_r=e,br=t}function $s(){Ji(Wi,Ki)}var at=1/0,jn=at,kt=-at,Qn=kt,Mn={point:Ds,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var e=[[at,jn],[kt,Qn]];return kt=Qn=-(jn=at=1/0),e}};function Ds(e,t){e<at&&(at=e),e>kt&&(kt=e),t<jn&&(jn=t),t>Qn&&(Qn=t)}var wr=0,Nr=0,gt=0,Sn=0,En=0,et=0,Cr=0,jr=0,xt=0,ea,ta,Se,Ee,we={point:Xe,lineStart:Do,lineEnd:zo,polygonStart:function(){we.lineStart=Is,we.lineEnd=Gs},polygonEnd:function(){we.point=Xe,we.lineStart=Do,we.lineEnd=zo},result:function(){var e=xt?[Cr/xt,jr/xt]:et?[Sn/et,En/et]:gt?[wr/gt,Nr/gt]:[NaN,NaN];return wr=Nr=gt=Sn=En=et=Cr=jr=xt=0,e}};function Xe(e,t){wr+=e,Nr+=t,++gt}function Do(){we.point=zs}function zs(e,t){we.point=Os,Xe(Se=e,Ee=t)}function Os(e,t){var n=e-Se,r=t-Ee,o=oe(n*n+r*r);Sn+=o*(Se+e)/2,En+=o*(Ee+t)/2,et+=o,Xe(Se=e,Ee=t)}function zo(){we.point=Xe}function Is(){we.point=Vs}function Gs(){na(ea,ta)}function Vs(e,t){we.point=na,Xe(ea=Se=e,ta=Ee=t)}function na(e,t){var n=e-Se,r=t-Ee,o=oe(n*n+r*r);Sn+=o*(Se+e)/2,En+=o*(Ee+t)/2,et+=o,o=Ee*e-Se*t,Cr+=o*(Se+e),jr+=o*(Ee+t),xt+=o*3,Xe(Se=e,Ee=t)}function ra(e){this._context=e}ra.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ue);break}}},result:J};var Qr=new ae,Un,oa,ia,yt,vt,Pt={point:J,lineStart:function(){Pt.point=Hs},lineEnd:function(){Un&&aa(oa,ia),Pt.point=J},polygonStart:function(){Un=!0},polygonEnd:function(){Un=null},result:function(){var e=+Qr;return Qr=new ae,e}};function Hs(e,t){Pt.point=aa,oa=yt=e,ia=vt=t}function aa(e,t){yt-=e,vt-=t,Qr.add(oe(yt*yt+vt*vt)),yt=e,vt=t}function sa(){this._string=[]}sa.prototype={_radius:4.5,_circle:Oo(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=Oo(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function Oo(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function ca(e,t){var n=4.5,r,o;function i(a){return a&&(typeof n=="function"&&o.pointRadius(+n.apply(this,arguments)),je(a,r(o))),o.result()}return i.area=function(a){return je(a,r(Te)),Te.result()},i.measure=function(a){return je(a,r(Pt)),Pt.result()},i.bounds=function(a){return je(a,r(Mn)),Mn.result()},i.centroid=function(a){return je(a,r(we)),we.result()},i.projection=function(a){return arguments.length?(r=a==null?(e=null,At):(e=a).stream,i):e},i.context=function(a){return arguments.length?(o=a==null?(t=null,new sa):new ra(t=a),typeof n!="function"&&o.pointRadius(n),i):t},i.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(o.pointRadius(+a),+a),i):n},i.projection(e).context(t)}function qs(e){return{stream:$t(e)}}function $t(e){return function(t){var n=new Mr;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Mr(){}Mr.prototype={constructor:Mr,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function zr(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),je(n,e.stream(Mn)),t(Mn.result()),r!=null&&e.clipExtent(r),e}function Bn(e,t,n){return zr(e,function(r){var o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(o/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),s=+t[0][0]+(o-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function Or(e,t,n){return Bn(e,[[0,0],t],n)}function Ir(e,t,n){return zr(e,function(r){var o=+t,i=o/(r[1][0]-r[0][0]),a=(o-i*(r[1][0]+r[0][0]))/2,s=-i*r[0][1];e.scale(150*i).translate([a,s])},n)}function Gr(e,t,n){return zr(e,function(r){var o=+t,i=o/(r[1][1]-r[0][1]),a=-i*r[0][0],s=(o-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([a,s])},n)}var Io=16,Us=T(30*D);function Go(e,t){return+t?Xs(e,t):Ys(e)}function Ys(e){return $t({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Xs(e,t){function n(r,o,i,a,s,l,m,c,f,d,h,p,v,y){var g=m-r,_=c-o,x=g*g+_*_;if(x>4*t&&v--){var N=a+d,Q=s+h,j=l+p,S=oe(N*N+Q*Q+j*j),A=fe(j/=S),k=V(V(j)-1)<$||V(i-f)<$?(i+f)/2:me(Q,N),B=e(k,A),F=B[0],G=B[1],q=F-r,b=G-o,w=_*q-g*b;(w*w/x>t||V((g*q+_*b)/x-.5)>.3||a*d+s*h+l*p<Us)&&(n(r,o,i,a,s,l,F,G,k,N/=S,Q/=S,j,v,y),y.point(F,G),n(F,G,k,N,Q,j,m,c,f,d,h,p,v,y))}}return function(r){var o,i,a,s,l,m,c,f,d,h,p,v,y={point:g,lineStart:_,lineEnd:N,polygonStart:function(){r.polygonStart(),y.lineStart=Q},polygonEnd:function(){r.polygonEnd(),y.lineStart=_}};function g(A,k){A=e(A,k),r.point(A[0],A[1])}function _(){f=NaN,y.point=x,r.lineStart()}function x(A,k){var B=Ye([A,k]),F=e(A,k);n(f,d,c,h,p,v,f=F[0],d=F[1],c=A,h=B[0],p=B[1],v=B[2],Io,r),r.point(f,d)}function N(){y.point=g,r.lineEnd()}function Q(){_(),y.point=j,y.lineEnd=S}function j(A,k){x(o=A,k),i=f,a=d,s=h,l=p,m=v,y.point=x}function S(){n(f,d,c,h,p,v,i,a,o,s,l,m,Io,r),y.lineEnd=N,N()}return y}}var Ws=$t({point:function(e,t){this.stream.point(e*D,t*D)}});function Ks(e){return $t({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Js(e,t,n,r,o){function i(a,s){return a*=r,s*=o,[t+e*a,n-e*s]}return i.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*o]},i}function Vo(e,t,n,r,o,i){if(!i)return Js(e,t,n,r,o);var a=T(i),s=Z(i),l=a*e,m=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(v,y){return v*=r,y*=o,[l*v-m*y+t,n-m*v-l*y]}return p.invert=function(v,y){return[r*(c*v-f*y+d),o*(h-f*v-c*y)]},p}function Ze(e){return Vr(function(){return e})()}function Vr(e){var t,n=150,r=480,o=250,i=0,a=0,s=0,l=0,m=0,c,f=0,d=1,h=1,p=null,v=pr,y=null,g,_,x,N=At,Q=.5,j,S,A,k,B;function F(w){return A(w[0]*D,w[1]*D)}function G(w){return w=A.invert(w[0],w[1]),w&&[w[0]*Y,w[1]*Y]}F.stream=function(w){return k&&B===w?k:k=Ws(Ks(c)(v(j(N(B=w)))))},F.preclip=function(w){return arguments.length?(v=w,p=void 0,b()):v},F.postclip=function(w){return arguments.length?(N=w,y=g=_=x=null,b()):N},F.clipAngle=function(w){return arguments.length?(v=+w?Ui(p=w*D):(p=null,pr),b()):p*Y},F.clipExtent=function(w){return arguments.length?(N=w==null?(y=g=_=x=null,At):Tn(y=+w[0][0],g=+w[0][1],_=+w[1][0],x=+w[1][1]),b()):y==null?null:[[y,g],[_,x]]},F.scale=function(w){return arguments.length?(n=+w,q()):n},F.translate=function(w){return arguments.length?(r=+w[0],o=+w[1],q()):[r,o]},F.center=function(w){return arguments.length?(i=w[0]%360*D,a=w[1]%360*D,q()):[i*Y,a*Y]},F.rotate=function(w){return arguments.length?(s=w[0]%360*D,l=w[1]%360*D,m=w.length>2?w[2]%360*D:0,q()):[s*Y,l*Y,m*Y]},F.angle=function(w){return arguments.length?(f=w%360*D,q()):f*Y},F.reflectX=function(w){return arguments.length?(d=w?-1:1,q()):d<0},F.reflectY=function(w){return arguments.length?(h=w?-1:1,q()):h<0},F.precision=function(w){return arguments.length?(j=Go(S,Q=w*w),b()):oe(Q)},F.fitExtent=function(w,C){return Bn(F,w,C)},F.fitSize=function(w,C){return Or(F,w,C)},F.fitWidth=function(w,C){return Ir(F,w,C)},F.fitHeight=function(w,C){return Gr(F,w,C)};function q(){var w=Vo(n,0,0,d,h,f).apply(null,t(i,a)),C=Vo(n,r-w[0],o-w[1],d,h,f);return c=$r(s,l,m),S=dr(t,C),A=dr(c,S),j=Go(S,Q),b()}function b(){return k=B=null,F}return function(){return t=e.apply(this,arguments),F.invert=t.invert&&G,q()}}function Hr(e){var t=0,n=I/3,r=Vr(e),o=r(t,n);return o.parallels=function(i){return arguments.length?r(t=i[0]*D,n=i[1]*D):[t*Y,n*Y]},o}function ec(e){var t=T(e);function n(r,o){return[r*t,Z(o)/t]}return n.invert=function(r,o){return[r/t,fe(o*t)]},n}function la(e,t){var n=Z(e),r=(n+Z(t))/2;if(V(r)<$)return ec(e);var o=1+n*(2*r-n),i=oe(o)/r;function a(s,l){var m=oe(o-2*r*Z(l))/r;return[m*Z(s*=r),i-m*T(s)]}return a.invert=function(s,l){var m=i-l,c=me(s,V(m))*Ne(m);return m*r<0&&(c-=I*Ne(s)*Ne(m)),[c/r,fe((o-(s*s+m*m)*r*r)/(2*r))]},a}function An(){return Hr(la).scale(155.424).center([0,33.6442])}function ua(){return An().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tc(e){var t=e.length;return{point:function(n,r){for(var o=-1;++o<t;)e[o].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nc(){var e,t,n=ua(),r,o=An().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,a=An().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,m={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(i.point(h,p),l)||(s.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),v=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&v>=-.425&&v<-.214?o:y>=.166&&y<.234&&v>=-.214&&v<-.115?a:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=tc([n.stream(t=d),o.stream(d),a.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),o.precision(d),a.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),o.scale(d*.35),a.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],v=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,v-.238*h],[p+.455*h,v+.238*h]]).stream(m),i=o.translate([p-.307*h,v+.201*h]).clipExtent([[p-.425*h+$,v+.12*h+$],[p-.214*h-$,v+.234*h-$]]).stream(m),s=a.translate([p-.205*h,v+.212*h]).clipExtent([[p-.214*h+$,v+.166*h+$],[p-.115*h-$,v+.234*h-$]]).stream(m),f()},c.fitExtent=function(d,h){return Bn(c,d,h)},c.fitSize=function(d,h){return Or(c,d,h)},c.fitWidth=function(d,h){return Ir(c,d,h)},c.fitHeight=function(d,h){return Gr(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function ma(e){return function(t,n){var r=T(t),o=T(n),i=e(r*o);return i===1/0?[2,0]:[i*o*Z(t),i*Z(n)]}}function Dt(e){return function(t,n){var r=oe(t*t+n*n),o=e(r),i=Z(o),a=T(o);return[me(t*i,r*a),fe(r&&n*i/r)]}}var qr=ma(function(e){return oe(2/(1+e))});qr.invert=Dt(function(e){return 2*fe(e/2)});function rc(){return Ze(qr).scale(124.75).clipAngle(180-.001)}var Ur=ma(function(e){return(e=ki(e))&&e/Z(e)});Ur.invert=Dt(function(e){return e});function oc(){return Ze(Ur).scale(79.4188).clipAngle(180-.001)}function zt(e,t){return[e,un(Tr((te+t)/2))]}zt.invert=function(e,t){return[e,2*ut(Ai(t))-te]};function ic(){return fa(zt).scale(961/ue)}function fa(e){var t=Ze(e),n=t.center,r=t.scale,o=t.translate,i=t.clipExtent,a=null,s,l,m;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(o(f),c()):o()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?a=s=l=m=null:(a=+f[0][0],s=+f[0][1],l=+f[1][0],m=+f[1][1]),c()):a==null?null:[[a,s],[l,m]]};function c(){var f=I*r(),d=t(Oi(t.rotate()).invert([0,0]));return i(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===zt?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,l),m]]:[[a,Math.max(d[1]-f,s)],[l,Math.min(d[1]+f,m)]])}return c()}function Xt(e){return Tr((te+e)/2)}function da(e,t){var n=T(e),r=e===t?Z(e):un(n/T(t))/un(Xt(t)/Xt(e)),o=n*Gn(Xt(e),r)/r;if(!r)return zt;function i(a,s){o>0?s<-te+$&&(s=-te+$):s>te-$&&(s=te-$);var l=o/Gn(Xt(s),r);return[l*Z(r*a),o-l*T(r*a)]}return i.invert=function(a,s){var l=o-s,m=Ne(r)*oe(a*a+l*l),c=me(a,V(l))*Ne(l);return l*r<0&&(c-=I*Ne(a)*Ne(l)),[c/r,2*ut(Gn(o/m,1/r))-te]},i}function ac(){return Hr(da).scale(109.5).parallels([30,30])}function Zt(e,t){return[e,t]}Zt.invert=Zt;function sc(){return Ze(Zt).scale(152.63)}function ha(e,t){var n=T(e),r=e===t?Z(e):(n-T(t))/(t-e),o=n/r+e;if(V(r)<$)return Zt;function i(a,s){var l=o-s,m=r*a;return[l*Z(m),o-l*T(m)]}return i.invert=function(a,s){var l=o-s,m=me(a,V(l))*Ne(l);return l*r<0&&(m-=I*Ne(a)*Ne(l)),[m/r,o-Ne(r)*oe(a*a+l*l)]},i}function cc(){return Hr(ha).scale(131.154).center([0,13.9389])}var Nt=1.340264,Ct=-.081106,jt=893e-6,Qt=.003796,kn=oe(3)/2,lc=12;function Yr(e,t){var n=fe(kn*Z(t)),r=n*n,o=r*r*r;return[e*T(n)/(kn*(Nt+3*Ct*r+o*(7*jt+9*Qt*r))),n*(Nt+Ct*r+o*(jt+Qt*r))]}Yr.invert=function(e,t){for(var n=t,r=n*n,o=r*r*r,i=0,a,s,l;i<lc&&(s=n*(Nt+Ct*r+o*(jt+Qt*r))-t,l=Nt+3*Ct*r+o*(7*jt+9*Qt*r),n-=a=s/l,r=n*n,o=r*r*r,!(V(a)<Et));++i);return[kn*e*(Nt+3*Ct*r+o*(7*jt+9*Qt*r))/T(n),fe(Z(n)/kn)]};function uc(){return Ze(Yr).scale(177.158)}function Xr(e,t){var n=T(t),r=T(e)*n;return[n*Z(e)/r,Z(t)/r]}Xr.invert=Dt(ut);function mc(){return Ze(Xr).scale(144.049).clipAngle(60)}function fc(){var e=1,t=0,n=0,r=1,o=1,i=0,a,s,l=null,m,c,f,d=1,h=1,p=$t({point:function(N,Q){var j=x([N,Q]);this.stream.point(j[0],j[1])}}),v=At,y,g;function _(){return d=e*r,h=e*o,y=g=null,x}function x(N){var Q=N[0]*d,j=N[1]*h;if(i){var S=j*a-Q*s;Q=Q*a+j*s,j=S}return[Q+t,j+n]}return x.invert=function(N){var Q=N[0]-t,j=N[1]-n;if(i){var S=j*a+Q*s;Q=Q*a-j*s,j=S}return[Q/d,j/h]},x.stream=function(N){return y&&g===N?y:y=p(v(g=N))},x.postclip=function(N){return arguments.length?(v=N,l=m=c=f=null,_()):v},x.clipExtent=function(N){return arguments.length?(v=N==null?(l=m=c=f=null,At):Tn(l=+N[0][0],m=+N[0][1],c=+N[1][0],f=+N[1][1]),_()):l==null?null:[[l,m],[c,f]]},x.scale=function(N){return arguments.length?(e=+N,_()):e},x.translate=function(N){return arguments.length?(t=+N[0],n=+N[1],_()):[t,n]},x.angle=function(N){return arguments.length?(i=N%360*D,s=Z(i),a=T(i),_()):i*Y},x.reflectX=function(N){return arguments.length?(r=N?-1:1,_()):r<0},x.reflectY=function(N){return arguments.length?(o=N?-1:1,_()):o<0},x.fitExtent=function(N,Q){return Bn(x,N,Q)},x.fitSize=function(N,Q){return Or(x,N,Q)},x.fitWidth=function(N,Q){return Ir(x,N,Q)},x.fitHeight=function(N,Q){return Gr(x,N,Q)},x}function Wr(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Wr.invert=function(e,t){var n=t,r=25,o;do{var i=n*n,a=i*i;n-=o=(n*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))-t)/(1.007226+i*(.015085*3+a*(-.044475*7+.028874*9*i-.005916*11*a)))}while(V(o)>$&&--r>0);return[e/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function dc(){return Ze(Wr).scale(175.295)}function Kr(e,t){return[T(t)*Z(e),Z(t)]}Kr.invert=Dt(fe);function hc(){return Ze(Kr).scale(249.5).clipAngle(90+$)}function Jr(e,t){var n=T(t),r=1+T(e)*n;return[n*Z(e)/r,Z(t)/r]}Jr.invert=Dt(function(e){return 2*ut(e)});function pc(){return Ze(Jr).scale(250).clipAngle(142)}function eo(e,t){return[un(Tr((te+t)/2)),-e]}eo.invert=function(e,t){return[-t,2*ut(Ai(e))-te]};function gc(){var e=fa(eo),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}const xc=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:ua,geoAlbersUsa:nc,geoArea:ls,geoAzimuthalEqualArea:rc,geoAzimuthalEqualAreaRaw:qr,geoAzimuthalEquidistant:oc,geoAzimuthalEquidistantRaw:Ur,geoBounds:ds,geoCentroid:vs,geoCircle:_s,geoClipAntimeridian:pr,geoClipCircle:Ui,geoClipExtent:Ms,geoClipRectangle:Tn,geoConicConformal:ac,geoConicConformalRaw:da,geoConicEqualArea:An,geoConicEqualAreaRaw:la,geoConicEquidistant:cc,geoConicEquidistantRaw:ha,geoContains:Rs,geoDistance:Nn,geoEqualEarth:uc,geoEqualEarthRaw:Yr,geoEquirectangular:sc,geoEquirectangularRaw:Zt,geoGnomonic:mc,geoGnomonicRaw:Xr,geoGraticule:Dr,geoGraticule10:Fs,geoIdentity:fc,geoInterpolate:Ls,geoLength:Yi,geoMercator:ic,geoMercatorRaw:zt,geoNaturalEarth1:dc,geoNaturalEarth1Raw:Wr,geoOrthographic:hc,geoOrthographicRaw:Kr,geoPath:ca,geoProjection:Ze,geoProjectionMutator:Vr,geoRotation:Oi,geoStereographic:pc,geoStereographicRaw:Jr,geoStream:je,geoTransform:qs,geoTransverseMercator:gc,geoTransverseMercatorRaw:eo},Symbol.toStringTag,{value:"Module"}));function yc(e){return e}function vc(e){if(e==null)return yc;var t,n,r=e.scale[0],o=e.scale[1],i=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var m=2,c=s.length,f=new Array(c);for(f[0]=(t+=s[0])*r+i,f[1]=(n+=s[1])*o+a;m<c;)f[m]=s[m],++m;return f}}function _c(e,t){for(var n,r=e.length,o=r-t;o<--r;)n=e[o],e[o++]=e[r],e[r]=n}function bc(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Ho(e,n)})}:Ho(e,t)}function Ho(e,t){var n=t.id,r=t.bbox,o=t.properties==null?{}:t.properties,i=pa(e,t);return n==null&&r==null?{type:"Feature",properties:o,geometry:i}:r==null?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function pa(e,t){var n=vc(e.transform),r=e.arcs;function o(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&_c(f,p)}function i(c){return n(c)}function a(c){for(var f=[],d=0,h=c.length;d<h;++d)o(c[d],f);return f.length<2&&f.push(f[0]),f}function s(c){for(var f=a(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(s)}function m(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(m)};case"Point":d=i(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(i);break;case"LineString":d=a(c.arcs);break;case"MultiLineString":d=c.arcs.map(a);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return m(t)}function wc(e,t){var n={},r={},o={},i=[],a=-1;t.forEach(function(m,c){var f=e.arcs[m<0?~m:m],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++a],t[a]=m,t[c]=d)}),t.forEach(function(m){var c=s(m),f=c[0],d=c[1],h,p;if(h=o[f])if(delete o[h.end],h.push(m),h.end=d,p=r[d]){delete r[p.start];var v=p===h?h:h.concat(p);r[v.start=h.start]=o[v.end=p.end]=v}else r[h.start]=o[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(m),h.start=f,p=o[f]){delete o[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=o[y.end=h.end]=y}else r[h.start]=o[h.end]=h;else h=[m],r[h.start=f]=o[h.end=d]=h});function s(m){var c=e.arcs[m<0?~m:m],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],m<0?[d,f]:[f,d]}function l(m,c){for(var f in m){var d=m[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),i.push(d)}}return l(o,r),l(r,o),t.forEach(function(m){n[m<0?~m:m]||i.push([m])}),i}function qo(e){return pa(e,Nc.apply(this,arguments))}function Nc(e,t,n){var r,o,i;if(arguments.length>1)r=Cc(e,t,n);else for(o=0,r=new Array(i=e.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:wc(e,r)}}function Cc(e,t,n){var r=[],o=[],i;function a(f){var d=f<0?~f:f;(o[d]||(o[d]=[])).push({i:f,g:i})}function s(f){f.forEach(a)}function l(f){f.forEach(s)}function m(f){f.forEach(l)}function c(f){switch(i=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":s(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":m(f.arcs);break}}return c(t),o.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}var jc={value:()=>{}};function to(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rn(n)}function rn(e){this._=e}function Qc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rn.prototype=to.prototype={constructor:rn,on:function(e,t){var n=this._,r=Qc(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=Mc(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Uo(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Uo(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function Mc(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Uo(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=jc,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sr="http://www.w3.org/1999/xhtml";const Yo={svg:"http://www.w3.org/2000/svg",xhtml:Sr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $n(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Yo.hasOwnProperty(t)?{space:Yo[t],local:e}:e}function Sc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sr&&t.documentElement.namespaceURI===Sr?t.createElement(e):t.createElementNS(n,e)}}function Ec(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ga(e){var t=$n(e);return(t.local?Ec:Sc)(t)}function Ac(){}function no(e){return e==null?Ac:function(){return this.querySelector(e)}}function kc(e){typeof e!="function"&&(e=no(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),l,m,c=0;c<a;++c)(l=i[c])&&(m=e.call(l,l.__data__,c,i))&&("__data__"in l&&(m.__data__=l.__data__),s[c]=m);return new he(r,this._parents)}function xa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pc(){return[]}function ya(e){return e==null?Pc:function(){return this.querySelectorAll(e)}}function Zc(e){return function(){var t=e.apply(this,arguments);return t==null?[]:xa(t)}}function Rc(e){typeof e=="function"?e=Zc(e):e=ya(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,m=0;m<s;++m)(l=a[m])&&(r.push(e.call(l,l.__data__,m,a)),o.push(l));return new he(r,o)}function va(e){return function(){return this.matches(e)}}function _a(e){return function(t){return t.matches(e)}}var Fc=Array.prototype.find;function Lc(e){return function(){return Fc.call(this.children,e)}}function Tc(){return this.firstElementChild}function Bc(e){return this.select(e==null?Tc:Lc(typeof e=="function"?e:_a(e)))}var $c=Array.prototype.filter;function Dc(){return this.children}function zc(e){return function(){return $c.call(this.children,e)}}function Oc(e){return this.selectAll(e==null?Dc:zc(typeof e=="function"?e:_a(e)))}function Ic(e){typeof e!="function"&&(e=va(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,m=0;m<a;++m)(l=i[m])&&e.call(l,l.__data__,m,i)&&s.push(l);return new he(r,this._parents)}function ba(e){return new Array(e.length)}function Gc(){return new he(this._enter||this._groups.map(ba),this._parents)}function Pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pn.prototype={constructor:Pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Vc(e){return function(){return e}}function Hc(e,t,n,r,o,i){for(var a=0,s,l=t.length,m=i.length;a<m;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new Pn(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function qc(e,t,n,r,o,i,a){var s,l,m=new Map,c=t.length,f=i.length,d=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(d[s]=h=a.call(l,l.__data__,s,t)+"",m.has(h)?o[s]=l:m.set(h,l));for(s=0;s<f;++s)h=a.call(e,i[s],s,i)+"",(l=m.get(h))?(r[s]=l,l.__data__=i[s],m.delete(h)):n[s]=new Pn(e,i[s]);for(s=0;s<c;++s)(l=t[s])&&m.get(d[s])===l&&(o[s]=l)}function Uc(e){return e.__data__}function Yc(e,t){if(!arguments.length)return Array.from(this,Uc);var n=t?qc:Hc,r=this._parents,o=this._groups;typeof e!="function"&&(e=Vc(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),m=0;m<i;++m){var c=r[m],f=o[m],d=f.length,h=xa(e.call(c,c&&c.__data__,m,r)),p=h.length,v=s[m]=new Array(p),y=a[m]=new Array(p),g=l[m]=new Array(d);n(c,f,v,y,g,h,t);for(var _=0,x=0,N,Q;_<p;++_)if(N=v[_]){for(_>=x&&(x=_+1);!(Q=y[x])&&++x<p;);N._next=Q||null}}return a=new he(a,r),a._enter=s,a._exit=l,a}function Xc(){return new he(this._exit||this._groups.map(ba),this._parents)}function Wc(e,t,n){var r=this.enter(),o=this,i=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(o=t(o)),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Kc(e){if(!(e instanceof he))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l=t[s],m=n[s],c=l.length,f=a[s]=new Array(c),d,h=0;h<c;++h)(d=l[h]||m[h])&&(f[h]=d);for(;s<r;++s)a[s]=t[s];return new he(a,this._parents)}function Jc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function el(e){e||(e=tl);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,l=o[i]=new Array(s),m,c=0;c<s;++c)(m=a[c])&&(l[c]=m);l.sort(t)}return new he(o,this._parents).order()}function tl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rl(){return Array.from(this)}function ol(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function il(){let e=0;for(const t of this)++e;return e}function al(){return!this.node()}function sl(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function cl(e){return function(){this.removeAttribute(e)}}function ll(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ul(e,t){return function(){this.setAttribute(e,t)}}function ml(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function dl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function hl(e,t){var n=$n(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ll:cl:typeof t=="function"?n.local?dl:fl:n.local?ml:ul)(n,t))}function wa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pl(e){return function(){this.style.removeProperty(e)}}function gl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xl(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function yl(e,t,n){return arguments.length>1?this.each((t==null?pl:typeof t=="function"?xl:gl)(e,t,n??"")):st(this.node(),e)}function st(e,t){return e.style.getPropertyValue(t)||wa(e).getComputedStyle(e,null).getPropertyValue(t)}function vl(e){return function(){delete this[e]}}function _l(e,t){return function(){this[e]=t}}function bl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function wl(e,t){return arguments.length>1?this.each((t==null?vl:typeof t=="function"?bl:_l)(e,t)):this.node()[e]}function Na(e){return e.trim().split(/^|\s+/)}function ro(e){return e.classList||new Ca(e)}function Ca(e){this._node=e,this._names=Na(e.getAttribute("class")||"")}Ca.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ja(e,t){for(var n=ro(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Qa(e,t){for(var n=ro(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Nl(e){return function(){ja(this,e)}}function Cl(e){return function(){Qa(this,e)}}function jl(e,t){return function(){(t.apply(this,arguments)?ja:Qa)(this,e)}}function Ql(e,t){var n=Na(e+"");if(arguments.length<2){for(var r=ro(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?jl:t?Nl:Cl)(n,t))}function Ml(){this.textContent=""}function Sl(e){return function(){this.textContent=e}}function El(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Al(e){return arguments.length?this.each(e==null?Ml:(typeof e=="function"?El:Sl)(e)):this.node().textContent}function kl(){this.innerHTML=""}function Pl(e){return function(){this.innerHTML=e}}function Zl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rl(e){return arguments.length?this.each(e==null?kl:(typeof e=="function"?Zl:Pl)(e)):this.node().innerHTML}function Fl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ll(){return this.each(Fl)}function Tl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bl(){return this.each(Tl)}function $l(e){var t=typeof e=="function"?e:ga(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Dl(){return null}function zl(e,t){var n=typeof e=="function"?e:ga(e),r=t==null?Dl:typeof t=="function"?t:no(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ol(){var e=this.parentNode;e&&e.removeChild(this)}function Il(){return this.each(Ol)}function Gl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hl(e){return this.select(e?Vl:Gl)}function ql(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ul(e){return function(t){e.call(this,t,this.__data__)}}function Yl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Xl(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Wl(e,t,n){return function(){var r=this.__on,o,i=Ul(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Kl(e,t,n){var r=Yl(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,m=s.length,c;l<m;++l)for(o=0,c=s[l];o<i;++o)if((a=r[o]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?Wl:Xl,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function Ma(e,t,n){var r=wa(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Jl(e,t){return function(){return Ma(this,e,t)}}function eu(e,t){return function(){return Ma(this,e,t.apply(this,arguments))}}function tu(e,t){return this.each((typeof t=="function"?eu:Jl)(e,t))}function*nu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var Sa=[null];function he(e,t){this._groups=e,this._parents=t}function Ot(){return new he([[document.documentElement]],Sa)}function ru(){return this}he.prototype=Ot.prototype={constructor:he,select:kc,selectAll:Rc,selectChild:Bc,selectChildren:Oc,filter:Ic,data:Yc,enter:Gc,exit:Xc,join:Wc,merge:Kc,selection:ru,order:Jc,sort:el,call:nl,nodes:rl,node:ol,size:il,empty:al,each:sl,attr:hl,style:yl,property:wl,classed:Ql,text:Al,html:Rl,raise:Ll,lower:Bl,append:$l,insert:zl,remove:Il,clone:Hl,datum:ql,on:Kl,dispatch:tu,[Symbol.iterator]:nu};function Be(e){return typeof e=="string"?new he([[document.querySelector(e)]],[document.documentElement]):new he([[e]],Sa)}function ou(e){let t;for(;t=e.sourceEvent;)e=t;return e}function He(e,t){if(e=ou(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function Er(e){e.preventDefault(),e.stopImmediatePropagation()}function iu(e){var t=e.document.documentElement,n=Be(e).on("dragstart.drag",Er,!0);"onselectstart"in t?n.on("selectstart.drag",Er,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function au(e,t){var n=e.document.documentElement,r=Be(e).on("dragstart.drag",null);t&&(r.on("click.drag",Er,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function oo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ea(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function It(){}var Rt=.7,Zn=1/Rt,rt="\\s*([+-]?\\d+)\\s*",Ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",su=/^#([0-9a-f]{3,8})$/,cu=new RegExp("^rgb\\("+[rt,rt,rt]+"\\)$"),lu=new RegExp("^rgb\\("+[ke,ke,ke]+"\\)$"),uu=new RegExp("^rgba\\("+[rt,rt,rt,Ft]+"\\)$"),mu=new RegExp("^rgba\\("+[ke,ke,ke,Ft]+"\\)$"),fu=new RegExp("^hsl\\("+[Ft,ke,ke]+"\\)$"),du=new RegExp("^hsla\\("+[Ft,ke,ke,Ft]+"\\)$"),Xo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oo(It,Lt,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Wo,formatHex:Wo,formatHsl:hu,formatRgb:Ko,toString:Ko});function Wo(){return this.rgb().formatHex()}function hu(){return Aa(this).formatHsl()}function Ko(){return this.rgb().formatRgb()}function Lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=su.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jo(t):n===3?new _e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cu.exec(e))?new _e(t[1],t[2],t[3],1):(t=lu.exec(e))?new _e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uu.exec(e))?Wt(t[1],t[2],t[3],t[4]):(t=mu.exec(e))?Wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fu.exec(e))?ni(t[1],t[2]/100,t[3]/100,1):(t=du.exec(e))?ni(t[1],t[2]/100,t[3]/100,t[4]):Xo.hasOwnProperty(e)?Jo(Xo[e]):e==="transparent"?new _e(NaN,NaN,NaN,0):null}function Jo(e){return new _e(e>>16&255,e>>8&255,e&255,1)}function Wt(e,t,n,r){return r<=0&&(e=t=n=NaN),new _e(e,t,n,r)}function pu(e){return e instanceof It||(e=Lt(e)),e?(e=e.rgb(),new _e(e.r,e.g,e.b,e.opacity)):new _e}function Ar(e,t,n,r){return arguments.length===1?pu(e):new _e(e,t,n,r??1)}function _e(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}oo(_e,Ar,Ea(It,{brighter:function(e){return e=e==null?Zn:Math.pow(Zn,e),new _e(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Rt:Math.pow(Rt,e),new _e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ei,formatHex:ei,formatRgb:ti,toString:ti}));function ei(){return"#"+Yn(this.r)+Yn(this.g)+Yn(this.b)}function ti(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Yn(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function ni(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ae(e,t,n,r)}function Aa(e){if(e instanceof Ae)return new Ae(e.h,e.s,e.l,e.opacity);if(e instanceof It||(e=Lt(e)),!e)return new Ae;if(e instanceof Ae)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new Ae(a,s,l,e.opacity)}function gu(e,t,n,r){return arguments.length===1?Aa(e):new Ae(e,t,n,r??1)}function Ae(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oo(Ae,gu,Ea(It,{brighter:function(e){return e=e==null?Zn:Math.pow(Zn,e),new Ae(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Rt:Math.pow(Rt,e),new Ae(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new _e(Xn(e>=240?e-240:e+120,o,r),Xn(e,o,r),Xn(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Xn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ka=e=>()=>e;function xu(e,t){return function(n){return e+n*t}}function yu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vu(e){return(e=+e)==1?Pa:function(t,n){return n-t?yu(t,n,e):ka(isNaN(t)?n:t)}}function Pa(e,t){var n=t-e;return n?xu(e,n):ka(isNaN(e)?t:e)}const ri=function e(t){var n=vu(t);function r(o,i){var a=n((o=Ar(o)).r,(i=Ar(i)).r),s=n(o.g,i.g),l=n(o.b,i.b),m=Pa(o.opacity,i.opacity);return function(c){return o.r=a(c),o.g=s(c),o.b=l(c),o.opacity=m(c),o+""}}return r.gamma=e,r}(1);function Ve(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var kr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wn=new RegExp(kr.source,"g");function _u(e){return function(){return e}}function bu(e){return function(t){return e(t)+""}}function wu(e,t){var n=kr.lastIndex=Wn.lastIndex=0,r,o,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=kr.exec(e))&&(o=Wn.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Ve(r,o)})),n=Wn.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?bu(l[0].x):_u(t):(t=l.length,function(m){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(m);return s.join("")})}var oi=180/Math.PI,Pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Za(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*oi,skewX:Math.atan(l)*oi,scaleX:a,scaleY:s}}var Kt;function Nu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pr:Za(t.a,t.b,t.c,t.d,t.e,t.f)}function Cu(e){return e==null||(Kt||(Kt=document.createElementNS("http://www.w3.org/2000/svg","g")),Kt.setAttribute("transform",e),!(e=Kt.transform.baseVal.consolidate()))?Pr:(e=e.matrix,Za(e.a,e.b,e.c,e.d,e.e,e.f))}function Ra(e,t,n,r){function o(m){return m.length?m.pop()+" ":""}function i(m,c,f,d,h,p){if(m!==f||c!==d){var v=h.push("translate(",null,t,null,n);p.push({i:v-4,x:Ve(m,f)},{i:v-2,x:Ve(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(m,c,f,d){m!==c?(m-c>180?c+=360:c-m>180&&(m+=360),d.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Ve(m,c)})):c&&f.push(o(f)+"rotate("+c+r)}function s(m,c,f,d){m!==c?d.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Ve(m,c)}):c&&f.push(o(f)+"skewX("+c+r)}function l(m,c,f,d,h,p){if(m!==f||c!==d){var v=h.push(o(h)+"scale(",null,",",null,")");p.push({i:v-4,x:Ve(m,f)},{i:v-2,x:Ve(c,d)})}else(f!==1||d!==1)&&h.push(o(h)+"scale("+f+","+d+")")}return function(m,c){var f=[],d=[];return m=e(m),c=e(c),i(m.translateX,m.translateY,c.translateX,c.translateY,f,d),a(m.rotate,c.rotate,f,d),s(m.skewX,c.skewX,f,d),l(m.scaleX,m.scaleY,c.scaleX,c.scaleY,f,d),m=c=null,function(h){for(var p=-1,v=d.length,y;++p<v;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var ju=Ra(Nu,"px, ","px)","deg)"),Qu=Ra(Cu,", ",")",")"),Mu=1e-12;function ii(e){return((e=Math.exp(e))+1/e)/2}function Su(e){return((e=Math.exp(e))-1/e)/2}function Eu(e){return((e=Math.exp(2*e))-1)/(e+1)}const Au=function e(t,n,r){function o(i,a){var s=i[0],l=i[1],m=i[2],c=a[0],f=a[1],d=a[2],h=c-s,p=f-l,v=h*h+p*p,y,g;if(v<Mu)g=Math.log(d/m)/t,y=function(S){return[s+S*h,l+S*p,m*Math.exp(t*S*g)]};else{var _=Math.sqrt(v),x=(d*d-m*m+r*v)/(2*m*n*_),N=(d*d-m*m-r*v)/(2*d*n*_),Q=Math.log(Math.sqrt(x*x+1)-x),j=Math.log(Math.sqrt(N*N+1)-N);g=(j-Q)/t,y=function(S){var A=S*g,k=ii(Q),B=m/(n*_)*(k*Eu(t*A+Q)-Su(Q));return[s+B*h,l+B*p,m*k/ii(t*A+Q)]}}return y.duration=g*1e3*t/Math.SQRT2,y}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},o}(Math.SQRT2,2,4);var ct=0,_t=0,ft=0,Fa=1e3,Rn,bt,Fn=0,We=0,Dn=0,Tt=typeof performance=="object"&&performance.now?performance:Date,La=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function io(){return We||(La(ku),We=Tt.now()+Dn)}function ku(){We=0}function Ln(){this._call=this._time=this._next=null}Ln.prototype=Ta.prototype={constructor:Ln,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?io():+n)+(t==null?0:+t),!this._next&&bt!==this&&(bt?bt._next=this:Rn=this,bt=this),this._call=e,this._time=n,Zr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zr())}};function Ta(e,t,n){var r=new Ln;return r.restart(e,t,n),r}function Pu(){io(),++ct;for(var e=Rn,t;e;)(t=We-e._time)>=0&&e._call.call(null,t),e=e._next;--ct}function ai(){We=(Fn=Tt.now())+Dn,ct=_t=0;try{Pu()}finally{ct=0,Ru(),We=0}}function Zu(){var e=Tt.now(),t=e-Fn;t>Fa&&(Dn-=t,Fn=e)}function Ru(){for(var e,t=Rn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rn=n);bt=e,Zr(r)}function Zr(e){if(!ct){_t&&(_t=clearTimeout(_t));var t=e-We;t>24?(e<1/0&&(_t=setTimeout(ai,e-Tt.now()-Dn)),ft&&(ft=clearInterval(ft))):(ft||(Fn=Tt.now(),ft=setInterval(Zu,Fa)),ct=1,La(ai))}}function si(e,t,n){var r=new Ln;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Fu=to("start","end","cancel","interrupt"),Lu=[],Ba=0,ci=1,Rr=2,on=3,li=4,Fr=5,an=6;function zn(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Tu(e,n,{name:t,index:r,group:o,on:Fu,tween:Lu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ba})}function ao(e,t){var n=Me(e,t);if(n.state>Ba)throw new Error("too late; already scheduled");return n}function Re(e,t){var n=Me(e,t);if(n.state>on)throw new Error("too late; already running");return n}function Me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Tu(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Ta(i,0,n.time);function i(m){n.state=ci,n.timer.restart(a,n.delay,n.time),n.delay<=m&&a(m-n.delay)}function a(m){var c,f,d,h;if(n.state!==ci)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===on)return si(a);h.state===li?(h.state=an,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=an,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(si(function(){n.state===on&&(n.state=li,n.timer.restart(s,n.delay,n.time),s(m))}),n.state=Rr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rr){for(n.state=on,o=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function s(m){for(var c=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(l),n.state=Fr,1),f=-1,d=o.length;++f<d;)o[f].call(e,c);n.state===Fr&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=an,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function sn(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>Rr&&r.state<Fr,r.state=an,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function Bu(e){return this.each(function(){sn(this,e)})}function $u(e,t){var n,r;return function(){var o=Re(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function Du(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Re(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,m=o.length;l<m;++l)if(o[l].name===t){o[l]=s;break}l===m&&o.push(s)}i.tween=o}}function zu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Me(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?$u:Du)(n,e,t))}function so(e,t,n){var r=e._id;return e.each(function(){var o=Re(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Me(o,r).value[t]}}function $a(e,t){var n;return(typeof t=="number"?Ve:t instanceof Lt?ri:(n=Lt(t))?(t=n,ri):wu)(e,t)}function Ou(e){return function(){this.removeAttribute(e)}}function Iu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gu(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Vu(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Hu(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function qu(e,t,n){var r,o,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s)))}}function Uu(e,t){var n=$n(e),r=n==="transform"?Qu:$a;return this.attrTween(e,typeof t=="function"?(n.local?qu:Hu)(n,r,so(this,"attr."+e,t)):t==null?(n.local?Iu:Ou)(n):(n.local?Vu:Gu)(n,r,t))}function Yu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Xu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wu(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Xu(e,i)),n}return o._value=t,o}function Ku(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Yu(e,i)),n}return o._value=t,o}function Ju(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$n(e);return this.tween(n,(r.local?Wu:Ku)(r,t))}function e0(e,t){return function(){ao(this,e).delay=+t.apply(this,arguments)}}function t0(e,t){return t=+t,function(){ao(this,e).delay=t}}function n0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?e0:t0)(t,e)):Me(this.node(),t).delay}function r0(e,t){return function(){Re(this,e).duration=+t.apply(this,arguments)}}function o0(e,t){return t=+t,function(){Re(this,e).duration=t}}function i0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r0:o0)(t,e)):Me(this.node(),t).duration}function a0(e,t){if(typeof t!="function")throw new Error;return function(){Re(this,e).ease=t}}function s0(e){var t=this._id;return arguments.length?this.each(a0(t,e)):Me(this.node(),t).ease}function c0(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Re(this,e).ease=n}}function l0(e){if(typeof e!="function")throw new Error;return this.each(c0(this._id,e))}function u0(e){typeof e!="function"&&(e=va(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],l,m=0;m<a;++m)(l=i[m])&&e.call(l,l.__data__,m,i)&&s.push(l);return new Oe(r,this._parents,this._name,this._id)}function m0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l=t[s],m=n[s],c=l.length,f=a[s]=new Array(c),d,h=0;h<c;++h)(d=l[h]||m[h])&&(f[h]=d);for(;s<r;++s)a[s]=t[s];return new Oe(a,this._parents,this._name,this._id)}function f0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function d0(e,t,n){var r,o,i=f0(t)?ao:Re;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function h0(e,t){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(e):this.each(d0(n,e,t))}function p0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function g0(){return this.on("end.remove",p0(this._id))}function x0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=no(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],l=s.length,m=i[a]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),m[d]=f,zn(m[d],t,n,d,m,Me(c,n)));return new Oe(i,this._parents,t,n)}function y0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ya(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l=r[s],m=l.length,c,f=0;f<m;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),h,p=Me(c,n),v=0,y=d.length;v<y;++v)(h=d[v])&&zn(h,t,n,v,d,p);i.push(d),a.push(c)}return new Oe(i,a,t,n)}var v0=Ot.prototype.constructor;function _0(){return new v0(this._groups,this._parents)}function b0(e,t){var n,r,o;return function(){var i=st(this,e),a=(this.style.removeProperty(e),st(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function Da(e){return function(){this.style.removeProperty(e)}}function w0(e,t,n){var r,o=n+"",i;return function(){var a=st(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function N0(e,t,n){var r,o,i;return function(){var a=st(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),st(this,e))),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}function C0(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var l=Re(this,e),m=l.on,c=l.value[i]==null?s||(s=Da(t)):void 0;(m!==n||o!==c)&&(r=(n=m).copy()).on(a,o=c),l.on=r}}function j0(e,t,n){var r=(e+="")=="transform"?ju:$a;return t==null?this.styleTween(e,b0(e,r)).on("end.style."+e,Da(e)):typeof t=="function"?this.styleTween(e,N0(e,r,so(this,"style."+e,t))).each(C0(this._id,e)):this.styleTween(e,w0(e,r,t),n).on("end.style."+e,null)}function Q0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function M0(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Q0(e,a,n)),r}return i._value=t,i}function S0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,M0(e,t,n??""))}function E0(e){return function(){this.textContent=e}}function A0(e){return function(){var t=e(this);this.textContent=t??""}}function k0(e){return this.tween("text",typeof e=="function"?A0(so(this,"text",e)):E0(e==null?"":e+""))}function P0(e){return function(t){this.textContent=e.call(this,t)}}function Z0(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&P0(o)),t}return r._value=e,r}function R0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Z0(e))}function F0(){for(var e=this._name,t=this._id,n=za(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,m=0;m<s;++m)if(l=a[m]){var c=Me(l,t);zn(l,e,n,m,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Oe(r,this._parents,e,n)}function L0(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--o===0&&i()}};n.each(function(){var m=Re(this,r),c=m.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),m.on=t}),o===0&&i()})}var T0=0;function Oe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function za(){return++T0}var qe=Ot.prototype;Oe.prototype={constructor:Oe,select:x0,selectAll:y0,filter:u0,merge:m0,selection:_0,transition:F0,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:h0,attr:Uu,attrTween:Ju,style:j0,styleTween:S0,text:k0,textTween:R0,remove:g0,tween:zu,delay:n0,duration:i0,ease:s0,easeVarying:l0,end:L0,[Symbol.iterator]:qe[Symbol.iterator]};function B0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $0={time:null,delay:0,duration:250,ease:B0};function D0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function z0(e){var t,n;e instanceof Oe?(t=e._id,e=e._name):(t=za(),(n=$0).time=io(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,l,m=0;m<s;++m)(l=a[m])&&zn(l,e,t,m,a,n||D0(l,t));return new Oe(r,this._parents,e,t)}Ot.prototype.interrupt=Bu;Ot.prototype.transition=z0;const Jt=e=>()=>e;function O0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function De(e,t,n){this.k=e,this.x=t,this.y=n}De.prototype={constructor:De,scale:function(e){return e===1?this:new De(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new De(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var co=new De(1,0,0);De.prototype;function Kn(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function I0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function G0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ui(){return this.__zoom||co}function V0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function H0(){return navigator.maxTouchPoints||"ontouchstart"in this}function q0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function U0(){var e=I0,t=G0,n=q0,r=V0,o=H0,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Au,m=to("start","zoom","end"),c,f,d,h=500,p=150,v=0,y=10;function g(b){b.property("__zoom",ui).on("wheel.zoom",A).on("mousedown.zoom",k).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(b,w,C,P){var L=b.selection?b.selection():b;L.property("__zoom",ui),b!==L?Q(b,w,C,P):L.interrupt().each(function(){j(this,arguments).event(P).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},g.scaleBy=function(b,w,C,P){g.scaleTo(b,function(){var L=this.__zoom.k,R=typeof w=="function"?w.apply(this,arguments):w;return L*R},C,P)},g.scaleTo=function(b,w,C,P){g.transform(b,function(){var L=t.apply(this,arguments),R=this.__zoom,z=C==null?N(L):typeof C=="function"?C.apply(this,arguments):C,O=R.invert(z),H=typeof w=="function"?w.apply(this,arguments):w;return n(x(_(R,H),z,O),L,a)},C,P)},g.translateBy=function(b,w,C,P){g.transform(b,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),a)},null,P)},g.translateTo=function(b,w,C,P,L){g.transform(b,function(){var R=t.apply(this,arguments),z=this.__zoom,O=P==null?N(R):typeof P=="function"?P.apply(this,arguments):P;return n(co.translate(O[0],O[1]).scale(z.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof C=="function"?-C.apply(this,arguments):-C),R,a)},P,L)};function _(b,w){return w=Math.max(i[0],Math.min(i[1],w)),w===b.k?b:new De(w,b.x,b.y)}function x(b,w,C){var P=w[0]-C[0]*b.k,L=w[1]-C[1]*b.k;return P===b.x&&L===b.y?b:new De(b.k,P,L)}function N(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function Q(b,w,C,P){b.on("start.zoom",function(){j(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(P).end()}).tween("zoom",function(){var L=this,R=arguments,z=j(L,R).event(P),O=t.apply(L,R),H=C==null?N(O):typeof C=="function"?C.apply(L,R):C,X=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),U=L.__zoom,W=typeof w=="function"?w.apply(L,R):w,ge=l(U.invert(H).concat(X/U.k),W.invert(H).concat(X/W.k));return function(xe){if(xe===1)xe=W;else{var be=ge(xe),ne=X/be[2];xe=new De(ne,H[0]-be[0]*ne,H[1]-be[1]*ne)}z.zoom(null,xe)}})}function j(b,w,C){return!C&&b.__zooming||new S(b,w)}function S(b,w){this.that=b,this.args=w,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,w),this.taps=0}S.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,w){return this.mouse&&b!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var w=Be(this.that).datum();m.call(b,this.that,new O0(b,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:m}),w)}};function A(b,...w){if(!e.apply(this,arguments))return;var C=j(this,w).event(b),P=this.__zoom,L=Math.max(i[0],Math.min(i[1],P.k*Math.pow(2,r.apply(this,arguments)))),R=He(b);if(C.wheel)(C.mouse[0][0]!==R[0]||C.mouse[0][1]!==R[1])&&(C.mouse[1]=P.invert(C.mouse[0]=R)),clearTimeout(C.wheel);else{if(P.k===L)return;C.mouse=[R,P.invert(R)],sn(this),C.start()}dt(b),C.wheel=setTimeout(z,p),C.zoom("mouse",n(x(_(P,L),C.mouse[0],C.mouse[1]),C.extent,a));function z(){C.wheel=null,C.end()}}function k(b,...w){if(d||!e.apply(this,arguments))return;var C=j(this,w,!0).event(b),P=Be(b.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",X,!0),L=He(b,R),R=b.currentTarget,z=b.clientX,O=b.clientY;iu(b.view),Kn(b),C.mouse=[L,this.__zoom.invert(L)],sn(this),C.start();function H(U){if(dt(U),!C.moved){var W=U.clientX-z,ge=U.clientY-O;C.moved=W*W+ge*ge>v}C.event(U).zoom("mouse",n(x(C.that.__zoom,C.mouse[0]=He(U,R),C.mouse[1]),C.extent,a))}function X(U){P.on("mousemove.zoom mouseup.zoom",null),au(U.view,C.moved),dt(U),C.event(U).end()}}function B(b,...w){if(e.apply(this,arguments)){var C=this.__zoom,P=He(b.changedTouches?b.changedTouches[0]:b,this),L=C.invert(P),R=C.k*(b.shiftKey?.5:2),z=n(x(_(C,R),P,L),t.apply(this,w),a);dt(b),s>0?Be(this).transition().duration(s).call(Q,z,P,b):Be(this).call(g.transform,z,P,b)}}function F(b,...w){if(e.apply(this,arguments)){var C=b.touches,P=C.length,L=j(this,w,b.changedTouches.length===P).event(b),R,z,O,H;for(Kn(b),z=0;z<P;++z)O=C[z],H=He(O,this),H=[H,this.__zoom.invert(H),O.identifier],L.touch0?!L.touch1&&L.touch0[2]!==H[2]&&(L.touch1=H,L.taps=0):(L.touch0=H,R=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),R&&(L.taps<2&&(f=H[0],c=setTimeout(function(){c=null},h)),sn(this),L.start())}}function G(b,...w){if(this.__zooming){var C=j(this,w).event(b),P=b.changedTouches,L=P.length,R,z,O,H;for(dt(b),R=0;R<L;++R)z=P[R],O=He(z,this),C.touch0&&C.touch0[2]===z.identifier?C.touch0[0]=O:C.touch1&&C.touch1[2]===z.identifier&&(C.touch1[0]=O);if(z=C.that.__zoom,C.touch1){var X=C.touch0[0],U=C.touch0[1],W=C.touch1[0],ge=C.touch1[1],xe=(xe=W[0]-X[0])*xe+(xe=W[1]-X[1])*xe,be=(be=ge[0]-U[0])*be+(be=ge[1]-U[1])*be;z=_(z,Math.sqrt(xe/be)),O=[(X[0]+W[0])/2,(X[1]+W[1])/2],H=[(U[0]+ge[0])/2,(U[1]+ge[1])/2]}else if(C.touch0)O=C.touch0[0],H=C.touch0[1];else return;C.zoom("touch",n(x(z,O,H),C.extent,a))}}function q(b,...w){if(this.__zooming){var C=j(this,w).event(b),P=b.changedTouches,L=P.length,R,z;for(Kn(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),R=0;R<L;++R)z=P[R],C.touch0&&C.touch0[2]===z.identifier?delete C.touch0:C.touch1&&C.touch1[2]===z.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(z=He(z,this),Math.hypot(f[0]-z[0],f[1]-z[1])<y)){var O=Be(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return g.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Jt(+b),g):r},g.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Jt(!!b),g):e},g.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:Jt(!!b),g):o},g.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Jt([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),g):t},g.scaleExtent=function(b){return arguments.length?(i[0]=+b[0],i[1]=+b[1],g):[i[0],i[1]]},g.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],g):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},g.constrain=function(b){return arguments.length?(n=b,g):n},g.duration=function(b){return arguments.length?(s=+b,g):s},g.interpolate=function(b){return arguments.length?(l=b,g):l},g.on=function(){var b=m.on.apply(m,arguments);return b===m?g:b},g.clickDistance=function(b){return arguments.length?(v=(b=+b)*b,g):Math.sqrt(v)},g.tapDistance=function(b){return arguments.length?(y=+b,g):y},g}function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mi(Object(n),!0).forEach(function(r){Y0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lr(e){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lr(e)}function Y0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function X0(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Ce(e,t){if(e==null)return{};var n=X0(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ie(e,t){return W0(e)||K0(e,t)||J0(e,t)||em()}function W0(e){if(Array.isArray(e))return e}function K0(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,s;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(l){i=!0,s=l}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function J0(e,t){if(e){if(typeof e=="string")return fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fi(e,t)}}function fi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function em(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tm=["width","height","projection","projectionConfig"],nm=ca,rm=Ce(xc,["geoPath"]),Fe=M.createContext(),om=function(t){var n=t.projectionConfig,r=n===void 0?{}:n,o=t.projection,i=o===void 0?"geoEqualEarth":o,a=t.width,s=a===void 0?800:a,l=t.height,m=l===void 0?600:l,c=typeof i=="function";if(c)return i;var f=rm[i]().translate([s/2,m/2]),d=[f.center?"center":null,f.rotate?"rotate":null,f.scale?"scale":null,f.parallels?"parallels":null];return d.forEach(function(h){h&&(f=f[h](r[h]||f[h]()))}),f},Oa=function(t){var n=t.width,r=t.height,o=t.projection,i=t.projectionConfig,a=Ce(t,tm),s=i.center||[],l=ie(s,2),m=l[0],c=l[1],f=i.rotate||[],d=ie(f,3),h=d[0],p=d[1],v=d[2],y=i.parallels||[],g=ie(y,2),_=g[0],x=g[1],N=i.scale||null,Q=M.useMemo(function(){return om({projectionConfig:{center:m||m===0||c||c===0?[m,c]:null,rotate:h||h===0||p||p===0?[h,p,v]:null,parallels:_||_===0||x||x===0?[_,x]:null,scale:N},projection:o,width:n,height:r})},[n,r,o,m,c,h,p,v,_,x,N]),j=M.useCallback(Q,[Q]),S=M.useMemo(function(){return{width:n,height:r,projection:j,path:nm().projection(j)}},[n,r,j]);return re.createElement(Fe.Provider,pe({value:S},a))};Oa.propTypes={width:E.number,height:E.number,projection:E.oneOfType([E.string,E.func]),projectionConfig:E.object};var im=["width","height","projection","projectionConfig","className"],Gt=M.forwardRef(function(e,t){var n=e.width,r=n===void 0?800:n,o=e.height,i=o===void 0?600:o,a=e.projection,s=a===void 0?"geoEqualEarth":a,l=e.projectionConfig,m=l===void 0?{}:l,c=e.className,f=c===void 0?"":c,d=Ce(e,im);return re.createElement(Oa,{width:r,height:i,projection:s,projectionConfig:m},re.createElement("svg",pe({ref:t,viewBox:"0 0 ".concat(r," ").concat(i),className:"rsm-svg ".concat(f)},d)))});Gt.displayName="ComposableMap";Gt.propTypes={width:E.number,height:E.number,projection:E.oneOfType([E.string,E.func]),projectionConfig:E.object,className:E.string};function di(e,t,n){var r=(e*n.k-e)/2,o=(t*n.k-t)/2;return[e/2-(r+n.x)/n.k,t/2-(o+n.y)/n.k]}function am(e){return fetch(e).then(function(t){if(!t.ok)throw Error(t.statusText);return t.json()}).catch(function(t){console.log("There was a problem when fetching the data: ",t)})}function hi(e,t){var n=e.type==="Topology";if(!n)return t?t(e.features||e):e.features||e;var r=bc(e,e.objects[Object.keys(e.objects)[0]]).features;return t?t(r):r}function pi(e){var t=e.type==="Topology";if(!t)return null;var n=qo(e,e.objects[Object.keys(e.objects)[0]],function(o,i){return o===i}),r=qo(e,e.objects[Object.keys(e.objects)[0]],function(o,i){return o!==i});return{outline:n,borders:r}}function sm(e,t,n){return e&&t?{outline:tt(tt({},e),{},{rsmKey:"outline",svgPath:n(e)}),borders:tt(tt({},t),{},{rsmKey:"borders",svgPath:n(t)})}:{}}function cm(e,t){return e?e.map(function(n,r){return tt(tt({},n),{},{rsmKey:"geo-".concat(r),svgPath:t(n)})}):[]}function lm(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5,r=Array.isArray(n)?n:[n,n],o=e/2*r[0],i=t/2*r[1];return"M".concat(0,",",0," Q",-e/2-o,",").concat(-t/2+i," ").concat(-e,",").concat(-t)}function um(e){return typeof e=="string"}function mm(e){var t=e.geography,n=e.parseGeographies,r=M.useContext(Fe),o=r.path,i=M.useState({}),a=ie(i,2),s=a[0],l=a[1];M.useEffect(function(){(typeof window>"u"?"undefined":Lr(window))!=="undefined"&&t&&(um(t)?am(t).then(function(h){h&&l({geographies:hi(h,n),mesh:pi(h)})}):l({geographies:hi(t,n),mesh:pi(t)}))},[t,n]);var m=M.useMemo(function(){var h=s.mesh||{},p=sm(h.outline,h.borders,o);return{geographies:cm(s.geographies,o),outline:p.outline,borders:p.borders}},[s,o]),c=m.geographies,f=m.outline,d=m.borders;return{geographies:c,outline:f,borders:d}}var fm=["geography","children","parseGeographies","className"],lt=M.forwardRef(function(e,t){var n=e.geography,r=e.children,o=e.parseGeographies,i=e.className,a=i===void 0?"":i,s=Ce(e,fm),l=M.useContext(Fe),m=l.path,c=l.projection,f=mm({geography:n,parseGeographies:o}),d=f.geographies,h=f.outline,p=f.borders;return re.createElement("g",pe({ref:t,className:"rsm-geographies ".concat(a)},s),d&&d.length>0&&r({geographies:d,outline:h,borders:p,path:m,projection:c}))});lt.displayName="Geographies";lt.propTypes={geography:E.oneOfType([E.string,E.object,E.array]),children:E.func,parseGeographies:E.func,className:E.string};var dm=["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],lo=M.forwardRef(function(e,t){var n=e.geography,r=e.onMouseEnter,o=e.onMouseLeave,i=e.onMouseDown,a=e.onMouseUp,s=e.onFocus,l=e.onBlur,m=e.style,c=m===void 0?{}:m,f=e.className,d=f===void 0?"":f,h=Ce(e,dm),p=M.useState(!1),v=ie(p,2),y=v[0],g=v[1],_=M.useState(!1),x=ie(_,2),N=x[0],Q=x[1];function j(G){Q(!0),r&&r(G)}function S(G){Q(!1),y&&g(!1),o&&o(G)}function A(G){Q(!0),s&&s(G)}function k(G){Q(!1),y&&g(!1),l&&l(G)}function B(G){g(!0),i&&i(G)}function F(G){g(!1),a&&a(G)}return re.createElement("path",pe({ref:t,tabIndex:"0",className:"rsm-geography ".concat(d),d:n.svgPath,onMouseEnter:j,onMouseLeave:S,onFocus:A,onBlur:k,onMouseDown:B,onMouseUp:F,style:c[y||N?y?"pressed":"hover":"default"]},h))});lo.displayName="Geography";lo.propTypes={geography:E.object,onMouseEnter:E.func,onMouseLeave:E.func,onMouseDown:E.func,onMouseUp:E.func,onFocus:E.func,onBlur:E.func,style:E.object,className:E.string};var uo=M.memo(lo),hm=["fill","stroke","step","className"],mo=M.forwardRef(function(e,t){var n=e.fill,r=n===void 0?"transparent":n,o=e.stroke,i=o===void 0?"currentcolor":o,a=e.step,s=a===void 0?[10,10]:a,l=e.className,m=l===void 0?"":l,c=Ce(e,hm),f=M.useContext(Fe),d=f.path;return re.createElement("path",pe({ref:t,d:d(Dr().step(s)()),fill:r,stroke:i,className:"rsm-graticule ".concat(m)},c))});mo.displayName="Graticule";mo.propTypes={fill:E.string,stroke:E.string,step:E.array,className:E.string};M.memo(mo);var pm=["value"],gm=M.createContext(),xm={x:0,y:0,k:1,transformString:"translate(0 0) scale(1)"},Ia=function(t){var n=t.value,r=n===void 0?xm:n,o=Ce(t,pm);return re.createElement(gm.Provider,pe({value:r},o))};Ia.propTypes={x:E.number,y:E.number,k:E.number,transformString:E.string};function ym(e){var t=e.center,n=e.filterZoomEvent,r=e.onMoveStart,o=e.onMoveEnd,i=e.onMove,a=e.translateExtent,s=a===void 0?[[-1/0,-1/0],[1/0,1/0]]:a,l=e.scaleExtent,m=l===void 0?[1,8]:l,c=e.zoom,f=c===void 0?1:c,d=M.useContext(Fe),h=d.width,p=d.height,v=d.projection,y=ie(t,2),g=y[0],_=y[1],x=M.useState({x:0,y:0,k:1}),N=ie(x,2),Q=N[0],j=N[1],S=M.useRef({x:0,y:0,k:1}),A=M.useRef(),k=M.useRef(),B=M.useRef(!1),F=ie(s,2),G=F[0],q=F[1],b=ie(G,2),w=b[0],C=b[1],P=ie(q,2),L=P[0],R=P[1],z=ie(m,2),O=z[0],H=z[1];return M.useEffect(function(){var X=Be(A.current);function U(ne){!r||B.current||r({coordinates:v.invert(di(h,p,ne.transform)),zoom:ne.transform.k},ne)}function W(ne){if(!B.current){var Ie=ne.transform,mt=ne.sourceEvent;j({x:Ie.x,y:Ie.y,k:Ie.k,dragging:mt}),i&&i({x:Ie.x,y:Ie.y,zoom:Ie.k,dragging:mt},ne)}}function ge(ne){if(B.current){B.current=!1;return}var Ie=v.invert(di(h,p,ne.transform)),mt=ie(Ie,2),po=mt[0],go=mt[1];S.current={x:po,y:go,k:ne.transform.k},o&&o({coordinates:[po,go],zoom:ne.transform.k},ne)}function xe(ne){return n?n(ne):ne?!ne.ctrlKey&&!ne.button:!1}var be=U0().filter(xe).scaleExtent([O,H]).translateExtent([[w,C],[L,R]]).on("start",U).on("zoom",W).on("end",ge);k.current=be,X.call(be)},[h,p,w,C,L,R,O,H,v,r,i,o,n]),M.useEffect(function(){if(!(g===S.current.x&&_===S.current.y&&f===S.current.k)){var X=v([g,_]),U=X[0]*f,W=X[1]*f,ge=Be(A.current);B.current=!0,ge.call(k.current.transform,co.translate(h/2-U,p/2-W).scale(f)),j({x:h/2-U,y:p/2-W,k:f}),S.current={x:g,y:_,k:f}}},[g,_,f,h,p,v]),{mapRef:A,position:Q,transformString:"translate(".concat(Q.x," ").concat(Q.y,") scale(").concat(Q.k,")")}}var vm=["center","zoom","minZoom","maxZoom","translateExtent","filterZoomEvent","onMoveStart","onMove","onMoveEnd","className"],On=M.forwardRef(function(e,t){var n=e.center,r=n===void 0?[0,0]:n,o=e.zoom,i=o===void 0?1:o,a=e.minZoom,s=a===void 0?1:a,l=e.maxZoom,m=l===void 0?8:l,c=e.translateExtent,f=e.filterZoomEvent,d=e.onMoveStart,h=e.onMove,p=e.onMoveEnd,v=e.className,y=Ce(e,vm),g=M.useContext(Fe),_=g.width,x=g.height,N=ym({center:r,filterZoomEvent:f,onMoveStart:d,onMove:h,onMoveEnd:p,scaleExtent:[s,m],translateExtent:c,zoom:i}),Q=N.mapRef,j=N.transformString,S=N.position;return re.createElement(Ia,{value:{x:S.x,y:S.y,k:S.k,transformString:j}},re.createElement("g",{ref:Q},re.createElement("rect",{width:_,height:x,fill:"transparent"}),re.createElement("g",pe({ref:t,transform:j,className:"rsm-zoomable-group ".concat(v)},y))))});On.displayName="ZoomableGroup";On.propTypes={center:E.array,zoom:E.number,minZoom:E.number,maxZoom:E.number,translateExtent:E.arrayOf(E.array),onMoveStart:E.func,onMove:E.func,onMoveEnd:E.func,className:E.string};var _m=["id","fill","stroke","strokeWidth","className"],fo=M.forwardRef(function(e,t){var n=e.id,r=n===void 0?"rsm-sphere":n,o=e.fill,i=o===void 0?"transparent":o,a=e.stroke,s=a===void 0?"currentcolor":a,l=e.strokeWidth,m=l===void 0?.5:l,c=e.className,f=c===void 0?"":c,d=Ce(e,_m),h=M.useContext(Fe),p=h.path,v=M.useMemo(function(){return p({type:"Sphere"})},[p]);return re.createElement(M.Fragment,null,re.createElement("defs",null,re.createElement("clipPath",{id:r},re.createElement("path",{d:v}))),re.createElement("path",pe({ref:t,d:v,fill:i,stroke:s,strokeWidth:m,style:{pointerEvents:"none"},className:"rsm-sphere ".concat(f)},d)))});fo.displayName="Sphere";fo.propTypes={id:E.string,fill:E.string,stroke:E.string,strokeWidth:E.number,className:E.string};M.memo(fo);var bm=["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],In=M.forwardRef(function(e,t){var n=e.coordinates,r=e.children,o=e.onMouseEnter,i=e.onMouseLeave,a=e.onMouseDown,s=e.onMouseUp,l=e.onFocus,m=e.onBlur,c=e.style,f=c===void 0?{}:c,d=e.className,h=d===void 0?"":d,p=Ce(e,bm),v=M.useContext(Fe),y=v.projection,g=M.useState(!1),_=ie(g,2),x=_[0],N=_[1],Q=M.useState(!1),j=ie(Q,2),S=j[0],A=j[1],k=y(n),B=ie(k,2),F=B[0],G=B[1];function q(R){A(!0),o&&o(R)}function b(R){A(!1),x&&N(!1),i&&i(R)}function w(R){A(!0),l&&l(R)}function C(R){A(!1),x&&N(!1),m&&m(R)}function P(R){N(!0),a&&a(R)}function L(R){N(!1),s&&s(R)}return re.createElement("g",pe({ref:t,transform:"translate(".concat(F,", ").concat(G,")"),className:"rsm-marker ".concat(h),onMouseEnter:q,onMouseLeave:b,onFocus:w,onBlur:C,onMouseDown:P,onMouseUp:L,style:f[x||S?x?"pressed":"hover":"default"]},p),r)});In.displayName="Marker";In.propTypes={coordinates:E.array,children:E.oneOfType([E.node,E.arrayOf(E.node)]),onMouseEnter:E.func,onMouseLeave:E.func,onMouseDown:E.func,onMouseUp:E.func,onFocus:E.func,onBlur:E.func,style:E.object,className:E.string};var wm=["from","to","coordinates","stroke","strokeWidth","fill","className"],Ga=M.forwardRef(function(e,t){var n=e.from,r=n===void 0?[0,0]:n,o=e.to,i=o===void 0?[0,0]:o,a=e.coordinates,s=e.stroke,l=s===void 0?"currentcolor":s,m=e.strokeWidth,c=m===void 0?3:m,f=e.fill,d=f===void 0?"transparent":f,h=e.className,p=h===void 0?"":h,v=Ce(e,wm),y=M.useContext(Fe),g=y.path,_={type:"LineString",coordinates:a||[r,i]};return re.createElement("path",pe({ref:t,d:g(_),className:"rsm-line ".concat(p),stroke:l,strokeWidth:c,fill:d},v))});Ga.displayName="Line";Ga.propTypes={from:E.array,to:E.array,coordinates:E.array,stroke:E.string,strokeWidth:E.number,fill:E.string,className:E.string};var Nm=["subject","children","connectorProps","dx","dy","curve","className"],Va=M.forwardRef(function(e,t){var n=e.subject,r=e.children,o=e.connectorProps,i=e.dx,a=i===void 0?30:i,s=e.dy,l=s===void 0?30:s,m=e.curve,c=m===void 0?0:m,f=e.className,d=f===void 0?"":f,h=Ce(e,Nm),p=M.useContext(Fe),v=p.projection,y=v(n),g=ie(y,2),_=g[0],x=g[1],N=lm(a,l,c);return re.createElement("g",pe({ref:t,transform:"translate(".concat(_+a,", ").concat(x+l,")"),className:"rsm-annotation ".concat(d)},h),re.createElement("path",pe({d:N,fill:"transparent",stroke:"#000"},o)),r)});Va.displayName="Annotation";Va.propTypes={subject:E.array,children:E.oneOfType([E.node,E.arrayOf(E.node)]),dx:E.number,dy:E.number,curve:E.number,connectorProps:E.object,className:E.string};const cn=[{code:"84",name:"Auvergne-Rhne-Alpes",capital:"Lyon",population:8078652,area_km2:69711,departments:["01","03","07","15","26","38","42","43","63","69","73","74"],climate:"continental",description:"A diverse region featuring the French Alps, the Rhne Valley, and historic Lyon. Known for gastronomy, outdoor sports, and a strong economy."},{code:"27",name:"Bourgogne-Franche-Comt",capital:"Dijon",population:2805580,area_km2:47784,departments:["21","25","39","58","70","71","89","90"],climate:"continental",description:"Famous for Burgundy wines, medieval heritage, and the Jura mountains. A region of rolling hills, historic towns, and rich culinary traditions."},{code:"53",name:"Bretagne",capital:"Rennes",population:3373835,area_km2:27208,departments:["22","29","35","56"],climate:"oceanic",description:"A Celtic peninsula with dramatic coastlines, rich maritime heritage, and distinctive culture. Known for seafood, cider, and medieval villages."},{code:"24",name:"Centre-Val de Loire",capital:"Orlans",population:2576252,area_km2:39151,departments:["18","28","36","37","41","45"],climate:"semi-oceanic",description:"The heart of France featuring magnificent Loire Valley chteaux, vineyards, and a gentle landscape. Rich in history and royal heritage."},{code:"94",name:"Corse",capital:"Ajaccio",population:344679,area_km2:8680,departments:["2A","2B"],climate:"mediterranean",description:'The "Island of Beauty" with stunning mountains, beaches, and unique culture. A Mediterranean paradise with strong local traditions.'},{code:"44",name:"Grand Est",capital:"Strasbourg",population:5561287,area_km2:57433,departments:["08","10","51","52","54","55","57","67","68","88"],climate:"continental",description:"A region blending French and Germanic influences. Home to Strasbourg, Alsatian wine routes, and the Vosges mountains."},{code:"32",name:"Hauts-de-France",capital:"Lille",population:6009976,area_km2:31813,departments:["02","59","60","62","80"],climate:"oceanic",description:"Northern France with Flemish heritage, cathedral cities, and WWI memorial sites. A dynamic region close to Paris, Belgium, and the UK."},{code:"11",name:"le-de-France",capital:"Paris",population:12271794,area_km2:12012,departments:["75","77","78","91","92","93","94","95"],climate:"semi-oceanic",description:"The Paris region - the economic, cultural, and political heart of France. World-class museums, historic monuments, and cosmopolitan lifestyle."},{code:"28",name:"Normandie",capital:"Rouen",population:3327477,area_km2:29907,departments:["14","27","50","61","76"],climate:"oceanic",description:"Historic region of D-Day beaches, medieval abbeys, and apple orchards. Known for Camembert, cider, and impressionist landscapes."},{code:"75",name:"Nouvelle-Aquitaine",capital:"Bordeaux",population:6033952,area_km2:84036,departments:["16","17","19","23","24","33","40","47","64","79","86","87"],climate:"oceanic",description:"The largest region in France, featuring Bordeaux wines, Atlantic beaches, the Dordogne, and the Basque Country. Excellent quality of life."},{code:"76",name:"Occitanie",capital:"Toulouse",population:5973969,area_km2:72724,departments:["09","11","12","30","31","32","34","46","48","65","66","81","82"],climate:"mediterranean",description:"Southern France from the Pyrenees to the Mediterranean. Toulouse aerospace, Cathar castles, beaches, and vibrant cities."},{code:"52",name:"Pays de la Loire",capital:"Nantes",population:3838614,area_km2:32082,departments:["44","49","53","72","85"],climate:"oceanic",description:"Atlantic coast region with dynamic Nantes, Loire Valley vineyards, and charming coastal towns. Growing tech hub with high quality of life."},{code:"93",name:"Provence-Alpes-Cte d'Azur",capital:"Marseille",population:5081101,area_km2:31400,departments:["04","05","06","13","83","84"],climate:"mediterranean",description:"The French Riviera, lavender fields of Provence, and Alpine peaks. Mediterranean lifestyle, historic cities, and world-famous coastline."}],ho=[{code:"01",name:"Ain",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Bourg-en-Bresse",population:656955,area_km2:5762,major_cities:["Bourg-en-Bresse","Oyonnax","Ambrieu-en-Bugey"]},{code:"03",name:"Allier",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Moulins",population:337171,area_km2:7340,major_cities:["Montluon","Vichy","Moulins"]},{code:"07",name:"Ardche",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Privas",population:328278,area_km2:5529,major_cities:["Annonay","Aubenas","Privas"]},{code:"15",name:"Cantal",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Aurillac",population:144692,area_km2:5726,major_cities:["Aurillac","Saint-Flour","Mauriac"]},{code:"26",name:"Drme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Valence",population:516762,area_km2:6530,major_cities:["Valence","Montlimar","Romans-sur-Isre"]},{code:"38",name:"Isre",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Grenoble",population:1271166,area_km2:7431,major_cities:["Grenoble","Saint-Martin-d'Hres","chirolles"]},{code:"42",name:"Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Saint-tienne",population:765634,area_km2:4781,major_cities:["Saint-tienne","Roanne","Saint-Chamond"]},{code:"43",name:"Haute-Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Le Puy-en-Velay",population:227339,area_km2:4977,major_cities:["Le Puy-en-Velay","Monistrol-sur-Loire","Yssingeaux"]},{code:"63",name:"Puy-de-Dme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Clermont-Ferrand",population:662152,area_km2:7970,major_cities:["Clermont-Ferrand","Cournon-d'Auvergne","Riom"]},{code:"69",name:"Rhne",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Lyon",population:1876051,area_km2:3249,major_cities:["Lyon","Villeurbanne","Vnissieux"]},{code:"73",name:"Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Chambry",population:440347,area_km2:6028,major_cities:["Chambry","Aix-les-Bains","Albertville"]},{code:"74",name:"Haute-Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Annecy",population:826105,area_km2:4388,major_cities:["Annecy","Thonon-les-Bains","Annemasse"]},{code:"21",name:"Cte-d'Or",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Dijon",population:534124,area_km2:8763,major_cities:["Dijon","Beaune","Chenve"]},{code:"25",name:"Doubs",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Besanon",population:543974,area_km2:5234,major_cities:["Besanon","Montbliard","Pontarlier"]},{code:"39",name:"Jura",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Lons-le-Saunier",population:260681,area_km2:4999,major_cities:["Lons-le-Saunier","Dole","Saint-Claude"]},{code:"58",name:"Nivre",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Nevers",population:204452,area_km2:6817,major_cities:["Nevers","Cosne-Cours-sur-Loire","Varennes-Vauzelles"]},{code:"70",name:"Haute-Sane",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Vesoul",population:235313,area_km2:5360,major_cities:["Vesoul","Hricourt","Lure"]},{code:"71",name:"Sane-et-Loire",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Mcon",population:551493,area_km2:8575,major_cities:["Chalon-sur-Sane","Mcon","Le Creusot"]},{code:"89",name:"Yonne",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Auxerre",population:338291,area_km2:7427,major_cities:["Auxerre","Sens","Joigny"]},{code:"90",name:"Territoire de Belfort",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Belfort",population:137252,area_km2:610,major_cities:["Belfort","Delle","Valdoie"]},{code:"22",name:"Ctes-d'Armor",region_code:"53",region_name:"Bretagne",prefecture:"Saint-Brieuc",population:598953,area_km2:6878,major_cities:["Saint-Brieuc","Lannion","Dinan"]},{code:"29",name:"Finistre",region_code:"53",region_name:"Bretagne",prefecture:"Quimper",population:915090,area_km2:6733,major_cities:["Brest","Quimper","Concarneau"]},{code:"35",name:"Ille-et-Vilaine",region_code:"53",region_name:"Bretagne",prefecture:"Rennes",population:1082052,area_km2:6775,major_cities:["Rennes","Saint-Malo","Fougres"]},{code:"56",name:"Morbihan",region_code:"53",region_name:"Bretagne",prefecture:"Vannes",population:777740,area_km2:6823,major_cities:["Lorient","Vannes","Lanester"]},{code:"18",name:"Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Bourges",population:302306,area_km2:7235,major_cities:["Bourges","Vierzon","Saint-Amand-Montrond"]},{code:"28",name:"Eure-et-Loir",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chartres",population:433233,area_km2:5880,major_cities:["Chartres","Dreux","Luc"]},{code:"36",name:"Indre",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chteauroux",population:220530,area_km2:6791,major_cities:["Chteauroux","Issoudun","Dols"]},{code:"37",name:"Indre-et-Loire",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Tours",population:610079,area_km2:6127,major_cities:["Tours","Jou-ls-Tours","Saint-Cyr-sur-Loire"]},{code:"41",name:"Loir-et-Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Blois",population:331915,area_km2:6343,major_cities:["Blois","Vendme","Romorantin-Lanthenay"]},{code:"45",name:"Loiret",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Orlans",population:678189,area_km2:6775,major_cities:["Orlans","Olivet","Saint-Jean-de-Braye"]},{code:"2A",name:"Corse-du-Sud",region_code:"94",region_name:"Corse",prefecture:"Ajaccio",population:159622,area_km2:4014,major_cities:["Ajaccio","Porto-Vecchio","Propriano"]},{code:"2B",name:"Haute-Corse",region_code:"94",region_name:"Corse",prefecture:"Bastia",population:185057,area_km2:4666,major_cities:["Bastia","Calvi","Corte"]},{code:"08",name:"Ardennes",region_code:"44",region_name:"Grand Est",prefecture:"Charleville-Mzires",population:270582,area_km2:5229,major_cities:["Charleville-Mzires","Sedan","Rethel"]},{code:"10",name:"Aube",region_code:"44",region_name:"Grand Est",prefecture:"Troyes",population:310242,area_km2:6004,major_cities:["Troyes","Romilly-sur-Seine","La Chapelle-Saint-Luc"]},{code:"51",name:"Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chlons-en-Champagne",population:566855,area_km2:8162,major_cities:["Reims","Chlons-en-Champagne","pernay"]},{code:"52",name:"Haute-Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chaumont",population:172512,area_km2:6211,major_cities:["Chaumont","Saint-Dizier","Langres"]},{code:"54",name:"Meurthe-et-Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Nancy",population:733481,area_km2:5246,major_cities:["Nancy","Vanduvre-ls-Nancy","Lunville"]},{code:"55",name:"Meuse",region_code:"44",region_name:"Grand Est",prefecture:"Bar-le-Duc",population:184083,area_km2:6211,major_cities:["Bar-le-Duc","Verdun","Commercy"]},{code:"57",name:"Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Metz",population:1043522,area_km2:6216,major_cities:["Metz","Thionville","Forbach"]},{code:"67",name:"Bas-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Strasbourg",population:1140939,area_km2:4755,major_cities:["Strasbourg","Haguenau","Schiltigheim"]},{code:"68",name:"Haut-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Colmar",population:764030,area_km2:3525,major_cities:["Mulhouse","Colmar","Saint-Louis"]},{code:"88",name:"Vosges",region_code:"44",region_name:"Grand Est",prefecture:"pinal",population:367673,area_km2:5874,major_cities:["pinal","Saint-Di-des-Vosges","Grardmer"]},{code:"02",name:"Aisne",region_code:"32",region_name:"Hauts-de-France",prefecture:"Laon",population:531345,area_km2:7369,major_cities:["Saint-Quentin","Soissons","Laon"]},{code:"59",name:"Nord",region_code:"32",region_name:"Hauts-de-France",prefecture:"Lille",population:2608346,area_km2:5743,major_cities:["Lille","Roubaix","Tourcoing"]},{code:"60",name:"Oise",region_code:"32",region_name:"Hauts-de-France",prefecture:"Beauvais",population:829419,area_km2:5860,major_cities:["Beauvais","Compigne","Creil"]},{code:"62",name:"Pas-de-Calais",region_code:"32",region_name:"Hauts-de-France",prefecture:"Arras",population:1465278,area_km2:6671,major_cities:["Calais","Boulogne-sur-Mer","Arras"]},{code:"80",name:"Somme",region_code:"32",region_name:"Hauts-de-France",prefecture:"Amiens",population:571632,area_km2:6170,major_cities:["Amiens","Abbeville","Albert"]},{code:"75",name:"Paris",region_code:"11",region_name:"le-de-France",prefecture:"Paris",population:2145906,area_km2:105,major_cities:["Paris"]},{code:"77",name:"Seine-et-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Melun",population:1421197,area_km2:5915,major_cities:["Meaux","Chelles","Melun"]},{code:"78",name:"Yvelines",region_code:"11",region_name:"le-de-France",prefecture:"Versailles",population:1441398,area_km2:2284,major_cities:["Versailles","Sartrouville","Mantes-la-Jolie"]},{code:"91",name:"Essonne",region_code:"11",region_name:"le-de-France",prefecture:"vry-Courcouronnes",population:1301659,area_km2:1804,major_cities:["vry-Courcouronnes","Corbeil-Essonnes","Massy"]},{code:"92",name:"Hauts-de-Seine",region_code:"11",region_name:"le-de-France",prefecture:"Nanterre",population:1624357,area_km2:176,major_cities:["Boulogne-Billancourt","Nanterre","Courbevoie"]},{code:"93",name:"Seine-Saint-Denis",region_code:"11",region_name:"le-de-France",prefecture:"Bobigny",population:1644903,area_km2:236,major_cities:["Montreuil","Saint-Denis","Aubervilliers"]},{code:"94",name:"Val-de-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Crteil",population:1407124,area_km2:245,major_cities:["Crteil","Vitry-sur-Seine","Saint-Maur-des-Fosss"]},{code:"95",name:"Val-d'Oise",region_code:"11",region_name:"le-de-France",prefecture:"Cergy",population:1249674,area_km2:1246,major_cities:["Argenteuil","Sarcelles","Cergy"]},{code:"14",name:"Calvados",region_code:"28",region_name:"Normandie",prefecture:"Caen",population:695536,area_km2:5548,major_cities:["Caen","Hrouville-Saint-Clair","Lisieux"]},{code:"27",name:"Eure",region_code:"28",region_name:"Normandie",prefecture:"vreux",population:601843,area_km2:6040,major_cities:["vreux","Vernon","Louviers"]},{code:"50",name:"Manche",region_code:"28",region_name:"Normandie",prefecture:"Saint-L",population:495045,area_km2:5938,major_cities:["Cherbourg-en-Cotentin","Saint-L","Granville"]},{code:"61",name:"Orne",region_code:"28",region_name:"Normandie",prefecture:"Alenon",population:279942,area_km2:6103,major_cities:["Alenon","Flers","Argentan"]},{code:"76",name:"Seine-Maritime",region_code:"28",region_name:"Normandie",prefecture:"Rouen",population:1254378,area_km2:6278,major_cities:["Le Havre","Rouen","Dieppe"]},{code:"16",name:"Charente",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Angoulme",population:352015,area_km2:5956,major_cities:["Angoulme","Cognac","Soyaux"]},{code:"17",name:"Charente-Maritime",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"La Rochelle",population:651358,area_km2:6864,major_cities:["La Rochelle","Saintes","Rochefort"]},{code:"19",name:"Corrze",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Tulle",population:240336,area_km2:5857,major_cities:["Brive-la-Gaillarde","Tulle","Ussel"]},{code:"23",name:"Creuse",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Guret",population:116617,area_km2:5565,major_cities:["Guret","La Souterraine","Aubusson"]},{code:"24",name:"Dordogne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Prigueux",population:413223,area_km2:9060,major_cities:["Prigueux","Bergerac","Sarlat-la-Canda"]},{code:"33",name:"Gironde",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Bordeaux",population:1623749,area_km2:1e4,major_cities:["Bordeaux","Mrignac","Pessac"]},{code:"40",name:"Landes",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Mont-de-Marsan",population:413690,area_km2:9243,major_cities:["Mont-de-Marsan","Dax","Biscarrosse"]},{code:"47",name:"Lot-et-Garonne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Agen",population:331271,area_km2:5361,major_cities:["Agen","Villeneuve-sur-Lot","Marmande"]},{code:"64",name:"Pyrnes-Atlantiques",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Pau",population:687240,area_km2:7645,major_cities:["Pau","Bayonne","Anglet"]},{code:"79",name:"Deux-Svres",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Niort",population:374351,area_km2:5999,major_cities:["Niort","Bressuire","Thouars"]},{code:"86",name:"Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Poitiers",population:438435,area_km2:6990,major_cities:["Poitiers","Chtellerault","Buxerolles"]},{code:"87",name:"Haute-Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Limoges",population:374426,area_km2:5520,major_cities:["Limoges","Saint-Junien","Panazol"]},{code:"09",name:"Arige",region_code:"76",region_name:"Occitanie",prefecture:"Foix",population:153287,area_km2:4890,major_cities:["Pamiers","Foix","Saint-Girons"]},{code:"11",name:"Aude",region_code:"76",region_name:"Occitanie",prefecture:"Carcassonne",population:374070,area_km2:6139,major_cities:["Narbonne","Carcassonne","Castelnaudary"]},{code:"12",name:"Aveyron",region_code:"76",region_name:"Occitanie",prefecture:"Rodez",population:279595,area_km2:8735,major_cities:["Rodez","Millau","Villefranche-de-Rouergue"]},{code:"30",name:"Gard",region_code:"76",region_name:"Occitanie",prefecture:"Nmes",population:748437,area_km2:5853,major_cities:["Nmes","Als","Bagnols-sur-Cze"]},{code:"31",name:"Haute-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Toulouse",population:1415757,area_km2:6309,major_cities:["Toulouse","Colomiers","Tournefeuille"]},{code:"32",name:"Gers",region_code:"76",region_name:"Occitanie",prefecture:"Auch",population:191377,area_km2:6257,major_cities:["Auch","Condom","Fleurance"]},{code:"34",name:"Hrault",region_code:"76",region_name:"Occitanie",prefecture:"Montpellier",population:1176145,area_km2:6101,major_cities:["Montpellier","Bziers","Ste"]},{code:"46",name:"Lot",region_code:"76",region_name:"Occitanie",prefecture:"Cahors",population:174094,area_km2:5217,major_cities:["Cahors","Figeac","Gourdon"]},{code:"48",name:"Lozre",region_code:"76",region_name:"Occitanie",prefecture:"Mende",population:76601,area_km2:5167,major_cities:["Mende","Marvejols","Saint-Chly-d'Apcher"]},{code:"65",name:"Hautes-Pyrnes",region_code:"76",region_name:"Occitanie",prefecture:"Tarbes",population:229567,area_km2:4464,major_cities:["Tarbes","Lourdes","Bagnres-de-Bigorre"]},{code:"66",name:"Pyrnes-Orientales",region_code:"76",region_name:"Occitanie",prefecture:"Perpignan",population:479979,area_km2:4116,major_cities:["Perpignan","Canet-en-Roussillon","Saint-Estve"]},{code:"81",name:"Tarn",region_code:"76",region_name:"Occitanie",prefecture:"Albi",population:389844,area_km2:5758,major_cities:["Albi","Castres","Gaillac"]},{code:"82",name:"Tarn-et-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Montauban",population:262618,area_km2:3718,major_cities:["Montauban","Castelsarrasin","Moissac"]},{code:"44",name:"Loire-Atlantique",region_code:"52",region_name:"Pays de la Loire",prefecture:"Nantes",population:1429272,area_km2:6815,major_cities:["Nantes","Saint-Nazaire","Saint-Herblain"]},{code:"49",name:"Maine-et-Loire",region_code:"52",region_name:"Pays de la Loire",prefecture:"Angers",population:818273,area_km2:7107,major_cities:["Angers","Cholet","Saumur"]},{code:"53",name:"Mayenne",region_code:"52",region_name:"Pays de la Loire",prefecture:"Laval",population:307445,area_km2:5175,major_cities:["Laval","Mayenne","Chteau-Gontier-sur-Mayenne"]},{code:"72",name:"Sarthe",region_code:"52",region_name:"Pays de la Loire",prefecture:"Le Mans",population:566506,area_km2:6206,major_cities:["Le Mans","La Flche","Sabl-sur-Sarthe"]},{code:"85",name:"Vende",region_code:"52",region_name:"Pays de la Loire",prefecture:"La Roche-sur-Yon",population:698118,area_km2:6720,major_cities:["La Roche-sur-Yon","Les Sables-d'Olonne","Challans"]},{code:"04",name:"Alpes-de-Haute-Provence",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Digne-les-Bains",population:164308,area_km2:6925,major_cities:["Manosque","Digne-les-Bains","Sisteron"]},{code:"05",name:"Hautes-Alpes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Gap",population:141756,area_km2:5549,major_cities:["Gap","Brianon","Embrun"]},{code:"06",name:"Alpes-Maritimes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Nice",population:1083310,area_km2:4299,major_cities:["Nice","Antibes","Cannes"]},{code:"13",name:"Bouches-du-Rhne",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Marseille",population:2043110,area_km2:5087,major_cities:["Marseille","Aix-en-Provence","Arles"]},{code:"83",name:"Var",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Toulon",population:1076711,area_km2:5973,major_cities:["Toulon","Frjus","Hyres"]},{code:"84",name:"Vaucluse",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Avignon",population:559479,area_km2:3567,major_cities:["Avignon","Orange","Carpentras"]}],Cm=e=>ho.filter(t=>t.region_code===e),jm="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/regions.geojson",gi={11:{fill:"#818CF8",hover:"#6366F1"},24:{fill:"#22D3EE",hover:"#06B6D4"},27:{fill:"#34D399",hover:"#10B981"},28:{fill:"#A78BFA",hover:"#8B5CF6"},32:{fill:"#F472B6",hover:"#EC4899"},44:{fill:"#FB923C",hover:"#F97316"},52:{fill:"#4ADE80",hover:"#22C55E"},53:{fill:"#60A5FA",hover:"#3B82F6"},75:{fill:"#F87171",hover:"#EF4444"},76:{fill:"#FCD34D",hover:"#FBBF24"},84:{fill:"#C084FC",hover:"#A855F7"},93:{fill:"#2DD4BF",hover:"#14B8A6"},94:{fill:"#A5B4FC",hover:"#818CF8"}},Qm=[{name:"Paris",coordinates:[2.3522,48.8566],size:"large"},{name:"Lyon",coordinates:[4.8357,45.764],size:"large"},{name:"Marseille",coordinates:[5.3698,43.2965],size:"large"},{name:"Toulouse",coordinates:[1.4442,43.6047],size:"large"},{name:"Bordeaux",coordinates:[-.5792,44.8378],size:"large"},{name:"Nantes",coordinates:[-1.5536,47.2184],size:"medium"},{name:"Lille",coordinates:[3.0573,50.6292],size:"medium"},{name:"Strasbourg",coordinates:[7.7521,48.5734],size:"medium"},{name:"Nice",coordinates:[7.262,43.7102],size:"medium"},{name:"Rennes",coordinates:[-1.6778,48.1173],size:"medium"}];function Mm({onRegionSelect:e,onGenerateReport:t}){const[n,r]=M.useState(null),[o,i]=M.useState(null),[a,s]=M.useState({x:0,y:0}),l=d=>{const h=cn.find(p=>p.code===d);h&&e(h)},m=(d,h)=>{var y;const p=d.properties.code;r(p);const v=cn.find(g=>g.code===p);if(v){i(v);const g=(y=h.currentTarget.closest(".map-container"))==null?void 0:y.getBoundingClientRect();g&&s({x:h.clientX-g.left,y:h.clientY-g.top})}},c=()=>{r(null),i(null)},f=d=>{var p;const h=(p=d.currentTarget.closest(".map-container"))==null?void 0:p.getBoundingClientRect();h&&s({x:d.clientX-h.left,y:d.clientY-h.top})};return u.jsxs("div",{className:"relative h-full flex flex-col",children:[u.jsxs("div",{className:"mb-3 px-4",children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Metropolitan France"}),u.jsx("p",{className:"text-gray-600 text-sm",children:"Click on a region to explore its departments and communes"})]}),u.jsxs("div",{className:"map-container relative flex-1 bg-gradient-to-b from-sky-50 to-blue-100 rounded-xl mx-4 overflow-hidden shadow-inner border border-blue-200",children:[u.jsxs(Gt,{projection:"geoMercator",projectionConfig:{center:[2.5,46.5],scale:3200},style:{width:"100%",height:"auto",minHeight:"500px",aspectRatio:"4/3"},children:[u.jsx(lt,{geography:jm,children:({geographies:d})=>d.map(h=>{const p=h.properties.code,v=gi[p]||{fill:"#CBD5E1",hover:"#94A3B8"},y=n===p;return u.jsx(uo,{geography:h,fill:y?v.hover:v.fill,stroke:"#FFFFFF",strokeWidth:1,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>l(p),onMouseEnter:g=>m(h,g),onMouseLeave:c,onMouseMove:f},h.rsmKey)})}),Qm.map(d=>{const h=d.size==="large"?5:d.size==="medium"?4:3;return u.jsxs(In,{coordinates:d.coordinates,children:[u.jsx("circle",{r:h,fill:"#1F2937",stroke:"#FFFFFF",strokeWidth:1.5}),u.jsx("text",{textAnchor:"middle",y:-h-5,style:{fontFamily:"system-ui",fontSize:d.size==="large"?10:9,fontWeight:d.size==="large"?600:500,fill:"#1F2937"},children:d.name})]},d.name)})]}),o&&u.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-4 pointer-events-none z-20 min-w-[240px]",style:{left:Math.min(Math.max(a.x,120),360),top:Math.max(a.y-10,60),transform:"translate(-50%, -100%)"},children:[u.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:o.name}),u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Capital: ",o.capital]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),u.jsxs("span",{className:"font-semibold text-gray-900",children:[(o.population/1e6).toFixed(1),"M"]})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400 text-xs block",children:"Departments"}),u.jsx("span",{className:"font-semibold text-gray-900",children:o.departments.length})]})]}),u.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:u.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore "})})]})]}),u.jsxs("div",{className:"mt-3 px-4",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Regions of France"}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-1.5",children:cn.map(d=>{const h=gi[d.code],p=n===d.code;return u.jsxs("button",{onClick:()=>e(d),onMouseEnter:()=>r(d.code),onMouseLeave:()=>r(null),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all text-left ${p?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[u.jsx("span",{className:"w-4 h-4 rounded flex-shrink-0 border",style:{backgroundColor:(h==null?void 0:h.fill)||"#6B7280",borderColor:(h==null?void 0:h.hover)||"#4B5563"}}),u.jsx("span",{className:`text-sm truncate ${p?"text-gray-900 font-medium":"text-gray-700"}`,children:d.name})]},d.code)})})]}),u.jsx("div",{className:"mt-4 px-4 pb-4 flex flex-wrap gap-3",children:u.jsxs("button",{onClick:()=>t("FR","France"),className:"btn btn-outline flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate France Overview Report"]})})]})}const Sm=M.memo(Mm),Em={viewBox:"0 0 400 350",departments:[{code:"75",name:"Paris",path:"M 180,140 Q 195,130 215,130 Q 235,135 245,150 Q 250,170 240,185 Q 225,198 205,195 Q 185,190 175,175 Q 172,158 180,145 Z",labelPosition:{x:210,y:165},cities:[{name:"Paris",x:210,y:162,isCapital:!0}]},{code:"92",name:"Hauts-de-Seine",path:"M 145,145 Q 160,135 175,140 Q 182,150 180,165 Q 175,180 160,185 Q 145,182 138,170 Q 135,155 145,145 Z",labelPosition:{x:160,y:165},cities:[{name:"Nanterre",x:155,y:158,isCapital:!0}]},{code:"93",name:"Seine-Saint-Denis",path:"M 215,120 Q 240,115 260,125 Q 272,140 268,160 Q 258,175 240,180 Q 222,178 215,165 Q 212,145 215,125 Z",labelPosition:{x:242,y:148},cities:[{name:"Bobigny",x:248,y:145,isCapital:!0}]},{code:"94",name:"Val-de-Marne",path:"M 205,195 Q 225,192 245,200 Q 258,215 255,235 Q 242,252 220,250 Q 198,245 190,228 Q 188,210 200,198 Z",labelPosition:{x:225,y:225},cities:[{name:"Crteil",x:230,y:225,isCapital:!0}]},{code:"77",name:"Seine-et-Marne",path:"M 260,125 Q 300,110 340,120 Q 375,140 385,180 Q 388,225 370,270 Q 340,305 290,310 Q 250,300 230,265 Q 220,230 235,195 Q 250,160 260,130 Z",labelPosition:{x:310,y:210},cities:[{name:"Melun",x:295,y:250,isCapital:!0},{name:"Meaux",x:300,y:145},{name:"Fontainebleau",x:290,y:290}]},{code:"78",name:"Yvelines",path:"M 50,120 Q 90,100 130,110 Q 155,125 160,150 Q 158,180 140,205 Q 115,225 80,220 Q 45,208 30,175 Q 25,142 45,120 Z",labelPosition:{x:95,y:165},cities:[{name:"Versailles",x:130,y:175,isCapital:!0},{name:"St-Germain",x:100,y:140}]},{code:"91",name:"Essonne",path:"M 100,225 Q 140,215 180,225 Q 210,245 215,280 Q 205,315 170,330 Q 125,335 90,315 Q 65,290 70,255 Q 80,232 100,225 Z",labelPosition:{x:145,y:275},cities:[{name:"vry",x:160,y:265,isCapital:!0}]},{code:"95",name:"Val-d'Oise",path:"M 120,50 Q 170,35 220,45 Q 260,60 275,95 Q 278,125 260,145 Q 235,160 200,158 Q 165,155 140,140 Q 115,120 110,90 Q 108,65 120,50 Z",labelPosition:{x:190,y:95},cities:[{name:"Pontoise",x:140,y:85,isCapital:!0}]}]},Am={viewBox:"0 0 500 400",departments:[{code:"13",name:"Bouches-du-Rhne",path:"M 80,200 Q 120,180 170,190 Q 210,205 230,240 Q 235,280 210,310 Q 170,335 120,325 Q 75,305 60,265 Q 55,225 75,200 Z",labelPosition:{x:145,y:260},cities:[{name:"Marseille",x:175,y:295,isCapital:!0},{name:"Aix-en-Provence",x:160,y:235},{name:"Arles",x:90,y:270}]},{code:"83",name:"Var",path:"M 230,240 Q 280,220 330,235 Q 375,255 395,295 Q 400,340 370,370 Q 325,390 275,375 Q 235,355 220,315 Q 215,275 230,245 Z",labelPosition:{x:305,y:305},cities:[{name:"Toulon",x:290,y:355,isCapital:!0},{name:"Draguignan",x:340,y:280},{name:"St-Tropez",x:365,y:340}]},{code:"06",name:"Alpes-Maritimes",path:"M 380,180 Q 420,160 460,175 Q 490,200 495,245 Q 485,290 455,320 Q 415,345 375,330 Q 345,305 345,265 Q 350,220 375,190 Z",labelPosition:{x:420,y:255},cities:[{name:"Nice",x:455,y:290,isCapital:!0},{name:"Cannes",x:395,y:315},{name:"Antibes",x:420,y:305}]},{code:"84",name:"Vaucluse",path:"M 80,90 Q 130,70 175,85 Q 210,105 220,145 Q 218,185 190,210 Q 150,230 105,215 Q 65,195 55,155 Q 50,115 75,90 Z",labelPosition:{x:140,y:150},cities:[{name:"Avignon",x:105,y:175,isCapital:!0},{name:"Orange",x:115,y:105}]},{code:"04",name:"Alpes-de-Haute-Provence",path:"M 220,80 Q 280,55 340,75 Q 385,100 395,150 Q 390,200 355,230 Q 310,255 260,240 Q 220,220 210,175 Q 205,125 220,85 Z",labelPosition:{x:300,y:155},cities:[{name:"Digne",x:310,y:165,isCapital:!0}]},{code:"05",name:"Hautes-Alpes",path:"M 290,20 Q 345,10 390,35 Q 425,65 430,115 Q 420,160 385,185 Q 340,205 295,190 Q 255,170 250,125 Q 252,75 285,40 Z",labelPosition:{x:345,y:105},cities:[{name:"Gap",x:340,y:130,isCapital:!0}]}]},km={viewBox:"0 0 450 320",departments:[{code:"29",name:"Finistre",path:"M 20,100 Q 60,70 110,80 Q 155,95 175,135 Q 180,175 155,210 Q 115,240 65,235 Q 25,220 15,175 Q 10,135 20,100 Z",labelPosition:{x:95,y:155},cities:[{name:"Quimper",x:85,y:195,isCapital:!0},{name:"Brest",x:55,y:115}]},{code:"22",name:"Ctes-d'Armor",path:"M 155,60 Q 210,45 265,60 Q 310,80 325,125 Q 328,170 300,200 Q 255,225 200,215 Q 155,200 145,160 Q 140,115 155,70 Z",labelPosition:{x:235,y:135},cities:[{name:"St-Brieuc",x:255,y:105,isCapital:!0},{name:"Dinan",x:290,y:135}]},{code:"56",name:"Morbihan",path:"M 90,215 Q 145,200 200,215 Q 245,235 260,280 Q 255,320 215,340 Q 160,355 105,335 Q 60,310 55,265 Q 60,225 90,215 Z",labelPosition:{x:160,y:275},cities:[{name:"Vannes",x:175,y:285,isCapital:!0},{name:"Lorient",x:105,y:260}]},{code:"35",name:"Ille-et-Vilaine",path:"M 265,60 Q 330,50 385,75 Q 430,105 440,160 Q 438,215 400,255 Q 350,285 290,275 Q 245,260 235,215 Q 230,170 245,125 Q 255,85 265,65 Z",labelPosition:{x:345,y:165},cities:[{name:"Rennes",x:365,y:180,isCapital:!0},{name:"St-Malo",x:355,y:90}]}]},Pm={viewBox:"0 0 450 500",departments:[{code:"33",name:"Gironde",path:"M 40,150 Q 90,130 140,145 Q 180,165 190,210 Q 185,260 150,295 Q 100,320 50,305 Q 15,280 10,230 Q 15,180 40,150 Z",labelPosition:{x:100,y:220},cities:[{name:"Bordeaux",x:115,y:200,isCapital:!0},{name:"Arcachon",x:55,y:260}]},{code:"40",name:"Landes",path:"M 30,295 Q 80,280 130,300 Q 165,330 170,380 Q 160,435 115,465 Q 60,485 20,455 Q -5,415 5,360 Q 15,315 30,295 Z",labelPosition:{x:90,y:380},cities:[{name:"Mont-de-Marsan",x:115,y:365,isCapital:!0}]},{code:"64",name:"Pyrnes-Atlantiques",path:"M 25,455 Q 75,440 125,460 Q 165,485 175,530 Q 165,575 120,595 Q 65,605 25,575 Q -5,545 5,500 Q 15,465 25,455 Z",labelPosition:{x:95,y:520},cities:[{name:"Pau",x:125,y:510,isCapital:!0},{name:"Bayonne",x:45,y:530}]},{code:"24",name:"Dordogne",path:"M 140,130 Q 200,115 255,135 Q 300,160 310,210 Q 305,265 265,300 Q 215,325 160,310 Q 115,290 110,240 Q 115,185 140,145 Z",labelPosition:{x:210,y:220},cities:[{name:"Prigueux",x:210,y:200,isCapital:!0}]},{code:"47",name:"Lot-et-Garonne",path:"M 165,305 Q 220,290 270,310 Q 310,340 315,390 Q 305,440 260,465 Q 205,480 155,455 Q 120,425 125,375 Q 135,325 165,305 Z",labelPosition:{x:220,y:385},cities:[{name:"Agen",x:215,y:395,isCapital:!0}]},{code:"17",name:"Charente-Maritime",path:"M 45,40 Q 100,25 150,45 Q 190,70 195,120 Q 185,170 145,195 Q 95,210 50,190 Q 15,165 15,115 Q 20,65 45,40 Z",labelPosition:{x:110,y:120},cities:[{name:"La Rochelle",x:70,y:95,isCapital:!0}]},{code:"16",name:"Charente",path:"M 150,45 Q 210,30 265,55 Q 305,85 310,140 Q 300,195 255,220 Q 200,238 150,215 Q 115,185 115,135 Q 125,80 150,50 Z",labelPosition:{x:215,y:135},cities:[{name:"Angoulme",x:225,y:145,isCapital:!0}]},{code:"86",name:"Vienne",path:"M 215,20 Q 275,5 330,30 Q 375,60 380,115 Q 370,170 325,200 Q 270,222 215,200 Q 175,175 175,125 Q 182,70 215,30 Z",labelPosition:{x:280,y:115},cities:[{name:"Poitiers",x:295,y:100,isCapital:!0}]}]},Zm={viewBox:"0 0 450 400",departments:[{code:"45",name:"Loiret",path:"M 200,30 Q 270,20 330,45 Q 380,80 390,140 Q 385,200 340,240 Q 280,270 215,255 Q 160,235 150,180 Q 150,115 185,65 Z",labelPosition:{x:270,y:145},cities:[{name:"Orlans",x:240,y:130,isCapital:!0}]},{code:"28",name:"Eure-et-Loir",path:"M 80,25 Q 145,15 200,35 Q 240,60 245,110 Q 235,160 190,185 Q 135,200 85,180 Q 45,155 40,105 Q 45,55 80,30 Z",labelPosition:{x:145,y:110},cities:[{name:"Chartres",x:145,y:100,isCapital:!0}]},{code:"41",name:"Loir-et-Cher",path:"M 60,180 Q 120,165 175,185 Q 220,210 225,265 Q 215,320 165,350 Q 105,370 55,345 Q 20,310 25,255 Q 35,200 60,180 Z",labelPosition:{x:125,y:265},cities:[{name:"Blois",x:140,y:245,isCapital:!0}]},{code:"37",name:"Indre-et-Loire",path:"M 15,270 Q 65,250 115,270 Q 155,295 160,350 Q 150,405 100,430 Q 45,445 10,415 Q -15,380 -5,325 Q 5,285 15,270 Z",labelPosition:{x:80,y:350},cities:[{name:"Tours",x:95,y:340,isCapital:!0}]},{code:"36",name:"Indre",path:"M 115,350 Q 175,335 230,360 Q 275,390 280,445 Q 270,500 220,525 Q 160,540 110,515 Q 70,485 75,430 Q 85,375 115,355 Z",labelPosition:{x:180,y:440},cities:[{name:"Chteauroux",x:185,y:430,isCapital:!0}]},{code:"18",name:"Cher",path:"M 230,240 Q 300,225 360,255 Q 410,295 415,360 Q 400,425 345,460 Q 280,485 220,460 Q 175,425 180,365 Q 195,300 230,250 Z",labelPosition:{x:300,y:355},cities:[{name:"Bourges",x:300,y:345,isCapital:!0}]}]},Rm={viewBox:"0 0 450 300",departments:[{code:"76",name:"Seine-Maritime",path:"M 230,20 Q 300,10 360,35 Q 410,70 420,130 Q 415,185 370,215 Q 315,240 255,225 Q 205,205 200,150 Q 200,90 230,45 Z",labelPosition:{x:315,y:125},cities:[{name:"Rouen",x:305,y:140,isCapital:!0},{name:"Le Havre",x:255,y:85}]},{code:"27",name:"Eure",path:"M 200,150 Q 255,135 305,155 Q 345,180 350,235 Q 340,285 290,305 Q 235,320 185,295 Q 150,265 155,215 Q 165,170 200,150 Z",labelPosition:{x:255,y:230},cities:[{name:"vreux",x:240,y:215,isCapital:!0}]},{code:"14",name:"Calvados",path:"M 60,100 Q 125,85 185,105 Q 230,130 235,185 Q 225,240 175,265 Q 115,280 60,255 Q 20,225 20,170 Q 30,120 60,100 Z",labelPosition:{x:135,y:180},cities:[{name:"Caen",x:135,y:165,isCapital:!0},{name:"Deauville",x:175,y:145}]},{code:"50",name:"Manche",path:"M 10,60 Q 55,40 100,55 Q 135,80 140,130 Q 130,185 85,215 Q 35,235 0,205 Q -25,170 -15,115 Q -5,75 10,60 Z",labelPosition:{x:60,y:140},cities:[{name:"Saint-L",x:75,y:145,isCapital:!0},{name:"Cherbourg",x:40,y:70}]},{code:"61",name:"Orne",path:"M 85,210 Q 145,195 200,220 Q 245,250 250,305 Q 240,360 190,385 Q 130,400 80,375 Q 45,345 50,290 Q 60,235 85,215 Z",labelPosition:{x:155,y:295},cities:[{name:"Alenon",x:175,y:305,isCapital:!0}]}]},Fm={viewBox:"0 0 400 400",departments:[{code:"59",name:"Nord",path:"M 120,15 Q 195,5 260,30 Q 315,65 325,130 Q 320,195 270,235 Q 205,265 140,250 Q 85,225 80,165 Q 85,100 115,50 Z",labelPosition:{x:205,y:135},cities:[{name:"Lille",x:205,y:115,isCapital:!0},{name:"Dunkerque",x:185,y:45},{name:"Valenciennes",x:260,y:175}]},{code:"62",name:"Pas-de-Calais",path:"M 20,50 Q 75,30 130,50 Q 170,80 175,140 Q 165,200 120,230 Q 65,250 25,220 Q -10,185 0,130 Q 10,75 20,55 Z",labelPosition:{x:95,y:145},cities:[{name:"Arras",x:110,y:170,isCapital:!0},{name:"Calais",x:70,y:55},{name:"Boulogne",x:35,y:95}]},{code:"80",name:"Somme",path:"M 25,220 Q 85,200 145,225 Q 195,255 200,315 Q 190,370 140,395 Q 80,410 35,380 Q 5,345 10,290 Q 15,240 25,220 Z",labelPosition:{x:110,y:305},cities:[{name:"Amiens",x:120,y:290,isCapital:!0}]},{code:"60",name:"Oise",path:"M 145,300 Q 210,285 270,310 Q 320,345 325,405 Q 310,460 255,485 Q 190,500 140,470 Q 105,435 110,380 Q 120,325 145,305 Z",labelPosition:{x:220,y:390},cities:[{name:"Beauvais",x:200,y:370,isCapital:!0}]},{code:"02",name:"Aisne",path:"M 270,230 Q 335,215 390,245 Q 435,285 440,350 Q 425,415 370,450 Q 305,475 250,450 Q 210,415 215,355 Q 230,290 270,240 Z",labelPosition:{x:335,y:345},cities:[{name:"Laon",x:335,y:320,isCapital:!0}]}]},Lm={viewBox:"0 0 450 400",departments:[{code:"44",name:"Loire-Atlantique",path:"M 30,130 Q 95,110 155,135 Q 200,165 205,225 Q 195,285 145,315 Q 85,335 35,305 Q 0,270 5,210 Q 15,155 30,130 Z",labelPosition:{x:110,y:220},cities:[{name:"Nantes",x:125,y:215,isCapital:!0},{name:"St-Nazaire",x:55,y:185}]},{code:"49",name:"Maine-et-Loire",path:"M 155,135 Q 225,120 290,150 Q 340,185 345,250 Q 335,315 280,350 Q 215,375 155,350 Q 110,315 115,255 Q 125,190 155,150 Z",labelPosition:{x:230,y:245},cities:[{name:"Angers",x:225,y:230,isCapital:!0}]},{code:"53",name:"Mayenne",path:"M 170,25 Q 235,15 295,45 Q 340,80 345,145 Q 335,210 280,245 Q 220,270 165,245 Q 125,210 130,150 Q 140,90 170,45 Z",labelPosition:{x:240,y:145},cities:[{name:"Laval",x:240,y:135,isCapital:!0}]},{code:"72",name:"Sarthe",path:"M 290,45 Q 360,30 420,65 Q 465,105 470,175 Q 460,245 405,285 Q 340,315 280,290 Q 240,255 245,195 Q 255,130 290,70 Z",labelPosition:{x:365,y:175},cities:[{name:"Le Mans",x:365,y:165,isCapital:!0}]},{code:"85",name:"Vende",path:"M 25,290 Q 90,270 150,300 Q 195,335 200,400 Q 185,460 130,490 Q 65,510 20,475 Q -10,435 0,375 Q 10,315 25,295 Z",labelPosition:{x:105,y:390},cities:[{name:"La Roche-sur-Yon",x:105,y:375,isCapital:!0}]}]},Tm={viewBox:"0 0 500 450",departments:[{code:"67",name:"Bas-Rhin",path:"M 380,50 Q 430,40 470,70 Q 500,105 500,160 Q 490,215 450,245 Q 400,270 355,250 Q 320,225 325,175 Q 335,115 365,75 Z",labelPosition:{x:415,y:155},cities:[{name:"Strasbourg",x:455,y:165,isCapital:!0}]},{code:"68",name:"Haut-Rhin",path:"M 360,245 Q 410,230 455,260 Q 490,295 490,355 Q 475,410 425,435 Q 370,455 325,430 Q 295,400 300,345 Q 315,285 355,255 Z",labelPosition:{x:395,y:345},cities:[{name:"Colmar",x:425,y:325,isCapital:!0}]},{code:"57",name:"Moselle",path:"M 260,25 Q 325,15 380,50 Q 420,90 420,155 Q 405,220 350,255 Q 285,280 225,255 Q 185,220 190,160 Q 205,95 250,50 Z",labelPosition:{x:305,y:145},cities:[{name:"Metz",x:320,y:145,isCapital:!0}]},{code:"54",name:"Meurthe-et-Moselle",path:"M 175,155 Q 230,140 280,165 Q 320,195 325,255 Q 315,315 265,345 Q 205,365 150,340 Q 115,305 120,250 Q 135,195 175,160 Z",labelPosition:{x:225,y:255},cities:[{name:"Nancy",x:225,y:245,isCapital:!0}]},{code:"88",name:"Vosges",path:"M 265,295 Q 320,280 370,310 Q 410,345 410,410 Q 395,470 340,495 Q 280,510 230,480 Q 200,445 205,390 Q 220,335 265,305 Z",labelPosition:{x:310,y:395},cities:[{name:"pinal",x:315,y:385,isCapital:!0}]},{code:"55",name:"Meuse",path:"M 90,145 Q 145,130 195,155 Q 235,185 235,245 Q 220,305 170,335 Q 115,355 70,330 Q 40,295 45,240 Q 60,180 90,150 Z",labelPosition:{x:145,y:245},cities:[{name:"Bar-le-Duc",x:130,y:275,isCapital:!0}]},{code:"08",name:"Ardennes",path:"M 75,20 Q 135,10 185,40 Q 225,75 225,135 Q 210,195 160,225 Q 105,245 60,220 Q 30,185 35,130 Q 50,70 75,35 Z",labelPosition:{x:135,y:125},cities:[{name:"Charleville",x:140,y:115,isCapital:!0}]},{code:"51",name:"Marne",path:"M 10,180 Q 65,165 115,190 Q 155,220 155,280 Q 140,340 90,370 Q 35,390 0,360 Q -25,325 -15,270 Q 0,210 10,185 Z",labelPosition:{x:70,y:275},cities:[{name:"Chlons",x:75,y:270,isCapital:!0},{name:"Reims",x:50,y:215}]},{code:"52",name:"Haute-Marne",path:"M 115,330 Q 170,315 220,345 Q 260,380 260,440 Q 245,495 195,520 Q 140,535 100,505 Q 70,470 75,420 Q 90,365 115,340 Z",labelPosition:{x:170,y:425},cities:[{name:"Chaumont",x:180,y:420,isCapital:!0}]},{code:"10",name:"Aube",path:"M 15,345 Q 70,330 120,360 Q 160,395 160,455 Q 145,510 95,535 Q 45,550 10,520 Q -15,485 -5,430 Q 5,375 15,350 Z",labelPosition:{x:80,y:440},cities:[{name:"Troyes",x:85,y:430,isCapital:!0}]}]},Bm={viewBox:"0 0 450 500",departments:[{code:"21",name:"Cte-d'Or",path:"M 50,100 Q 115,85 175,115 Q 225,150 230,215 Q 220,280 165,315 Q 100,340 50,310 Q 15,275 20,215 Q 30,150 50,105 Z",labelPosition:{x:130,y:210},cities:[{name:"Dijon",x:155,y:185,isCapital:!0}]},{code:"89",name:"Yonne",path:"M 15,15 Q 75,5 130,35 Q 175,70 175,135 Q 160,200 105,230 Q 45,250 10,220 Q -15,185 -5,125 Q 5,65 15,30 Z",labelPosition:{x:90,y:125},cities:[{name:"Auxerre",x:95,y:120,isCapital:!0}]},{code:"58",name:"Nivre",path:"M 5,205 Q 60,190 110,220 Q 150,255 150,315 Q 135,375 80,405 Q 25,425 -5,395 Q -25,360 -15,305 Q -5,250 5,215 Z",labelPosition:{x:75,y:310},cities:[{name:"Nevers",x:70,y:350,isCapital:!0}]},{code:"71",name:"Sane-et-Loire",path:"M 55,310 Q 120,295 180,325 Q 230,360 235,425 Q 220,490 165,520 Q 100,540 50,510 Q 20,475 25,420 Q 40,360 55,320 Z",labelPosition:{x:140,y:420},cities:[{name:"Mcon",x:175,y:475,isCapital:!0}]},{code:"25",name:"Doubs",path:"M 280,190 Q 345,175 400,210 Q 445,250 450,320 Q 435,390 380,425 Q 315,450 260,420 Q 225,385 230,325 Q 245,260 280,205 Z",labelPosition:{x:345,y:310},cities:[{name:"Besanon",x:335,y:295,isCapital:!0}]},{code:"39",name:"Jura",path:"M 210,345 Q 265,330 315,360 Q 355,395 355,460 Q 340,520 285,550 Q 225,570 180,540 Q 150,505 155,450 Q 170,395 210,355 Z",labelPosition:{x:260,y:450},cities:[{name:"Lons-le-Saunier",x:265,y:445,isCapital:!0}]},{code:"70",name:"Haute-Sane",path:"M 215,95 Q 275,80 330,115 Q 375,155 375,220 Q 360,285 305,315 Q 245,335 200,305 Q 170,270 175,215 Q 185,155 215,110 Z",labelPosition:{x:280,y:205},cities:[{name:"Vesoul",x:290,y:190,isCapital:!0}]},{code:"90",name:"Territoire de Belfort",path:"M 365,145 Q 400,135 430,160 Q 455,190 455,235 Q 445,280 415,300 Q 380,315 350,295 Q 330,265 335,220 Q 345,175 365,155 Z",labelPosition:{x:395,y:225},cities:[{name:"Belfort",x:400,y:220,isCapital:!0}]}]},$m={viewBox:"0 0 550 400",departments:[{code:"31",name:"Haute-Garonne",path:"M 120,150 Q 170,135 220,160 Q 260,190 265,250 Q 255,310 205,340 Q 150,360 105,335 Q 75,300 80,245 Q 90,190 120,160 Z",labelPosition:{x:170,y:250},cities:[{name:"Toulouse",x:175,y:235,isCapital:!0}]},{code:"34",name:"Hrault",path:"M 320,200 Q 375,185 425,215 Q 465,250 465,315 Q 450,375 395,400 Q 335,415 290,385 Q 260,350 265,295 Q 280,240 320,210 Z",labelPosition:{x:370,y:300},cities:[{name:"Montpellier",x:400,y:310,isCapital:!0},{name:"Bziers",x:340,y:335}]},{code:"30",name:"Gard",path:"M 425,145 Q 480,130 525,165 Q 555,205 555,270 Q 540,330 485,360 Q 425,380 380,350 Q 355,315 360,260 Q 375,200 420,160 Z",labelPosition:{x:465,y:255},cities:[{name:"Nmes",x:490,y:280,isCapital:!0}]},{code:"11",name:"Aude",path:"M 225,275 Q 280,260 330,290 Q 370,325 370,385 Q 355,440 300,465 Q 240,480 195,450 Q 170,415 175,360 Q 190,305 225,280 Z",labelPosition:{x:275,y:370},cities:[{name:"Carcassonne",x:275,y:360,isCapital:!0}]},{code:"66",name:"Pyrnes-Orientales",path:"M 270,380 Q 325,365 375,395 Q 415,430 415,490 Q 400,545 345,570 Q 285,585 240,555 Q 215,520 220,465 Q 235,410 270,385 Z",labelPosition:{x:325,y:475},cities:[{name:"Perpignan",x:350,y:460,isCapital:!0}]},{code:"09",name:"Arige",path:"M 115,330 Q 165,315 215,345 Q 255,380 255,440 Q 240,495 185,520 Q 125,535 85,505 Q 60,470 65,420 Q 80,365 115,340 Z",labelPosition:{x:165,y:430},cities:[{name:"Foix",x:170,y:425,isCapital:!0}]},{code:"65",name:"Hautes-Pyrnes",path:"M 30,280 Q 80,265 130,295 Q 170,330 170,390 Q 155,445 100,470 Q 45,485 15,455 Q -5,420 0,370 Q 15,315 30,290 Z",labelPosition:{x:90,y:375},cities:[{name:"Tarbes",x:95,y:365,isCapital:!0}]},{code:"32",name:"Gers",path:"M 40,135 Q 95,120 145,150 Q 185,185 185,245 Q 170,300 115,330 Q 55,350 20,320 Q -5,285 0,230 Q 15,175 40,145 Z",labelPosition:{x:95,y:235},cities:[{name:"Auch",x:100,y:225,isCapital:!0}]},{code:"81",name:"Tarn",path:"M 215,130 Q 270,115 325,145 Q 365,180 365,245 Q 350,305 295,335 Q 235,355 190,325 Q 165,290 170,235 Q 185,175 215,145 Z",labelPosition:{x:270,y:235},cities:[{name:"Albi",x:295,y:205,isCapital:!0}]},{code:"82",name:"Tarn-et-Garonne",path:"M 125,65 Q 175,50 225,80 Q 265,115 265,175 Q 250,230 195,260 Q 135,280 95,250 Q 70,215 75,160 Q 90,105 125,75 Z",labelPosition:{x:175,y:165},cities:[{name:"Montauban",x:180,y:155,isCapital:!0}]},{code:"12",name:"Aveyron",path:"M 280,45 Q 345,30 405,65 Q 450,105 455,175 Q 440,245 385,280 Q 320,305 265,275 Q 230,240 235,180 Q 250,115 280,65 Z",labelPosition:{x:350,y:165},cities:[{name:"Rodez",x:355,y:155,isCapital:!0}]},{code:"46",name:"Lot",path:"M 180,5 Q 240,-5 295,25 Q 340,60 345,125 Q 330,190 275,220 Q 215,240 170,210 Q 140,175 145,120 Q 160,60 180,20 Z",labelPosition:{x:250,y:120},cities:[{name:"Cahors",x:250,y:145,isCapital:!0}]},{code:"48",name:"Lozre",path:"M 390,65 Q 445,50 490,85 Q 525,125 525,190 Q 510,250 455,280 Q 395,300 350,270 Q 325,235 330,180 Q 345,120 385,80 Z",labelPosition:{x:435,y:175},cities:[{name:"Mende",x:440,y:170,isCapital:!0}]}]},Dm={viewBox:"0 0 500 500",departments:[{code:"69",name:"Rhne",path:"M 145,175 Q 195,160 245,190 Q 285,225 285,290 Q 270,350 215,380 Q 155,400 115,370 Q 90,335 95,280 Q 110,220 145,185 Z",labelPosition:{x:195,y:280},cities:[{name:"Lyon",x:200,y:305,isCapital:!0}]},{code:"42",name:"Loire",path:"M 55,200 Q 110,185 160,215 Q 200,250 200,315 Q 185,375 130,405 Q 70,425 35,395 Q 15,360 20,305 Q 35,250 55,210 Z",labelPosition:{x:115,y:305},cities:[{name:"St-tienne",x:105,y:340,isCapital:!0}]},{code:"63",name:"Puy-de-Dme",path:"M 15,145 Q 70,130 125,160 Q 170,195 170,260 Q 155,320 100,350 Q 40,370 5,340 Q -20,305 -10,250 Q 0,195 15,155 Z",labelPosition:{x:85,y:250},cities:[{name:"Clermont-Fd",x:90,y:240,isCapital:!0}]},{code:"03",name:"Allier",path:"M 45,40 Q 110,25 170,60 Q 220,100 220,170 Q 200,235 145,265 Q 80,285 35,255 Q 5,220 10,160 Q 25,100 45,55 Z",labelPosition:{x:125,y:155},cities:[{name:"Moulins",x:135,y:120,isCapital:!0}]},{code:"43",name:"Haute-Loire",path:"M 60,365 Q 115,350 165,380 Q 205,415 205,475 Q 190,530 135,555 Q 75,570 40,540 Q 20,505 25,455 Q 40,405 60,370 Z",labelPosition:{x:120,y:460},cities:[{name:"Le Puy",x:130,y:445,isCapital:!0}]},{code:"15",name:"Cantal",path:"M 5,305 Q 60,290 110,320 Q 150,355 150,415 Q 135,470 80,495 Q 25,510 -5,480 Q -25,445 -15,395 Q -5,345 5,315 Z",labelPosition:{x:70,y:400},cities:[{name:"Aurillac",x:60,y:420,isCapital:!0}]},{code:"01",name:"Ain",path:"M 200,105 Q 260,90 315,125 Q 360,165 360,235 Q 345,300 290,335 Q 225,360 180,330 Q 155,295 160,240 Q 175,175 200,125 Z",labelPosition:{x:265,y:220},cities:[{name:"Bourg-en-B.",x:270,y:210,isCapital:!0}]},{code:"74",name:"Haute-Savoie",path:"M 330,75 Q 385,60 435,95 Q 475,135 475,200 Q 460,260 405,290 Q 345,310 305,280 Q 280,245 285,195 Q 300,140 330,95 Z",labelPosition:{x:385,y:185},cities:[{name:"Annecy",x:380,y:210,isCapital:!0},{name:"Chamonix",x:435,y:160}]},{code:"73",name:"Savoie",path:"M 305,280 Q 365,265 420,300 Q 465,340 465,410 Q 450,475 395,505 Q 330,525 285,495 Q 260,460 265,405 Q 280,345 305,295 Z",labelPosition:{x:370,y:390},cities:[{name:"Chambry",x:360,y:365,isCapital:!0}]},{code:"38",name:"Isre",path:"M 230,300 Q 295,285 355,320 Q 405,360 405,430 Q 385,495 325,525 Q 260,545 210,515 Q 180,480 185,425 Q 200,365 230,315 Z",labelPosition:{x:305,y:415},cities:[{name:"Grenoble",x:320,y:420,isCapital:!0}]},{code:"26",name:"Drme",path:"M 155,415 Q 215,400 270,435 Q 315,475 315,545 Q 295,605 240,635 Q 175,655 130,625 Q 105,590 110,535 Q 125,475 155,430 Z",labelPosition:{x:220,y:530},cities:[{name:"Valence",x:190,y:495,isCapital:!0}]},{code:"07",name:"Ardche",path:"M 100,455 Q 155,440 205,475 Q 245,515 245,585 Q 225,645 170,675 Q 110,695 70,665 Q 50,630 55,575 Q 70,515 100,470 Z",labelPosition:{x:155,y:570},cities:[{name:"Privas",x:170,y:540,isCapital:!0}]}]},zm={viewBox:"0 0 200 350",departments:[{code:"2B",name:"Haute-Corse",path:"M 55,20 Q 100,10 140,35 Q 170,70 175,125 Q 165,180 125,210 Q 80,235 45,210 Q 20,180 25,125 Q 35,70 55,35 Z",labelPosition:{x:100,y:120},cities:[{name:"Bastia",x:140,y:75,isCapital:!0},{name:"Corte",x:95,y:155}]},{code:"2A",name:"Corse-du-Sud",path:"M 45,200 Q 95,185 140,215 Q 175,250 175,315 Q 160,375 110,405 Q 55,425 25,395 Q 5,360 10,305 Q 25,250 45,210 Z",labelPosition:{x:100,y:305},cities:[{name:"Ajaccio",x:55,y:290,isCapital:!0},{name:"Porto-Vecchio",x:145,y:355}]}]},Om={11:Em,24:Zm,27:Bm,28:Rm,32:Fm,44:Tm,52:Lm,53:km,75:Pm,76:$m,84:Dm,93:Am,94:zm};function xi(e){return e in Om}const Im="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements.geojson",yi=[{fill:"#93C5FD",hover:"#60A5FA"},{fill:"#86EFAC",hover:"#4ADE80"},{fill:"#FCA5A5",hover:"#F87171"},{fill:"#FCD34D",hover:"#FBBF24"},{fill:"#C4B5FD",hover:"#A78BFA"},{fill:"#67E8F9",hover:"#22D3EE"},{fill:"#FDBA74",hover:"#FB923C"},{fill:"#F9A8D4",hover:"#F472B6"},{fill:"#A5B4FC",hover:"#818CF8"},{fill:"#99F6E4",hover:"#5EEAD4"},{fill:"#FDE68A",hover:"#FCD34D"},{fill:"#D8B4FE",hover:"#C084FC"}],Gm={11:{center:[2.5,48.7],scale:18e3},24:{center:[1.7,47.3],scale:8e3},27:{center:[5,47],scale:7e3},28:{center:[-.3,49],scale:9e3},32:{center:[2.8,49.9],scale:9e3},44:{center:[5.5,48.7],scale:6e3},52:{center:[-.8,47.5],scale:9e3},53:{center:[-3,48.2],scale:1e4},75:{center:[0,45.5],scale:5500},76:{center:[2,43.8],scale:5500},84:{center:[4.5,45.5],scale:5500},93:{center:[6,44],scale:8e3},94:{center:[9.1,42],scale:12e3}};function Vm({regionCode:e,regionName:t,departments:n,onDepartmentSelect:r}){const[o,i]=M.useState(null),[a,s]=M.useState(null),[l,m]=M.useState({x:0,y:0}),c=Gm[e]||{center:[2.5,46.5],scale:5e3},f=M.useMemo(()=>n.map(g=>g.code),[n]),d=g=>{const _=f.indexOf(g);return yi[_%yi.length]},h=g=>{const _=n.find(x=>x.code===g);_&&r(_)},p=(g,_)=>{var Q;const x=g.properties.code;i(x);const N=n.find(j=>j.code===x);if(N){s(N);const j=(Q=_.currentTarget.closest(".map-container"))==null?void 0:Q.getBoundingClientRect();j&&m({x:_.clientX-j.left,y:_.clientY-j.top})}},v=()=>{i(null),s(null)},y=g=>{var x;const _=(x=g.currentTarget.closest(".map-container"))==null?void 0:x.getBoundingClientRect();_&&m({x:g.clientX-_.left,y:g.clientY-_.top})};return u.jsxs("div",{className:"relative mb-6",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Departments of ",t]}),u.jsxs("div",{className:"map-container relative bg-gradient-to-br from-sky-50 to-blue-100 rounded-xl overflow-hidden shadow-inner border border-blue-200",children:[u.jsx(Gt,{projection:"geoMercator",projectionConfig:{center:c.center,scale:c.scale},style:{width:"100%",height:"auto",minHeight:"350px",maxHeight:"450px"},children:u.jsx(On,{center:c.center,zoom:1,children:u.jsx(lt,{geography:Im,children:({geographies:g})=>g.filter(_=>f.includes(_.properties.code)).map(_=>{const x=_.properties.code,N=d(x),Q=o===x;return u.jsx(uo,{geography:_,fill:Q?N.hover:N.fill,stroke:"#FFFFFF",strokeWidth:1.5,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>h(x),onMouseEnter:j=>p(_,j),onMouseLeave:v,onMouseMove:y},_.rsmKey)})})})}),a&&(()=>{const _=l.x<240?{left:l.x+15,top:l.y}:{left:l.x-15,top:l.y,transform:"translateX(-100%)"};return u.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 w-[220px]",style:_,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded",children:a.code}),u.jsx("h4",{className:"font-bold text-gray-900",children:a.name})]}),u.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Prefecture: ",a.prefecture]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),u.jsx("span",{className:"font-semibold text-gray-900",children:a.population.toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-gray-400 text-xs block",children:"Area"}),u.jsxs("span",{className:"font-semibold text-gray-900",children:[a.area_km2.toLocaleString()," km"]})]})]}),u.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:u.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore cities "})})]})})()]}),u.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.map(g=>{const _=d(g.code),x=o===g.code;return u.jsxs("button",{onClick:()=>r(g),onMouseEnter:()=>i(g.code),onMouseLeave:()=>i(null),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all ${x?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[u.jsx("span",{className:"w-3 h-3 rounded-sm border border-white shadow-sm",style:{backgroundColor:_.fill}}),u.jsx("span",{className:"font-mono text-gray-500",children:g.code}),u.jsx("span",{className:`truncate ${x?"font-medium":""}`,children:g.name})]},g.code)})})]})}const vi={oceanic:{label:"Oceanic",description:"Mild winters, cool summers, regular rainfall"},continental:{label:"Continental",description:"Cold winters, warm summers, moderate rainfall"},mediterranean:{label:"Mediterranean",description:"Mild winters, hot dry summers, sunny"},mountain:{label:"Mountain",description:"Cold winters with snow, cool summers"},"semi-oceanic":{label:"Semi-Oceanic",description:"Mix of oceanic and continental influences"}},_i=["bg-blue-100 hover:bg-blue-200 border-blue-200","bg-emerald-100 hover:bg-emerald-200 border-emerald-200","bg-purple-100 hover:bg-purple-200 border-purple-200","bg-amber-100 hover:bg-amber-200 border-amber-200","bg-rose-100 hover:bg-rose-200 border-rose-200","bg-cyan-100 hover:bg-cyan-200 border-cyan-200","bg-indigo-100 hover:bg-indigo-200 border-indigo-200","bg-teal-100 hover:bg-teal-200 border-teal-200"];function Hm({region:e,onDepartmentSelect:t,onGenerateReport:n,onBack:r}){const[o,i]=M.useState([]),[a,s]=M.useState(!0);M.useEffect(()=>{s(!0);const m=Cm(e.code);i(m),s(!1)},[e.code]);const l=vi[e.climate]||vi.oceanic;return u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsxs("div",{children:[u.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[u.jsx(ji,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm",children:"Back to map"})]}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),u.jsx("p",{className:"text-gray-600 mt-1",children:e.description})]}),u.jsxs("button",{onClick:()=>n(e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate Report"]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(Mt,{className:"w-4 h-4"}),"Capital"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.capital})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(wi,{className:"w-4 h-4"}),"Population"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(rr,{className:"w-4 h-4"}),"Departments"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.departments.length})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(Ka,{className:"w-4 h-4"}),"Climate"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.label}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l.description})]})]}),!a&&xi(e.code)&&u.jsx(Vm,{regionCode:e.code,regionName:e.name,departments:o,onDepartmentSelect:t}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:xi(e.code)?"All Departments":`Departments in ${e.name}`}),a?u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsx(St,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.length>0?u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((m,c)=>u.jsxs("button",{onClick:()=>t(m),className:`text-left p-4 rounded-lg border transition-all ${_i[c%_i.length]}`,children:[u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{children:[u.jsx("span",{className:"text-xs font-mono text-gray-500 bg-white/50 px-1.5 py-0.5 rounded",children:m.code}),u.jsx("h4",{className:"font-semibold text-gray-900 mt-1",children:m.name}),u.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Prefecture: ",m.prefecture]})]})}),u.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[u.jsxs("span",{className:"text-gray-500",children:["Pop: ",m.population.toLocaleString()]}),u.jsx("span",{className:"text-primary-600 font-medium",children:"Explore "})]})]},m.code))}):u.jsxs("div",{className:"text-center py-8 text-gray-500",children:[u.jsx(rr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),u.jsxs("p",{children:["Department data coming soon for ",e.name]})]})]}),u.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Region Reports"}),u.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a comprehensive AI-researched report about ",e.name," including cost of living, healthcare, education, cultural highlights, and practical relocation information. Reports are cached for faster access and updated when regenerated."]})]})]})}const qm=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),Um=(e,t)=>{const n=qm(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},Jn=["#93C5FD","#86EFAC","#FDE68A","#C4B5FD","#67E8F9","#FDBA74","#F9A8D4","#A5B4FC","#99F6E4","#FCA5A5","#D8B4FE","#FCD34D","#6EE7B7","#A5F3FC","#FBBF24"],Ym="#3B82F6",Xm={75:{center:[2.35,48.86],scale:25e4,minZoom:1,maxZoom:8},77:{center:[2.97,48.55],scale:25e3,minZoom:1,maxZoom:8},78:{center:[1.85,48.8],scale:35e3,minZoom:1,maxZoom:8},91:{center:[2.25,48.53],scale:4e4,minZoom:1,maxZoom:8},92:{center:[2.22,48.86],scale:7e4,minZoom:1,maxZoom:8},93:{center:[2.45,48.92],scale:7e4,minZoom:1,maxZoom:8},94:{center:[2.47,48.78],scale:6e4,minZoom:1,maxZoom:8},95:{center:[2.15,49.05],scale:4e4,minZoom:1,maxZoom:8},22:{center:[-2.98,48.45],scale:18e3,minZoom:1,maxZoom:8},29:{center:[-4.15,48.35],scale:16e3,minZoom:1,maxZoom:8},35:{center:[-1.68,48.1],scale:18e3,minZoom:1,maxZoom:8},56:{center:[-2.85,47.75],scale:18e3,minZoom:1,maxZoom:8},"04":{center:[6.25,44.05],scale:14e3,minZoom:1,maxZoom:8},"05":{center:[6.35,44.65],scale:18e3,minZoom:1,maxZoom:8},"06":{center:[7.2,43.85],scale:2e4,minZoom:1,maxZoom:8},13:{center:[5.05,43.55],scale:2e4,minZoom:1,maxZoom:8},83:{center:[6.25,43.45],scale:18e3,minZoom:1,maxZoom:8},84:{center:[5.15,44],scale:22e3,minZoom:1,maxZoom:8},"01":{center:[5.35,46.1],scale:18e3,minZoom:1,maxZoom:8},"03":{center:[3.35,46.35],scale:16e3,minZoom:1,maxZoom:8},"07":{center:[4.45,44.75],scale:18e3,minZoom:1,maxZoom:8},15:{center:[2.7,45.05],scale:18e3,minZoom:1,maxZoom:8},26:{center:[5.15,44.65],scale:16e3,minZoom:1,maxZoom:8},38:{center:[5.75,45.25],scale:14e3,minZoom:1,maxZoom:8},42:{center:[4.25,45.75],scale:2e4,minZoom:1,maxZoom:8},43:{center:[3.85,45.05],scale:2e4,minZoom:1,maxZoom:8},63:{center:[3.1,45.75],scale:14e3,minZoom:1,maxZoom:8},69:{center:[4.65,45.85],scale:25e3,minZoom:1,maxZoom:8},73:{center:[6.45,45.5],scale:16e3,minZoom:1,maxZoom:8},74:{center:[6.45,46],scale:18e3,minZoom:1,maxZoom:8},"09":{center:[1.55,42.95],scale:2e4,minZoom:1,maxZoom:8},11:{center:[2.35,43.15],scale:18e3,minZoom:1,maxZoom:8},12:{center:[2.65,44.25],scale:14e3,minZoom:1,maxZoom:8},30:{center:[4.2,44],scale:18e3,minZoom:1,maxZoom:8},31:{center:[1.45,43.35],scale:16e3,minZoom:1,maxZoom:8},32:{center:[.55,43.7],scale:18e3,minZoom:1,maxZoom:8},34:{center:[3.55,43.6],scale:18e3,minZoom:1,maxZoom:8},46:{center:[1.65,44.55],scale:2e4,minZoom:1,maxZoom:8},48:{center:[3.5,44.5],scale:2e4,minZoom:1,maxZoom:8},65:{center:[.15,43.05],scale:2e4,minZoom:1,maxZoom:8},66:{center:[2.55,42.6],scale:2e4,minZoom:1,maxZoom:8},81:{center:[2.15,43.85],scale:2e4,minZoom:1,maxZoom:8},82:{center:[1.35,44.05],scale:25e3,minZoom:1,maxZoom:8},16:{center:[.2,45.7],scale:2e4,minZoom:1,maxZoom:8},17:{center:[-.9,45.9],scale:16e3,minZoom:1,maxZoom:8},19:{center:[1.85,45.3],scale:2e4,minZoom:1,maxZoom:8},23:{center:[2.05,46.15],scale:2e4,minZoom:1,maxZoom:8},24:{center:[.85,45.1],scale:14e3,minZoom:1,maxZoom:8},33:{center:[-.6,44.85],scale:14e3,minZoom:1,maxZoom:8},40:{center:[-.85,43.9],scale:14e3,minZoom:1,maxZoom:8},47:{center:[.5,44.35],scale:2e4,minZoom:1,maxZoom:8},64:{center:[-.85,43.25],scale:16e3,minZoom:1,maxZoom:8},79:{center:[-.4,46.55],scale:2e4,minZoom:1,maxZoom:8},86:{center:[.55,46.55],scale:18e3,minZoom:1,maxZoom:8},87:{center:[1.3,45.9],scale:2e4,minZoom:1,maxZoom:8},"08":{center:[4.65,49.75],scale:2e4,minZoom:1,maxZoom:8},10:{center:[4.1,48.3],scale:2e4,minZoom:1,maxZoom:8},51:{center:[4.2,49],scale:14e3,minZoom:1,maxZoom:8},52:{center:[5.2,48.1],scale:18e3,minZoom:1,maxZoom:8},54:{center:[6.2,48.75],scale:2e4,minZoom:1,maxZoom:8},55:{center:[5.4,49],scale:18e3,minZoom:1,maxZoom:8},57:{center:[6.65,49.1],scale:18e3,minZoom:1,maxZoom:8},67:{center:[7.55,48.65],scale:2e4,minZoom:1,maxZoom:8},68:{center:[7.25,47.85],scale:22e3,minZoom:1,maxZoom:8},88:{center:[6.4,48.2],scale:2e4,minZoom:1,maxZoom:8},21:{center:[4.85,47.35],scale:14e3,minZoom:1,maxZoom:8},25:{center:[6.35,47.15],scale:2e4,minZoom:1,maxZoom:8},39:{center:[5.7,46.75],scale:2e4,minZoom:1,maxZoom:8},58:{center:[3.5,47.1],scale:16e3,minZoom:1,maxZoom:8},70:{center:[6.15,47.65],scale:2e4,minZoom:1,maxZoom:8},71:{center:[4.55,46.65],scale:14e3,minZoom:1,maxZoom:8},89:{center:[3.55,47.8],scale:16e3,minZoom:1,maxZoom:8},90:{center:[6.9,47.65],scale:5e4,minZoom:1,maxZoom:8},18:{center:[2.45,46.95],scale:16e3,minZoom:1,maxZoom:8},28:{center:[1.45,48.3],scale:18e3,minZoom:1,maxZoom:8},36:{center:[1.7,46.75],scale:18e3,minZoom:1,maxZoom:8},37:{center:[.75,47.25],scale:18e3,minZoom:1,maxZoom:8},41:{center:[1.35,47.55],scale:18e3,minZoom:1,maxZoom:8},45:{center:[2.35,47.9],scale:16e3,minZoom:1,maxZoom:8},14:{center:[-.4,49.1],scale:2e4,minZoom:1,maxZoom:8},27:{center:[.95,49.1],scale:18e3,minZoom:1,maxZoom:8},50:{center:[-1.3,49.1],scale:18e3,minZoom:1,maxZoom:8},61:{center:[.15,48.55],scale:18e3,minZoom:1,maxZoom:8},76:{center:[.95,49.65],scale:18e3,minZoom:1,maxZoom:8},"02":{center:[3.65,49.55],scale:16e3,minZoom:1,maxZoom:8},59:{center:[3.25,50.35],scale:16e3,minZoom:1,maxZoom:8},60:{center:[2.45,49.4],scale:2e4,minZoom:1,maxZoom:8},62:{center:[2.35,50.5],scale:16e3,minZoom:1,maxZoom:8},80:{center:[2.35,49.9],scale:18e3,minZoom:1,maxZoom:8},44:{center:[-1.7,47.25],scale:16e3,minZoom:1,maxZoom:8},49:{center:[-.55,47.35],scale:16e3,minZoom:1,maxZoom:8},53:{center:[-.8,48.1],scale:2e4,minZoom:1,maxZoom:8},72:{center:[.25,47.95],scale:18e3,minZoom:1,maxZoom:8},85:{center:[-1.35,46.7],scale:18e3,minZoom:1,maxZoom:8},"2A":{center:[8.95,41.9],scale:22e3,minZoom:1,maxZoom:8},"2B":{center:[9.25,42.45],scale:2e4,minZoom:1,maxZoom:8}},Wm={center:[2.5,46.5],scale:18e3,minZoom:1,maxZoom:8};function Km({departmentCode:e,departmentName:t,communes:n,onCommuneSelect:r}){const[o,i]=M.useState(null),[a,s]=M.useState({x:0,y:0}),[l,m]=M.useState(1),c=Xm[e]||Wm,f=M.useMemo(()=>Um(e,t),[e,t]),d=M.useCallback(A=>Jn[A%Jn.length],[]),h=M.useCallback(A=>n.find(k=>k.name.toLowerCase()===A.toLowerCase()),[n]),p=M.useMemo(()=>ho.find(A=>A.code===e),[e]),v=M.useCallback((A,k)=>{const B=h(A);if(B){r(B);return}const F={code:k,name:A,department_code:e,department_name:t,region_code:(p==null?void 0:p.region_code)||"",region_name:(p==null?void 0:p.region_name)||"",population:0,postal_codes:[],type:"town"};r(F)},[h,r,e,t,p]),y=M.useCallback((A,k)=>{var F;i(A);const B=(F=k.currentTarget.closest(".map-container"))==null?void 0:F.getBoundingClientRect();B&&s({x:k.clientX-B.left,y:k.clientY-B.top})},[]),g=M.useCallback(A=>{var B;const k=(B=A.currentTarget.closest(".map-container"))==null?void 0:B.getBoundingClientRect();k&&s({x:A.clientX-k.left,y:A.clientY-k.top})},[]),_=M.useCallback(()=>{m(A=>Math.min(A*1.5,c.maxZoom))},[c.maxZoom]),x=M.useCallback(()=>{m(A=>Math.max(A/1.5,c.minZoom))},[c.minZoom]),N=M.useCallback(()=>{m(1)},[]),Q=M.useCallback(A=>{m(A.zoom)},[]),j=M.useMemo(()=>o?h(o):null,[o,h]),S=M.useMemo(()=>l>=4?8:l>=2.5?6:l>=1.5?5:0,[l]);return u.jsxs("div",{className:"relative mb-6",children:[u.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Communes of ",t]}),u.jsxs("div",{className:"map-container relative bg-gradient-to-br from-emerald-50 to-green-100 rounded-xl overflow-hidden shadow-inner border border-green-200",children:[u.jsxs("div",{className:"absolute top-3 right-3 z-10 flex flex-col gap-1",children:[u.jsx("button",{onClick:_,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom in",children:"+"}),u.jsx("button",{onClick:x,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom out",children:""}),u.jsx("button",{onClick:N,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-500 text-xs","aria-label":"Reset zoom",children:""})]}),u.jsxs("div",{className:"absolute bottom-3 right-3 z-10 bg-white/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-gray-600",children:[l.toFixed(1),"x"]}),u.jsxs("div",{className:"absolute top-3 left-3 z-10 bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-gray-600 max-w-[200px]",children:[u.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Navigate the map:"}),u.jsxs("ul",{className:"space-y-0.5",children:[u.jsx("li",{children:" Zoom in to see commune names"}),u.jsx("li",{children:" Click any commune for details"}),u.jsx("li",{children:" Drag to pan around"})]})]}),u.jsx(Gt,{projection:"geoMercator",projectionConfig:{center:c.center,scale:c.scale},style:{width:"100%",height:"auto",minHeight:"450px",maxHeight:"550px"},children:u.jsxs(On,{center:c.center,zoom:l,minZoom:c.minZoom,maxZoom:c.maxZoom,onMoveEnd:Q,children:[u.jsx(lt,{geography:f,children:({geographies:A})=>A.map((k,B)=>{const F=k.properties.nom,G=k.properties.code,b=o===F?Ym:d(B);return u.jsx(uo,{geography:k,fill:b,stroke:"#FFFFFF",strokeWidth:.5/l,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>v(F,G),onMouseEnter:w=>y(F,w),onMouseLeave:()=>i(null),onMouseMove:g},k.rsmKey)})}),S>0&&u.jsx(lt,{geography:f,children:({geographies:A})=>A.map(k=>{const B=k.properties.nom,F=k.geometry.coordinates;let G=0,q=0;try{const b=k.geometry.type==="MultiPolygon"?F[0][0]:F[0];if(b&&b.length>0){const w=b.map(P=>P[0]),C=b.map(P=>P[1]);G=(Math.min(...w)+Math.max(...w))/2,q=(Math.min(...C)+Math.max(...C))/2}}catch{return null}return u.jsx(In,{coordinates:[G,q],children:u.jsx("text",{textAnchor:"middle",fontSize:S/l,fontWeight:"500",fill:"#1F2937",dy:".3em",className:"pointer-events-none select-none",style:{textShadow:"0 0 3px white, 0 0 3px white, 0 0 3px white"},children:B})},`label-${k.rsmKey}`)})})]})}),o&&u.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 min-w-[180px]",style:{left:Math.min(Math.max(a.x,90),320),top:Math.max(a.y-10,60),transform:"translate(-50%, -100%)"},children:[u.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:o}),j?u.jsxs(u.Fragment,{children:[j.population>0&&u.jsxs("p",{className:"text-sm text-gray-600",children:["Population: ",j.population.toLocaleString()]}),j.postal_codes.length>0&&u.jsxs("p",{className:"text-sm text-gray-500",children:["Postal: ",j.postal_codes[0]]})]}):u.jsx("p",{className:"text-sm text-gray-500",children:t}),u.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:u.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to generate report "})})]})]}),u.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-4 text-xs text-gray-600",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("span",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3B82F6"}}),u.jsx("span",{children:"Hovered"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"flex gap-0.5",children:Jn.slice(0,4).map((A,k)=>u.jsx("span",{className:"w-2 h-3 rounded-sm",style:{backgroundColor:A}},k))}),u.jsx("span",{children:"Communes"})]})]}),u.jsx("div",{className:"text-gray-500",children:"Click any commune to view details and generate a relocation report"})]})]})}const Jm=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),ef=(e,t)=>{const n=Jm(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},tf={city:{icon:Xa,label:"City",color:"text-blue-600 bg-blue-100"},town:{icon:Ni,label:"Town",color:"text-amber-600 bg-amber-100"},village:{icon:Ja,label:"Village",color:"text-emerald-600 bg-emerald-100"}};function nf({department:e,onCommuneSelect:t,onGenerateReport:n,onBack:r}){const[o,i]=M.useState([]),[a,s]=M.useState([]),[l,m]=M.useState(!0),[c,f]=M.useState(""),[d,h]=M.useState("all");M.useEffect(()=>{(async()=>{m(!0);try{const g=ef(e.code,e.name),_=await fetch(g);if(!_.ok)throw new Error(`Failed to fetch GeoJSON: ${_.status}`);const N=(await _.json()).features.map(Q=>{const{code:j,nom:S}=Q.properties,A=e.major_cities.some(B=>B.toLowerCase()===S.toLowerCase());let k="village";return A?k="city":(S.includes("-")||S.length>15)&&(k="town"),{code:j,name:S,postal_codes:[e.code+"000"],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:k}});N.sort((Q,j)=>Q.name.localeCompare(j.name,"fr")),i(N),s(N)}catch(g){console.error("Failed to fetch communes from GeoJSON:",g);const _=e.major_cities.map((x,N)=>({code:`${e.code}${String(N+1).padStart(3,"0")}`,name:x,postal_codes:[`${e.code}000`],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:"city"}));i(_),s(_)}finally{m(!1)}})()},[e]),M.useEffect(()=>{let y=o;if(c.trim()){const g=c.toLowerCase();y=y.filter(_=>_.name.toLowerCase().includes(g)||_.postal_codes.some(x=>x.includes(g)))}d!=="all"&&(y=y.filter(g=>g.type===d)),s(y)},[o,c,d]);const p=M.useCallback(y=>{f(y.target.value)},[]),v={city:a.filter(y=>y.type==="city"),town:a.filter(y=>y.type==="town"),village:a.filter(y=>y.type==="village")};return u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsxs("div",{children:[u.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[u.jsx(ji,{className:"w-4 h-4"}),u.jsxs("span",{className:"text-sm",children:["Back to ",e.region_name]})]}),u.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[e.name," ",u.jsxs("span",{className:"text-gray-400 font-normal",children:["(",e.code,")"]})]}),u.jsxs("p",{className:"text-gray-600 mt-1",children:[e.region_name," region"]})]}),u.jsxs("button",{onClick:()=>n("department",e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate Report"]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(Mt,{className:"w-4 h-4"}),"Prefecture"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.prefecture})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[u.jsx(wi,{className:"w-4 h-4"}),"Population"]}),u.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Area"}),u.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.area_km2.toLocaleString()," km"]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Density"}),u.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Math.round(e.population/e.area_km2),"/km"]})]})]}),!l&&u.jsx(Km,{departmentCode:e.code,departmentName:e.name,communes:o,onCommuneSelect:t}),e.major_cities.length>0&&u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Major Cities"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:e.major_cities.map(y=>{const g=o.find(_=>_.name.toLowerCase()===y.toLowerCase());return u.jsx("button",{onClick:()=>{g&&t(g)},disabled:!g,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${g?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:y},y)})})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{type:"text",value:c,onChange:p,placeholder:"Search communes by name or postal code...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),u.jsx("div",{className:"flex gap-2",children:["all","city","town","village"].map(y=>u.jsxs("button",{onClick:()=>h(y),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${d===y?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[y==="all"?"All":y.charAt(0).toUpperCase()+y.slice(1),"s"]},y))})]}),l?u.jsxs("div",{className:"flex items-center justify-center py-12",children:[u.jsx(St,{className:"w-6 h-6 animate-spin text-primary-600"}),u.jsx("span",{className:"ml-2 text-gray-600",children:"Loading communes..."})]}):a.length>0?u.jsxs("div",{className:"space-y-6",children:[v.city.length>0&&(d==="all"||d==="city")&&u.jsx(er,{title:"Cities",communes:v.city,type:"city",onSelect:t}),v.town.length>0&&(d==="all"||d==="town")&&u.jsx(er,{title:"Towns",communes:v.town,type:"town",onSelect:t}),v.village.length>0&&(d==="all"||d==="village")&&u.jsx(er,{title:"Villages",communes:v.village,type:"village",onSelect:t})]}):u.jsxs("div",{className:"text-center py-12 text-gray-500",children:[u.jsx(tr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),u.jsx("p",{children:"No communes found matching your search"}),c&&u.jsx("button",{onClick:()=>f(""),className:"mt-2 text-primary-600 hover:underline",children:"Clear search"})]}),u.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Department Reports"}),u.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a detailed AI-researched report about ",e.name," including local economy, housing market, transportation, healthcare facilities, schools, and practical information for relocating to this area."]})]})]})}function er({title:e,communes:t,type:n,onSelect:r}){const[o,i]=M.useState(!1),a=tf[n],s=a.icon,l=12,m=o?t:t.slice(0,l),c=t.length>l;return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx("span",{className:`p-1.5 rounded-lg ${a.color}`,children:u.jsx(s,{className:"w-4 h-4"})}),u.jsx("h3",{className:"font-medium text-gray-900",children:e}),u.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.length,")"]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(f=>u.jsx("button",{onClick:()=>r(f),className:"text-left p-3 rounded-lg border border-gray-200 hover:border-primary-300 hover:bg-primary-50 transition-all group",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-primary-700",children:f.name}),u.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:f.postal_codes[0]})]}),f.population>0&&u.jsx("span",{className:"text-xs text-gray-400",children:f.population.toLocaleString()})]})},f.code))}),c&&u.jsx("div",{className:"mt-3 text-center",children:u.jsx("button",{onClick:()=>i(!o),className:"text-sm text-primary-600 hover:text-primary-700 hover:underline font-medium",children:o?"Show less":`Show all ${t.length} ${n==="city"?"cities":`${n}s`}`})})]})}function rf({onSelect:e}){const[t,n]=M.useState(""),[r,o]=M.useState([]),[i,a]=M.useState(!1),[s,l]=M.useState(!1),[m,c]=M.useState(-1),f=M.useRef(null),d=M.useRef(null),h=M.useRef(),p=M.useCallback(async _=>{if(!_.trim()){o([]);return}a(!0);const x=[],N=_.toLowerCase();if(cn.forEach(j=>{(j.name.toLowerCase().includes(N)||j.capital.toLowerCase().includes(N))&&x.push({type:"region",code:j.code,name:j.name,subtitle:`Region  ${j.capital}`,data:j})}),ho.forEach(j=>{(j.name.toLowerCase().includes(N)||j.prefecture.toLowerCase().includes(N)||j.code.includes(N))&&x.push({type:"department",code:j.code,name:j.name,subtitle:`Department  ${j.region_name}`,data:j})}),_.length>=3)try{const j=await nr.searchCommunes({q:_,limit:10});j.communes&&j.communes.forEach(S=>{x.push({type:"commune",code:S.code,name:S.name,subtitle:`${S.type.charAt(0).toUpperCase()+S.type.slice(1)}  ${S.department_name}`,data:S})})}catch(j){console.error("Commune search failed:",j)}const Q={region:0,department:1,commune:2};x.sort((j,S)=>{const A=Q[j.type]-Q[S.type];return A!==0?A:j.name.localeCompare(S.name)}),o(x.slice(0,15)),a(!1)},[]);M.useEffect(()=>(h.current&&clearTimeout(h.current),t.trim()?h.current=setTimeout(()=>{p(t)},300):o([]),()=>{h.current&&clearTimeout(h.current)}),[t,p]);const v=_=>{e(_.data,_.type),n(""),o([]),l(!1),c(-1)},y=_=>{if(!(!s||r.length===0))switch(_.key){case"ArrowDown":_.preventDefault(),c(x=>x<r.length-1?x+1:0);break;case"ArrowUp":_.preventDefault(),c(x=>x>0?x-1:r.length-1);break;case"Enter":_.preventDefault(),m>=0&&m<r.length&&v(r[m]);break;case"Escape":_.preventDefault(),l(!1),c(-1);break}};M.useEffect(()=>{const _=x=>{var N;d.current&&!d.current.contains(x.target)&&!((N=f.current)!=null&&N.contains(x.target))&&l(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const g=_=>{switch(_){case"region":return u.jsx(Mt,{className:"w-4 h-4 text-primary-600"});case"department":return u.jsx(rr,{className:"w-4 h-4 text-amber-600"});case"commune":return u.jsx(Ni,{className:"w-4 h-4 text-emerald-600"})}};return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"relative",children:[u.jsx(tr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),u.jsx("input",{ref:f,type:"text",value:t,onChange:_=>{n(_.target.value),l(!0),c(-1)},onFocus:()=>l(!0),onKeyDown:y,placeholder:"Search regions, departments, towns...",className:"w-64 pl-10 pr-8 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-label":"Search locations","aria-expanded":s,"aria-haspopup":"listbox","aria-controls":"location-search-results",role:"combobox"}),t&&u.jsx("button",{onClick:()=>{var _;n(""),o([]),(_=f.current)==null||_.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:u.jsx(Ci,{className:"w-4 h-4"})})]}),s&&(t||r.length>0)&&u.jsx("div",{ref:d,id:"location-search-results",role:"listbox",className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:i?u.jsxs("div",{className:"flex items-center justify-center py-4",children:[u.jsx(St,{className:"w-5 h-5 animate-spin text-primary-600"}),u.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Searching..."})]}):r.length>0?u.jsx("ul",{className:"max-h-80 overflow-y-auto",children:r.map((_,x)=>u.jsx("li",{children:u.jsxs("button",{onClick:()=>v(_),onMouseEnter:()=>c(x),className:`w-full text-left px-4 py-3 flex items-start gap-3 transition-colors ${x===m?"bg-primary-50":"hover:bg-gray-50"}`,role:"option","aria-selected":x===m,children:[u.jsx("span",{className:"mt-0.5",children:g(_.type)}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:_.name}),u.jsx("p",{className:"text-sm text-gray-500",children:_.subtitle})]})]})},`${_.type}-${_.code}`))}):t.length>=2?u.jsxs("div",{className:"py-4 text-center text-gray-500 text-sm",children:['No results found for "',t,'"']}):u.jsx("div",{className:"py-4 text-center text-gray-500 text-sm",children:"Type to search locations..."})})]})}function of(e){switch(e){case"api_key_missing":return"The AI service is not configured. Please contact support to enable AI-generated reports with specific local data.";case"api_error":return"Unable to connect to the AI service. Please try again later or contact support.";case"parse_error":return"The AI response could not be processed. Please try regenerating the report.";default:return'This is a template report with generic information. Click "Generate AI Report" to get location-specific data.'}}function af({isOpen:e,onClose:t,locationType:n,locationCode:r,locationName:o}){const[i,a]=M.useState("initial"),[s,l]=M.useState(null),[m,c]=M.useState(null),[f,d]=M.useState(!1),[h,p]=M.useState(null),[v,y]=M.useState(!1),[g,_]=M.useState(null);M.useEffect(()=>{e&&(a("initial"),l(null),c(null),d(!1),p(null),y(!1),_(null))},[e,r]);const x=async(j=!1)=>{a("generating"),c(null);try{const S=await nr.generateReport({location_type:n,location_code:r,location_name:o,force_refresh:j});l(S.report),d(S.cached),p(S.cache_age||null),y(S.is_placeholder||!1),_(S.placeholder_reason||null),a("ready")}catch(S){console.error("Report generation failed:",S),c(S instanceof Error?S.message:"Failed to generate report. Please try again."),a("error")}},N=async()=>{if(s){a("saving");try{await nr.saveReport(s.id),a("saved")}catch(j){console.error("Failed to save report:",j),c("Failed to save report to your documents."),a("ready")}}},Q=()=>{if(!(s!=null&&s.id))return;const j=window.fraPortalData||{nonce:"",apiUrl:"/wp-json/fra-portal/v1"},S=`${j.apiUrl}/research/report/${s.id}/html?_wpnonce=${j.nonce}`;window.open(S,"_blank")};return e?u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",role:"presentation",onClick:j=>{j.target===j.currentTarget&&t()},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[u.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:"Generate Relocation Report"}),u.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:u.jsx(Ci,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6",children:[i==="initial"&&u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx($e,{className:"w-8 h-8 text-primary-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Generate a comprehensive AI-researched relocation report for"," ",n==="region"?"this region":n==="department"?"this department":"this area","."]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Report includes:"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:" Geography & landscape overview"}),u.jsx("li",{children:" Climate and weather patterns"}),u.jsx("li",{children:" Economy and job market"}),u.jsx("li",{children:" Housing and real estate"}),u.jsx("li",{children:" Food and wine culture"}),u.jsx("li",{children:" Culture and lifestyle"}),u.jsx("li",{children:" Quality of life (healthcare, education)"}),u.jsx("li",{children:" Transportation options"}),u.jsx("li",{children:" Environment and outdoor activities"}),u.jsx("li",{children:" Practical information"})]})]}),u.jsxs("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate Report"]})]}),i==="generating"&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx(St,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Generating Report"}),u.jsxs("p",{className:"text-gray-600",children:["Our AI is researching and compiling information about ",o,"..."]}),u.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"This may take a minute or two."})]}),i==="ready"&&s&&u.jsxs("div",{children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(xo,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Report Ready"}),f&&!v&&u.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full mb-2",children:[u.jsx(qa,{className:"w-3 h-3"}),u.jsxs("span",{children:["Cached report ",h&&`(${h})`]})]}),v&&u.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-700 text-sm rounded-full mb-2",children:[u.jsx(yo,{className:"w-3 h-3"}),u.jsx("span",{children:"Template report (generic data)"})]}),u.jsx("p",{className:"text-gray-600",children:v?of(g):`Your relocation report for ${o} is ready.`})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:s.location_name}),u.jsxs("span",{className:"text-xs text-gray-500",children:["Version ",s.version]})]}),u.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[n.charAt(0).toUpperCase()+n.slice(1)," Report"]}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(s.updated_at).toLocaleDateString()]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:Q,className:"btn btn-primary w-full",children:[u.jsx($e,{className:"w-4 h-4"}),"View Report"]}),u.jsxs("button",{onClick:N,className:"btn btn-outline w-full",children:[u.jsx(Wa,{className:"w-4 h-4"}),"Save to My Documents"]}),(f||v)&&u.jsxs("button",{onClick:()=>x(!0),className:`btn w-full text-sm ${v?"btn-primary":"btn-ghost"}`,children:[u.jsx(Ua,{className:"w-4 h-4"}),v?"Generate AI Report":"Regenerate with fresh data"]})]})]}),i==="saving"&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx(St,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Saving to Documents"}),u.jsx("p",{className:"text-gray-600",children:"Adding this report to your document library..."})]}),i==="saved"&&s&&u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(xo,{className:"w-8 h-8 text-green-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Saved to Documents"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"This report is now linked in your documents. You'll always have access to the latest version."}),u.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left",children:u.jsxs("p",{className:"text-sm text-blue-700",children:[u.jsx("strong",{children:"Note:"})," When this report is updated, your saved link will automatically point to the newest version with the latest information."]})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:Q,className:"btn btn-primary w-full",children:[u.jsx($e,{className:"w-4 h-4"}),"View Report"]}),u.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Close"})]})]}),i==="error"&&u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(yo,{className:"w-8 h-8 text-red-600"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Generation Failed"}),u.jsx("p",{className:"text-gray-600 mb-2",children:m}),u.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the issue persists."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:"Try Again"}),u.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Cancel"})]})]})]})]})}):null}function yf(){const[e,t]=M.useState({level:"france"}),[n,r]=M.useState([]),[o,i]=M.useState(!1),[a,s]=M.useState(null),l=M.useCallback(p=>{t({level:"region",region:p}),r([{level:"region",code:p.code,name:p.name}])},[]),m=M.useCallback(p=>{t(v=>({...v,level:"department",department:p})),r(v=>[...v.slice(0,1),{level:"department",code:p.code,name:p.name}])},[]),c=M.useCallback(p=>{t(v=>({...v,level:"commune",commune:p})),r(v=>[...v.slice(0,2),{level:"commune",code:p.code,name:p.name}])},[]),f=M.useCallback(p=>{if(p===-1)t({level:"france"}),r([]);else{const v=n[p],y=n.slice(0,p+1);r(y),v.level==="region"?t(g=>({level:"region",region:g.region})):v.level==="department"&&t(g=>({level:"department",region:g.region,department:g.department}))}},[n]),d=M.useCallback((p,v,y)=>{s({type:p,code:v,name:y}),i(!0)},[]),h=M.useCallback((p,v)=>{if(v==="region")l(p);else if(v==="department"){const y=p;t({level:"department",region:{code:y.region_code,name:y.region_name},department:y}),r([{level:"region",code:y.region_code,name:y.region_name},{level:"department",code:y.code,name:y.name}])}else if(v==="commune"){const y=p;t({level:"commune",region:{code:y.region_code,name:y.region_name},department:{code:y.department_code,name:y.department_name},commune:y}),r([{level:"region",code:y.region_code,name:y.region_name},{level:"department",code:y.department_code,name:y.department_name},{level:"commune",code:y.code,name:y.name}])}},[l]);return u.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[u.jsx(Mt,{className:"w-6 h-6 text-primary-600"}),"Explore France"]}),u.jsx("p",{className:"mt-1 text-gray-600",children:"Discover regions, departments, and towns. Generate detailed relocation reports."})]}),u.jsx(rf,{onSelect:h})]})}),u.jsx("nav",{className:"mb-6","aria-label":"Location breadcrumb",children:u.jsxs("ol",{className:"flex items-center gap-2 text-sm",children:[u.jsx("li",{children:u.jsxs("button",{onClick:()=>f(-1),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg transition-colors ${e.level==="france"?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[u.jsx(Mt,{className:"w-4 h-4"}),"France"]})}),n.map((p,v)=>u.jsxs("li",{className:"flex items-center gap-2",children:[u.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),u.jsx("button",{onClick:()=>f(v),className:`px-3 py-1.5 rounded-lg transition-colors ${v===n.length-1?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:p.name})]},p.code))]})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.level==="france"&&u.jsx(Sm,{onRegionSelect:l,onGenerateReport:(p,v)=>d("region",p,v)}),e.level==="region"&&e.region&&u.jsx(Hm,{region:e.region,onDepartmentSelect:m,onGenerateReport:(p,v)=>d("region",p,v),onBack:()=>f(-1)}),e.level==="department"&&e.department&&u.jsx(nf,{department:e.department,onCommuneSelect:c,onGenerateReport:(p,v,y)=>d(p,v,y),onBack:()=>f(0)}),e.level==="commune"&&e.commune&&u.jsx(sf,{commune:e.commune,onGenerateReport:(p,v)=>d("commune",p,v)})]}),o&&a&&u.jsx(af,{isOpen:o,onClose:()=>i(!1),locationType:a.type,locationCode:a.code,locationName:a.name})]})}function sf({commune:e,onGenerateReport:t}){return u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-start justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),u.jsxs("p",{className:"text-gray-600",children:[e.department_name,", ",e.region_name]})]}),u.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate Report"]})]}),u.jsxs("div",{className:`grid grid-cols-1 gap-4 mb-6 ${e.population>0?"md:grid-cols-3":"md:grid-cols-2"}`,children:[e.population>0&&u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Population"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.population.toLocaleString()})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:e.type})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm text-gray-500",children:"Department"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.department_name})]})]}),u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Generate a Detailed Report"}),u.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Get a comprehensive AI-researched guide about ",e.name,", including local history, cost of living, healthcare facilities, schools, transportation, and practical information for relocating to this area."]}),u.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[u.jsx($e,{className:"w-4 h-4"}),"Generate ",e.name," Report"]})]})]})}export{yf as default};
