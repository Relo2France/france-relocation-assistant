import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as p}from"./vendor-react-F9Y4d3HK.js";import{a as k}from"./vendor-utils-C5RVuWu4.js";import{c as z,m as L,U as R,F as O,_ as U,$ as B,a0 as G,a1 as K,a2 as J,a3 as D,a4 as A,A as Z,a5 as $,a6 as q,a7 as X,a8 as Y,a9 as V,Z as Q,aa as ee,ab as ae,ac as se,ad as le,ae as te,r as re,af as ne,ag as ie,b as oe,M as ce,g as de,ah as W}from"./main-BLZxmBnp.js";import{L as P}from"./loader-2--i9FHRmK.js";import{S as I}from"./save-C8caMIx0.js";import{T as M}from"./trash-2-49VeuCv6.js";import{C as me}from"./chevron-up-sa0SOOok.js";import{C as ue}from"./chevron-down-DNNct5vZ.js";import{G as pe}from"./grip-vertical-Wz2zPd0I.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xe={LayoutDashboard:W,CheckSquare:de,MessageSquare:ce,Calendar:oe,BookOpen:ie,HelpCircle:ne,FolderOpen:re,ClipboardList:te,BookMarked:le,Bot:se,CreditCard:ae,Users:ee,Settings:Q,FileText:O,User:R,Bell:U};function De(){const{settingsTab:a,setSettingsTab:d}=L(),[r,t]=p.useState("portal-account");p.useEffect(()=>{a&&["portal-account","visa-profile","notifications","menu"].includes(a)&&(t(a),d(null))},[a,d]);const n=[{id:"portal-account",label:"Portal Account",icon:R},{id:"visa-profile",label:"Visa Profile",icon:O},{id:"notifications",label:"Notifications",icon:U},{id:"menu",label:"Menu",icon:H}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your profile and preferences"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64 flex-shrink-0",children:e.jsx("nav",{className:"card p-2",children:n.map(s=>{const m=s.icon;return e.jsxs("button",{onClick:()=>t(s.id),className:k("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors",r===s.id?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50"),children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id)})})}),e.jsxs("div",{className:"flex-1",children:[r==="portal-account"&&e.jsx(be,{}),r==="visa-profile"&&e.jsx(he,{}),r==="notifications"&&e.jsx(ye,{}),r==="menu"&&e.jsx(ge,{})]})]})]})}function be(){var C;const{data:a,isLoading:d}=B(),r=G(),t=K(),n=J(),[s,m]=p.useState({first_name:"",last_name:"",display_name:""}),[j,b]=p.useState(!1),[f,h]=p.useState(!1),[v,w]=p.useState(""),[i,l]=p.useState(!1),[y,x]=p.useState(""),[E,o]=p.useState(!1);a&&!j&&(m({first_name:a.first_name||"",last_name:a.last_name||"",display_name:a.display_name||""}),b(!0));const c=u=>{u.preventDefault(),r.mutate(s)},g=()=>{t.mutate(v,{onSuccess:()=>{var u;window.location.href=((u=window.fraPortalData)==null?void 0:u.siteUrl)||"/"}})},N=()=>{n.mutate(y,{onSuccess:()=>{o(!0),l(!1),x(""),setTimeout(()=>{window.location.reload()},2e3)}})},_=v==="DELETE MY ACCOUNT",S=y==="RESET MY PROFILE";return d?e.jsx(T,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:a==null?void 0:a.avatar_url,alt:a==null?void 0:a.display_name,className:"w-20 h-20 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Profile photo is managed through your Gravatar account"}),e.jsx("a",{href:"https://gravatar.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-600 hover:text-primary-700",children:"Change on Gravatar"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",value:s.first_name,onChange:u=>m({...s,first_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",value:s.last_name,onChange:u=>m({...s,last_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"display_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),e.jsx("input",{type:"text",id:"display_name",value:s.display_name,onChange:u=>m({...s,display_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This is how your name will appear throughout the portal"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"submit",disabled:r.isPending,className:"btn btn-primary flex items-center gap-2",children:[r.isPending?e.jsx(P,{className:"w-4 h-4 animate-spin"}):r.isSuccess?e.jsx(D,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"}),r.isPending?"Saving...":r.isSuccess?"Saved!":"Save Changes"]}),r.isError&&e.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Account Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Username"}),e.jsx("span",{className:"font-medium text-gray-900",children:a==null?void 0:a.username})]}),e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Email"}),e.jsx("span",{className:"font-medium text-gray-900",children:a==null?void 0:a.email})]}),e.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Account Type"}),e.jsx("span",{className:"font-medium text-gray-900",children:a!=null&&a.is_admin?"Administrator":"Member"})]}),e.jsxs("div",{className:"flex justify-between py-3",children:[e.jsx("span",{className:"text-gray-600",children:"Membership Status"}),e.jsx("span",{className:k("px-2 py-1 rounded-full text-xs font-medium",a!=null&&a.is_member?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:a!=null&&a.is_member?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Last changed: Unknown"})]}),e.jsx("a",{href:`${((C=window.fraPortalData)==null?void 0:C.siteUrl)||""}/wp-admin/profile.php`,className:"btn btn-secondary text-sm",children:"Change Password"})]})})]}),e.jsxs("div",{className:"card p-6 border-red-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-600 mb-4",children:"Danger Zone"}),e.jsx("div",{className:"p-4 bg-amber-50 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Reset Visa Profile"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Reset all your profile data, tasks, documents, and progress. Your account will remain active, but it will be as if you're starting fresh as a new member."}),E?e.jsxs("div",{className:"mt-4 p-3 bg-green-100 border border-green-200 rounded-lg flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Profile reset successfully! Reloading page..."})]}):i?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 border border-amber-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"This will delete all your tasks, documents, notes, profile information, and progress. Your account will remain active but all relocation data will be removed."})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reset-confirm",className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"RESET MY PROFILE"})," to confirm:"]}),e.jsx("input",{type:"text",id:"reset-confirm",value:y,onChange:u=>x(u.target.value),placeholder:"RESET MY PROFILE",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500",autoComplete:"off"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:N,disabled:!S||n.isPending,className:k("px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-2 transition-colors",S&&!n.isPending?"bg-amber-600 text-white hover:bg-amber-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 animate-spin"}),"Resetting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4"}),"Reset Profile"]})}),e.jsx("button",{type:"button",onClick:()=>{l(!1),x("")},className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})]}),n.isError&&e.jsx("p",{className:"text-sm text-red-600",children:n.error instanceof Error?n.error.message:"Failed to reset profile. Please try again or contact support."})]}):e.jsxs("button",{type:"button",onClick:()=>l(!0),className:"mt-4 px-4 py-2 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"Reset My Profile"]})]})]})}),e.jsx("div",{className:"p-4 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Once you delete your account, there is no going back. All your data, documents, tasks, and profile information will be permanently removed."}),f?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:"This action cannot be undone. This will permanently delete your account and remove all associated data."})}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"delete-confirm",className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",e.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"DELETE MY ACCOUNT"})," to confirm:"]}),e.jsx("input",{type:"text",id:"delete-confirm",value:v,onChange:u=>w(u.target.value),placeholder:"DELETE MY ACCOUNT",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",autoComplete:"off"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:g,disabled:!_||t.isPending,className:k("px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-2 transition-colors",_&&!t.isPending?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:t.isPending?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Permanently Delete Account"]})}),e.jsx("button",{type:"button",onClick:()=>{h(!1),w("")},className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})]}),t.isError&&e.jsx("p",{className:"text-sm text-red-600",children:t.error instanceof Error?t.error.message:"Failed to delete account. Please try again or contact support."})]}):e.jsxs("button",{type:"button",onClick:()=>h(!0),className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Delete My Account"]})]})]})})]})]})}function he(){const{data:a,isLoading:d}=$(),{data:r}=q(),t=X(),[n,s]=p.useState({}),[m,j]=p.useState({personal:!0,applicants:!1,visa:!1,location:!1,timeline:!1,financial:!1,documents:!1});p.useEffect(()=>{a&&s(a)},[a]);const b=i=>{j(l=>({...l,[i]:!l[i]}))},f=(i,l)=>{s(y=>({...y,[i]:l}))},h=i=>{i.preventDefault(),t.mutate(n)};if(d)return e.jsx(T,{});const v=[{id:"personal",title:"ðŸ‘¤ Personal Information",description:"Legal names as they appear on your passport",fields:[{key:"legal_first_name",label:"Legal First Name",type:"text",placeholder:"As shown on passport"},{key:"legal_middle_name",label:"Legal Middle Name(s)",type:"text",placeholder:"Optional"},{key:"legal_last_name",label:"Legal Last Name",type:"text",placeholder:"As shown on passport"},{key:"date_of_birth",label:"Date of Birth",type:"date"},{key:"nationality",label:"Nationality",type:"text",placeholder:"e.g., American"},{key:"passport_number",label:"Passport Number",type:"text",placeholder:"Optional - for document pre-fill"},{key:"passport_expiry",label:"Passport Expiry Date",type:"date"}]},{id:"applicants",title:"ðŸ‘¥ Who's Moving?",description:"Information about family members relocating with you",fields:[{key:"applicants",label:"Applicants",type:"select",options:[{value:"alone",label:"Applying alone"},{value:"spouse",label:"With spouse/partner"},{value:"spouse_kids",label:"With spouse and children"},{value:"kids_only",label:"With children (no spouse)"}]},{key:"spouse_legal_first_name",label:"Spouse Legal First Name",type:"text",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"spouse_legal_last_name",label:"Spouse Legal Last Name",type:"text",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"spouse_date_of_birth",label:"Spouse Date of Birth",type:"date",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"num_children",label:"Number of Children",type:"number",conditional:{field:"applicants",values:["spouse_kids","kids_only"]}},{key:"children_ages",label:"Children Ages",type:"text",placeholder:"e.g., 5, 8, 12",conditional:{field:"applicants",values:["spouse_kids","kids_only"]}},{key:"has_pets",label:"Do you have pets?",type:"select",options:[{value:"no",label:"No"},{value:"dogs",label:"Dog(s)"},{value:"cats",label:"Cat(s)"},{value:"both",label:"Dogs and cats"},{value:"other",label:"Other pets"}]},{key:"pet_details",label:"Pet Details",type:"text",placeholder:"Number and type of pets",conditional:{field:"has_pets",values:["dogs","cats","both","other"]}}]},{id:"visa",title:"ðŸ“‹ Visa & Employment",description:"Your visa type and work situation",fields:[{key:"visa_type",label:"Visa Type",type:"select",options:[{value:"undecided",label:"Undecided / Need help choosing"},{value:"visitor",label:"Visitor Visa (VLS-TS Visiteur)"},{value:"talent_passport",label:"Talent Passport"},{value:"employee",label:"Employee Visa"},{value:"entrepreneur",label:"Entrepreneur Visa"},{value:"student",label:"Student Visa"},{value:"family",label:"Family Reunification"},{value:"spouse_french",label:"Spouse of French National"},{value:"retiree",label:"Retiree Visa"}]},{key:"employment_status",label:"Your Employment Status",type:"select",options:[{value:"employed",label:"Employed"},{value:"self_employed",label:"Self-employed"},{value:"retired",label:"Retired"},{value:"not_working",label:"Not currently working"}]},{key:"work_in_france",label:"Planning to work in France?",type:"select",options:[{value:"no",label:"No"},{value:"yes_local",label:"Yes, for a French employer"},{value:"yes_remote",label:"Yes, remotely for a US company"},{value:"yes_self",label:"Yes, self-employed"},{value:"undecided",label:"Undecided"}]},{key:"industry",label:"Industry/Field",type:"text"},{key:"employer_name",label:"Employer Name",type:"text",conditional:{field:"employment_status",values:["employed"]}},{key:"job_title",label:"Job Title",type:"text"}]},{id:"location",title:"ðŸ“ Locations",description:"Current location and destination in France",fields:[{key:"current_state",label:"Current US State",type:"select",options:F},{key:"birth_state",label:"Your Birth State",type:"select",options:[...F,{value:"other",label:"Other (not US)"}]},{key:"birth_state_other",label:"Birth Country/Location",type:"text",conditional:{field:"birth_state",values:["other"]}},{key:"target_location",label:"Target Location in France",type:"text",placeholder:"e.g., Paris, Dordogne, undecided"},{key:"housing_plan",label:"Housing Plans",type:"select",options:[{value:"buying",label:"Buying property"},{value:"renting",label:"Renting"},{value:"undecided",label:"Undecided"},{value:"already_own",label:"Already own property"}]}]},{id:"timeline",title:"ðŸ“… Timeline & Plans",description:"When are you planning to move?",fields:[{key:"timeline",label:"Move Timeline",type:"select",options:[{value:"asap",label:"As soon as possible"},{value:"3_months",label:"Within 3 months"},{value:"6_months",label:"3-6 months"},{value:"12_months",label:"6-12 months"},{value:"over_12",label:"More than 12 months"},{value:"undecided",label:"Undecided"}]},{key:"target_move_date",label:"Target Move Date",type:"date"},{key:"move_date_certainty",label:"How certain is this date?",type:"select",options:[{value:"fixed",label:"Fixed - I have tickets/lease starting this date"},{value:"anticipated",label:"Anticipated - Planning for this date but may adjust"},{value:"flexible",label:"Flexible - No firm date yet"}]},{key:"application_location",label:"Where are you applying from?",type:"select",options:[{value:"us",label:"United States (initial application)"},{value:"france",label:"France (renewal/reapplication)"}]}]},{id:"financial",title:"ðŸ’° Financial",description:"Income and financial planning",fields:[{key:"french_proficiency",label:"French Language Proficiency",type:"select",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"conversational",label:"Conversational"},{value:"fluent",label:"Fluent"},{value:"native",label:"Native"}]},{key:"french_mortgage",label:"Planning to get a French mortgage?",type:"select",options:[{value:"no",label:"No"},{value:"yes",label:"Yes"},{value:"maybe",label:"Maybe/Undecided"}]}]},{id:"documents",title:"ðŸ“„ Document Status",description:"Track your vital documents",fields:[{key:"has_birth_cert",label:"Have certified birth certificate?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No, need to order"},{value:"unsure",label:"Not sure if it's certified"}]},{key:"birth_cert_apostilled",label:"Is it apostilled?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],conditional:{field:"has_birth_cert",values:["yes"]}},{key:"has_marriage_cert",label:"Have certified marriage certificate?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No, need to order"},{value:"unsure",label:"Not sure if it's certified"},{value:"na",label:"Not applicable"}],conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"marriage_cert_apostilled",label:"Is marriage certificate apostilled?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],conditional:{field:"has_marriage_cert",values:["yes"]}}]}],w=i=>{if(!i.conditional)return!0;const l=n[i.conditional.field];return i.conditional.values.includes(l)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[(r==null?void 0:r.percentage)||0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(r==null?void 0:r.percentage)||0}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Complete your profile to enable document generation and personalized recommendations."})]}),e.jsxs("form",{onSubmit:h,children:[v.map(i=>e.jsxs("div",{className:"card mb-4 overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>b(i.id),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.title}),e.jsx("p",{className:"text-sm text-gray-500",children:i.description})]}),m[i.id]?e.jsx(me,{className:"w-5 h-5 text-gray-400"}):e.jsx(ue,{className:"w-5 h-5 text-gray-400"})]}),m[i.id]&&e.jsx("div",{className:"p-4 pt-0 border-t border-gray-100",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:i.fields.filter(w).map(l=>{var y;return e.jsxs("div",{className:l.type==="textarea"?"md:col-span-2":"",children:[e.jsx("label",{htmlFor:l.key,className:"block text-sm font-medium text-gray-700 mb-1",children:l.label}),l.type==="select"?e.jsxs("select",{id:l.key,value:n[l.key]||"",onChange:x=>f(l.key,x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"-- Select --"}),(y=l.options)==null?void 0:y.map(x=>e.jsx("option",{value:x.value,children:x.label},x.value))]}):l.type==="number"?e.jsx("input",{type:"number",id:l.key,value:n[l.key]||"",onChange:x=>f(l.key,parseInt(x.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}):e.jsx("input",{type:l.type,id:l.key,value:n[l.key]||"",onChange:x=>f(l.key,x.target.value),placeholder:l.placeholder,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]},l.key)})})})]},i.id)),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsxs("button",{type:"submit",disabled:t.isPending,className:"btn btn-primary flex items-center gap-2",children:[t.isPending?e.jsx(P,{className:"w-4 h-4 animate-spin"}):t.isSuccess?e.jsx(D,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"}),t.isPending?"Saving...":t.isSuccess?"Saved!":"Save Visa Profile"]}),t.isError&&e.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]})]})}const F=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"DC",label:"District of Columbia"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}];function ye(){const{data:a,isLoading:d}=Y(),r=V(),t=(s,m)=>{r.mutate({[s]:m})};if(d)return e.jsx(T,{});const n=[{key:"email_notifications",label:"Email Notifications",description:"Receive email updates about your relocation progress"},{key:"task_reminders",label:"Task Reminders",description:"Get reminded about upcoming and overdue tasks"},{key:"weekly_digest",label:"Weekly Digest",description:"Receive a weekly summary of your progress"}];return e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-6",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-500",children:s.description})]}),e.jsx("button",{type:"button",onClick:()=>t(s.key,!(a!=null&&a[s.key])),className:k("relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",a!=null&&a[s.key]?"bg-primary-600":"bg-gray-200"),children:e.jsx("span",{className:k("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",a!=null&&a[s.key]?"translate-x-5":"translate-x-0")})})]},s.key))}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Regional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),e.jsxs("select",{id:"language",value:(a==null?void 0:a.language)||"en",onChange:s=>r.mutate({language:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"FranÃ§ais"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),e.jsxs("select",{id:"timezone",value:(a==null?void 0:a.timezone)||"Europe/Paris",onChange:s=>r.mutate({timezone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),e.jsx("option",{value:"Europe/London",children:"London (GMT)"}),e.jsx("option",{value:"America/New_York",children:"New York (EST)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (PST)"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]})]})]})]})}function ge(){const{settings:a}=L(),{data:d,isLoading:r}=Y(),t=V(),n={project:{itemIds:["dashboard","tasks","checklists","timeline","messages"]},resources:{itemIds:["chat","documents","guides","glossary","files"]},account:{itemIds:["profile","family","membership","settings","help"]}},s=a.menu.reduce((o,c)=>(o[c.id]=c,o),{}),[m,j]=p.useState(()=>d!=null&&d.menu_order?d.menu_order:{project:n.project.itemIds,resources:n.resources.itemIds,account:n.account.itemIds});p.useEffect(()=>{d!=null&&d.menu_order&&j(d.menu_order)},[d]);const[b,f]=p.useState(null),[h,v]=p.useState(null),w=(o,c)=>{f({sectionId:o,itemId:c})},i=(o,c,g)=>{o.preventDefault(),b&&b.sectionId===c&&v({sectionId:c,index:g})},l=()=>{if(b&&h&&b.sectionId===h.sectionId){const o=b.sectionId,c=[...m[o]],g=c.indexOf(b.itemId),N=h.index;if(g!==-1&&g!==N){c.splice(g,1),c.splice(N,0,b.itemId);const _={...m,[o]:c};j(_)}}f(null),v(null)},y=()=>{t.mutate({menu_order:m})},x=()=>{const o={project:n.project.itemIds,resources:n.resources.itemIds,account:n.account.itemIds};j(o),t.mutate({menu_order:o})};if(r)return e.jsx(T,{});const E=[{id:"project",label:"PROJECT"},{id:"resources",label:"RESOURCES"},{id:"account",label:"ACCOUNT"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu Order"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Drag and drop menu items to reorder them within each section"})]})}),e.jsx("div",{className:"space-y-6",children:E.map(o=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:o.label})}),e.jsx("div",{className:"p-2",children:m[o.id].map((c,g)=>{const N=s[c];if(!N)return null;const _=xe[N.icon]||W,S=(b==null?void 0:b.itemId)===c,C=(h==null?void 0:h.sectionId)===o.id&&(h==null?void 0:h.index)===g;return e.jsxs("div",{draggable:!0,onDragStart:()=>w(o.id,c),onDragOver:u=>i(u,o.id,g),onDragEnd:l,className:k("flex items-center gap-3 px-3 py-2 rounded-lg cursor-move transition-all",S&&"opacity-50 bg-primary-50",C&&"border-t-2 border-primary-500",!S&&!C&&"hover:bg-gray-50"),children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx(_,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:N.label})]},c)})})]},o.id))}),e.jsxs("div",{className:"flex items-center gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",onClick:y,disabled:t.isPending,className:"btn btn-primary flex items-center gap-2",children:[t.isPending?e.jsx(P,{className:"w-4 h-4 animate-spin"}):t.isSuccess?e.jsx(D,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"}),t.isPending?"Saving...":t.isSuccess?"Saved!":"Save Order"]}),e.jsx("button",{type:"button",onClick:x,className:"btn btn-secondary",children:"Reset to Default"}),t.isError&&e.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]}),e.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"How it works"}),e.jsx("p",{className:"text-sm text-blue-700",children:'Drag items up or down within each section to change their order in the sidebar. Items can only be reordered within their own section (Project, Resources, or Account). Your changes will be saved and applied immediately when you click "Save Order".'})]})]})})]})}function T(){return e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(a=>e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"},a))})]})}export{De as default};
