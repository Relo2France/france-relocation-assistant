import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as v}from"./vendor-react-F9Y4d3HK.js";import{a as g}from"./vendor-utils-C5RVuWu4.js";import{c as Y,az as B,aA as E,aB as z,aC as V,aD as H,aE as X,aF as F,C,aa as O,b as S,ax as q,ah as G,a as P,l as J}from"./main-vhZnEWW8.js";import{X as M}from"./x-circle-zjT9hnfD.js";import{A as K}from"./alert-circle-YSI-scOL.js";import{L as Q}from"./loader-2-DlxjLDx_.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=Y("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);function W({isOpen:c,onClose:o,onConfirm:r,title:y,message:i,confirmText:j,isLoading:n,isDangerous:p=!1}){return e.jsx(J,{isOpen:c,onClose:o,title:y,size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:i}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:o,disabled:n,className:"btn btn-secondary",children:"Cancel"}),e.jsxs("button",{onClick:r,disabled:n,className:g("btn flex items-center gap-2",p?"bg-red-600 hover:bg-red-700 text-white":"btn-primary"),children:[n&&e.jsx(Q,{className:"w-4 h-4 animate-spin"}),j]})]})]})})}function le(){const{data:c,isLoading:o}=B(),{data:r,isLoading:y}=E(),{data:i,isLoading:j}=z(),{data:n}=V(),p=H(),_=X(),k=F(),[t,l]=v.useState({isOpen:!1,type:null,subscriptionId:null}),[h,A]=v.useState({show:!1,type:"success",message:""}),[d,I]=v.useState(1),N=10,b=Math.ceil(((i==null?void 0:i.length)||0)/N),m=i==null?void 0:i.slice((d-1)*N,d*N),u=(s,x)=>{A({show:!0,type:s,message:x}),setTimeout(()=>{A({show:!1,type:"success",message:""})},5e3)},R=async()=>{if(!(!t.subscriptionId||!t.type))try{t.type==="cancel"?(await p.mutateAsync(t.subscriptionId),u("success","Subscription cancelled successfully")):t.type==="suspend"?(await _.mutateAsync(t.subscriptionId),u("success","Subscription suspended successfully")):t.type==="resume"&&(await k.mutateAsync(t.subscriptionId),u("success","Subscription resumed successfully")),l({isOpen:!1,type:null,subscriptionId:null})}catch{u("error","Action failed. Please try again.")}},f=s=>{const x={active:"bg-green-100 text-green-700",suspended:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",expired:"bg-gray-100 text-gray-700",pending:"bg-blue-100 text-blue-700"},T={active:C,suspended:P,cancelled:M,expired:K,pending:P}[s];return e.jsxs("span",{className:g("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",x[s]),children:[e.jsx(T,{className:"w-3.5 h-3.5"}),s.charAt(0).toUpperCase()+s.slice(1)]})},D=s=>{const x={complete:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",failed:"bg-red-100 text-red-700",refunded:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:g("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",x[s]),children:s.charAt(0).toUpperCase()+s.slice(1)})};if(o)return e.jsx(Z,{});const a=r==null?void 0:r[0],w=n&&n.length>0;return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Membership"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your subscription and payment information"})]}),h.show&&e.jsx("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:g("fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg animate-in slide-in-from-top-5 duration-300",h.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="success"?e.jsx(C,{className:"w-5 h-5","aria-hidden":"true"}):e.jsx(M,{className:"w-5 h-5","aria-hidden":"true"}),e.jsx("span",{className:"font-medium",children:h.message})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(O,{className:"w-6 h-6 text-primary-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:(c==null?void 0:c.membership_level)||"No Active Membership"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),a?f(a.status):e.jsx("span",{className:"text-gray-500",children:"Inactive"})]}),(a==null?void 0:a.expires_at)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[a.status==="active"?"Renews":"Expires"," on:"," ",new Date(a.expires_at).toLocaleDateString()]})]})]})]}),(a==null?void 0:a.can_upgrade)&&w&&e.jsxs("button",{className:"btn btn-primary flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Upgrade"]})]})}),r&&r.length>0&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Subscriptions"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"hidden md:table min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Billing"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.membership_title})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.price}),e.jsx("div",{className:"text-xs text-gray-500",children:s.billing_period})]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:f(s.status)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:s.next_billing_date?new Date(s.next_billing_date).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.can_resume&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"resume",subscriptionId:s.id}),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Resume"}),s.can_suspend&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"suspend",subscriptionId:s.id}),className:"text-sm text-yellow-600 hover:text-yellow-700 font-medium",children:"Suspend"}),s.can_cancel&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"cancel",subscriptionId:s.id}),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Cancel"})]})})]},s.id))})]}),e.jsx("div",{className:"md:hidden space-y-4",children:r.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.membership_title}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.price," / ",s.billing_period]})]}),f(s.status)]}),s.next_billing_date&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[e.jsx(S,{className:"w-4 h-4"}),"Next billing: ",new Date(s.next_billing_date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200",children:[s.can_resume&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"resume",subscriptionId:s.id}),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Resume"}),s.can_suspend&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"suspend",subscriptionId:s.id}),className:"text-sm text-yellow-600 hover:text-yellow-700 font-medium",children:"Suspend"}),s.can_cancel&&e.jsx("button",{onClick:()=>l({isOpen:!0,type:"cancel",subscriptionId:s.id}),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Cancel"})]})]},s.id))})]})]}),(!r||r.length===0)&&!y&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(O,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Subscriptions"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any active subscriptions at the moment."}),w&&e.jsx("button",{className:"btn btn-primary",children:"View Membership Plans"})]}),i&&i.length>0&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"hidden md:table min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:m==null?void 0:m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:D(s.status)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:s.payment_method}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:s.transaction_id})]},s.id))})]}),e.jsx("div",{className:"md:hidden space-y-4",children:m==null?void 0:m.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.amount}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:new Date(s.created_at).toLocaleDateString()})]}),D(s.status)]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{children:["Payment method: ",s.payment_method]}),e.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["ID: ",s.transaction_id]})]})]},s.id))})]}),b>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",b]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(d-1),disabled:d===1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>I(d+1),disabled:d===b,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(G,{className:"w-5 h-5"})})]})]})]}),(!i||i.length===0)&&!j&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment History"}),e.jsx("p",{className:"text-gray-600",children:"Your payment transactions will appear here."})]}),w&&(a==null?void 0:a.can_upgrade)&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upgrade Options"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-primary-300 hover:shadow-md transition-all",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.title}),e.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-4",children:s.price}),e.jsx("ul",{className:"space-y-2 mb-6",children:s.features.map((x,L)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[e.jsx(C,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:x})]},L))}),e.jsxs("button",{className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Upgrade Now"]})]},s.id))})]})]}),e.jsx(W,{isOpen:t.isOpen,onClose:()=>l({isOpen:!1,type:null,subscriptionId:null}),onConfirm:R,title:t.type==="cancel"?"Cancel Subscription":t.type==="suspend"?"Suspend Subscription":"Resume Subscription",message:t.type==="cancel"?"Are you sure you want to cancel this subscription? You will lose access to premium features at the end of your current billing period.":t.type==="suspend"?"Are you sure you want to suspend this subscription? Your subscription will be paused and you can resume it later.":"Are you sure you want to resume this subscription? Your next billing will be scheduled according to your billing period.",confirmText:t.type==="cancel"?"Cancel Subscription":t.type==="suspend"?"Suspend":"Resume",isLoading:p.isPending||_.isPending||k.isPending,isDangerous:t.type==="cancel"})]})}function Z(){return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-4"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(c=>e.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},c))})]})]})]})}export{le as default};
