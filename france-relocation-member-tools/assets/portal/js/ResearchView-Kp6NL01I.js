import{j as l}from"./vendor-query-BibhOhig.js";import{g as _a,r as M,R as re}from"./vendor-react-BNGOmyOO.js";import{s as Xe,i as Ge,a as eo,b as wa,c as to}from"./string-B_3o-8jJ.js";import{c as Jo,F as Le,E as Ct,aa as ei,S as On,aj as ti,aH as In,X as ni,C as no,a as ba,a4 as Ca,ai as Qa}from"./main-CREz9C0K.js";import{A as ri}from"./arrow-left-b4bFsHod.js";import{B as Gn}from"./building-2-BKKWCAF2.js";import{L as Qt}from"./loader-2-CUWhqs9m.js";import{B as ja}from"./building-lzcXyEXL.js";import{A as ro}from"./alert-circle-DscQayVm.js";import{S as Na}from"./save-Cun7ueyl.js";import"./vendor-utils-C-JT--wB.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Jo("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Jo("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);var oi={exports:{}},Ea="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Aa=Ea,Pa=Aa;function ii(){}function ai(){}ai.resetWarningCache=ii;var ka=function(){function e(r,o,i,a,c,u){if(u!==Pa){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ai,resetWarningCache:ii};return n.PropTypes=n,n};oi.exports=ka();var Za=oi.exports;const E=_a(Za);class ae{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let o=0;o<this._n&&o<32;o++){const i=n[o],a=t+i,c=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);c&&(n[r++]=c),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,o,i,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,o=t[--n],a=r+o,i=o-(a-r),!i););n>0&&(i<0&&t[n-1]<0||i>0&&t[n-1]>0)&&(o=i*2,r=a+o,o==r-a&&(a=r))}return a}}function*Ra(e){for(const t of e)yield*t}function si(e){return Array.from(Ra(e))}var D=1e-6,jt=1e-12,I=Math.PI,te=I/2,Jt=I/4,ue=I*2,Y=180/I,$=I/180,V=Math.abs,at=Math.atan,me=Math.atan2,T=Math.cos,Tt=Math.ceil,ci=Math.exp,Vn=Math.hypot,en=Math.log,Rn=Math.pow,Z=Math.sin,be=Math.sign||function(e){return e>0?1:e<0?-1:0},oe=Math.sqrt,br=Math.tan;function li(e){return e>1?0:e<-1?I:Math.acos(e)}function fe(e){return e>1?te:e<-1?-te:Math.asin(e)}function oo(e){return(e=Z(e/2))*e}function J(){}function tn(e,t){e&&ao.hasOwnProperty(e.type)&&ao[e.type](e,t)}var io={Feature:function(e,t){tn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;++r<o;)tn(n[r].geometry,t)}},ao={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){qn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)qn(n[r],t,0)},Polygon:function(e,t){so(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)so(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;++r<o;)tn(n[r],t)}};function qn(e,t,n){var r=-1,o=e.length-n,i;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function so(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)qn(e[n],t,1);t.polygonEnd()}function Qe(e,t){e&&io.hasOwnProperty(e.type)?io[e.type](e,t):tn(e,t)}var nn=new ae,rn=new ae,ui,mi,Hn,Un,Yn,Ee={point:J,lineStart:J,lineEnd:J,polygonStart:function(){nn=new ae,Ee.lineStart=Fa,Ee.lineEnd=La},polygonEnd:function(){var e=+nn;rn.add(e<0?ue+e:e),this.lineStart=this.lineEnd=this.point=J},sphere:function(){rn.add(ue)}};function Fa(){Ee.point=Ta}function La(){fi(ui,mi)}function Ta(e,t){Ee.point=fi,ui=e,mi=t,e*=$,t*=$,Hn=e,Un=T(t=t/2+Jt),Yn=Z(t)}function fi(e,t){e*=$,t*=$,t=t/2+Jt;var n=e-Hn,r=n>=0?1:-1,o=r*n,i=T(t),a=Z(t),c=Yn*a,u=Un*i+c*T(o),m=c*r*Z(o);nn.add(me(m,u)),Hn=e,Un=i,Yn=a}function Ba(e){return rn=new ae,Qe(e,Ee),rn*2}function on(e){return[me(e[1],e[0]),fe(e[2])]}function qe(e){var t=e[0],n=e[1],r=T(n);return[r*T(t),r*Z(t),Z(n)]}function Bt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function et(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Dt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function an(e){var t=oe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var K,pe,ee,ve,Ve,pi,di,Je,yt,ze,Be,Ze={point:Xn,lineStart:co,lineEnd:lo,polygonStart:function(){Ze.point=gi,Ze.lineStart=Da,Ze.lineEnd=$a,yt=new ae,Ee.polygonStart()},polygonEnd:function(){Ee.polygonEnd(),Ze.point=Xn,Ze.lineStart=co,Ze.lineEnd=lo,nn<0?(K=-(ee=180),pe=-(ve=90)):yt>D?ve=90:yt<-D&&(pe=-90),Be[0]=K,Be[1]=ee},sphere:function(){K=-(ee=180),pe=-(ve=90)}};function Xn(e,t){ze.push(Be=[K=e,ee=e]),t<pe&&(pe=t),t>ve&&(ve=t)}function hi(e,t){var n=qe([e*$,t*$]);if(Je){var r=et(Je,n),o=[r[1],-r[0],0],i=et(o,r);an(i),i=on(i);var a=e-Ve,c=a>0?1:-1,u=i[0]*Y*c,m,s=V(a)>180;s^(c*Ve<u&&u<c*e)?(m=i[1]*Y,m>ve&&(ve=m)):(u=(u+360)%360-180,s^(c*Ve<u&&u<c*e)?(m=-i[1]*Y,m<pe&&(pe=m)):(t<pe&&(pe=t),t>ve&&(ve=t))),s?e<Ve?ye(K,e)>ye(K,ee)&&(ee=e):ye(e,ee)>ye(K,ee)&&(K=e):ee>=K?(e<K&&(K=e),e>ee&&(ee=e)):e>Ve?ye(K,e)>ye(K,ee)&&(ee=e):ye(e,ee)>ye(K,ee)&&(K=e)}else ze.push(Be=[K=e,ee=e]);t<pe&&(pe=t),t>ve&&(ve=t),Je=n,Ve=e}function co(){Ze.point=hi}function lo(){Be[0]=K,Be[1]=ee,Ze.point=Xn,Je=null}function gi(e,t){if(Je){var n=e-Ve;yt.add(V(n)>180?n+(n>0?360:-360):n)}else pi=e,di=t;Ee.point(e,t),hi(e,t)}function Da(){Ee.lineStart()}function $a(){gi(pi,di),Ee.lineEnd(),V(yt)>D&&(K=-(ee=180)),Be[0]=K,Be[1]=ee,Je=null}function ye(e,t){return(t-=e)<0?t+360:t}function za(e,t){return e[0]-t[0]}function uo(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Oa(e){var t,n,r,o,i,a,c;if(ve=ee=-(K=pe=1/0),ze=[],Qe(e,Ze),n=ze.length){for(ze.sort(za),t=1,r=ze[0],i=[r];t<n;++t)o=ze[t],uo(r,o[0])||uo(r,o[1])?(ye(r[0],o[1])>ye(r[0],r[1])&&(r[1]=o[1]),ye(o[0],r[1])>ye(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,n=i.length-1,t=0,r=i[n];t<=n;r=o,++t)o=i[t],(c=ye(r[1],o[0]))>a&&(a=c,K=o[0],ee=r[1])}return ze=Be=null,K===1/0||pe===1/0?[[NaN,NaN],[NaN,NaN]]:[[K,pe],[ee,ve]]}var ut,sn,cn,ln,un,mn,fn,pn,Wn,Kn,Jn,xi,yi,se,ce,le,je={sphere:J,point:Cr,lineStart:mo,lineEnd:fo,polygonStart:function(){je.lineStart=Va,je.lineEnd=qa},polygonEnd:function(){je.lineStart=mo,je.lineEnd=fo}};function Cr(e,t){e*=$,t*=$;var n=T(t);Pt(n*T(e),n*Z(e),Z(t))}function Pt(e,t,n){++ut,cn+=(e-cn)/ut,ln+=(t-ln)/ut,un+=(n-un)/ut}function mo(){je.point=Ia}function Ia(e,t){e*=$,t*=$;var n=T(t);se=n*T(e),ce=n*Z(e),le=Z(t),je.point=Ga,Pt(se,ce,le)}function Ga(e,t){e*=$,t*=$;var n=T(t),r=n*T(e),o=n*Z(e),i=Z(t),a=me(oe((a=ce*i-le*o)*a+(a=le*r-se*i)*a+(a=se*o-ce*r)*a),se*r+ce*o+le*i);sn+=a,mn+=a*(se+(se=r)),fn+=a*(ce+(ce=o)),pn+=a*(le+(le=i)),Pt(se,ce,le)}function fo(){je.point=Cr}function Va(){je.point=Ha}function qa(){vi(xi,yi),je.point=Cr}function Ha(e,t){xi=e,yi=t,e*=$,t*=$,je.point=vi;var n=T(t);se=n*T(e),ce=n*Z(e),le=Z(t),Pt(se,ce,le)}function vi(e,t){e*=$,t*=$;var n=T(t),r=n*T(e),o=n*Z(e),i=Z(t),a=ce*i-le*o,c=le*r-se*i,u=se*o-ce*r,m=Vn(a,c,u),s=fe(m),p=m&&-s/m;Wn.add(p*a),Kn.add(p*c),Jn.add(p*u),sn+=s,mn+=s*(se+(se=r)),fn+=s*(ce+(ce=o)),pn+=s*(le+(le=i)),Pt(se,ce,le)}function Ua(e){ut=sn=cn=ln=un=mn=fn=pn=0,Wn=new ae,Kn=new ae,Jn=new ae,Qe(e,je);var t=+Wn,n=+Kn,r=+Jn,o=Vn(t,n,r);return o<jt&&(t=mn,n=fn,r=pn,sn<D&&(t=cn,n=ln,r=un),o=Vn(t,n,r),o<jt)?[NaN,NaN]:[me(n,t)*Y,fe(r/o)*Y]}function Ye(e){return function(){return e}}function er(e,t){function n(r,o){return r=e(r,o),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,o){return r=t.invert(r,o),r&&e.invert(r[0],r[1])}),n}function tr(e,t){return[V(e)>I?e+Math.round(-e/ue)*ue:e,t]}tr.invert=tr;function Qr(e,t,n){return(e%=ue)?t||n?er(ho(e),go(t,n)):ho(e):t||n?go(t,n):tr}function po(e){return function(t,n){return t+=e,[t>I?t-ue:t<-I?t+ue:t,n]}}function ho(e){var t=po(e);return t.invert=po(-e),t}function go(e,t){var n=T(e),r=Z(e),o=T(t),i=Z(t);function a(c,u){var m=T(u),s=T(c)*m,p=Z(c)*m,f=Z(u),d=f*n+s*r;return[me(p*o-d*i,s*n-f*r),fe(d*o+p*i)]}return a.invert=function(c,u){var m=T(u),s=T(c)*m,p=Z(c)*m,f=Z(u),d=f*o-p*i;return[me(p*o+f*i,s*n+d*r),fe(d*n-s*r)]},a}function _i(e){e=Qr(e[0]*$,e[1]*$,e.length>2?e[2]*$:0);function t(n){return n=e(n[0]*$,n[1]*$),n[0]*=Y,n[1]*=Y,n}return t.invert=function(n){return n=e.invert(n[0]*$,n[1]*$),n[0]*=Y,n[1]*=Y,n},t}function wi(e,t,n,r,o,i){if(n){var a=T(t),c=Z(t),u=r*n;o==null?(o=t+r*ue,i=t-u/2):(o=xo(a,o),i=xo(a,i),(r>0?o<i:o>i)&&(o+=r*ue));for(var m,s=o;r>0?s>i:s<i;s-=u)m=on([a,-c*T(s),-c*Z(s)]),e.point(m[0],m[1])}}function xo(e,t){t=qe(t),t[0]-=e,an(t);var n=li(-t[1]);return((-t[2]<0?-n:n)+ue-D)%ue}function Ya(){var e=Ye([0,0]),t=Ye(90),n=Ye(6),r,o,i={point:a};function a(u,m){r.push(u=o(u,m)),u[0]*=Y,u[1]*=Y}function c(){var u=e.apply(this,arguments),m=t.apply(this,arguments)*$,s=n.apply(this,arguments)*$;return r=[],o=Qr(-u[0]*$,-u[1]*$,0).invert,wi(i,m,s,1),u={type:"Polygon",coordinates:[r]},r=o=null,u}return c.center=function(u){return arguments.length?(e=typeof u=="function"?u:Ye([+u[0],+u[1]]),c):e},c.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Ye(+u),c):t},c.precision=function(u){return arguments.length?(n=typeof u=="function"?u:Ye(+u),c):n},c}function bi(){var e=[],t;return{point:function(n,r,o){t.push([n,r,o])},lineStart:function(){e.push(t=[])},lineEnd:J,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Vt(e,t){return V(e[0]-t[0])<D&&V(e[1]-t[1])<D}function $t(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ci(e,t,n,r,o){var i=[],a=[],c,u;if(e.forEach(function(h){if(!((v=h.length-1)<=0)){var v,y=h[0],g=h[v],_;if(Vt(y,g)){if(!y[2]&&!g[2]){for(o.lineStart(),c=0;c<v;++c)o.point((y=h[c])[0],y[1]);o.lineEnd();return}g[0]+=2*D}i.push(_=new $t(y,h,null,!0)),a.push(_.o=new $t(y,null,_,!1)),i.push(_=new $t(g,h,null,!1)),a.push(_.o=new $t(g,null,_,!0))}}),!!i.length){for(a.sort(t),yo(i),yo(a),c=0,u=a.length;c<u;++c)a[c].e=n=!n;for(var m=i[0],s,p;;){for(var f=m,d=!0;f.v;)if((f=f.n)===m)return;s=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(c=0,u=s.length;c<u;++c)o.point((p=s[c])[0],p[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(d)for(s=f.p.z,c=s.length-1;c>=0;--c)o.point((p=s[c])[0],p[1]);else r(f.x,f.p.x,-1,o);f=f.p}f=f.o,s=f.z,d=!d}while(!f.v);o.lineEnd()}}}function yo(e){if(t=e.length){for(var t,n=0,r=e[0],o;++n<t;)r.n=o=e[n],o.p=r,r=o;r.n=o=e[0],o.p=r}}function Ln(e){return V(e[0])<=I?e[0]:be(e[0])*((V(e[0])+I)%ue-I)}function Qi(e,t){var n=Ln(t),r=t[1],o=Z(r),i=[Z(n),-T(n),0],a=0,c=0,u=new ae;o===1?r=te+D:o===-1&&(r=-te-D);for(var m=0,s=e.length;m<s;++m)if(f=(p=e[m]).length)for(var p,f,d=p[f-1],h=Ln(d),v=d[1]/2+Jt,y=Z(v),g=T(v),_=0;_<f;++_,h=C,y=j,g=S,d=x){var x=p[_],C=Ln(x),N=x[1]/2+Jt,j=Z(N),S=T(N),A=C-h,P=A>=0?1:-1,B=P*A,F=B>I,G=y*j;if(u.add(me(G*P*Z(B),g*S+G*T(B))),a+=F?A+P*ue:A,F^h>=n^C>=n){var H=et(qe(d),qe(x));an(H);var w=et(i,H);an(w);var b=(F^A>=0?-1:1)*fe(w[2]);(r>b||r===b&&(H[0]||H[1]))&&(c+=F^A>=0?1:-1)}}return(a<-D||a<D&&u<-jt)^c&1}function ji(e,t,n,r){return function(o){var i=t(o),a=bi(),c=t(a),u=!1,m,s,p,f={point:d,lineStart:v,lineEnd:y,polygonStart:function(){f.point=g,f.lineStart=_,f.lineEnd=x,s=[],m=[]},polygonEnd:function(){f.point=d,f.lineStart=v,f.lineEnd=y,s=si(s);var C=Qi(m,r);s.length?(u||(o.polygonStart(),u=!0),Ci(s,Wa,C,n,o)):C&&(u||(o.polygonStart(),u=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),u&&(o.polygonEnd(),u=!1),s=m=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(C,N){e(C,N)&&o.point(C,N)}function h(C,N){i.point(C,N)}function v(){f.point=h,i.lineStart()}function y(){f.point=d,i.lineEnd()}function g(C,N){p.push([C,N]),c.point(C,N)}function _(){c.lineStart(),p=[]}function x(){g(p[0][0],p[0][1]),c.lineEnd();var C=c.clean(),N=a.result(),j,S=N.length,A,P,B;if(p.pop(),m.push(p),p=null,!!S){if(C&1){if(P=N[0],(A=P.length-1)>0){for(u||(o.polygonStart(),u=!0),o.lineStart(),j=0;j<A;++j)o.point((B=P[j])[0],B[1]);o.lineEnd()}return}S>1&&C&2&&N.push(N.pop().concat(N.shift())),s.push(N.filter(Xa))}}return f}}function Xa(e){return e.length>1}function Wa(e,t){return((e=e.x)[0]<0?e[1]-te-D:te-e[1])-((t=t.x)[0]<0?t[1]-te-D:te-t[1])}const nr=ji(function(){return!0},Ka,es,[-I,-te]);function Ka(e){var t=NaN,n=NaN,r=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(i,a){var c=i>0?I:-I,u=V(i-t);V(u-I)<D?(e.point(t,n=(n+a)/2>0?te:-te),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),e.point(i,n),o=0):r!==c&&u>=I&&(V(t-r)<D&&(t-=r*D),V(i-c)<D&&(i-=c*D),n=Ja(t,n,i,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(c,n),o=0),e.point(t=i,n=a),r=c},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-o}}}function Ja(e,t,n,r){var o,i,a=Z(e-n);return V(a)>D?at((Z(t)*(i=T(r))*Z(n)-Z(r)*(o=T(t))*Z(e))/(o*i*a)):(t+r)/2}function es(e,t,n,r){var o;if(e==null)o=n*te,r.point(-I,o),r.point(0,o),r.point(I,o),r.point(I,0),r.point(I,-o),r.point(0,-o),r.point(-I,-o),r.point(-I,0),r.point(-I,o);else if(V(e[0]-t[0])>D){var i=e[0]<t[0]?I:-I;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(t[0],t[1])}function Ni(e){var t=T(e),n=6*$,r=t>0,o=V(t)>D;function i(s,p,f,d){wi(d,e,n,f,s,p)}function a(s,p){return T(s)*T(p)>t}function c(s){var p,f,d,h,v;return{lineStart:function(){h=d=!1,v=1},point:function(y,g){var _=[y,g],x,C=a(y,g),N=r?C?0:m(y,g):C?m(y+(y<0?I:-I),g):0;if(!p&&(h=d=C)&&s.lineStart(),C!==d&&(x=u(p,_),(!x||Vt(p,x)||Vt(_,x))&&(_[2]=1)),C!==d)v=0,C?(s.lineStart(),x=u(_,p),s.point(x[0],x[1])):(x=u(p,_),s.point(x[0],x[1],2),s.lineEnd()),p=x;else if(o&&p&&r^C){var j;!(N&f)&&(j=u(_,p,!0))&&(v=0,r?(s.lineStart(),s.point(j[0][0],j[0][1]),s.point(j[1][0],j[1][1]),s.lineEnd()):(s.point(j[1][0],j[1][1]),s.lineEnd(),s.lineStart(),s.point(j[0][0],j[0][1],3)))}C&&(!p||!Vt(p,_))&&s.point(_[0],_[1]),p=_,d=C,f=N},lineEnd:function(){d&&s.lineEnd(),p=null},clean:function(){return v|(h&&d)<<1}}}function u(s,p,f){var d=qe(s),h=qe(p),v=[1,0,0],y=et(d,h),g=Bt(y,y),_=y[0],x=g-_*_;if(!x)return!f&&s;var C=t*g/x,N=-t*_/x,j=et(v,y),S=Dt(v,C),A=Dt(y,N);Fn(S,A);var P=j,B=Bt(S,P),F=Bt(P,P),G=B*B-F*(Bt(S,S)-1);if(!(G<0)){var H=oe(G),w=Dt(P,(-B-H)/F);if(Fn(w,S),w=on(w),!f)return w;var b=s[0],Q=p[0],k=s[1],L=p[1],R;Q<b&&(R=b,b=Q,Q=R);var z=Q-b,O=V(z-I)<D,q=O||z<D;if(!O&&L<k&&(R=k,k=L,L=R),q?O?k+L>0^w[1]<(V(w[0]-b)<D?k:L):k<=w[1]&&w[1]<=L:z>I^(b<=w[0]&&w[0]<=Q)){var X=Dt(P,(-B+H)/F);return Fn(X,S),[w,on(X)]}}}function m(s,p){var f=r?e:I-e,d=0;return s<-f?d|=1:s>f&&(d|=2),p<-f?d|=4:p>f&&(d|=8),d}return ji(a,c,i,r?[0,-e]:[-I,e-I])}function ts(e,t,n,r,o,i){var a=e[0],c=e[1],u=t[0],m=t[1],s=0,p=1,f=u-a,d=m-c,h;if(h=n-a,!(!f&&h>0)){if(h/=f,f<0){if(h<s)return;h<p&&(p=h)}else if(f>0){if(h>p)return;h>s&&(s=h)}if(h=o-a,!(!f&&h<0)){if(h/=f,f<0){if(h>p)return;h>s&&(s=h)}else if(f>0){if(h<s)return;h<p&&(p=h)}if(h=r-c,!(!d&&h>0)){if(h/=d,d<0){if(h<s)return;h<p&&(p=h)}else if(d>0){if(h>p)return;h>s&&(s=h)}if(h=i-c,!(!d&&h<0)){if(h/=d,d<0){if(h>p)return;h>s&&(s=h)}else if(d>0){if(h<s)return;h<p&&(p=h)}return s>0&&(e[0]=a+s*f,e[1]=c+s*d),p<1&&(t[0]=a+p*f,t[1]=c+p*d),!0}}}}}var mt=1e9,zt=-mt;function Mn(e,t,n,r){function o(m,s){return e<=m&&m<=n&&t<=s&&s<=r}function i(m,s,p,f){var d=0,h=0;if(m==null||(d=a(m,p))!==(h=a(s,p))||u(m,s)<0^p>0)do f.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+p+4)%4)!==h);else f.point(s[0],s[1])}function a(m,s){return V(m[0]-e)<D?s>0?0:3:V(m[0]-n)<D?s>0?2:1:V(m[1]-t)<D?s>0?1:0:s>0?3:2}function c(m,s){return u(m.x,s.x)}function u(m,s){var p=a(m,1),f=a(s,1);return p!==f?p-f:p===0?s[1]-m[1]:p===1?m[0]-s[0]:p===2?m[1]-s[1]:s[0]-m[0]}return function(m){var s=m,p=bi(),f,d,h,v,y,g,_,x,C,N,j,S={point:A,lineStart:G,lineEnd:H,polygonStart:B,polygonEnd:F};function A(b,Q){o(b,Q)&&s.point(b,Q)}function P(){for(var b=0,Q=0,k=d.length;Q<k;++Q)for(var L=d[Q],R=1,z=L.length,O=L[0],q,X,U=O[0],W=O[1];R<z;++R)q=U,X=W,O=L[R],U=O[0],W=O[1],X<=r?W>r&&(U-q)*(r-X)>(W-X)*(e-q)&&++b:W<=r&&(U-q)*(r-X)<(W-X)*(e-q)&&--b;return b}function B(){s=p,f=[],d=[],j=!0}function F(){var b=P(),Q=j&&b,k=(f=si(f)).length;(Q||k)&&(m.polygonStart(),Q&&(m.lineStart(),i(null,null,1,m),m.lineEnd()),k&&Ci(f,c,b,i,m),m.polygonEnd()),s=m,f=d=h=null}function G(){S.point=w,d&&d.push(h=[]),N=!0,C=!1,_=x=NaN}function H(){f&&(w(v,y),g&&C&&p.rejoin(),f.push(p.result())),S.point=A,C&&s.lineEnd()}function w(b,Q){var k=o(b,Q);if(d&&h.push([b,Q]),N)v=b,y=Q,g=k,N=!1,k&&(s.lineStart(),s.point(b,Q));else if(k&&C)s.point(b,Q);else{var L=[_=Math.max(zt,Math.min(mt,_)),x=Math.max(zt,Math.min(mt,x))],R=[b=Math.max(zt,Math.min(mt,b)),Q=Math.max(zt,Math.min(mt,Q))];ts(L,R,e,t,n,r)?(C||(s.lineStart(),s.point(L[0],L[1])),s.point(R[0],R[1]),k||s.lineEnd(),j=!1):k&&(s.lineStart(),s.point(b,Q),j=!1)}_=b,x=Q,C=k}return S}}function ns(){var e=0,t=0,n=960,r=500,o,i,a;return a={stream:function(c){return o&&i===c?o:o=Mn(e,t,n,r)(i=c)},extent:function(c){return arguments.length?(e=+c[0][0],t=+c[0][1],n=+c[1][0],r=+c[1][1],o=i=null,a):[[e,t],[n,r]]}}}var rr,or,qt,Ht,tt={sphere:J,point:J,lineStart:rs,lineEnd:J,polygonStart:J,polygonEnd:J};function rs(){tt.point=is,tt.lineEnd=os}function os(){tt.point=tt.lineEnd=J}function is(e,t){e*=$,t*=$,or=e,qt=Z(t),Ht=T(t),tt.point=as}function as(e,t){e*=$,t*=$;var n=Z(t),r=T(t),o=V(e-or),i=T(o),a=Z(o),c=r*a,u=Ht*n-qt*r*i,m=qt*n+Ht*r*i;rr.add(me(oe(c*c+u*u),m)),or=e,qt=n,Ht=r}function Mi(e){return rr=new ae,Qe(e,tt),+rr}var ir=[null,null],ss={type:"LineString",coordinates:ir};function dn(e,t){return ir[0]=e,ir[1]=t,Mi(ss)}var vo={Feature:function(e,t){return hn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;++r<o;)if(hn(n[r].geometry,t))return!0;return!1}},_o={Sphere:function(){return!0},Point:function(e,t){return wo(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(wo(n[r],t))return!0;return!1},LineString:function(e,t){return bo(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(bo(n[r],t))return!0;return!1},Polygon:function(e,t){return Co(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)if(Co(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;++r<o;)if(hn(n[r],t))return!0;return!1}};function hn(e,t){return e&&_o.hasOwnProperty(e.type)?_o[e.type](e,t):!1}function wo(e,t){return dn(e,t)===0}function bo(e,t){for(var n,r,o,i=0,a=e.length;i<a;i++){if(r=dn(e[i],t),r===0||i>0&&(o=dn(e[i],e[i-1]),o>0&&n<=o&&r<=o&&(n+r-o)*(1-Math.pow((n-r)/o,2))<jt*o))return!0;n=r}return!1}function Co(e,t){return!!Qi(e.map(cs),Si(t))}function cs(e){return e=e.map(Si),e.pop(),e}function Si(e){return[e[0]*$,e[1]*$]}function ls(e,t){return(e&&vo.hasOwnProperty(e.type)?vo[e.type]:hn)(e,t)}function Qo(e,t,n){var r=Xe(e,t-D,n).concat(t);return function(o){return r.map(function(i){return[o,i]})}}function jo(e,t,n){var r=Xe(e,t-D,n).concat(t);return function(o){return r.map(function(i){return[i,o]})}}function jr(){var e,t,n,r,o,i,a,c,u=10,m=u,s=90,p=360,f,d,h,v,y=2.5;function g(){return{type:"MultiLineString",coordinates:_()}}function _(){return Xe(Tt(r/s)*s,n,s).map(h).concat(Xe(Tt(c/p)*p,a,p).map(v)).concat(Xe(Tt(t/u)*u,e,u).filter(function(x){return V(x%s)>D}).map(f)).concat(Xe(Tt(i/m)*m,o,m).filter(function(x){return V(x%p)>D}).map(d))}return g.lines=function(){return _().map(function(x){return{type:"LineString",coordinates:x}})},g.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(v(a).slice(1),h(n).reverse().slice(1),v(c).reverse().slice(1))]}},g.extent=function(x){return arguments.length?g.extentMajor(x).extentMinor(x):g.extentMinor()},g.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],c=+x[0][1],a=+x[1][1],r>n&&(x=r,r=n,n=x),c>a&&(x=c,c=a,a=x),g.precision(y)):[[r,c],[n,a]]},g.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],i=+x[0][1],o=+x[1][1],t>e&&(x=t,t=e,e=x),i>o&&(x=i,i=o,o=x),g.precision(y)):[[t,i],[e,o]]},g.step=function(x){return arguments.length?g.stepMajor(x).stepMinor(x):g.stepMinor()},g.stepMajor=function(x){return arguments.length?(s=+x[0],p=+x[1],g):[s,p]},g.stepMinor=function(x){return arguments.length?(u=+x[0],m=+x[1],g):[u,m]},g.precision=function(x){return arguments.length?(y=+x,f=Qo(i,o,90),d=jo(t,e,y),h=Qo(c,a,90),v=jo(r,n,y),g):y},g.extentMajor([[-180,-90+D],[180,90-D]]).extentMinor([[-180,-80-D],[180,80+D]])}function us(){return jr()()}function ms(e,t){var n=e[0]*$,r=e[1]*$,o=t[0]*$,i=t[1]*$,a=T(r),c=Z(r),u=T(i),m=Z(i),s=a*T(n),p=a*Z(n),f=u*T(o),d=u*Z(o),h=2*fe(oe(oo(i-r)+a*u*oo(o-n))),v=Z(h),y=h?function(g){var _=Z(g*=h)/v,x=Z(h-g)/v,C=x*s+_*f,N=x*p+_*d,j=x*c+_*m;return[me(N,C)*Y,me(j,oe(C*C+N*N))*Y]}:function(){return[n*Y,r*Y]};return y.distance=h,y}const Nt=e=>e;var Tn=new ae,ar=new ae,Ei,Ai,sr,cr,Re={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Re.lineStart=fs,Re.lineEnd=ds},polygonEnd:function(){Re.lineStart=Re.lineEnd=Re.point=J,Tn.add(V(ar)),ar=new ae},result:function(){var e=Tn/2;return Tn=new ae,e}};function fs(){Re.point=ps}function ps(e,t){Re.point=Pi,Ei=sr=e,Ai=cr=t}function Pi(e,t){ar.add(cr*e-sr*t),sr=e,cr=t}function ds(){Pi(Ei,Ai)}var nt=1/0,gn=nt,Mt=-nt,xn=Mt,yn={point:hs,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var e=[[nt,gn],[Mt,xn]];return Mt=xn=-(gn=nt=1/0),e}};function hs(e,t){e<nt&&(nt=e),e>Mt&&(Mt=e),t<gn&&(gn=t),t>xn&&(xn=t)}var lr=0,ur=0,ft=0,vn=0,_n=0,We=0,mr=0,fr=0,pt=0,ki,Zi,Me,Se,we={point:He,lineStart:No,lineEnd:Mo,polygonStart:function(){we.lineStart=ys,we.lineEnd=vs},polygonEnd:function(){we.point=He,we.lineStart=No,we.lineEnd=Mo},result:function(){var e=pt?[mr/pt,fr/pt]:We?[vn/We,_n/We]:ft?[lr/ft,ur/ft]:[NaN,NaN];return lr=ur=ft=vn=_n=We=mr=fr=pt=0,e}};function He(e,t){lr+=e,ur+=t,++ft}function No(){we.point=gs}function gs(e,t){we.point=xs,He(Me=e,Se=t)}function xs(e,t){var n=e-Me,r=t-Se,o=oe(n*n+r*r);vn+=o*(Me+e)/2,_n+=o*(Se+t)/2,We+=o,He(Me=e,Se=t)}function Mo(){we.point=He}function ys(){we.point=_s}function vs(){Ri(ki,Zi)}function _s(e,t){we.point=Ri,He(ki=Me=e,Zi=Se=t)}function Ri(e,t){var n=e-Me,r=t-Se,o=oe(n*n+r*r);vn+=o*(Me+e)/2,_n+=o*(Se+t)/2,We+=o,o=Se*e-Me*t,mr+=o*(Me+e),fr+=o*(Se+t),pt+=o*3,He(Me=e,Se=t)}function Fi(e){this._context=e}Fi.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ue);break}}},result:J};var pr=new ae,Bn,Li,Ti,dt,ht,St={point:J,lineStart:function(){St.point=ws},lineEnd:function(){Bn&&Bi(Li,Ti),St.point=J},polygonStart:function(){Bn=!0},polygonEnd:function(){Bn=null},result:function(){var e=+pr;return pr=new ae,e}};function ws(e,t){St.point=Bi,Li=dt=e,Ti=ht=t}function Bi(e,t){dt-=e,ht-=t,pr.add(oe(dt*dt+ht*ht)),dt=e,ht=t}function Di(){this._string=[]}Di.prototype={_radius:4.5,_circle:So(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=So(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function So(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function $i(e,t){var n=4.5,r,o;function i(a){return a&&(typeof n=="function"&&o.pointRadius(+n.apply(this,arguments)),Qe(a,r(o))),o.result()}return i.area=function(a){return Qe(a,r(Re)),Re.result()},i.measure=function(a){return Qe(a,r(St)),St.result()},i.bounds=function(a){return Qe(a,r(yn)),yn.result()},i.centroid=function(a){return Qe(a,r(we)),we.result()},i.projection=function(a){return arguments.length?(r=a==null?(e=null,Nt):(e=a).stream,i):e},i.context=function(a){return arguments.length?(o=a==null?(t=null,new Di):new Fi(t=a),typeof n!="function"&&o.pointRadius(n),i):t},i.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(o.pointRadius(+a),+a),i):n},i.projection(e).context(t)}function bs(e){return{stream:kt(e)}}function kt(e){return function(t){var n=new dr;for(var r in e)n[r]=e[r];return n.stream=t,n}}function dr(){}dr.prototype={constructor:dr,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Nr(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Qe(n,e.stream(yn)),t(yn.result()),r!=null&&e.clipExtent(r),e}function Sn(e,t,n){return Nr(e,function(r){var o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(o/(r[1][0]-r[0][0]),i/(r[1][1]-r[0][1])),c=+t[0][0]+(o-a*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([c,u])},n)}function Mr(e,t,n){return Sn(e,[[0,0],t],n)}function Sr(e,t,n){return Nr(e,function(r){var o=+t,i=o/(r[1][0]-r[0][0]),a=(o-i*(r[1][0]+r[0][0]))/2,c=-i*r[0][1];e.scale(150*i).translate([a,c])},n)}function Er(e,t,n){return Nr(e,function(r){var o=+t,i=o/(r[1][1]-r[0][1]),a=-i*r[0][0],c=(o-i*(r[1][1]+r[0][1]))/2;e.scale(150*i).translate([a,c])},n)}var Eo=16,Cs=T(30*$);function Ao(e,t){return+t?js(e,t):Qs(e)}function Qs(e){return kt({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function js(e,t){function n(r,o,i,a,c,u,m,s,p,f,d,h,v,y){var g=m-r,_=s-o,x=g*g+_*_;if(x>4*t&&v--){var C=a+f,N=c+d,j=u+h,S=oe(C*C+N*N+j*j),A=fe(j/=S),P=V(V(j)-1)<D||V(i-p)<D?(i+p)/2:me(N,C),B=e(P,A),F=B[0],G=B[1],H=F-r,w=G-o,b=_*H-g*w;(b*b/x>t||V((g*H+_*w)/x-.5)>.3||a*f+c*d+u*h<Cs)&&(n(r,o,i,a,c,u,F,G,P,C/=S,N/=S,j,v,y),y.point(F,G),n(F,G,P,C,N,j,m,s,p,f,d,h,v,y))}}return function(r){var o,i,a,c,u,m,s,p,f,d,h,v,y={point:g,lineStart:_,lineEnd:C,polygonStart:function(){r.polygonStart(),y.lineStart=N},polygonEnd:function(){r.polygonEnd(),y.lineStart=_}};function g(A,P){A=e(A,P),r.point(A[0],A[1])}function _(){p=NaN,y.point=x,r.lineStart()}function x(A,P){var B=qe([A,P]),F=e(A,P);n(p,f,s,d,h,v,p=F[0],f=F[1],s=A,d=B[0],h=B[1],v=B[2],Eo,r),r.point(p,f)}function C(){y.point=g,r.lineEnd()}function N(){_(),y.point=j,y.lineEnd=S}function j(A,P){x(o=A,P),i=p,a=f,c=d,u=h,m=v,y.point=x}function S(){n(p,f,s,d,h,v,i,a,o,c,u,m,Eo,r),y.lineEnd=C,C()}return y}}var Ns=kt({point:function(e,t){this.stream.point(e*$,t*$)}});function Ms(e){return kt({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Ss(e,t,n,r,o){function i(a,c){return a*=r,c*=o,[t+e*a,n-e*c]}return i.invert=function(a,c){return[(a-t)/e*r,(n-c)/e*o]},i}function Po(e,t,n,r,o,i){if(!i)return Ss(e,t,n,r,o);var a=T(i),c=Z(i),u=a*e,m=c*e,s=a/e,p=c/e,f=(c*n-a*t)/e,d=(c*t+a*n)/e;function h(v,y){return v*=r,y*=o,[u*v-m*y+t,n-m*v-u*y]}return h.invert=function(v,y){return[r*(s*v-p*y+f),o*(d-p*v-s*y)]},h}function Ae(e){return Ar(function(){return e})()}function Ar(e){var t,n=150,r=480,o=250,i=0,a=0,c=0,u=0,m=0,s,p=0,f=1,d=1,h=null,v=nr,y=null,g,_,x,C=Nt,N=.5,j,S,A,P,B;function F(b){return A(b[0]*$,b[1]*$)}function G(b){return b=A.invert(b[0],b[1]),b&&[b[0]*Y,b[1]*Y]}F.stream=function(b){return P&&B===b?P:P=Ns(Ms(s)(v(j(C(B=b)))))},F.preclip=function(b){return arguments.length?(v=b,h=void 0,w()):v},F.postclip=function(b){return arguments.length?(C=b,y=g=_=x=null,w()):C},F.clipAngle=function(b){return arguments.length?(v=+b?Ni(h=b*$):(h=null,nr),w()):h*Y},F.clipExtent=function(b){return arguments.length?(C=b==null?(y=g=_=x=null,Nt):Mn(y=+b[0][0],g=+b[0][1],_=+b[1][0],x=+b[1][1]),w()):y==null?null:[[y,g],[_,x]]},F.scale=function(b){return arguments.length?(n=+b,H()):n},F.translate=function(b){return arguments.length?(r=+b[0],o=+b[1],H()):[r,o]},F.center=function(b){return arguments.length?(i=b[0]%360*$,a=b[1]%360*$,H()):[i*Y,a*Y]},F.rotate=function(b){return arguments.length?(c=b[0]%360*$,u=b[1]%360*$,m=b.length>2?b[2]%360*$:0,H()):[c*Y,u*Y,m*Y]},F.angle=function(b){return arguments.length?(p=b%360*$,H()):p*Y},F.reflectX=function(b){return arguments.length?(f=b?-1:1,H()):f<0},F.reflectY=function(b){return arguments.length?(d=b?-1:1,H()):d<0},F.precision=function(b){return arguments.length?(j=Ao(S,N=b*b),w()):oe(N)},F.fitExtent=function(b,Q){return Sn(F,b,Q)},F.fitSize=function(b,Q){return Mr(F,b,Q)},F.fitWidth=function(b,Q){return Sr(F,b,Q)},F.fitHeight=function(b,Q){return Er(F,b,Q)};function H(){var b=Po(n,0,0,f,d,p).apply(null,t(i,a)),Q=Po(n,r-b[0],o-b[1],f,d,p);return s=Qr(c,u,m),S=er(t,Q),A=er(s,S),j=Ao(S,N),w()}function w(){return P=B=null,F}return function(){return t=e.apply(this,arguments),F.invert=t.invert&&G,H()}}function Pr(e){var t=0,n=I/3,r=Ar(e),o=r(t,n);return o.parallels=function(i){return arguments.length?r(t=i[0]*$,n=i[1]*$):[t*Y,n*Y]},o}function Es(e){var t=T(e);function n(r,o){return[r*t,Z(o)/t]}return n.invert=function(r,o){return[r/t,fe(o*t)]},n}function zi(e,t){var n=Z(e),r=(n+Z(t))/2;if(V(r)<D)return Es(e);var o=1+n*(2*r-n),i=oe(o)/r;function a(c,u){var m=oe(o-2*r*Z(u))/r;return[m*Z(c*=r),i-m*T(c)]}return a.invert=function(c,u){var m=i-u,s=me(c,V(m))*be(m);return m*r<0&&(s-=I*be(c)*be(m)),[s/r,fe((o-(c*c+m*m)*r*r)/(2*r))]},a}function wn(){return Pr(zi).scale(155.424).center([0,33.6442])}function Oi(){return wn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function As(e){var t=e.length;return{point:function(n,r){for(var o=-1;++o<t;)e[o].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Ps(){var e,t,n=Oi(),r,o=wn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,a=wn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,u,m={point:function(f,d){u=[f,d]}};function s(f){var d=f[0],h=f[1];return u=null,r.point(d,h),u||(i.point(d,h),u)||(c.point(d,h),u)}s.invert=function(f){var d=n.scale(),h=n.translate(),v=(f[0]-h[0])/d,y=(f[1]-h[1])/d;return(y>=.12&&y<.234&&v>=-.425&&v<-.214?o:y>=.166&&y<.234&&v>=-.214&&v<-.115?a:n).invert(f)},s.stream=function(f){return e&&t===f?e:e=As([n.stream(t=f),o.stream(f),a.stream(f)])},s.precision=function(f){return arguments.length?(n.precision(f),o.precision(f),a.precision(f),p()):n.precision()},s.scale=function(f){return arguments.length?(n.scale(f),o.scale(f*.35),a.scale(f),s.translate(n.translate())):n.scale()},s.translate=function(f){if(!arguments.length)return n.translate();var d=n.scale(),h=+f[0],v=+f[1];return r=n.translate(f).clipExtent([[h-.455*d,v-.238*d],[h+.455*d,v+.238*d]]).stream(m),i=o.translate([h-.307*d,v+.201*d]).clipExtent([[h-.425*d+D,v+.12*d+D],[h-.214*d-D,v+.234*d-D]]).stream(m),c=a.translate([h-.205*d,v+.212*d]).clipExtent([[h-.214*d+D,v+.166*d+D],[h-.115*d-D,v+.234*d-D]]).stream(m),p()},s.fitExtent=function(f,d){return Sn(s,f,d)},s.fitSize=function(f,d){return Mr(s,f,d)},s.fitWidth=function(f,d){return Sr(s,f,d)},s.fitHeight=function(f,d){return Er(s,f,d)};function p(){return e=t=null,s}return s.scale(1070)}function Ii(e){return function(t,n){var r=T(t),o=T(n),i=e(r*o);return i===1/0?[2,0]:[i*o*Z(t),i*Z(n)]}}function Zt(e){return function(t,n){var r=oe(t*t+n*n),o=e(r),i=Z(o),a=T(o);return[me(t*i,r*a),fe(r&&n*i/r)]}}var kr=Ii(function(e){return oe(2/(1+e))});kr.invert=Zt(function(e){return 2*fe(e/2)});function ks(){return Ae(kr).scale(124.75).clipAngle(180-.001)}var Zr=Ii(function(e){return(e=li(e))&&e/Z(e)});Zr.invert=Zt(function(e){return e});function Zs(){return Ae(Zr).scale(79.4188).clipAngle(180-.001)}function Rt(e,t){return[e,en(br((te+t)/2))]}Rt.invert=function(e,t){return[e,2*at(ci(t))-te]};function Rs(){return Gi(Rt).scale(961/ue)}function Gi(e){var t=Ae(e),n=t.center,r=t.scale,o=t.translate,i=t.clipExtent,a=null,c,u,m;t.scale=function(p){return arguments.length?(r(p),s()):r()},t.translate=function(p){return arguments.length?(o(p),s()):o()},t.center=function(p){return arguments.length?(n(p),s()):n()},t.clipExtent=function(p){return arguments.length?(p==null?a=c=u=m=null:(a=+p[0][0],c=+p[0][1],u=+p[1][0],m=+p[1][1]),s()):a==null?null:[[a,c],[u,m]]};function s(){var p=I*r(),f=t(_i(t.rotate()).invert([0,0]));return i(a==null?[[f[0]-p,f[1]-p],[f[0]+p,f[1]+p]]:e===Rt?[[Math.max(f[0]-p,a),c],[Math.min(f[0]+p,u),m]]:[[a,Math.max(f[1]-p,c)],[u,Math.min(f[1]+p,m)]])}return s()}function Ot(e){return br((te+e)/2)}function Vi(e,t){var n=T(e),r=e===t?Z(e):en(n/T(t))/en(Ot(t)/Ot(e)),o=n*Rn(Ot(e),r)/r;if(!r)return Rt;function i(a,c){o>0?c<-te+D&&(c=-te+D):c>te-D&&(c=te-D);var u=o/Rn(Ot(c),r);return[u*Z(r*a),o-u*T(r*a)]}return i.invert=function(a,c){var u=o-c,m=be(r)*oe(a*a+u*u),s=me(a,V(u))*be(u);return u*r<0&&(s-=I*be(a)*be(u)),[s/r,2*at(Rn(o/m,1/r))-te]},i}function Fs(){return Pr(Vi).scale(109.5).parallels([30,30])}function Et(e,t){return[e,t]}Et.invert=Et;function Ls(){return Ae(Et).scale(152.63)}function qi(e,t){var n=T(e),r=e===t?Z(e):(n-T(t))/(t-e),o=n/r+e;if(V(r)<D)return Et;function i(a,c){var u=o-c,m=r*a;return[u*Z(m),o-u*T(m)]}return i.invert=function(a,c){var u=o-c,m=me(a,V(u))*be(u);return u*r<0&&(m-=I*be(a)*be(u)),[m/r,o-be(r)*oe(a*a+u*u)]},i}function Ts(){return Pr(qi).scale(131.154).center([0,13.9389])}var vt=1.340264,_t=-.081106,wt=893e-6,bt=.003796,bn=oe(3)/2,Bs=12;function Rr(e,t){var n=fe(bn*Z(t)),r=n*n,o=r*r*r;return[e*T(n)/(bn*(vt+3*_t*r+o*(7*wt+9*bt*r))),n*(vt+_t*r+o*(wt+bt*r))]}Rr.invert=function(e,t){for(var n=t,r=n*n,o=r*r*r,i=0,a,c,u;i<Bs&&(c=n*(vt+_t*r+o*(wt+bt*r))-t,u=vt+3*_t*r+o*(7*wt+9*bt*r),n-=a=c/u,r=n*n,o=r*r*r,!(V(a)<jt));++i);return[bn*e*(vt+3*_t*r+o*(7*wt+9*bt*r))/T(n),fe(Z(n)/bn)]};function Ds(){return Ae(Rr).scale(177.158)}function Fr(e,t){var n=T(t),r=T(e)*n;return[n*Z(e)/r,Z(t)/r]}Fr.invert=Zt(at);function $s(){return Ae(Fr).scale(144.049).clipAngle(60)}function zs(){var e=1,t=0,n=0,r=1,o=1,i=0,a,c,u=null,m,s,p,f=1,d=1,h=kt({point:function(C,N){var j=x([C,N]);this.stream.point(j[0],j[1])}}),v=Nt,y,g;function _(){return f=e*r,d=e*o,y=g=null,x}function x(C){var N=C[0]*f,j=C[1]*d;if(i){var S=j*a-N*c;N=N*a+j*c,j=S}return[N+t,j+n]}return x.invert=function(C){var N=C[0]-t,j=C[1]-n;if(i){var S=j*a+N*c;N=N*a-j*c,j=S}return[N/f,j/d]},x.stream=function(C){return y&&g===C?y:y=h(v(g=C))},x.postclip=function(C){return arguments.length?(v=C,u=m=s=p=null,_()):v},x.clipExtent=function(C){return arguments.length?(v=C==null?(u=m=s=p=null,Nt):Mn(u=+C[0][0],m=+C[0][1],s=+C[1][0],p=+C[1][1]),_()):u==null?null:[[u,m],[s,p]]},x.scale=function(C){return arguments.length?(e=+C,_()):e},x.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],_()):[t,n]},x.angle=function(C){return arguments.length?(i=C%360*$,c=Z(i),a=T(i),_()):i*Y},x.reflectX=function(C){return arguments.length?(r=C?-1:1,_()):r<0},x.reflectY=function(C){return arguments.length?(o=C?-1:1,_()):o<0},x.fitExtent=function(C,N){return Sn(x,C,N)},x.fitSize=function(C,N){return Mr(x,C,N)},x.fitWidth=function(C,N){return Sr(x,C,N)},x.fitHeight=function(C,N){return Er(x,C,N)},x}function Lr(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Lr.invert=function(e,t){var n=t,r=25,o;do{var i=n*n,a=i*i;n-=o=(n*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))-t)/(1.007226+i*(.015085*3+a*(-.044475*7+.028874*9*i-.005916*11*a)))}while(V(o)>D&&--r>0);return[e/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function Os(){return Ae(Lr).scale(175.295)}function Tr(e,t){return[T(t)*Z(e),Z(t)]}Tr.invert=Zt(fe);function Is(){return Ae(Tr).scale(249.5).clipAngle(90+D)}function Br(e,t){var n=T(t),r=1+T(e)*n;return[n*Z(e)/r,Z(t)/r]}Br.invert=Zt(function(e){return 2*at(e)});function Gs(){return Ae(Br).scale(250).clipAngle(142)}function Dr(e,t){return[en(br((te+t)/2)),-e]}Dr.invert=function(e,t){return[-t,2*at(ci(e))-te]};function Vs(){var e=Gi(Dr),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}const qs=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:Oi,geoAlbersUsa:Ps,geoArea:Ba,geoAzimuthalEqualArea:ks,geoAzimuthalEqualAreaRaw:kr,geoAzimuthalEquidistant:Zs,geoAzimuthalEquidistantRaw:Zr,geoBounds:Oa,geoCentroid:Ua,geoCircle:Ya,geoClipAntimeridian:nr,geoClipCircle:Ni,geoClipExtent:ns,geoClipRectangle:Mn,geoConicConformal:Fs,geoConicConformalRaw:Vi,geoConicEqualArea:wn,geoConicEqualAreaRaw:zi,geoConicEquidistant:Ts,geoConicEquidistantRaw:qi,geoContains:ls,geoDistance:dn,geoEqualEarth:Ds,geoEqualEarthRaw:Rr,geoEquirectangular:Ls,geoEquirectangularRaw:Et,geoGnomonic:$s,geoGnomonicRaw:Fr,geoGraticule:jr,geoGraticule10:us,geoIdentity:zs,geoInterpolate:ms,geoLength:Mi,geoMercator:Rs,geoMercatorRaw:Rt,geoNaturalEarth1:Os,geoNaturalEarth1Raw:Lr,geoOrthographic:Is,geoOrthographicRaw:Tr,geoPath:$i,geoProjection:Ae,geoProjectionMutator:Ar,geoRotation:_i,geoStereographic:Gs,geoStereographicRaw:Br,geoStream:Qe,geoTransform:bs,geoTransverseMercator:Vs,geoTransverseMercatorRaw:Dr},Symbol.toStringTag,{value:"Module"}));function Hs(e){return e}function Us(e){if(e==null)return Hs;var t,n,r=e.scale[0],o=e.scale[1],i=e.translate[0],a=e.translate[1];return function(c,u){u||(t=n=0);var m=2,s=c.length,p=new Array(s);for(p[0]=(t+=c[0])*r+i,p[1]=(n+=c[1])*o+a;m<s;)p[m]=c[m],++m;return p}}function Ys(e,t){for(var n,r=e.length,o=r-t;o<--r;)n=e[o],e[o++]=e[r],e[r]=n}function Xs(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ko(e,n)})}:ko(e,t)}function ko(e,t){var n=t.id,r=t.bbox,o=t.properties==null?{}:t.properties,i=Hi(e,t);return n==null&&r==null?{type:"Feature",properties:o,geometry:i}:r==null?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function Hi(e,t){var n=Us(e.transform),r=e.arcs;function o(s,p){p.length&&p.pop();for(var f=r[s<0?~s:s],d=0,h=f.length;d<h;++d)p.push(n(f[d],d));s<0&&Ys(p,h)}function i(s){return n(s)}function a(s){for(var p=[],f=0,d=s.length;f<d;++f)o(s[f],p);return p.length<2&&p.push(p[0]),p}function c(s){for(var p=a(s);p.length<4;)p.push(p[0]);return p}function u(s){return s.map(c)}function m(s){var p=s.type,f;switch(p){case"GeometryCollection":return{type:p,geometries:s.geometries.map(m)};case"Point":f=i(s.coordinates);break;case"MultiPoint":f=s.coordinates.map(i);break;case"LineString":f=a(s.arcs);break;case"MultiLineString":f=s.arcs.map(a);break;case"Polygon":f=u(s.arcs);break;case"MultiPolygon":f=s.arcs.map(u);break;default:return null}return{type:p,coordinates:f}}return m(t)}function Ws(e,t){var n={},r={},o={},i=[],a=-1;t.forEach(function(m,s){var p=e.arcs[m<0?~m:m],f;p.length<3&&!p[1][0]&&!p[1][1]&&(f=t[++a],t[a]=m,t[s]=f)}),t.forEach(function(m){var s=c(m),p=s[0],f=s[1],d,h;if(d=o[p])if(delete o[d.end],d.push(m),d.end=f,h=r[f]){delete r[h.start];var v=h===d?d:d.concat(h);r[v.start=d.start]=o[v.end=h.end]=v}else r[d.start]=o[d.end]=d;else if(d=r[f])if(delete r[d.start],d.unshift(m),d.start=p,h=o[p]){delete o[h.end];var y=h===d?d:h.concat(d);r[y.start=h.start]=o[y.end=d.end]=y}else r[d.start]=o[d.end]=d;else d=[m],r[d.start=p]=o[d.end=f]=d});function c(m){var s=e.arcs[m<0?~m:m],p=s[0],f;return e.transform?(f=[0,0],s.forEach(function(d){f[0]+=d[0],f[1]+=d[1]})):f=s[s.length-1],m<0?[f,p]:[p,f]}function u(m,s){for(var p in m){var f=m[p];delete s[f.start],delete f.start,delete f.end,f.forEach(function(d){n[d<0?~d:d]=1}),i.push(f)}}return u(o,r),u(r,o),t.forEach(function(m){n[m<0?~m:m]||i.push([m])}),i}function Zo(e){return Hi(e,Ks.apply(this,arguments))}function Ks(e,t,n){var r,o,i;if(arguments.length>1)r=Js(e,t,n);else for(o=0,r=new Array(i=e.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:Ws(e,r)}}function Js(e,t,n){var r=[],o=[],i;function a(p){var f=p<0?~p:p;(o[f]||(o[f]=[])).push({i:p,g:i})}function c(p){p.forEach(a)}function u(p){p.forEach(c)}function m(p){p.forEach(u)}function s(p){switch(i=p,p.type){case"GeometryCollection":p.geometries.forEach(s);break;case"LineString":c(p.arcs);break;case"MultiLineString":case"Polygon":u(p.arcs);break;case"MultiPolygon":m(p.arcs);break}}return s(t),o.forEach(n==null?function(p){r.push(p[0].i)}:function(p){n(p[0].g,p[p.length-1].g)&&r.push(p[0].i)}),r}var ec={value:()=>{}};function $r(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(e){this._=e}function tc(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=$r.prototype={constructor:Ut,on:function(e,t){var n=this._,r=tc(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=nc(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Ro(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ro(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ut(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function nc(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ro(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ec,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hr="http://www.w3.org/1999/xhtml";const Fo={svg:"http://www.w3.org/2000/svg",xhtml:hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function En(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fo.hasOwnProperty(t)?{space:Fo[t],local:e}:e}function rc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hr&&t.documentElement.namespaceURI===hr?t.createElement(e):t.createElementNS(n,e)}}function oc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ui(e){var t=En(e);return(t.local?oc:rc)(t)}function ic(){}function zr(e){return e==null?ic:function(){return this.querySelector(e)}}function ac(e){typeof e!="function"&&(e=zr(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,c=r[o]=new Array(a),u,m,s=0;s<a;++s)(u=i[s])&&(m=e.call(u,u.__data__,s,i))&&("__data__"in u&&(m.__data__=u.__data__),c[s]=m);return new de(r,this._parents)}function Yi(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sc(){return[]}function Xi(e){return e==null?sc:function(){return this.querySelectorAll(e)}}function cc(e){return function(){var t=e.apply(this,arguments);return t==null?[]:Yi(t)}}function lc(e){typeof e=="function"?e=cc(e):e=Xi(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],c=a.length,u,m=0;m<c;++m)(u=a[m])&&(r.push(e.call(u,u.__data__,m,a)),o.push(u));return new de(r,o)}function Wi(e){return function(){return this.matches(e)}}function Ki(e){return function(t){return t.matches(e)}}var uc=Array.prototype.find;function mc(e){return function(){return uc.call(this.children,e)}}function fc(){return this.firstElementChild}function pc(e){return this.select(e==null?fc:mc(typeof e=="function"?e:Ki(e)))}var dc=Array.prototype.filter;function hc(){return this.children}function gc(e){return function(){return dc.call(this.children,e)}}function xc(e){return this.selectAll(e==null?hc:gc(typeof e=="function"?e:Ki(e)))}function yc(e){typeof e!="function"&&(e=Wi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,c=r[o]=[],u,m=0;m<a;++m)(u=i[m])&&e.call(u,u.__data__,m,i)&&c.push(u);return new de(r,this._parents)}function Ji(e){return new Array(e.length)}function vc(){return new de(this._enter||this._groups.map(Ji),this._parents)}function Cn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cn.prototype={constructor:Cn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _c(e){return function(){return e}}function wc(e,t,n,r,o,i){for(var a=0,c,u=t.length,m=i.length;a<m;++a)(c=t[a])?(c.__data__=i[a],r[a]=c):n[a]=new Cn(e,i[a]);for(;a<u;++a)(c=t[a])&&(o[a]=c)}function bc(e,t,n,r,o,i,a){var c,u,m=new Map,s=t.length,p=i.length,f=new Array(s),d;for(c=0;c<s;++c)(u=t[c])&&(f[c]=d=a.call(u,u.__data__,c,t)+"",m.has(d)?o[c]=u:m.set(d,u));for(c=0;c<p;++c)d=a.call(e,i[c],c,i)+"",(u=m.get(d))?(r[c]=u,u.__data__=i[c],m.delete(d)):n[c]=new Cn(e,i[c]);for(c=0;c<s;++c)(u=t[c])&&m.get(f[c])===u&&(o[c]=u)}function Cc(e){return e.__data__}function Qc(e,t){if(!arguments.length)return Array.from(this,Cc);var n=t?bc:wc,r=this._parents,o=this._groups;typeof e!="function"&&(e=_c(e));for(var i=o.length,a=new Array(i),c=new Array(i),u=new Array(i),m=0;m<i;++m){var s=r[m],p=o[m],f=p.length,d=Yi(e.call(s,s&&s.__data__,m,r)),h=d.length,v=c[m]=new Array(h),y=a[m]=new Array(h),g=u[m]=new Array(f);n(s,p,v,y,g,d,t);for(var _=0,x=0,C,N;_<h;++_)if(C=v[_]){for(_>=x&&(x=_+1);!(N=y[x])&&++x<h;);C._next=N||null}}return a=new de(a,r),a._enter=c,a._exit=u,a}function jc(){return new de(this._exit||this._groups.map(Ji),this._parents)}function Nc(e,t,n){var r=this.enter(),o=this,i=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(o=t(o)),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Mc(e){if(!(e instanceof de))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),c=0;c<i;++c)for(var u=t[c],m=n[c],s=u.length,p=a[c]=new Array(s),f,d=0;d<s;++d)(f=u[d]||m[d])&&(p[d]=f);for(;c<r;++c)a[c]=t[c];return new de(a,this._parents)}function Sc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function Ec(e){e||(e=Ac);function t(p,f){return p&&f?e(p.__data__,f.__data__):!p-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],c=a.length,u=o[i]=new Array(c),m,s=0;s<c;++s)(m=a[s])&&(u[s]=m);u.sort(t)}return new de(o,this._parents).order()}function Ac(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kc(){return Array.from(this)}function Zc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function Rc(){let e=0;for(const t of this)++e;return e}function Fc(){return!this.node()}function Lc(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,c;i<a;++i)(c=o[i])&&e.call(c,c.__data__,i,o);return this}function Tc(e){return function(){this.removeAttribute(e)}}function Bc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dc(e,t){return function(){this.setAttribute(e,t)}}function $c(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Oc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ic(e,t){var n=En(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bc:Tc:typeof t=="function"?n.local?Oc:zc:n.local?$c:Dc)(n,t))}function ea(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Gc(e){return function(){this.style.removeProperty(e)}}function Vc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Hc(e,t,n){return arguments.length>1?this.each((t==null?Gc:typeof t=="function"?qc:Vc)(e,t,n??"")):rt(this.node(),e)}function rt(e,t){return e.style.getPropertyValue(t)||ea(e).getComputedStyle(e,null).getPropertyValue(t)}function Uc(e){return function(){delete this[e]}}function Yc(e,t){return function(){this[e]=t}}function Xc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Wc(e,t){return arguments.length>1?this.each((t==null?Uc:typeof t=="function"?Xc:Yc)(e,t)):this.node()[e]}function ta(e){return e.trim().split(/^|\s+/)}function Or(e){return e.classList||new na(e)}function na(e){this._node=e,this._names=ta(e.getAttribute("class")||"")}na.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ra(e,t){for(var n=Or(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function oa(e,t){for(var n=Or(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Kc(e){return function(){ra(this,e)}}function Jc(e){return function(){oa(this,e)}}function el(e,t){return function(){(t.apply(this,arguments)?ra:oa)(this,e)}}function tl(e,t){var n=ta(e+"");if(arguments.length<2){for(var r=Or(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?el:t?Kc:Jc)(n,t))}function nl(){this.textContent=""}function rl(e){return function(){this.textContent=e}}function ol(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function il(e){return arguments.length?this.each(e==null?nl:(typeof e=="function"?ol:rl)(e)):this.node().textContent}function al(){this.innerHTML=""}function sl(e){return function(){this.innerHTML=e}}function cl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ll(e){return arguments.length?this.each(e==null?al:(typeof e=="function"?cl:sl)(e)):this.node().innerHTML}function ul(){this.nextSibling&&this.parentNode.appendChild(this)}function ml(){return this.each(ul)}function fl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pl(){return this.each(fl)}function dl(e){var t=typeof e=="function"?e:Ui(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function hl(){return null}function gl(e,t){var n=typeof e=="function"?e:Ui(e),r=t==null?hl:typeof t=="function"?t:zr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xl(){var e=this.parentNode;e&&e.removeChild(this)}function yl(){return this.each(xl)}function vl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _l(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wl(e){return this.select(e?_l:vl)}function bl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cl(e){return function(t){e.call(this,t,this.__data__)}}function Ql(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jl(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Nl(e,t,n){return function(){var r=this.__on,o,i=Cl(t);if(r){for(var a=0,c=r.length;a<c;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Ml(e,t,n){var r=Ql(e+""),o,i=r.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,m=c.length,s;u<m;++u)for(o=0,s=c[u];o<i;++o)if((a=r[o]).type===s.type&&a.name===s.name)return s.value}return}for(c=t?Nl:jl,o=0;o<i;++o)this.each(c(r[o],t,n));return this}function ia(e,t,n){var r=ea(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Sl(e,t){return function(){return ia(this,e,t)}}function El(e,t){return function(){return ia(this,e,t.apply(this,arguments))}}function Al(e,t){return this.each((typeof t=="function"?El:Sl)(e,t))}function*Pl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var aa=[null];function de(e,t){this._groups=e,this._parents=t}function Ft(){return new de([[document.documentElement]],aa)}function kl(){return this}de.prototype=Ft.prototype={constructor:de,select:ac,selectAll:lc,selectChild:pc,selectChildren:xc,filter:yc,data:Qc,enter:vc,exit:jc,join:Nc,merge:Mc,selection:kl,order:Sc,sort:Ec,call:Pc,nodes:kc,node:Zc,size:Rc,empty:Fc,each:Lc,attr:Ic,style:Hc,property:Wc,classed:tl,text:il,html:ll,raise:ml,lower:pl,append:dl,insert:gl,remove:yl,clone:wl,datum:bl,on:Ml,dispatch:Al,[Symbol.iterator]:Pl};function Fe(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],aa)}function Zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Oe(e,t){if(e=Zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function gr(e){e.preventDefault(),e.stopImmediatePropagation()}function Rl(e){var t=e.document.documentElement,n=Fe(e).on("dragstart.drag",gr,!0);"onselectstart"in t?n.on("selectstart.drag",gr,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fl(e,t){var n=e.document.documentElement,r=Fe(e).on("dragstart.drag",null);t&&(r.on("click.drag",gr,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Lo=180/Math.PI,xr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sa(e,t,n,r,o,i){var a,c,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Lo,skewX:Math.atan(u)*Lo,scaleX:a,scaleY:c}}var It;function Ll(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xr:sa(t.a,t.b,t.c,t.d,t.e,t.f)}function Tl(e){return e==null||(It||(It=document.createElementNS("http://www.w3.org/2000/svg","g")),It.setAttribute("transform",e),!(e=It.transform.baseVal.consolidate()))?xr:(e=e.matrix,sa(e.a,e.b,e.c,e.d,e.e,e.f))}function ca(e,t,n,r){function o(m){return m.length?m.pop()+" ":""}function i(m,s,p,f,d,h){if(m!==p||s!==f){var v=d.push("translate(",null,t,null,n);h.push({i:v-4,x:Ge(m,p)},{i:v-2,x:Ge(s,f)})}else(p||f)&&d.push("translate("+p+t+f+n)}function a(m,s,p,f){m!==s?(m-s>180?s+=360:s-m>180&&(m+=360),f.push({i:p.push(o(p)+"rotate(",null,r)-2,x:Ge(m,s)})):s&&p.push(o(p)+"rotate("+s+r)}function c(m,s,p,f){m!==s?f.push({i:p.push(o(p)+"skewX(",null,r)-2,x:Ge(m,s)}):s&&p.push(o(p)+"skewX("+s+r)}function u(m,s,p,f,d,h){if(m!==p||s!==f){var v=d.push(o(d)+"scale(",null,",",null,")");h.push({i:v-4,x:Ge(m,p)},{i:v-2,x:Ge(s,f)})}else(p!==1||f!==1)&&d.push(o(d)+"scale("+p+","+f+")")}return function(m,s){var p=[],f=[];return m=e(m),s=e(s),i(m.translateX,m.translateY,s.translateX,s.translateY,p,f),a(m.rotate,s.rotate,p,f),c(m.skewX,s.skewX,p,f),u(m.scaleX,m.scaleY,s.scaleX,s.scaleY,p,f),m=s=null,function(d){for(var h=-1,v=f.length,y;++h<v;)p[(y=f[h]).i]=y.x(d);return p.join("")}}}var Bl=ca(Ll,"px, ","px)","deg)"),Dl=ca(Tl,", ",")",")"),$l=1e-12;function To(e){return((e=Math.exp(e))+1/e)/2}function zl(e){return((e=Math.exp(e))-1/e)/2}function Ol(e){return((e=Math.exp(2*e))-1)/(e+1)}const Il=function e(t,n,r){function o(i,a){var c=i[0],u=i[1],m=i[2],s=a[0],p=a[1],f=a[2],d=s-c,h=p-u,v=d*d+h*h,y,g;if(v<$l)g=Math.log(f/m)/t,y=function(S){return[c+S*d,u+S*h,m*Math.exp(t*S*g)]};else{var _=Math.sqrt(v),x=(f*f-m*m+r*v)/(2*m*n*_),C=(f*f-m*m-r*v)/(2*f*n*_),N=Math.log(Math.sqrt(x*x+1)-x),j=Math.log(Math.sqrt(C*C+1)-C);g=(j-N)/t,y=function(S){var A=S*g,P=To(N),B=m/(n*_)*(P*Ol(t*A+N)-zl(N));return[c+B*d,u+B*h,m*P/To(t*A+N)]}}return y.duration=g*1e3*t/Math.SQRT2,y}return o.rho=function(i){var a=Math.max(.001,+i),c=a*a,u=c*c;return e(a,c,u)},o}(Math.SQRT2,2,4);var ot=0,gt=0,ct=0,la=1e3,Qn,xt,jn=0,Ue=0,An=0,At=typeof performance=="object"&&performance.now?performance:Date,ua=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ir(){return Ue||(ua(Gl),Ue=At.now()+An)}function Gl(){Ue=0}function Nn(){this._call=this._time=this._next=null}Nn.prototype=ma.prototype={constructor:Nn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ir():+n)+(t==null?0:+t),!this._next&&xt!==this&&(xt?xt._next=this:Qn=this,xt=this),this._call=e,this._time=n,yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,yr())}};function ma(e,t,n){var r=new Nn;return r.restart(e,t,n),r}function Vl(){Ir(),++ot;for(var e=Qn,t;e;)(t=Ue-e._time)>=0&&e._call.call(null,t),e=e._next;--ot}function Bo(){Ue=(jn=At.now())+An,ot=gt=0;try{Vl()}finally{ot=0,Hl(),Ue=0}}function ql(){var e=At.now(),t=e-jn;t>la&&(An-=t,jn=e)}function Hl(){for(var e,t=Qn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qn=n);xt=e,yr(r)}function yr(e){if(!ot){gt&&(gt=clearTimeout(gt));var t=e-Ue;t>24?(e<1/0&&(gt=setTimeout(Bo,e-At.now()-An)),ct&&(ct=clearInterval(ct))):(ct||(jn=At.now(),ct=setInterval(ql,la)),ot=1,ua(Bo))}}function Do(e,t,n){var r=new Nn;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Ul=$r("start","end","cancel","interrupt"),Yl=[],fa=0,$o=1,vr=2,Yt=3,zo=4,_r=5,Xt=6;function Pn(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Xl(e,n,{name:t,index:r,group:o,on:Ul,tween:Yl,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:fa})}function Gr(e,t){var n=Ne(e,t);if(n.state>fa)throw new Error("too late; already scheduled");return n}function Pe(e,t){var n=Ne(e,t);if(n.state>Yt)throw new Error("too late; already running");return n}function Ne(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xl(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=ma(i,0,n.time);function i(m){n.state=$o,n.timer.restart(a,n.delay,n.time),n.delay<=m&&a(m-n.delay)}function a(m){var s,p,f,d;if(n.state!==$o)return u();for(s in r)if(d=r[s],d.name===n.name){if(d.state===Yt)return Do(a);d.state===zo?(d.state=Xt,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[s]):+s<t&&(d.state=Xt,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[s])}if(Do(function(){n.state===Yt&&(n.state=zo,n.timer.restart(c,n.delay,n.time),c(m))}),n.state=vr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===vr){for(n.state=Yt,o=new Array(f=n.tween.length),s=0,p=-1;s<f;++s)(d=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=d);o.length=p+1}}function c(m){for(var s=m<n.duration?n.ease.call(null,m/n.duration):(n.timer.restart(u),n.state=_r,1),p=-1,f=o.length;++p<f;)o[p].call(e,s);n.state===_r&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Xt,n.timer.stop(),delete r[t];for(var m in r)return;delete e.__transition}}function Wt(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>vr&&r.state<_r,r.state=Xt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function Wl(e){return this.each(function(){Wt(this,e)})}function Kl(e,t){var n,r;return function(){var o=Pe(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,c=r.length;a<c;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function Jl(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Pe(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var c={name:t,value:n},u=0,m=o.length;u<m;++u)if(o[u].name===t){o[u]=c;break}u===m&&o.push(c)}i.tween=o}}function eu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ne(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?Kl:Jl)(n,e,t))}function Vr(e,t,n){var r=e._id;return e.each(function(){var o=Pe(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ne(o,r).value[t]}}function pa(e,t){var n;return(typeof t=="number"?Ge:t instanceof to?eo:(n=to(t))?(t=n,eo):wa)(e,t)}function tu(e){return function(){this.removeAttribute(e)}}function nu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ru(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function ou(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function iu(e,t,n){var r,o,i;return function(){var a,c=n(this),u;return c==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=c+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,c)))}}function au(e,t,n){var r,o,i;return function(){var a,c=n(this),u;return c==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=c+"",a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,c)))}}function su(e,t){var n=En(e),r=n==="transform"?Dl:pa;return this.attrTween(e,typeof t=="function"?(n.local?au:iu)(n,r,Vr(this,"attr."+e,t)):t==null?(n.local?nu:tu)(n):(n.local?ou:ru)(n,r,t))}function cu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function lu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function uu(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&lu(e,i)),n}return o._value=t,o}function mu(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&cu(e,i)),n}return o._value=t,o}function fu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=En(e);return this.tween(n,(r.local?uu:mu)(r,t))}function pu(e,t){return function(){Gr(this,e).delay=+t.apply(this,arguments)}}function du(e,t){return t=+t,function(){Gr(this,e).delay=t}}function hu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pu:du)(t,e)):Ne(this.node(),t).delay}function gu(e,t){return function(){Pe(this,e).duration=+t.apply(this,arguments)}}function xu(e,t){return t=+t,function(){Pe(this,e).duration=t}}function yu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gu:xu)(t,e)):Ne(this.node(),t).duration}function vu(e,t){if(typeof t!="function")throw new Error;return function(){Pe(this,e).ease=t}}function _u(e){var t=this._id;return arguments.length?this.each(vu(t,e)):Ne(this.node(),t).ease}function wu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pe(this,e).ease=n}}function bu(e){if(typeof e!="function")throw new Error;return this.each(wu(this._id,e))}function Cu(e){typeof e!="function"&&(e=Wi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,c=r[o]=[],u,m=0;m<a;++m)(u=i[m])&&e.call(u,u.__data__,m,i)&&c.push(u);return new De(r,this._parents,this._name,this._id)}function Qu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),c=0;c<i;++c)for(var u=t[c],m=n[c],s=u.length,p=a[c]=new Array(s),f,d=0;d<s;++d)(f=u[d]||m[d])&&(p[d]=f);for(;c<r;++c)a[c]=t[c];return new De(a,this._parents,this._name,this._id)}function ju(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nu(e,t,n){var r,o,i=ju(t)?Gr:Pe;return function(){var a=i(this,e),c=a.on;c!==r&&(o=(r=c).copy()).on(t,n),a.on=o}}function Mu(e,t){var n=this._id;return arguments.length<2?Ne(this.node(),n).on.on(e):this.each(Nu(n,e,t))}function Su(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Eu(){return this.on("end.remove",Su(this._id))}function Au(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zr(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var c=r[a],u=c.length,m=i[a]=new Array(u),s,p,f=0;f<u;++f)(s=c[f])&&(p=e.call(s,s.__data__,f,c))&&("__data__"in s&&(p.__data__=s.__data__),m[f]=p,Pn(m[f],t,n,f,m,Ne(s,n)));return new De(i,this._parents,t,n)}function Pu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xi(e));for(var r=this._groups,o=r.length,i=[],a=[],c=0;c<o;++c)for(var u=r[c],m=u.length,s,p=0;p<m;++p)if(s=u[p]){for(var f=e.call(s,s.__data__,p,u),d,h=Ne(s,n),v=0,y=f.length;v<y;++v)(d=f[v])&&Pn(d,t,n,v,f,h);i.push(f),a.push(s)}return new De(i,a,t,n)}var ku=Ft.prototype.constructor;function Zu(){return new ku(this._groups,this._parents)}function Ru(e,t){var n,r,o;return function(){var i=rt(this,e),a=(this.style.removeProperty(e),rt(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function da(e){return function(){this.style.removeProperty(e)}}function Fu(e,t,n){var r,o=n+"",i;return function(){var a=rt(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function Lu(e,t,n){var r,o,i;return function(){var a=rt(this,e),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(e),rt(this,e))),a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,c))}}function Tu(e,t){var n,r,o,i="style."+t,a="end."+i,c;return function(){var u=Pe(this,e),m=u.on,s=u.value[i]==null?c||(c=da(t)):void 0;(m!==n||o!==s)&&(r=(n=m).copy()).on(a,o=s),u.on=r}}function Bu(e,t,n){var r=(e+="")=="transform"?Bl:pa;return t==null?this.styleTween(e,Ru(e,r)).on("end.style."+e,da(e)):typeof t=="function"?this.styleTween(e,Lu(e,r,Vr(this,"style."+e,t))).each(Tu(this._id,e)):this.styleTween(e,Fu(e,r,t),n).on("end.style."+e,null)}function Du(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function $u(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Du(e,a,n)),r}return i._value=t,i}function zu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,$u(e,t,n??""))}function Ou(e){return function(){this.textContent=e}}function Iu(e){return function(){var t=e(this);this.textContent=t??""}}function Gu(e){return this.tween("text",typeof e=="function"?Iu(Vr(this,"text",e)):Ou(e==null?"":e+""))}function Vu(e){return function(t){this.textContent=e.call(this,t)}}function qu(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&Vu(o)),t}return r._value=e,r}function Hu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,qu(e))}function Uu(){for(var e=this._name,t=this._id,n=ha(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],c=a.length,u,m=0;m<c;++m)if(u=a[m]){var s=Ne(u,t);Pn(u,e,n,m,a,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new De(r,this._parents,e,n)}function Yu(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var c={value:a},u={value:function(){--o===0&&i()}};n.each(function(){var m=Pe(this,r),s=m.on;s!==e&&(t=(e=s).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(u)),m.on=t}),o===0&&i()})}var Xu=0;function De(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ha(){return++Xu}var Ie=Ft.prototype;De.prototype={constructor:De,select:Au,selectAll:Pu,filter:Cu,merge:Qu,selection:Zu,transition:Uu,call:Ie.call,nodes:Ie.nodes,node:Ie.node,size:Ie.size,empty:Ie.empty,each:Ie.each,on:Mu,attr:su,attrTween:fu,style:Bu,styleTween:zu,text:Gu,textTween:Hu,remove:Eu,tween:eu,delay:hu,duration:yu,ease:_u,easeVarying:bu,end:Yu,[Symbol.iterator]:Ie[Symbol.iterator]};function Wu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ku={time:null,delay:0,duration:250,ease:Wu};function Ju(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function e0(e){var t,n;e instanceof De?(t=e._id,e=e._name):(t=ha(),(n=Ku).time=Ir(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],c=a.length,u,m=0;m<c;++m)(u=a[m])&&Pn(u,e,t,m,a,n||Ju(u,t));return new De(r,this._parents,e,t)}Ft.prototype.interrupt=Wl;Ft.prototype.transition=e0;const Gt=e=>()=>e;function t0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qr=new Te(1,0,0);Te.prototype;function Dn(e){e.stopImmediatePropagation()}function lt(e){e.preventDefault(),e.stopImmediatePropagation()}function n0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function r0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Oo(){return this.__zoom||qr}function o0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function i0(){return navigator.maxTouchPoints||"ontouchstart"in this}function a0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function s0(){var e=n0,t=r0,n=a0,r=o0,o=i0,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Il,m=$r("start","zoom","end"),s,p,f,d=500,h=150,v=0,y=10;function g(w){w.property("__zoom",Oo).on("wheel.zoom",A).on("mousedown.zoom",P).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",G).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(w,b,Q,k){var L=w.selection?w.selection():w;L.property("__zoom",Oo),w!==L?N(w,b,Q,k):L.interrupt().each(function(){j(this,arguments).event(k).start().zoom(null,typeof b=="function"?b.apply(this,arguments):b).end()})},g.scaleBy=function(w,b,Q,k){g.scaleTo(w,function(){var L=this.__zoom.k,R=typeof b=="function"?b.apply(this,arguments):b;return L*R},Q,k)},g.scaleTo=function(w,b,Q,k){g.transform(w,function(){var L=t.apply(this,arguments),R=this.__zoom,z=Q==null?C(L):typeof Q=="function"?Q.apply(this,arguments):Q,O=R.invert(z),q=typeof b=="function"?b.apply(this,arguments):b;return n(x(_(R,q),z,O),L,a)},Q,k)},g.translateBy=function(w,b,Q,k){g.transform(w,function(){return n(this.__zoom.translate(typeof b=="function"?b.apply(this,arguments):b,typeof Q=="function"?Q.apply(this,arguments):Q),t.apply(this,arguments),a)},null,k)},g.translateTo=function(w,b,Q,k,L){g.transform(w,function(){var R=t.apply(this,arguments),z=this.__zoom,O=k==null?C(R):typeof k=="function"?k.apply(this,arguments):k;return n(qr.translate(O[0],O[1]).scale(z.k).translate(typeof b=="function"?-b.apply(this,arguments):-b,typeof Q=="function"?-Q.apply(this,arguments):-Q),R,a)},k,L)};function _(w,b){return b=Math.max(i[0],Math.min(i[1],b)),b===w.k?w:new Te(b,w.x,w.y)}function x(w,b,Q){var k=b[0]-Q[0]*w.k,L=b[1]-Q[1]*w.k;return k===w.x&&L===w.y?w:new Te(w.k,k,L)}function C(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function N(w,b,Q,k){w.on("start.zoom",function(){j(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(k).end()}).tween("zoom",function(){var L=this,R=arguments,z=j(L,R).event(k),O=t.apply(L,R),q=Q==null?C(O):typeof Q=="function"?Q.apply(L,R):Q,X=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),U=L.__zoom,W=typeof b=="function"?b.apply(L,R):b,ge=u(U.invert(q).concat(X/U.k),W.invert(q).concat(X/W.k));return function(xe){if(xe===1)xe=W;else{var _e=ge(xe),ne=X/_e[2];xe=new Te(ne,q[0]-_e[0]*ne,q[1]-_e[1]*ne)}z.zoom(null,xe)}})}function j(w,b,Q){return!Q&&w.__zooming||new S(w,b)}function S(w,b){this.that=w,this.args=b,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,b),this.taps=0}S.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,b){return this.mouse&&w!=="mouse"&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var b=Fe(this.that).datum();m.call(w,this.that,new t0(w,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:m}),b)}};function A(w,...b){if(!e.apply(this,arguments))return;var Q=j(this,b).event(w),k=this.__zoom,L=Math.max(i[0],Math.min(i[1],k.k*Math.pow(2,r.apply(this,arguments)))),R=Oe(w);if(Q.wheel)(Q.mouse[0][0]!==R[0]||Q.mouse[0][1]!==R[1])&&(Q.mouse[1]=k.invert(Q.mouse[0]=R)),clearTimeout(Q.wheel);else{if(k.k===L)return;Q.mouse=[R,k.invert(R)],Wt(this),Q.start()}lt(w),Q.wheel=setTimeout(z,h),Q.zoom("mouse",n(x(_(k,L),Q.mouse[0],Q.mouse[1]),Q.extent,a));function z(){Q.wheel=null,Q.end()}}function P(w,...b){if(f||!e.apply(this,arguments))return;var Q=j(this,b,!0).event(w),k=Fe(w.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",X,!0),L=Oe(w,R),R=w.currentTarget,z=w.clientX,O=w.clientY;Rl(w.view),Dn(w),Q.mouse=[L,this.__zoom.invert(L)],Wt(this),Q.start();function q(U){if(lt(U),!Q.moved){var W=U.clientX-z,ge=U.clientY-O;Q.moved=W*W+ge*ge>v}Q.event(U).zoom("mouse",n(x(Q.that.__zoom,Q.mouse[0]=Oe(U,R),Q.mouse[1]),Q.extent,a))}function X(U){k.on("mousemove.zoom mouseup.zoom",null),Fl(U.view,Q.moved),lt(U),Q.event(U).end()}}function B(w,...b){if(e.apply(this,arguments)){var Q=this.__zoom,k=Oe(w.changedTouches?w.changedTouches[0]:w,this),L=Q.invert(k),R=Q.k*(w.shiftKey?.5:2),z=n(x(_(Q,R),k,L),t.apply(this,b),a);lt(w),c>0?Fe(this).transition().duration(c).call(N,z,k,w):Fe(this).call(g.transform,z,k,w)}}function F(w,...b){if(e.apply(this,arguments)){var Q=w.touches,k=Q.length,L=j(this,b,w.changedTouches.length===k).event(w),R,z,O,q;for(Dn(w),z=0;z<k;++z)O=Q[z],q=Oe(O,this),q=[q,this.__zoom.invert(q),O.identifier],L.touch0?!L.touch1&&L.touch0[2]!==q[2]&&(L.touch1=q,L.taps=0):(L.touch0=q,R=!0,L.taps=1+!!s);s&&(s=clearTimeout(s)),R&&(L.taps<2&&(p=q[0],s=setTimeout(function(){s=null},d)),Wt(this),L.start())}}function G(w,...b){if(this.__zooming){var Q=j(this,b).event(w),k=w.changedTouches,L=k.length,R,z,O,q;for(lt(w),R=0;R<L;++R)z=k[R],O=Oe(z,this),Q.touch0&&Q.touch0[2]===z.identifier?Q.touch0[0]=O:Q.touch1&&Q.touch1[2]===z.identifier&&(Q.touch1[0]=O);if(z=Q.that.__zoom,Q.touch1){var X=Q.touch0[0],U=Q.touch0[1],W=Q.touch1[0],ge=Q.touch1[1],xe=(xe=W[0]-X[0])*xe+(xe=W[1]-X[1])*xe,_e=(_e=ge[0]-U[0])*_e+(_e=ge[1]-U[1])*_e;z=_(z,Math.sqrt(xe/_e)),O=[(X[0]+W[0])/2,(X[1]+W[1])/2],q=[(U[0]+ge[0])/2,(U[1]+ge[1])/2]}else if(Q.touch0)O=Q.touch0[0],q=Q.touch0[1];else return;Q.zoom("touch",n(x(z,O,q),Q.extent,a))}}function H(w,...b){if(this.__zooming){var Q=j(this,b).event(w),k=w.changedTouches,L=k.length,R,z;for(Dn(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),R=0;R<L;++R)z=k[R],Q.touch0&&Q.touch0[2]===z.identifier?delete Q.touch0:Q.touch1&&Q.touch1[2]===z.identifier&&delete Q.touch1;if(Q.touch1&&!Q.touch0&&(Q.touch0=Q.touch1,delete Q.touch1),Q.touch0)Q.touch0[1]=this.__zoom.invert(Q.touch0[0]);else if(Q.end(),Q.taps===2&&(z=Oe(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<y)){var O=Fe(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return g.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:Gt(+w),g):r},g.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Gt(!!w),g):e},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Gt(!!w),g):o},g.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Gt([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),g):t},g.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],g):[i[0],i[1]]},g.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],g):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},g.constrain=function(w){return arguments.length?(n=w,g):n},g.duration=function(w){return arguments.length?(c=+w,g):c},g.interpolate=function(w){return arguments.length?(u=w,g):u},g.on=function(){var w=m.on.apply(m,arguments);return w===m?g:w},g.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,g):Math.sqrt(v)},g.tapDistance=function(w){return arguments.length?(y=+w,g):y},g}function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Io(Object(n),!0).forEach(function(r){c0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wr(e){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(e)}function c0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function l0(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Ce(e,t){if(e==null)return{};var n=l0(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ie(e,t){return u0(e)||m0(e,t)||f0(e,t)||p0()}function u0(e){if(Array.isArray(e))return e}function m0(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],o=!0,i=!1,a,c;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));o=!0);}catch(u){i=!0,c=u}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw c}}return r}}function f0(e,t){if(e){if(typeof e=="string")return Go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Go(e,t)}}function Go(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p0(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d0=["width","height","projection","projectionConfig"],h0=$i,g0=Ce(qs,["geoPath"]),ke=M.createContext(),x0=function(t){var n=t.projectionConfig,r=n===void 0?{}:n,o=t.projection,i=o===void 0?"geoEqualEarth":o,a=t.width,c=a===void 0?800:a,u=t.height,m=u===void 0?600:u,s=typeof i=="function";if(s)return i;var p=g0[i]().translate([c/2,m/2]),f=[p.center?"center":null,p.rotate?"rotate":null,p.scale?"scale":null,p.parallels?"parallels":null];return f.forEach(function(d){d&&(p=p[d](r[d]||p[d]()))}),p},ga=function(t){var n=t.width,r=t.height,o=t.projection,i=t.projectionConfig,a=Ce(t,d0),c=i.center||[],u=ie(c,2),m=u[0],s=u[1],p=i.rotate||[],f=ie(p,3),d=f[0],h=f[1],v=f[2],y=i.parallels||[],g=ie(y,2),_=g[0],x=g[1],C=i.scale||null,N=M.useMemo(function(){return x0({projectionConfig:{center:m||m===0||s||s===0?[m,s]:null,rotate:d||d===0||h||h===0?[d,h,v]:null,parallels:_||_===0||x||x===0?[_,x]:null,scale:C},projection:o,width:n,height:r})},[n,r,o,m,s,d,h,v,_,x,C]),j=M.useCallback(N,[N]),S=M.useMemo(function(){return{width:n,height:r,projection:j,path:h0().projection(j)}},[n,r,j]);return re.createElement(ke.Provider,he({value:S},a))};ga.propTypes={width:E.number,height:E.number,projection:E.oneOfType([E.string,E.func]),projectionConfig:E.object};var y0=["width","height","projection","projectionConfig","className"],Lt=M.forwardRef(function(e,t){var n=e.width,r=n===void 0?800:n,o=e.height,i=o===void 0?600:o,a=e.projection,c=a===void 0?"geoEqualEarth":a,u=e.projectionConfig,m=u===void 0?{}:u,s=e.className,p=s===void 0?"":s,f=Ce(e,y0);return re.createElement(ga,{width:r,height:i,projection:c,projectionConfig:m},re.createElement("svg",he({ref:t,viewBox:"0 0 ".concat(r," ").concat(i),className:"rsm-svg ".concat(p)},f)))});Lt.displayName="ComposableMap";Lt.propTypes={width:E.number,height:E.number,projection:E.oneOfType([E.string,E.func]),projectionConfig:E.object,className:E.string};function Vo(e,t,n){var r=(e*n.k-e)/2,o=(t*n.k-t)/2;return[e/2-(r+n.x)/n.k,t/2-(o+n.y)/n.k]}function v0(e){return fetch(e).then(function(t){if(!t.ok)throw Error(t.statusText);return t.json()}).catch(function(t){console.log("There was a problem when fetching the data: ",t)})}function qo(e,t){var n=e.type==="Topology";if(!n)return t?t(e.features||e):e.features||e;var r=Xs(e,e.objects[Object.keys(e.objects)[0]]).features;return t?t(r):r}function Ho(e){var t=e.type==="Topology";if(!t)return null;var n=Zo(e,e.objects[Object.keys(e.objects)[0]],function(o,i){return o===i}),r=Zo(e,e.objects[Object.keys(e.objects)[0]],function(o,i){return o!==i});return{outline:n,borders:r}}function _0(e,t,n){return e&&t?{outline:Ke(Ke({},e),{},{rsmKey:"outline",svgPath:n(e)}),borders:Ke(Ke({},t),{},{rsmKey:"borders",svgPath:n(t)})}:{}}function w0(e,t){return e?e.map(function(n,r){return Ke(Ke({},n),{},{rsmKey:"geo-".concat(r),svgPath:t(n)})}):[]}function b0(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5,r=Array.isArray(n)?n:[n,n],o=e/2*r[0],i=t/2*r[1];return"M".concat(0,",",0," Q",-e/2-o,",").concat(-t/2+i," ").concat(-e,",").concat(-t)}function C0(e){return typeof e=="string"}function Q0(e){var t=e.geography,n=e.parseGeographies,r=M.useContext(ke),o=r.path,i=M.useState({}),a=ie(i,2),c=a[0],u=a[1];M.useEffect(function(){(typeof window>"u"?"undefined":wr(window))!=="undefined"&&t&&(C0(t)?v0(t).then(function(d){d&&u({geographies:qo(d,n),mesh:Ho(d)})}):u({geographies:qo(t,n),mesh:Ho(t)}))},[t,n]);var m=M.useMemo(function(){var d=c.mesh||{},h=_0(d.outline,d.borders,o);return{geographies:w0(c.geographies,o),outline:h.outline,borders:h.borders}},[c,o]),s=m.geographies,p=m.outline,f=m.borders;return{geographies:s,outline:p,borders:f}}var j0=["geography","children","parseGeographies","className"],it=M.forwardRef(function(e,t){var n=e.geography,r=e.children,o=e.parseGeographies,i=e.className,a=i===void 0?"":i,c=Ce(e,j0),u=M.useContext(ke),m=u.path,s=u.projection,p=Q0({geography:n,parseGeographies:o}),f=p.geographies,d=p.outline,h=p.borders;return re.createElement("g",he({ref:t,className:"rsm-geographies ".concat(a)},c),f&&f.length>0&&r({geographies:f,outline:d,borders:h,path:m,projection:s}))});it.displayName="Geographies";it.propTypes={geography:E.oneOfType([E.string,E.object,E.array]),children:E.func,parseGeographies:E.func,className:E.string};var N0=["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],Hr=M.forwardRef(function(e,t){var n=e.geography,r=e.onMouseEnter,o=e.onMouseLeave,i=e.onMouseDown,a=e.onMouseUp,c=e.onFocus,u=e.onBlur,m=e.style,s=m===void 0?{}:m,p=e.className,f=p===void 0?"":p,d=Ce(e,N0),h=M.useState(!1),v=ie(h,2),y=v[0],g=v[1],_=M.useState(!1),x=ie(_,2),C=x[0],N=x[1];function j(G){N(!0),r&&r(G)}function S(G){N(!1),y&&g(!1),o&&o(G)}function A(G){N(!0),c&&c(G)}function P(G){N(!1),y&&g(!1),u&&u(G)}function B(G){g(!0),i&&i(G)}function F(G){g(!1),a&&a(G)}return re.createElement("path",he({ref:t,tabIndex:"0",className:"rsm-geography ".concat(f),d:n.svgPath,onMouseEnter:j,onMouseLeave:S,onFocus:A,onBlur:P,onMouseDown:B,onMouseUp:F,style:s[y||C?y?"pressed":"hover":"default"]},d))});Hr.displayName="Geography";Hr.propTypes={geography:E.object,onMouseEnter:E.func,onMouseLeave:E.func,onMouseDown:E.func,onMouseUp:E.func,onFocus:E.func,onBlur:E.func,style:E.object,className:E.string};var Ur=M.memo(Hr),M0=["fill","stroke","step","className"],Yr=M.forwardRef(function(e,t){var n=e.fill,r=n===void 0?"transparent":n,o=e.stroke,i=o===void 0?"currentcolor":o,a=e.step,c=a===void 0?[10,10]:a,u=e.className,m=u===void 0?"":u,s=Ce(e,M0),p=M.useContext(ke),f=p.path;return re.createElement("path",he({ref:t,d:f(jr().step(c)()),fill:r,stroke:i,className:"rsm-graticule ".concat(m)},s))});Yr.displayName="Graticule";Yr.propTypes={fill:E.string,stroke:E.string,step:E.array,className:E.string};M.memo(Yr);var S0=["value"],E0=M.createContext(),A0={x:0,y:0,k:1,transformString:"translate(0 0) scale(1)"},xa=function(t){var n=t.value,r=n===void 0?A0:n,o=Ce(t,S0);return re.createElement(E0.Provider,he({value:r},o))};xa.propTypes={x:E.number,y:E.number,k:E.number,transformString:E.string};function P0(e){var t=e.center,n=e.filterZoomEvent,r=e.onMoveStart,o=e.onMoveEnd,i=e.onMove,a=e.translateExtent,c=a===void 0?[[-1/0,-1/0],[1/0,1/0]]:a,u=e.scaleExtent,m=u===void 0?[1,8]:u,s=e.zoom,p=s===void 0?1:s,f=M.useContext(ke),d=f.width,h=f.height,v=f.projection,y=ie(t,2),g=y[0],_=y[1],x=M.useState({x:0,y:0,k:1}),C=ie(x,2),N=C[0],j=C[1],S=M.useRef({x:0,y:0,k:1}),A=M.useRef(),P=M.useRef(),B=M.useRef(!1),F=ie(c,2),G=F[0],H=F[1],w=ie(G,2),b=w[0],Q=w[1],k=ie(H,2),L=k[0],R=k[1],z=ie(m,2),O=z[0],q=z[1];return M.useEffect(function(){var X=Fe(A.current);function U(ne){!r||B.current||r({coordinates:v.invert(Vo(d,h,ne.transform)),zoom:ne.transform.k},ne)}function W(ne){if(!B.current){var $e=ne.transform,st=ne.sourceEvent;j({x:$e.x,y:$e.y,k:$e.k,dragging:st}),i&&i({x:$e.x,y:$e.y,zoom:$e.k,dragging:st},ne)}}function ge(ne){if(B.current){B.current=!1;return}var $e=v.invert(Vo(d,h,ne.transform)),st=ie($e,2),Kr=st[0],Jr=st[1];S.current={x:Kr,y:Jr,k:ne.transform.k},o&&o({coordinates:[Kr,Jr],zoom:ne.transform.k},ne)}function xe(ne){return n?n(ne):ne?!ne.ctrlKey&&!ne.button:!1}var _e=s0().filter(xe).scaleExtent([O,q]).translateExtent([[b,Q],[L,R]]).on("start",U).on("zoom",W).on("end",ge);P.current=_e,X.call(_e)},[d,h,b,Q,L,R,O,q,v,r,i,o,n]),M.useEffect(function(){if(!(g===S.current.x&&_===S.current.y&&p===S.current.k)){var X=v([g,_]),U=X[0]*p,W=X[1]*p,ge=Fe(A.current);B.current=!0,ge.call(P.current.transform,qr.translate(d/2-U,h/2-W).scale(p)),j({x:d/2-U,y:h/2-W,k:p}),S.current={x:g,y:_,k:p}}},[g,_,p,d,h,v]),{mapRef:A,position:N,transformString:"translate(".concat(N.x," ").concat(N.y,") scale(").concat(N.k,")")}}var k0=["center","zoom","minZoom","maxZoom","translateExtent","filterZoomEvent","onMoveStart","onMove","onMoveEnd","className"],kn=M.forwardRef(function(e,t){var n=e.center,r=n===void 0?[0,0]:n,o=e.zoom,i=o===void 0?1:o,a=e.minZoom,c=a===void 0?1:a,u=e.maxZoom,m=u===void 0?8:u,s=e.translateExtent,p=e.filterZoomEvent,f=e.onMoveStart,d=e.onMove,h=e.onMoveEnd,v=e.className,y=Ce(e,k0),g=M.useContext(ke),_=g.width,x=g.height,C=P0({center:r,filterZoomEvent:p,onMoveStart:f,onMove:d,onMoveEnd:h,scaleExtent:[c,m],translateExtent:s,zoom:i}),N=C.mapRef,j=C.transformString,S=C.position;return re.createElement(xa,{value:{x:S.x,y:S.y,k:S.k,transformString:j}},re.createElement("g",{ref:N},re.createElement("rect",{width:_,height:x,fill:"transparent"}),re.createElement("g",he({ref:t,transform:j,className:"rsm-zoomable-group ".concat(v)},y))))});kn.displayName="ZoomableGroup";kn.propTypes={center:E.array,zoom:E.number,minZoom:E.number,maxZoom:E.number,translateExtent:E.arrayOf(E.array),onMoveStart:E.func,onMove:E.func,onMoveEnd:E.func,className:E.string};var Z0=["id","fill","stroke","strokeWidth","className"],Xr=M.forwardRef(function(e,t){var n=e.id,r=n===void 0?"rsm-sphere":n,o=e.fill,i=o===void 0?"transparent":o,a=e.stroke,c=a===void 0?"currentcolor":a,u=e.strokeWidth,m=u===void 0?.5:u,s=e.className,p=s===void 0?"":s,f=Ce(e,Z0),d=M.useContext(ke),h=d.path,v=M.useMemo(function(){return h({type:"Sphere"})},[h]);return re.createElement(M.Fragment,null,re.createElement("defs",null,re.createElement("clipPath",{id:r},re.createElement("path",{d:v}))),re.createElement("path",he({ref:t,d:v,fill:i,stroke:c,strokeWidth:m,style:{pointerEvents:"none"},className:"rsm-sphere ".concat(p)},f)))});Xr.displayName="Sphere";Xr.propTypes={id:E.string,fill:E.string,stroke:E.string,strokeWidth:E.number,className:E.string};M.memo(Xr);var R0=["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],Zn=M.forwardRef(function(e,t){var n=e.coordinates,r=e.children,o=e.onMouseEnter,i=e.onMouseLeave,a=e.onMouseDown,c=e.onMouseUp,u=e.onFocus,m=e.onBlur,s=e.style,p=s===void 0?{}:s,f=e.className,d=f===void 0?"":f,h=Ce(e,R0),v=M.useContext(ke),y=v.projection,g=M.useState(!1),_=ie(g,2),x=_[0],C=_[1],N=M.useState(!1),j=ie(N,2),S=j[0],A=j[1],P=y(n),B=ie(P,2),F=B[0],G=B[1];function H(R){A(!0),o&&o(R)}function w(R){A(!1),x&&C(!1),i&&i(R)}function b(R){A(!0),u&&u(R)}function Q(R){A(!1),x&&C(!1),m&&m(R)}function k(R){C(!0),a&&a(R)}function L(R){C(!1),c&&c(R)}return re.createElement("g",he({ref:t,transform:"translate(".concat(F,", ").concat(G,")"),className:"rsm-marker ".concat(d),onMouseEnter:H,onMouseLeave:w,onFocus:b,onBlur:Q,onMouseDown:k,onMouseUp:L,style:p[x||S?x?"pressed":"hover":"default"]},h),r)});Zn.displayName="Marker";Zn.propTypes={coordinates:E.array,children:E.oneOfType([E.node,E.arrayOf(E.node)]),onMouseEnter:E.func,onMouseLeave:E.func,onMouseDown:E.func,onMouseUp:E.func,onFocus:E.func,onBlur:E.func,style:E.object,className:E.string};var F0=["from","to","coordinates","stroke","strokeWidth","fill","className"],ya=M.forwardRef(function(e,t){var n=e.from,r=n===void 0?[0,0]:n,o=e.to,i=o===void 0?[0,0]:o,a=e.coordinates,c=e.stroke,u=c===void 0?"currentcolor":c,m=e.strokeWidth,s=m===void 0?3:m,p=e.fill,f=p===void 0?"transparent":p,d=e.className,h=d===void 0?"":d,v=Ce(e,F0),y=M.useContext(ke),g=y.path,_={type:"LineString",coordinates:a||[r,i]};return re.createElement("path",he({ref:t,d:g(_),className:"rsm-line ".concat(h),stroke:u,strokeWidth:s,fill:f},v))});ya.displayName="Line";ya.propTypes={from:E.array,to:E.array,coordinates:E.array,stroke:E.string,strokeWidth:E.number,fill:E.string,className:E.string};var L0=["subject","children","connectorProps","dx","dy","curve","className"],va=M.forwardRef(function(e,t){var n=e.subject,r=e.children,o=e.connectorProps,i=e.dx,a=i===void 0?30:i,c=e.dy,u=c===void 0?30:c,m=e.curve,s=m===void 0?0:m,p=e.className,f=p===void 0?"":p,d=Ce(e,L0),h=M.useContext(ke),v=h.projection,y=v(n),g=ie(y,2),_=g[0],x=g[1],C=b0(a,u,s);return re.createElement("g",he({ref:t,transform:"translate(".concat(_+a,", ").concat(x+u,")"),className:"rsm-annotation ".concat(f)},d),re.createElement("path",he({d:C,fill:"transparent",stroke:"#000"},o)),r)});va.displayName="Annotation";va.propTypes={subject:E.array,children:E.oneOfType([E.node,E.arrayOf(E.node)]),dx:E.number,dy:E.number,curve:E.number,connectorProps:E.object,className:E.string};const Kt=[{code:"84",name:"Auvergne-Rhne-Alpes",capital:"Lyon",population:8078652,area_km2:69711,departments:["01","03","07","15","26","38","42","43","63","69","73","74"],climate:"continental",description:"A diverse region featuring the French Alps, the Rhne Valley, and historic Lyon. Known for gastronomy, outdoor sports, and a strong economy."},{code:"27",name:"Bourgogne-Franche-Comt",capital:"Dijon",population:2805580,area_km2:47784,departments:["21","25","39","58","70","71","89","90"],climate:"continental",description:"Famous for Burgundy wines, medieval heritage, and the Jura mountains. A region of rolling hills, historic towns, and rich culinary traditions."},{code:"53",name:"Bretagne",capital:"Rennes",population:3373835,area_km2:27208,departments:["22","29","35","56"],climate:"oceanic",description:"A Celtic peninsula with dramatic coastlines, rich maritime heritage, and distinctive culture. Known for seafood, cider, and medieval villages."},{code:"24",name:"Centre-Val de Loire",capital:"Orlans",population:2576252,area_km2:39151,departments:["18","28","36","37","41","45"],climate:"semi-oceanic",description:"The heart of France featuring magnificent Loire Valley chteaux, vineyards, and a gentle landscape. Rich in history and royal heritage."},{code:"94",name:"Corse",capital:"Ajaccio",population:344679,area_km2:8680,departments:["2A","2B"],climate:"mediterranean",description:'The "Island of Beauty" with stunning mountains, beaches, and unique culture. A Mediterranean paradise with strong local traditions.'},{code:"44",name:"Grand Est",capital:"Strasbourg",population:5561287,area_km2:57433,departments:["08","10","51","52","54","55","57","67","68","88"],climate:"continental",description:"A region blending French and Germanic influences. Home to Strasbourg, Alsatian wine routes, and the Vosges mountains."},{code:"32",name:"Hauts-de-France",capital:"Lille",population:6009976,area_km2:31813,departments:["02","59","60","62","80"],climate:"oceanic",description:"Northern France with Flemish heritage, cathedral cities, and WWI memorial sites. A dynamic region close to Paris, Belgium, and the UK."},{code:"11",name:"le-de-France",capital:"Paris",population:12271794,area_km2:12012,departments:["75","77","78","91","92","93","94","95"],climate:"semi-oceanic",description:"The Paris region - the economic, cultural, and political heart of France. World-class museums, historic monuments, and cosmopolitan lifestyle."},{code:"28",name:"Normandie",capital:"Rouen",population:3327477,area_km2:29907,departments:["14","27","50","61","76"],climate:"oceanic",description:"Historic region of D-Day beaches, medieval abbeys, and apple orchards. Known for Camembert, cider, and impressionist landscapes."},{code:"75",name:"Nouvelle-Aquitaine",capital:"Bordeaux",population:6033952,area_km2:84036,departments:["16","17","19","23","24","33","40","47","64","79","86","87"],climate:"oceanic",description:"The largest region in France, featuring Bordeaux wines, Atlantic beaches, the Dordogne, and the Basque Country. Excellent quality of life."},{code:"76",name:"Occitanie",capital:"Toulouse",population:5973969,area_km2:72724,departments:["09","11","12","30","31","32","34","46","48","65","66","81","82"],climate:"mediterranean",description:"Southern France from the Pyrenees to the Mediterranean. Toulouse aerospace, Cathar castles, beaches, and vibrant cities."},{code:"52",name:"Pays de la Loire",capital:"Nantes",population:3838614,area_km2:32082,departments:["44","49","53","72","85"],climate:"oceanic",description:"Atlantic coast region with dynamic Nantes, Loire Valley vineyards, and charming coastal towns. Growing tech hub with high quality of life."},{code:"93",name:"Provence-Alpes-Cte d'Azur",capital:"Marseille",population:5081101,area_km2:31400,departments:["04","05","06","13","83","84"],climate:"mediterranean",description:"The French Riviera, lavender fields of Provence, and Alpine peaks. Mediterranean lifestyle, historic cities, and world-famous coastline."}],Wr=[{code:"01",name:"Ain",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Bourg-en-Bresse",population:656955,area_km2:5762,major_cities:["Bourg-en-Bresse","Oyonnax","Ambrieu-en-Bugey"]},{code:"03",name:"Allier",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Moulins",population:337171,area_km2:7340,major_cities:["Montluon","Vichy","Moulins"]},{code:"07",name:"Ardche",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Privas",population:328278,area_km2:5529,major_cities:["Annonay","Aubenas","Privas"]},{code:"15",name:"Cantal",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Aurillac",population:144692,area_km2:5726,major_cities:["Aurillac","Saint-Flour","Mauriac"]},{code:"26",name:"Drme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Valence",population:516762,area_km2:6530,major_cities:["Valence","Montlimar","Romans-sur-Isre"]},{code:"38",name:"Isre",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Grenoble",population:1271166,area_km2:7431,major_cities:["Grenoble","Saint-Martin-d'Hres","chirolles"]},{code:"42",name:"Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Saint-tienne",population:765634,area_km2:4781,major_cities:["Saint-tienne","Roanne","Saint-Chamond"]},{code:"43",name:"Haute-Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Le Puy-en-Velay",population:227339,area_km2:4977,major_cities:["Le Puy-en-Velay","Monistrol-sur-Loire","Yssingeaux"]},{code:"63",name:"Puy-de-Dme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Clermont-Ferrand",population:662152,area_km2:7970,major_cities:["Clermont-Ferrand","Cournon-d'Auvergne","Riom"]},{code:"69",name:"Rhne",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Lyon",population:1876051,area_km2:3249,major_cities:["Lyon","Villeurbanne","Vnissieux"]},{code:"73",name:"Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Chambry",population:440347,area_km2:6028,major_cities:["Chambry","Aix-les-Bains","Albertville"]},{code:"74",name:"Haute-Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Annecy",population:826105,area_km2:4388,major_cities:["Annecy","Thonon-les-Bains","Annemasse"]},{code:"21",name:"Cte-d'Or",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Dijon",population:534124,area_km2:8763,major_cities:["Dijon","Beaune","Chenve"]},{code:"25",name:"Doubs",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Besanon",population:543974,area_km2:5234,major_cities:["Besanon","Montbliard","Pontarlier"]},{code:"39",name:"Jura",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Lons-le-Saunier",population:260681,area_km2:4999,major_cities:["Lons-le-Saunier","Dole","Saint-Claude"]},{code:"58",name:"Nivre",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Nevers",population:204452,area_km2:6817,major_cities:["Nevers","Cosne-Cours-sur-Loire","Varennes-Vauzelles"]},{code:"70",name:"Haute-Sane",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Vesoul",population:235313,area_km2:5360,major_cities:["Vesoul","Hricourt","Lure"]},{code:"71",name:"Sane-et-Loire",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Mcon",population:551493,area_km2:8575,major_cities:["Chalon-sur-Sane","Mcon","Le Creusot"]},{code:"89",name:"Yonne",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Auxerre",population:338291,area_km2:7427,major_cities:["Auxerre","Sens","Joigny"]},{code:"90",name:"Territoire de Belfort",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Belfort",population:137252,area_km2:610,major_cities:["Belfort","Delle","Valdoie"]},{code:"22",name:"Ctes-d'Armor",region_code:"53",region_name:"Bretagne",prefecture:"Saint-Brieuc",population:598953,area_km2:6878,major_cities:["Saint-Brieuc","Lannion","Dinan"]},{code:"29",name:"Finistre",region_code:"53",region_name:"Bretagne",prefecture:"Quimper",population:915090,area_km2:6733,major_cities:["Brest","Quimper","Concarneau"]},{code:"35",name:"Ille-et-Vilaine",region_code:"53",region_name:"Bretagne",prefecture:"Rennes",population:1082052,area_km2:6775,major_cities:["Rennes","Saint-Malo","Fougres"]},{code:"56",name:"Morbihan",region_code:"53",region_name:"Bretagne",prefecture:"Vannes",population:777740,area_km2:6823,major_cities:["Lorient","Vannes","Lanester"]},{code:"18",name:"Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Bourges",population:302306,area_km2:7235,major_cities:["Bourges","Vierzon","Saint-Amand-Montrond"]},{code:"28",name:"Eure-et-Loir",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chartres",population:433233,area_km2:5880,major_cities:["Chartres","Dreux","Luc"]},{code:"36",name:"Indre",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chteauroux",population:220530,area_km2:6791,major_cities:["Chteauroux","Issoudun","Dols"]},{code:"37",name:"Indre-et-Loire",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Tours",population:610079,area_km2:6127,major_cities:["Tours","Jou-ls-Tours","Saint-Cyr-sur-Loire"]},{code:"41",name:"Loir-et-Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Blois",population:331915,area_km2:6343,major_cities:["Blois","Vendme","Romorantin-Lanthenay"]},{code:"45",name:"Loiret",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Orlans",population:678189,area_km2:6775,major_cities:["Orlans","Olivet","Saint-Jean-de-Braye"]},{code:"2A",name:"Corse-du-Sud",region_code:"94",region_name:"Corse",prefecture:"Ajaccio",population:159622,area_km2:4014,major_cities:["Ajaccio","Porto-Vecchio","Propriano"]},{code:"2B",name:"Haute-Corse",region_code:"94",region_name:"Corse",prefecture:"Bastia",population:185057,area_km2:4666,major_cities:["Bastia","Calvi","Corte"]},{code:"08",name:"Ardennes",region_code:"44",region_name:"Grand Est",prefecture:"Charleville-Mzires",population:270582,area_km2:5229,major_cities:["Charleville-Mzires","Sedan","Rethel"]},{code:"10",name:"Aube",region_code:"44",region_name:"Grand Est",prefecture:"Troyes",population:310242,area_km2:6004,major_cities:["Troyes","Romilly-sur-Seine","La Chapelle-Saint-Luc"]},{code:"51",name:"Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chlons-en-Champagne",population:566855,area_km2:8162,major_cities:["Reims","Chlons-en-Champagne","pernay"]},{code:"52",name:"Haute-Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chaumont",population:172512,area_km2:6211,major_cities:["Chaumont","Saint-Dizier","Langres"]},{code:"54",name:"Meurthe-et-Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Nancy",population:733481,area_km2:5246,major_cities:["Nancy","Vanduvre-ls-Nancy","Lunville"]},{code:"55",name:"Meuse",region_code:"44",region_name:"Grand Est",prefecture:"Bar-le-Duc",population:184083,area_km2:6211,major_cities:["Bar-le-Duc","Verdun","Commercy"]},{code:"57",name:"Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Metz",population:1043522,area_km2:6216,major_cities:["Metz","Thionville","Forbach"]},{code:"67",name:"Bas-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Strasbourg",population:1140939,area_km2:4755,major_cities:["Strasbourg","Haguenau","Schiltigheim"]},{code:"68",name:"Haut-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Colmar",population:764030,area_km2:3525,major_cities:["Mulhouse","Colmar","Saint-Louis"]},{code:"88",name:"Vosges",region_code:"44",region_name:"Grand Est",prefecture:"pinal",population:367673,area_km2:5874,major_cities:["pinal","Saint-Di-des-Vosges","Grardmer"]},{code:"02",name:"Aisne",region_code:"32",region_name:"Hauts-de-France",prefecture:"Laon",population:531345,area_km2:7369,major_cities:["Saint-Quentin","Soissons","Laon"]},{code:"59",name:"Nord",region_code:"32",region_name:"Hauts-de-France",prefecture:"Lille",population:2608346,area_km2:5743,major_cities:["Lille","Roubaix","Tourcoing"]},{code:"60",name:"Oise",region_code:"32",region_name:"Hauts-de-France",prefecture:"Beauvais",population:829419,area_km2:5860,major_cities:["Beauvais","Compigne","Creil"]},{code:"62",name:"Pas-de-Calais",region_code:"32",region_name:"Hauts-de-France",prefecture:"Arras",population:1465278,area_km2:6671,major_cities:["Calais","Boulogne-sur-Mer","Arras"]},{code:"80",name:"Somme",region_code:"32",region_name:"Hauts-de-France",prefecture:"Amiens",population:571632,area_km2:6170,major_cities:["Amiens","Abbeville","Albert"]},{code:"75",name:"Paris",region_code:"11",region_name:"le-de-France",prefecture:"Paris",population:2145906,area_km2:105,major_cities:["Paris"]},{code:"77",name:"Seine-et-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Melun",population:1421197,area_km2:5915,major_cities:["Meaux","Chelles","Melun"]},{code:"78",name:"Yvelines",region_code:"11",region_name:"le-de-France",prefecture:"Versailles",population:1441398,area_km2:2284,major_cities:["Versailles","Sartrouville","Mantes-la-Jolie"]},{code:"91",name:"Essonne",region_code:"11",region_name:"le-de-France",prefecture:"vry-Courcouronnes",population:1301659,area_km2:1804,major_cities:["vry-Courcouronnes","Corbeil-Essonnes","Massy"]},{code:"92",name:"Hauts-de-Seine",region_code:"11",region_name:"le-de-France",prefecture:"Nanterre",population:1624357,area_km2:176,major_cities:["Boulogne-Billancourt","Nanterre","Courbevoie"]},{code:"93",name:"Seine-Saint-Denis",region_code:"11",region_name:"le-de-France",prefecture:"Bobigny",population:1644903,area_km2:236,major_cities:["Montreuil","Saint-Denis","Aubervilliers"]},{code:"94",name:"Val-de-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Crteil",population:1407124,area_km2:245,major_cities:["Crteil","Vitry-sur-Seine","Saint-Maur-des-Fosss"]},{code:"95",name:"Val-d'Oise",region_code:"11",region_name:"le-de-France",prefecture:"Cergy",population:1249674,area_km2:1246,major_cities:["Argenteuil","Sarcelles","Cergy"]},{code:"14",name:"Calvados",region_code:"28",region_name:"Normandie",prefecture:"Caen",population:695536,area_km2:5548,major_cities:["Caen","Hrouville-Saint-Clair","Lisieux"]},{code:"27",name:"Eure",region_code:"28",region_name:"Normandie",prefecture:"vreux",population:601843,area_km2:6040,major_cities:["vreux","Vernon","Louviers"]},{code:"50",name:"Manche",region_code:"28",region_name:"Normandie",prefecture:"Saint-L",population:495045,area_km2:5938,major_cities:["Cherbourg-en-Cotentin","Saint-L","Granville"]},{code:"61",name:"Orne",region_code:"28",region_name:"Normandie",prefecture:"Alenon",population:279942,area_km2:6103,major_cities:["Alenon","Flers","Argentan"]},{code:"76",name:"Seine-Maritime",region_code:"28",region_name:"Normandie",prefecture:"Rouen",population:1254378,area_km2:6278,major_cities:["Le Havre","Rouen","Dieppe"]},{code:"16",name:"Charente",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Angoulme",population:352015,area_km2:5956,major_cities:["Angoulme","Cognac","Soyaux"]},{code:"17",name:"Charente-Maritime",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"La Rochelle",population:651358,area_km2:6864,major_cities:["La Rochelle","Saintes","Rochefort"]},{code:"19",name:"Corrze",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Tulle",population:240336,area_km2:5857,major_cities:["Brive-la-Gaillarde","Tulle","Ussel"]},{code:"23",name:"Creuse",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Guret",population:116617,area_km2:5565,major_cities:["Guret","La Souterraine","Aubusson"]},{code:"24",name:"Dordogne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Prigueux",population:413223,area_km2:9060,major_cities:["Prigueux","Bergerac","Sarlat-la-Canda"]},{code:"33",name:"Gironde",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Bordeaux",population:1623749,area_km2:1e4,major_cities:["Bordeaux","Mrignac","Pessac"]},{code:"40",name:"Landes",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Mont-de-Marsan",population:413690,area_km2:9243,major_cities:["Mont-de-Marsan","Dax","Biscarrosse"]},{code:"47",name:"Lot-et-Garonne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Agen",population:331271,area_km2:5361,major_cities:["Agen","Villeneuve-sur-Lot","Marmande"]},{code:"64",name:"Pyrnes-Atlantiques",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Pau",population:687240,area_km2:7645,major_cities:["Pau","Bayonne","Anglet"]},{code:"79",name:"Deux-Svres",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Niort",population:374351,area_km2:5999,major_cities:["Niort","Bressuire","Thouars"]},{code:"86",name:"Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Poitiers",population:438435,area_km2:6990,major_cities:["Poitiers","Chtellerault","Buxerolles"]},{code:"87",name:"Haute-Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Limoges",population:374426,area_km2:5520,major_cities:["Limoges","Saint-Junien","Panazol"]},{code:"09",name:"Arige",region_code:"76",region_name:"Occitanie",prefecture:"Foix",population:153287,area_km2:4890,major_cities:["Pamiers","Foix","Saint-Girons"]},{code:"11",name:"Aude",region_code:"76",region_name:"Occitanie",prefecture:"Carcassonne",population:374070,area_km2:6139,major_cities:["Narbonne","Carcassonne","Castelnaudary"]},{code:"12",name:"Aveyron",region_code:"76",region_name:"Occitanie",prefecture:"Rodez",population:279595,area_km2:8735,major_cities:["Rodez","Millau","Villefranche-de-Rouergue"]},{code:"30",name:"Gard",region_code:"76",region_name:"Occitanie",prefecture:"Nmes",population:748437,area_km2:5853,major_cities:["Nmes","Als","Bagnols-sur-Cze"]},{code:"31",name:"Haute-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Toulouse",population:1415757,area_km2:6309,major_cities:["Toulouse","Colomiers","Tournefeuille"]},{code:"32",name:"Gers",region_code:"76",region_name:"Occitanie",prefecture:"Auch",population:191377,area_km2:6257,major_cities:["Auch","Condom","Fleurance"]},{code:"34",name:"Hrault",region_code:"76",region_name:"Occitanie",prefecture:"Montpellier",population:1176145,area_km2:6101,major_cities:["Montpellier","Bziers","Ste"]},{code:"46",name:"Lot",region_code:"76",region_name:"Occitanie",prefecture:"Cahors",population:174094,area_km2:5217,major_cities:["Cahors","Figeac","Gourdon"]},{code:"48",name:"Lozre",region_code:"76",region_name:"Occitanie",prefecture:"Mende",population:76601,area_km2:5167,major_cities:["Mende","Marvejols","Saint-Chly-d'Apcher"]},{code:"65",name:"Hautes-Pyrnes",region_code:"76",region_name:"Occitanie",prefecture:"Tarbes",population:229567,area_km2:4464,major_cities:["Tarbes","Lourdes","Bagnres-de-Bigorre"]},{code:"66",name:"Pyrnes-Orientales",region_code:"76",region_name:"Occitanie",prefecture:"Perpignan",population:479979,area_km2:4116,major_cities:["Perpignan","Canet-en-Roussillon","Saint-Estve"]},{code:"81",name:"Tarn",region_code:"76",region_name:"Occitanie",prefecture:"Albi",population:389844,area_km2:5758,major_cities:["Albi","Castres","Gaillac"]},{code:"82",name:"Tarn-et-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Montauban",population:262618,area_km2:3718,major_cities:["Montauban","Castelsarrasin","Moissac"]},{code:"44",name:"Loire-Atlantique",region_code:"52",region_name:"Pays de la Loire",prefecture:"Nantes",population:1429272,area_km2:6815,major_cities:["Nantes","Saint-Nazaire","Saint-Herblain"]},{code:"49",name:"Maine-et-Loire",region_code:"52",region_name:"Pays de la Loire",prefecture:"Angers",population:818273,area_km2:7107,major_cities:["Angers","Cholet","Saumur"]},{code:"53",name:"Mayenne",region_code:"52",region_name:"Pays de la Loire",prefecture:"Laval",population:307445,area_km2:5175,major_cities:["Laval","Mayenne","Chteau-Gontier-sur-Mayenne"]},{code:"72",name:"Sarthe",region_code:"52",region_name:"Pays de la Loire",prefecture:"Le Mans",population:566506,area_km2:6206,major_cities:["Le Mans","La Flche","Sabl-sur-Sarthe"]},{code:"85",name:"Vende",region_code:"52",region_name:"Pays de la Loire",prefecture:"La Roche-sur-Yon",population:698118,area_km2:6720,major_cities:["La Roche-sur-Yon","Les Sables-d'Olonne","Challans"]},{code:"04",name:"Alpes-de-Haute-Provence",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Digne-les-Bains",population:164308,area_km2:6925,major_cities:["Manosque","Digne-les-Bains","Sisteron"]},{code:"05",name:"Hautes-Alpes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Gap",population:141756,area_km2:5549,major_cities:["Gap","Brianon","Embrun"]},{code:"06",name:"Alpes-Maritimes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Nice",population:1083310,area_km2:4299,major_cities:["Nice","Antibes","Cannes"]},{code:"13",name:"Bouches-du-Rhne",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Marseille",population:2043110,area_km2:5087,major_cities:["Marseille","Aix-en-Provence","Arles"]},{code:"83",name:"Var",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Toulon",population:1076711,area_km2:5973,major_cities:["Toulon","Frjus","Hyres"]},{code:"84",name:"Vaucluse",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Avignon",population:559479,area_km2:3567,major_cities:["Avignon","Orange","Carpentras"]}],T0=e=>Wr.filter(t=>t.region_code===e),B0="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/regions.geojson",Uo={11:{fill:"#818CF8",hover:"#6366F1"},24:{fill:"#22D3EE",hover:"#06B6D4"},27:{fill:"#34D399",hover:"#10B981"},28:{fill:"#A78BFA",hover:"#8B5CF6"},32:{fill:"#F472B6",hover:"#EC4899"},44:{fill:"#FB923C",hover:"#F97316"},52:{fill:"#4ADE80",hover:"#22C55E"},53:{fill:"#60A5FA",hover:"#3B82F6"},75:{fill:"#F87171",hover:"#EF4444"},76:{fill:"#FCD34D",hover:"#FBBF24"},84:{fill:"#C084FC",hover:"#A855F7"},93:{fill:"#2DD4BF",hover:"#14B8A6"},94:{fill:"#A5B4FC",hover:"#818CF8"}},D0=[{name:"Paris",coordinates:[2.3522,48.8566],size:"large"},{name:"Lyon",coordinates:[4.8357,45.764],size:"large"},{name:"Marseille",coordinates:[5.3698,43.2965],size:"large"},{name:"Toulouse",coordinates:[1.4442,43.6047],size:"large"},{name:"Bordeaux",coordinates:[-.5792,44.8378],size:"large"},{name:"Nantes",coordinates:[-1.5536,47.2184],size:"medium"},{name:"Lille",coordinates:[3.0573,50.6292],size:"medium"},{name:"Strasbourg",coordinates:[7.7521,48.5734],size:"medium"},{name:"Nice",coordinates:[7.262,43.7102],size:"medium"},{name:"Rennes",coordinates:[-1.6778,48.1173],size:"medium"}];function $0({onRegionSelect:e,onGenerateReport:t}){const[n,r]=M.useState(null),[o,i]=M.useState(null),[a,c]=M.useState({x:0,y:0}),u=f=>{const d=Kt.find(h=>h.code===f);d&&e(d)},m=(f,d)=>{var y;const h=f.properties.code;r(h);const v=Kt.find(g=>g.code===h);if(v){i(v);const g=(y=d.currentTarget.closest(".map-container"))==null?void 0:y.getBoundingClientRect();g&&c({x:d.clientX-g.left,y:d.clientY-g.top})}},s=()=>{r(null),i(null)},p=f=>{var h;const d=(h=f.currentTarget.closest(".map-container"))==null?void 0:h.getBoundingClientRect();d&&c({x:f.clientX-d.left,y:f.clientY-d.top})};return l.jsxs("div",{className:"relative h-full flex flex-col",children:[l.jsxs("div",{className:"mb-3 px-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Metropolitan France"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Click on a region to explore its departments and communes"})]}),l.jsxs("div",{className:"map-container relative flex-1 bg-gradient-to-b from-sky-50 to-blue-100 rounded-xl mx-4 overflow-hidden shadow-inner border border-blue-200",children:[l.jsxs(Lt,{projection:"geoMercator",projectionConfig:{center:[2.5,46.5],scale:3200},style:{width:"100%",height:"auto",minHeight:"500px",aspectRatio:"4/3"},children:[l.jsx(it,{geography:B0,children:({geographies:f})=>f.map(d=>{const h=d.properties.code,v=Uo[h]||{fill:"#CBD5E1",hover:"#94A3B8"},y=n===h;return l.jsx(Ur,{geography:d,fill:y?v.hover:v.fill,stroke:"#FFFFFF",strokeWidth:1,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>u(h),onMouseEnter:g=>m(d,g),onMouseLeave:s,onMouseMove:p},d.rsmKey)})}),D0.map(f=>{const d=f.size==="large"?5:f.size==="medium"?4:3;return l.jsxs(Zn,{coordinates:f.coordinates,children:[l.jsx("circle",{r:d,fill:"#1F2937",stroke:"#FFFFFF",strokeWidth:1.5}),l.jsx("text",{textAnchor:"middle",y:-d-5,style:{fontFamily:"system-ui",fontSize:f.size==="large"?10:9,fontWeight:f.size==="large"?600:500,fill:"#1F2937"},children:f.name})]},f.name)})]}),o&&l.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-4 pointer-events-none z-20 min-w-[240px]",style:{left:Math.min(Math.max(a.x,120),360),top:Math.max(a.y-10,60),transform:"translate(-50%, -100%)"},children:[l.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:o.name}),l.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Capital: ",o.capital]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),l.jsxs("span",{className:"font-semibold text-gray-900",children:[(o.population/1e6).toFixed(1),"M"]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-xs block",children:"Departments"}),l.jsx("span",{className:"font-semibold text-gray-900",children:o.departments.length})]})]}),l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:l.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore "})})]})]}),l.jsxs("div",{className:"mt-3 px-4",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Regions of France"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-1.5",children:Kt.map(f=>{const d=Uo[f.code],h=n===f.code;return l.jsxs("button",{onClick:()=>e(f),onMouseEnter:()=>r(f.code),onMouseLeave:()=>r(null),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all text-left ${h?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[l.jsx("span",{className:"w-4 h-4 rounded flex-shrink-0 border",style:{backgroundColor:(d==null?void 0:d.fill)||"#6B7280",borderColor:(d==null?void 0:d.hover)||"#4B5563"}}),l.jsx("span",{className:`text-sm truncate ${h?"text-gray-900 font-medium":"text-gray-700"}`,children:f.name})]},f.code)})})]}),l.jsx("div",{className:"mt-4 px-4 pb-4 flex flex-wrap gap-3",children:l.jsxs("button",{onClick:()=>t("FR","France"),className:"btn btn-outline flex items-center gap-2",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate France Overview Report"]})})]})}const z0=M.memo($0),O0={viewBox:"0 0 400 350",departments:[{code:"75",name:"Paris",path:"M 180,140 Q 195,130 215,130 Q 235,135 245,150 Q 250,170 240,185 Q 225,198 205,195 Q 185,190 175,175 Q 172,158 180,145 Z",labelPosition:{x:210,y:165},cities:[{name:"Paris",x:210,y:162,isCapital:!0}]},{code:"92",name:"Hauts-de-Seine",path:"M 145,145 Q 160,135 175,140 Q 182,150 180,165 Q 175,180 160,185 Q 145,182 138,170 Q 135,155 145,145 Z",labelPosition:{x:160,y:165},cities:[{name:"Nanterre",x:155,y:158,isCapital:!0}]},{code:"93",name:"Seine-Saint-Denis",path:"M 215,120 Q 240,115 260,125 Q 272,140 268,160 Q 258,175 240,180 Q 222,178 215,165 Q 212,145 215,125 Z",labelPosition:{x:242,y:148},cities:[{name:"Bobigny",x:248,y:145,isCapital:!0}]},{code:"94",name:"Val-de-Marne",path:"M 205,195 Q 225,192 245,200 Q 258,215 255,235 Q 242,252 220,250 Q 198,245 190,228 Q 188,210 200,198 Z",labelPosition:{x:225,y:225},cities:[{name:"Crteil",x:230,y:225,isCapital:!0}]},{code:"77",name:"Seine-et-Marne",path:"M 260,125 Q 300,110 340,120 Q 375,140 385,180 Q 388,225 370,270 Q 340,305 290,310 Q 250,300 230,265 Q 220,230 235,195 Q 250,160 260,130 Z",labelPosition:{x:310,y:210},cities:[{name:"Melun",x:295,y:250,isCapital:!0},{name:"Meaux",x:300,y:145},{name:"Fontainebleau",x:290,y:290}]},{code:"78",name:"Yvelines",path:"M 50,120 Q 90,100 130,110 Q 155,125 160,150 Q 158,180 140,205 Q 115,225 80,220 Q 45,208 30,175 Q 25,142 45,120 Z",labelPosition:{x:95,y:165},cities:[{name:"Versailles",x:130,y:175,isCapital:!0},{name:"St-Germain",x:100,y:140}]},{code:"91",name:"Essonne",path:"M 100,225 Q 140,215 180,225 Q 210,245 215,280 Q 205,315 170,330 Q 125,335 90,315 Q 65,290 70,255 Q 80,232 100,225 Z",labelPosition:{x:145,y:275},cities:[{name:"vry",x:160,y:265,isCapital:!0}]},{code:"95",name:"Val-d'Oise",path:"M 120,50 Q 170,35 220,45 Q 260,60 275,95 Q 278,125 260,145 Q 235,160 200,158 Q 165,155 140,140 Q 115,120 110,90 Q 108,65 120,50 Z",labelPosition:{x:190,y:95},cities:[{name:"Pontoise",x:140,y:85,isCapital:!0}]}]},I0={viewBox:"0 0 500 400",departments:[{code:"13",name:"Bouches-du-Rhne",path:"M 80,200 Q 120,180 170,190 Q 210,205 230,240 Q 235,280 210,310 Q 170,335 120,325 Q 75,305 60,265 Q 55,225 75,200 Z",labelPosition:{x:145,y:260},cities:[{name:"Marseille",x:175,y:295,isCapital:!0},{name:"Aix-en-Provence",x:160,y:235},{name:"Arles",x:90,y:270}]},{code:"83",name:"Var",path:"M 230,240 Q 280,220 330,235 Q 375,255 395,295 Q 400,340 370,370 Q 325,390 275,375 Q 235,355 220,315 Q 215,275 230,245 Z",labelPosition:{x:305,y:305},cities:[{name:"Toulon",x:290,y:355,isCapital:!0},{name:"Draguignan",x:340,y:280},{name:"St-Tropez",x:365,y:340}]},{code:"06",name:"Alpes-Maritimes",path:"M 380,180 Q 420,160 460,175 Q 490,200 495,245 Q 485,290 455,320 Q 415,345 375,330 Q 345,305 345,265 Q 350,220 375,190 Z",labelPosition:{x:420,y:255},cities:[{name:"Nice",x:455,y:290,isCapital:!0},{name:"Cannes",x:395,y:315},{name:"Antibes",x:420,y:305}]},{code:"84",name:"Vaucluse",path:"M 80,90 Q 130,70 175,85 Q 210,105 220,145 Q 218,185 190,210 Q 150,230 105,215 Q 65,195 55,155 Q 50,115 75,90 Z",labelPosition:{x:140,y:150},cities:[{name:"Avignon",x:105,y:175,isCapital:!0},{name:"Orange",x:115,y:105}]},{code:"04",name:"Alpes-de-Haute-Provence",path:"M 220,80 Q 280,55 340,75 Q 385,100 395,150 Q 390,200 355,230 Q 310,255 260,240 Q 220,220 210,175 Q 205,125 220,85 Z",labelPosition:{x:300,y:155},cities:[{name:"Digne",x:310,y:165,isCapital:!0}]},{code:"05",name:"Hautes-Alpes",path:"M 290,20 Q 345,10 390,35 Q 425,65 430,115 Q 420,160 385,185 Q 340,205 295,190 Q 255,170 250,125 Q 252,75 285,40 Z",labelPosition:{x:345,y:105},cities:[{name:"Gap",x:340,y:130,isCapital:!0}]}]},G0={viewBox:"0 0 450 320",departments:[{code:"29",name:"Finistre",path:"M 20,100 Q 60,70 110,80 Q 155,95 175,135 Q 180,175 155,210 Q 115,240 65,235 Q 25,220 15,175 Q 10,135 20,100 Z",labelPosition:{x:95,y:155},cities:[{name:"Quimper",x:85,y:195,isCapital:!0},{name:"Brest",x:55,y:115}]},{code:"22",name:"Ctes-d'Armor",path:"M 155,60 Q 210,45 265,60 Q 310,80 325,125 Q 328,170 300,200 Q 255,225 200,215 Q 155,200 145,160 Q 140,115 155,70 Z",labelPosition:{x:235,y:135},cities:[{name:"St-Brieuc",x:255,y:105,isCapital:!0},{name:"Dinan",x:290,y:135}]},{code:"56",name:"Morbihan",path:"M 90,215 Q 145,200 200,215 Q 245,235 260,280 Q 255,320 215,340 Q 160,355 105,335 Q 60,310 55,265 Q 60,225 90,215 Z",labelPosition:{x:160,y:275},cities:[{name:"Vannes",x:175,y:285,isCapital:!0},{name:"Lorient",x:105,y:260}]},{code:"35",name:"Ille-et-Vilaine",path:"M 265,60 Q 330,50 385,75 Q 430,105 440,160 Q 438,215 400,255 Q 350,285 290,275 Q 245,260 235,215 Q 230,170 245,125 Q 255,85 265,65 Z",labelPosition:{x:345,y:165},cities:[{name:"Rennes",x:365,y:180,isCapital:!0},{name:"St-Malo",x:355,y:90}]}]},V0={viewBox:"0 0 450 500",departments:[{code:"33",name:"Gironde",path:"M 40,150 Q 90,130 140,145 Q 180,165 190,210 Q 185,260 150,295 Q 100,320 50,305 Q 15,280 10,230 Q 15,180 40,150 Z",labelPosition:{x:100,y:220},cities:[{name:"Bordeaux",x:115,y:200,isCapital:!0},{name:"Arcachon",x:55,y:260}]},{code:"40",name:"Landes",path:"M 30,295 Q 80,280 130,300 Q 165,330 170,380 Q 160,435 115,465 Q 60,485 20,455 Q -5,415 5,360 Q 15,315 30,295 Z",labelPosition:{x:90,y:380},cities:[{name:"Mont-de-Marsan",x:115,y:365,isCapital:!0}]},{code:"64",name:"Pyrnes-Atlantiques",path:"M 25,455 Q 75,440 125,460 Q 165,485 175,530 Q 165,575 120,595 Q 65,605 25,575 Q -5,545 5,500 Q 15,465 25,455 Z",labelPosition:{x:95,y:520},cities:[{name:"Pau",x:125,y:510,isCapital:!0},{name:"Bayonne",x:45,y:530}]},{code:"24",name:"Dordogne",path:"M 140,130 Q 200,115 255,135 Q 300,160 310,210 Q 305,265 265,300 Q 215,325 160,310 Q 115,290 110,240 Q 115,185 140,145 Z",labelPosition:{x:210,y:220},cities:[{name:"Prigueux",x:210,y:200,isCapital:!0}]},{code:"47",name:"Lot-et-Garonne",path:"M 165,305 Q 220,290 270,310 Q 310,340 315,390 Q 305,440 260,465 Q 205,480 155,455 Q 120,425 125,375 Q 135,325 165,305 Z",labelPosition:{x:220,y:385},cities:[{name:"Agen",x:215,y:395,isCapital:!0}]},{code:"17",name:"Charente-Maritime",path:"M 45,40 Q 100,25 150,45 Q 190,70 195,120 Q 185,170 145,195 Q 95,210 50,190 Q 15,165 15,115 Q 20,65 45,40 Z",labelPosition:{x:110,y:120},cities:[{name:"La Rochelle",x:70,y:95,isCapital:!0}]},{code:"16",name:"Charente",path:"M 150,45 Q 210,30 265,55 Q 305,85 310,140 Q 300,195 255,220 Q 200,238 150,215 Q 115,185 115,135 Q 125,80 150,50 Z",labelPosition:{x:215,y:135},cities:[{name:"Angoulme",x:225,y:145,isCapital:!0}]},{code:"86",name:"Vienne",path:"M 215,20 Q 275,5 330,30 Q 375,60 380,115 Q 370,170 325,200 Q 270,222 215,200 Q 175,175 175,125 Q 182,70 215,30 Z",labelPosition:{x:280,y:115},cities:[{name:"Poitiers",x:295,y:100,isCapital:!0}]}]},q0={viewBox:"0 0 450 400",departments:[{code:"45",name:"Loiret",path:"M 200,30 Q 270,20 330,45 Q 380,80 390,140 Q 385,200 340,240 Q 280,270 215,255 Q 160,235 150,180 Q 150,115 185,65 Z",labelPosition:{x:270,y:145},cities:[{name:"Orlans",x:240,y:130,isCapital:!0}]},{code:"28",name:"Eure-et-Loir",path:"M 80,25 Q 145,15 200,35 Q 240,60 245,110 Q 235,160 190,185 Q 135,200 85,180 Q 45,155 40,105 Q 45,55 80,30 Z",labelPosition:{x:145,y:110},cities:[{name:"Chartres",x:145,y:100,isCapital:!0}]},{code:"41",name:"Loir-et-Cher",path:"M 60,180 Q 120,165 175,185 Q 220,210 225,265 Q 215,320 165,350 Q 105,370 55,345 Q 20,310 25,255 Q 35,200 60,180 Z",labelPosition:{x:125,y:265},cities:[{name:"Blois",x:140,y:245,isCapital:!0}]},{code:"37",name:"Indre-et-Loire",path:"M 15,270 Q 65,250 115,270 Q 155,295 160,350 Q 150,405 100,430 Q 45,445 10,415 Q -15,380 -5,325 Q 5,285 15,270 Z",labelPosition:{x:80,y:350},cities:[{name:"Tours",x:95,y:340,isCapital:!0}]},{code:"36",name:"Indre",path:"M 115,350 Q 175,335 230,360 Q 275,390 280,445 Q 270,500 220,525 Q 160,540 110,515 Q 70,485 75,430 Q 85,375 115,355 Z",labelPosition:{x:180,y:440},cities:[{name:"Chteauroux",x:185,y:430,isCapital:!0}]},{code:"18",name:"Cher",path:"M 230,240 Q 300,225 360,255 Q 410,295 415,360 Q 400,425 345,460 Q 280,485 220,460 Q 175,425 180,365 Q 195,300 230,250 Z",labelPosition:{x:300,y:355},cities:[{name:"Bourges",x:300,y:345,isCapital:!0}]}]},H0={viewBox:"0 0 450 300",departments:[{code:"76",name:"Seine-Maritime",path:"M 230,20 Q 300,10 360,35 Q 410,70 420,130 Q 415,185 370,215 Q 315,240 255,225 Q 205,205 200,150 Q 200,90 230,45 Z",labelPosition:{x:315,y:125},cities:[{name:"Rouen",x:305,y:140,isCapital:!0},{name:"Le Havre",x:255,y:85}]},{code:"27",name:"Eure",path:"M 200,150 Q 255,135 305,155 Q 345,180 350,235 Q 340,285 290,305 Q 235,320 185,295 Q 150,265 155,215 Q 165,170 200,150 Z",labelPosition:{x:255,y:230},cities:[{name:"vreux",x:240,y:215,isCapital:!0}]},{code:"14",name:"Calvados",path:"M 60,100 Q 125,85 185,105 Q 230,130 235,185 Q 225,240 175,265 Q 115,280 60,255 Q 20,225 20,170 Q 30,120 60,100 Z",labelPosition:{x:135,y:180},cities:[{name:"Caen",x:135,y:165,isCapital:!0},{name:"Deauville",x:175,y:145}]},{code:"50",name:"Manche",path:"M 10,60 Q 55,40 100,55 Q 135,80 140,130 Q 130,185 85,215 Q 35,235 0,205 Q -25,170 -15,115 Q -5,75 10,60 Z",labelPosition:{x:60,y:140},cities:[{name:"Saint-L",x:75,y:145,isCapital:!0},{name:"Cherbourg",x:40,y:70}]},{code:"61",name:"Orne",path:"M 85,210 Q 145,195 200,220 Q 245,250 250,305 Q 240,360 190,385 Q 130,400 80,375 Q 45,345 50,290 Q 60,235 85,215 Z",labelPosition:{x:155,y:295},cities:[{name:"Alenon",x:175,y:305,isCapital:!0}]}]},U0={viewBox:"0 0 400 400",departments:[{code:"59",name:"Nord",path:"M 120,15 Q 195,5 260,30 Q 315,65 325,130 Q 320,195 270,235 Q 205,265 140,250 Q 85,225 80,165 Q 85,100 115,50 Z",labelPosition:{x:205,y:135},cities:[{name:"Lille",x:205,y:115,isCapital:!0},{name:"Dunkerque",x:185,y:45},{name:"Valenciennes",x:260,y:175}]},{code:"62",name:"Pas-de-Calais",path:"M 20,50 Q 75,30 130,50 Q 170,80 175,140 Q 165,200 120,230 Q 65,250 25,220 Q -10,185 0,130 Q 10,75 20,55 Z",labelPosition:{x:95,y:145},cities:[{name:"Arras",x:110,y:170,isCapital:!0},{name:"Calais",x:70,y:55},{name:"Boulogne",x:35,y:95}]},{code:"80",name:"Somme",path:"M 25,220 Q 85,200 145,225 Q 195,255 200,315 Q 190,370 140,395 Q 80,410 35,380 Q 5,345 10,290 Q 15,240 25,220 Z",labelPosition:{x:110,y:305},cities:[{name:"Amiens",x:120,y:290,isCapital:!0}]},{code:"60",name:"Oise",path:"M 145,300 Q 210,285 270,310 Q 320,345 325,405 Q 310,460 255,485 Q 190,500 140,470 Q 105,435 110,380 Q 120,325 145,305 Z",labelPosition:{x:220,y:390},cities:[{name:"Beauvais",x:200,y:370,isCapital:!0}]},{code:"02",name:"Aisne",path:"M 270,230 Q 335,215 390,245 Q 435,285 440,350 Q 425,415 370,450 Q 305,475 250,450 Q 210,415 215,355 Q 230,290 270,240 Z",labelPosition:{x:335,y:345},cities:[{name:"Laon",x:335,y:320,isCapital:!0}]}]},Y0={viewBox:"0 0 450 400",departments:[{code:"44",name:"Loire-Atlantique",path:"M 30,130 Q 95,110 155,135 Q 200,165 205,225 Q 195,285 145,315 Q 85,335 35,305 Q 0,270 5,210 Q 15,155 30,130 Z",labelPosition:{x:110,y:220},cities:[{name:"Nantes",x:125,y:215,isCapital:!0},{name:"St-Nazaire",x:55,y:185}]},{code:"49",name:"Maine-et-Loire",path:"M 155,135 Q 225,120 290,150 Q 340,185 345,250 Q 335,315 280,350 Q 215,375 155,350 Q 110,315 115,255 Q 125,190 155,150 Z",labelPosition:{x:230,y:245},cities:[{name:"Angers",x:225,y:230,isCapital:!0}]},{code:"53",name:"Mayenne",path:"M 170,25 Q 235,15 295,45 Q 340,80 345,145 Q 335,210 280,245 Q 220,270 165,245 Q 125,210 130,150 Q 140,90 170,45 Z",labelPosition:{x:240,y:145},cities:[{name:"Laval",x:240,y:135,isCapital:!0}]},{code:"72",name:"Sarthe",path:"M 290,45 Q 360,30 420,65 Q 465,105 470,175 Q 460,245 405,285 Q 340,315 280,290 Q 240,255 245,195 Q 255,130 290,70 Z",labelPosition:{x:365,y:175},cities:[{name:"Le Mans",x:365,y:165,isCapital:!0}]},{code:"85",name:"Vende",path:"M 25,290 Q 90,270 150,300 Q 195,335 200,400 Q 185,460 130,490 Q 65,510 20,475 Q -10,435 0,375 Q 10,315 25,295 Z",labelPosition:{x:105,y:390},cities:[{name:"La Roche-sur-Yon",x:105,y:375,isCapital:!0}]}]},X0={viewBox:"0 0 500 450",departments:[{code:"67",name:"Bas-Rhin",path:"M 380,50 Q 430,40 470,70 Q 500,105 500,160 Q 490,215 450,245 Q 400,270 355,250 Q 320,225 325,175 Q 335,115 365,75 Z",labelPosition:{x:415,y:155},cities:[{name:"Strasbourg",x:455,y:165,isCapital:!0}]},{code:"68",name:"Haut-Rhin",path:"M 360,245 Q 410,230 455,260 Q 490,295 490,355 Q 475,410 425,435 Q 370,455 325,430 Q 295,400 300,345 Q 315,285 355,255 Z",labelPosition:{x:395,y:345},cities:[{name:"Colmar",x:425,y:325,isCapital:!0}]},{code:"57",name:"Moselle",path:"M 260,25 Q 325,15 380,50 Q 420,90 420,155 Q 405,220 350,255 Q 285,280 225,255 Q 185,220 190,160 Q 205,95 250,50 Z",labelPosition:{x:305,y:145},cities:[{name:"Metz",x:320,y:145,isCapital:!0}]},{code:"54",name:"Meurthe-et-Moselle",path:"M 175,155 Q 230,140 280,165 Q 320,195 325,255 Q 315,315 265,345 Q 205,365 150,340 Q 115,305 120,250 Q 135,195 175,160 Z",labelPosition:{x:225,y:255},cities:[{name:"Nancy",x:225,y:245,isCapital:!0}]},{code:"88",name:"Vosges",path:"M 265,295 Q 320,280 370,310 Q 410,345 410,410 Q 395,470 340,495 Q 280,510 230,480 Q 200,445 205,390 Q 220,335 265,305 Z",labelPosition:{x:310,y:395},cities:[{name:"pinal",x:315,y:385,isCapital:!0}]},{code:"55",name:"Meuse",path:"M 90,145 Q 145,130 195,155 Q 235,185 235,245 Q 220,305 170,335 Q 115,355 70,330 Q 40,295 45,240 Q 60,180 90,150 Z",labelPosition:{x:145,y:245},cities:[{name:"Bar-le-Duc",x:130,y:275,isCapital:!0}]},{code:"08",name:"Ardennes",path:"M 75,20 Q 135,10 185,40 Q 225,75 225,135 Q 210,195 160,225 Q 105,245 60,220 Q 30,185 35,130 Q 50,70 75,35 Z",labelPosition:{x:135,y:125},cities:[{name:"Charleville",x:140,y:115,isCapital:!0}]},{code:"51",name:"Marne",path:"M 10,180 Q 65,165 115,190 Q 155,220 155,280 Q 140,340 90,370 Q 35,390 0,360 Q -25,325 -15,270 Q 0,210 10,185 Z",labelPosition:{x:70,y:275},cities:[{name:"Chlons",x:75,y:270,isCapital:!0},{name:"Reims",x:50,y:215}]},{code:"52",name:"Haute-Marne",path:"M 115,330 Q 170,315 220,345 Q 260,380 260,440 Q 245,495 195,520 Q 140,535 100,505 Q 70,470 75,420 Q 90,365 115,340 Z",labelPosition:{x:170,y:425},cities:[{name:"Chaumont",x:180,y:420,isCapital:!0}]},{code:"10",name:"Aube",path:"M 15,345 Q 70,330 120,360 Q 160,395 160,455 Q 145,510 95,535 Q 45,550 10,520 Q -15,485 -5,430 Q 5,375 15,350 Z",labelPosition:{x:80,y:440},cities:[{name:"Troyes",x:85,y:430,isCapital:!0}]}]},W0={viewBox:"0 0 450 500",departments:[{code:"21",name:"Cte-d'Or",path:"M 50,100 Q 115,85 175,115 Q 225,150 230,215 Q 220,280 165,315 Q 100,340 50,310 Q 15,275 20,215 Q 30,150 50,105 Z",labelPosition:{x:130,y:210},cities:[{name:"Dijon",x:155,y:185,isCapital:!0}]},{code:"89",name:"Yonne",path:"M 15,15 Q 75,5 130,35 Q 175,70 175,135 Q 160,200 105,230 Q 45,250 10,220 Q -15,185 -5,125 Q 5,65 15,30 Z",labelPosition:{x:90,y:125},cities:[{name:"Auxerre",x:95,y:120,isCapital:!0}]},{code:"58",name:"Nivre",path:"M 5,205 Q 60,190 110,220 Q 150,255 150,315 Q 135,375 80,405 Q 25,425 -5,395 Q -25,360 -15,305 Q -5,250 5,215 Z",labelPosition:{x:75,y:310},cities:[{name:"Nevers",x:70,y:350,isCapital:!0}]},{code:"71",name:"Sane-et-Loire",path:"M 55,310 Q 120,295 180,325 Q 230,360 235,425 Q 220,490 165,520 Q 100,540 50,510 Q 20,475 25,420 Q 40,360 55,320 Z",labelPosition:{x:140,y:420},cities:[{name:"Mcon",x:175,y:475,isCapital:!0}]},{code:"25",name:"Doubs",path:"M 280,190 Q 345,175 400,210 Q 445,250 450,320 Q 435,390 380,425 Q 315,450 260,420 Q 225,385 230,325 Q 245,260 280,205 Z",labelPosition:{x:345,y:310},cities:[{name:"Besanon",x:335,y:295,isCapital:!0}]},{code:"39",name:"Jura",path:"M 210,345 Q 265,330 315,360 Q 355,395 355,460 Q 340,520 285,550 Q 225,570 180,540 Q 150,505 155,450 Q 170,395 210,355 Z",labelPosition:{x:260,y:450},cities:[{name:"Lons-le-Saunier",x:265,y:445,isCapital:!0}]},{code:"70",name:"Haute-Sane",path:"M 215,95 Q 275,80 330,115 Q 375,155 375,220 Q 360,285 305,315 Q 245,335 200,305 Q 170,270 175,215 Q 185,155 215,110 Z",labelPosition:{x:280,y:205},cities:[{name:"Vesoul",x:290,y:190,isCapital:!0}]},{code:"90",name:"Territoire de Belfort",path:"M 365,145 Q 400,135 430,160 Q 455,190 455,235 Q 445,280 415,300 Q 380,315 350,295 Q 330,265 335,220 Q 345,175 365,155 Z",labelPosition:{x:395,y:225},cities:[{name:"Belfort",x:400,y:220,isCapital:!0}]}]},K0={viewBox:"0 0 550 400",departments:[{code:"31",name:"Haute-Garonne",path:"M 120,150 Q 170,135 220,160 Q 260,190 265,250 Q 255,310 205,340 Q 150,360 105,335 Q 75,300 80,245 Q 90,190 120,160 Z",labelPosition:{x:170,y:250},cities:[{name:"Toulouse",x:175,y:235,isCapital:!0}]},{code:"34",name:"Hrault",path:"M 320,200 Q 375,185 425,215 Q 465,250 465,315 Q 450,375 395,400 Q 335,415 290,385 Q 260,350 265,295 Q 280,240 320,210 Z",labelPosition:{x:370,y:300},cities:[{name:"Montpellier",x:400,y:310,isCapital:!0},{name:"Bziers",x:340,y:335}]},{code:"30",name:"Gard",path:"M 425,145 Q 480,130 525,165 Q 555,205 555,270 Q 540,330 485,360 Q 425,380 380,350 Q 355,315 360,260 Q 375,200 420,160 Z",labelPosition:{x:465,y:255},cities:[{name:"Nmes",x:490,y:280,isCapital:!0}]},{code:"11",name:"Aude",path:"M 225,275 Q 280,260 330,290 Q 370,325 370,385 Q 355,440 300,465 Q 240,480 195,450 Q 170,415 175,360 Q 190,305 225,280 Z",labelPosition:{x:275,y:370},cities:[{name:"Carcassonne",x:275,y:360,isCapital:!0}]},{code:"66",name:"Pyrnes-Orientales",path:"M 270,380 Q 325,365 375,395 Q 415,430 415,490 Q 400,545 345,570 Q 285,585 240,555 Q 215,520 220,465 Q 235,410 270,385 Z",labelPosition:{x:325,y:475},cities:[{name:"Perpignan",x:350,y:460,isCapital:!0}]},{code:"09",name:"Arige",path:"M 115,330 Q 165,315 215,345 Q 255,380 255,440 Q 240,495 185,520 Q 125,535 85,505 Q 60,470 65,420 Q 80,365 115,340 Z",labelPosition:{x:165,y:430},cities:[{name:"Foix",x:170,y:425,isCapital:!0}]},{code:"65",name:"Hautes-Pyrnes",path:"M 30,280 Q 80,265 130,295 Q 170,330 170,390 Q 155,445 100,470 Q 45,485 15,455 Q -5,420 0,370 Q 15,315 30,290 Z",labelPosition:{x:90,y:375},cities:[{name:"Tarbes",x:95,y:365,isCapital:!0}]},{code:"32",name:"Gers",path:"M 40,135 Q 95,120 145,150 Q 185,185 185,245 Q 170,300 115,330 Q 55,350 20,320 Q -5,285 0,230 Q 15,175 40,145 Z",labelPosition:{x:95,y:235},cities:[{name:"Auch",x:100,y:225,isCapital:!0}]},{code:"81",name:"Tarn",path:"M 215,130 Q 270,115 325,145 Q 365,180 365,245 Q 350,305 295,335 Q 235,355 190,325 Q 165,290 170,235 Q 185,175 215,145 Z",labelPosition:{x:270,y:235},cities:[{name:"Albi",x:295,y:205,isCapital:!0}]},{code:"82",name:"Tarn-et-Garonne",path:"M 125,65 Q 175,50 225,80 Q 265,115 265,175 Q 250,230 195,260 Q 135,280 95,250 Q 70,215 75,160 Q 90,105 125,75 Z",labelPosition:{x:175,y:165},cities:[{name:"Montauban",x:180,y:155,isCapital:!0}]},{code:"12",name:"Aveyron",path:"M 280,45 Q 345,30 405,65 Q 450,105 455,175 Q 440,245 385,280 Q 320,305 265,275 Q 230,240 235,180 Q 250,115 280,65 Z",labelPosition:{x:350,y:165},cities:[{name:"Rodez",x:355,y:155,isCapital:!0}]},{code:"46",name:"Lot",path:"M 180,5 Q 240,-5 295,25 Q 340,60 345,125 Q 330,190 275,220 Q 215,240 170,210 Q 140,175 145,120 Q 160,60 180,20 Z",labelPosition:{x:250,y:120},cities:[{name:"Cahors",x:250,y:145,isCapital:!0}]},{code:"48",name:"Lozre",path:"M 390,65 Q 445,50 490,85 Q 525,125 525,190 Q 510,250 455,280 Q 395,300 350,270 Q 325,235 330,180 Q 345,120 385,80 Z",labelPosition:{x:435,y:175},cities:[{name:"Mende",x:440,y:170,isCapital:!0}]}]},J0={viewBox:"0 0 500 500",departments:[{code:"69",name:"Rhne",path:"M 145,175 Q 195,160 245,190 Q 285,225 285,290 Q 270,350 215,380 Q 155,400 115,370 Q 90,335 95,280 Q 110,220 145,185 Z",labelPosition:{x:195,y:280},cities:[{name:"Lyon",x:200,y:305,isCapital:!0}]},{code:"42",name:"Loire",path:"M 55,200 Q 110,185 160,215 Q 200,250 200,315 Q 185,375 130,405 Q 70,425 35,395 Q 15,360 20,305 Q 35,250 55,210 Z",labelPosition:{x:115,y:305},cities:[{name:"St-tienne",x:105,y:340,isCapital:!0}]},{code:"63",name:"Puy-de-Dme",path:"M 15,145 Q 70,130 125,160 Q 170,195 170,260 Q 155,320 100,350 Q 40,370 5,340 Q -20,305 -10,250 Q 0,195 15,155 Z",labelPosition:{x:85,y:250},cities:[{name:"Clermont-Fd",x:90,y:240,isCapital:!0}]},{code:"03",name:"Allier",path:"M 45,40 Q 110,25 170,60 Q 220,100 220,170 Q 200,235 145,265 Q 80,285 35,255 Q 5,220 10,160 Q 25,100 45,55 Z",labelPosition:{x:125,y:155},cities:[{name:"Moulins",x:135,y:120,isCapital:!0}]},{code:"43",name:"Haute-Loire",path:"M 60,365 Q 115,350 165,380 Q 205,415 205,475 Q 190,530 135,555 Q 75,570 40,540 Q 20,505 25,455 Q 40,405 60,370 Z",labelPosition:{x:120,y:460},cities:[{name:"Le Puy",x:130,y:445,isCapital:!0}]},{code:"15",name:"Cantal",path:"M 5,305 Q 60,290 110,320 Q 150,355 150,415 Q 135,470 80,495 Q 25,510 -5,480 Q -25,445 -15,395 Q -5,345 5,315 Z",labelPosition:{x:70,y:400},cities:[{name:"Aurillac",x:60,y:420,isCapital:!0}]},{code:"01",name:"Ain",path:"M 200,105 Q 260,90 315,125 Q 360,165 360,235 Q 345,300 290,335 Q 225,360 180,330 Q 155,295 160,240 Q 175,175 200,125 Z",labelPosition:{x:265,y:220},cities:[{name:"Bourg-en-B.",x:270,y:210,isCapital:!0}]},{code:"74",name:"Haute-Savoie",path:"M 330,75 Q 385,60 435,95 Q 475,135 475,200 Q 460,260 405,290 Q 345,310 305,280 Q 280,245 285,195 Q 300,140 330,95 Z",labelPosition:{x:385,y:185},cities:[{name:"Annecy",x:380,y:210,isCapital:!0},{name:"Chamonix",x:435,y:160}]},{code:"73",name:"Savoie",path:"M 305,280 Q 365,265 420,300 Q 465,340 465,410 Q 450,475 395,505 Q 330,525 285,495 Q 260,460 265,405 Q 280,345 305,295 Z",labelPosition:{x:370,y:390},cities:[{name:"Chambry",x:360,y:365,isCapital:!0}]},{code:"38",name:"Isre",path:"M 230,300 Q 295,285 355,320 Q 405,360 405,430 Q 385,495 325,525 Q 260,545 210,515 Q 180,480 185,425 Q 200,365 230,315 Z",labelPosition:{x:305,y:415},cities:[{name:"Grenoble",x:320,y:420,isCapital:!0}]},{code:"26",name:"Drme",path:"M 155,415 Q 215,400 270,435 Q 315,475 315,545 Q 295,605 240,635 Q 175,655 130,625 Q 105,590 110,535 Q 125,475 155,430 Z",labelPosition:{x:220,y:530},cities:[{name:"Valence",x:190,y:495,isCapital:!0}]},{code:"07",name:"Ardche",path:"M 100,455 Q 155,440 205,475 Q 245,515 245,585 Q 225,645 170,675 Q 110,695 70,665 Q 50,630 55,575 Q 70,515 100,470 Z",labelPosition:{x:155,y:570},cities:[{name:"Privas",x:170,y:540,isCapital:!0}]}]},em={viewBox:"0 0 200 350",departments:[{code:"2B",name:"Haute-Corse",path:"M 55,20 Q 100,10 140,35 Q 170,70 175,125 Q 165,180 125,210 Q 80,235 45,210 Q 20,180 25,125 Q 35,70 55,35 Z",labelPosition:{x:100,y:120},cities:[{name:"Bastia",x:140,y:75,isCapital:!0},{name:"Corte",x:95,y:155}]},{code:"2A",name:"Corse-du-Sud",path:"M 45,200 Q 95,185 140,215 Q 175,250 175,315 Q 160,375 110,405 Q 55,425 25,395 Q 5,360 10,305 Q 25,250 45,210 Z",labelPosition:{x:100,y:305},cities:[{name:"Ajaccio",x:55,y:290,isCapital:!0},{name:"Porto-Vecchio",x:145,y:355}]}]},tm={11:O0,24:q0,27:W0,28:H0,32:U0,44:X0,52:Y0,53:G0,75:V0,76:K0,84:J0,93:I0,94:em};function Yo(e){return e in tm}const nm="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements.geojson",Xo=[{fill:"#93C5FD",hover:"#60A5FA"},{fill:"#86EFAC",hover:"#4ADE80"},{fill:"#FCA5A5",hover:"#F87171"},{fill:"#FCD34D",hover:"#FBBF24"},{fill:"#C4B5FD",hover:"#A78BFA"},{fill:"#67E8F9",hover:"#22D3EE"},{fill:"#FDBA74",hover:"#FB923C"},{fill:"#F9A8D4",hover:"#F472B6"},{fill:"#A5B4FC",hover:"#818CF8"},{fill:"#99F6E4",hover:"#5EEAD4"},{fill:"#FDE68A",hover:"#FCD34D"},{fill:"#D8B4FE",hover:"#C084FC"}],rm={11:{center:[2.5,48.7],scale:18e3},24:{center:[1.7,47.3],scale:8e3},27:{center:[5,47],scale:7e3},28:{center:[-.3,49],scale:9e3},32:{center:[2.8,49.9],scale:9e3},44:{center:[5.5,48.7],scale:6e3},52:{center:[-.8,47.5],scale:9e3},53:{center:[-3,48.2],scale:1e4},75:{center:[0,45.5],scale:5500},76:{center:[2,43.8],scale:5500},84:{center:[4.5,45.5],scale:5500},93:{center:[6,44],scale:8e3},94:{center:[9.1,42],scale:12e3}};function om({regionCode:e,regionName:t,departments:n,onDepartmentSelect:r}){const[o,i]=M.useState(null),[a,c]=M.useState(null),[u,m]=M.useState({x:0,y:0}),s=rm[e]||{center:[2.5,46.5],scale:5e3},p=M.useMemo(()=>n.map(g=>g.code),[n]),f=g=>{const _=p.indexOf(g);return Xo[_%Xo.length]},d=g=>{const _=n.find(x=>x.code===g);_&&r(_)},h=(g,_)=>{var N;const x=g.properties.code;i(x);const C=n.find(j=>j.code===x);if(C){c(C);const j=(N=_.currentTarget.closest(".map-container"))==null?void 0:N.getBoundingClientRect();j&&m({x:_.clientX-j.left,y:_.clientY-j.top})}},v=()=>{i(null),c(null)},y=g=>{var x;const _=(x=g.currentTarget.closest(".map-container"))==null?void 0:x.getBoundingClientRect();_&&m({x:g.clientX-_.left,y:g.clientY-_.top})};return l.jsxs("div",{className:"relative mb-6",children:[l.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Departments of ",t]}),l.jsxs("div",{className:"map-container relative bg-gradient-to-br from-sky-50 to-blue-100 rounded-xl overflow-hidden shadow-inner border border-blue-200",children:[l.jsx(Lt,{projection:"geoMercator",projectionConfig:{center:s.center,scale:s.scale},style:{width:"100%",height:"auto",minHeight:"350px",maxHeight:"450px"},children:l.jsx(kn,{center:s.center,zoom:1,children:l.jsx(it,{geography:nm,children:({geographies:g})=>g.filter(_=>p.includes(_.properties.code)).map(_=>{const x=_.properties.code,C=f(x),N=o===x;return l.jsx(Ur,{geography:_,fill:N?C.hover:C.fill,stroke:"#FFFFFF",strokeWidth:1.5,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>d(x),onMouseEnter:j=>h(_,j),onMouseLeave:v,onMouseMove:y},_.rsmKey)})})})}),a&&(()=>{const _=u.x<240?{left:u.x+15,top:u.y}:{left:u.x-15,top:u.y,transform:"translateX(-100%)"};return l.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 w-[220px]",style:_,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded",children:a.code}),l.jsx("h4",{className:"font-bold text-gray-900",children:a.name})]}),l.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Prefecture: ",a.prefecture]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),l.jsx("span",{className:"font-semibold text-gray-900",children:a.population.toLocaleString()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-xs block",children:"Area"}),l.jsxs("span",{className:"font-semibold text-gray-900",children:[a.area_km2.toLocaleString()," km"]})]})]}),l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:l.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore cities "})})]})})()]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.map(g=>{const _=f(g.code),x=o===g.code;return l.jsxs("button",{onClick:()=>r(g),onMouseEnter:()=>i(g.code),onMouseLeave:()=>i(null),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all ${x?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[l.jsx("span",{className:"w-3 h-3 rounded-sm border border-white shadow-sm",style:{backgroundColor:_.fill}}),l.jsx("span",{className:"font-mono text-gray-500",children:g.code}),l.jsx("span",{className:`truncate ${x?"font-medium":""}`,children:g.name})]},g.code)})})]})}const Wo={oceanic:{label:"Oceanic",description:"Mild winters, cool summers, regular rainfall"},continental:{label:"Continental",description:"Cold winters, warm summers, moderate rainfall"},mediterranean:{label:"Mediterranean",description:"Mild winters, hot dry summers, sunny"},mountain:{label:"Mountain",description:"Cold winters with snow, cool summers"},"semi-oceanic":{label:"Semi-Oceanic",description:"Mix of oceanic and continental influences"}},Ko=["bg-blue-100 hover:bg-blue-200 border-blue-200","bg-emerald-100 hover:bg-emerald-200 border-emerald-200","bg-purple-100 hover:bg-purple-200 border-purple-200","bg-amber-100 hover:bg-amber-200 border-amber-200","bg-rose-100 hover:bg-rose-200 border-rose-200","bg-cyan-100 hover:bg-cyan-200 border-cyan-200","bg-indigo-100 hover:bg-indigo-200 border-indigo-200","bg-teal-100 hover:bg-teal-200 border-teal-200"];function im({region:e,onDepartmentSelect:t,onGenerateReport:n,onBack:r}){const[o,i]=M.useState([]),[a,c]=M.useState(!0);M.useEffect(()=>{c(!0);const m=T0(e.code);i(m),c(!1)},[e.code]);const u=Wo[e.climate]||Wo.oceanic;return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[l.jsx(ri,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:"Back to map"})]}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),l.jsx("p",{className:"text-gray-600 mt-1",children:e.description})]}),l.jsxs("button",{onClick:()=>n(e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate Report"]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(Ct,{className:"w-4 h-4"}),"Capital"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.capital})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(ei,{className:"w-4 h-4"}),"Population"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(Gn,{className:"w-4 h-4"}),"Departments"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.departments.length})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(Ma,{className:"w-4 h-4"}),"Climate"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.label}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:u.description})]})]}),!a&&Yo(e.code)&&l.jsx(om,{regionCode:e.code,regionName:e.name,departments:o,onDepartmentSelect:t}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:Yo(e.code)?"All Departments":`Departments in ${e.name}`}),a?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(Qt,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((m,s)=>l.jsxs("button",{onClick:()=>t(m),className:`text-left p-4 rounded-lg border transition-all ${Ko[s%Ko.length]}`,children:[l.jsx("div",{className:"flex items-start justify-between",children:l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-mono text-gray-500 bg-white/50 px-1.5 py-0.5 rounded",children:m.code}),l.jsx("h4",{className:"font-semibold text-gray-900 mt-1",children:m.name}),l.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Prefecture: ",m.prefecture]})]})}),l.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[l.jsxs("span",{className:"text-gray-500",children:["Pop: ",m.population.toLocaleString()]}),l.jsx("span",{className:"text-primary-600 font-medium",children:"Explore "})]})]},m.code))}):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Gn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsxs("p",{children:["Department data coming soon for ",e.name]})]})]}),l.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Region Reports"}),l.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a comprehensive AI-researched report about ",e.name," including cost of living, healthcare, education, cultural highlights, and practical relocation information. Reports are cached for faster access and updated when regenerated."]})]})]})}const am=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),sm=(e,t)=>{const n=am(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},$n=["#93C5FD","#86EFAC","#FDE68A","#C4B5FD","#67E8F9","#FDBA74","#F9A8D4","#A5B4FC","#99F6E4","#FCA5A5","#D8B4FE","#FCD34D","#6EE7B7","#A5F3FC","#FBBF24"],cm="#3B82F6",lm={75:{center:[2.35,48.86],scale:25e4,minZoom:1,maxZoom:8},77:{center:[2.97,48.55],scale:25e3,minZoom:1,maxZoom:8},78:{center:[1.85,48.8],scale:35e3,minZoom:1,maxZoom:8},91:{center:[2.25,48.53],scale:4e4,minZoom:1,maxZoom:8},92:{center:[2.22,48.86],scale:7e4,minZoom:1,maxZoom:8},93:{center:[2.45,48.92],scale:7e4,minZoom:1,maxZoom:8},94:{center:[2.47,48.78],scale:6e4,minZoom:1,maxZoom:8},95:{center:[2.15,49.05],scale:4e4,minZoom:1,maxZoom:8},22:{center:[-2.98,48.45],scale:18e3,minZoom:1,maxZoom:8},29:{center:[-4.15,48.35],scale:16e3,minZoom:1,maxZoom:8},35:{center:[-1.68,48.1],scale:18e3,minZoom:1,maxZoom:8},56:{center:[-2.85,47.75],scale:18e3,minZoom:1,maxZoom:8},"04":{center:[6.25,44.05],scale:14e3,minZoom:1,maxZoom:8},"05":{center:[6.35,44.65],scale:18e3,minZoom:1,maxZoom:8},"06":{center:[7.2,43.85],scale:2e4,minZoom:1,maxZoom:8},13:{center:[5.05,43.55],scale:2e4,minZoom:1,maxZoom:8},83:{center:[6.25,43.45],scale:18e3,minZoom:1,maxZoom:8},84:{center:[5.15,44],scale:22e3,minZoom:1,maxZoom:8},"01":{center:[5.35,46.1],scale:18e3,minZoom:1,maxZoom:8},"03":{center:[3.35,46.35],scale:16e3,minZoom:1,maxZoom:8},"07":{center:[4.45,44.75],scale:18e3,minZoom:1,maxZoom:8},15:{center:[2.7,45.05],scale:18e3,minZoom:1,maxZoom:8},26:{center:[5.15,44.65],scale:16e3,minZoom:1,maxZoom:8},38:{center:[5.75,45.25],scale:14e3,minZoom:1,maxZoom:8},42:{center:[4.25,45.75],scale:2e4,minZoom:1,maxZoom:8},43:{center:[3.85,45.05],scale:2e4,minZoom:1,maxZoom:8},63:{center:[3.1,45.75],scale:14e3,minZoom:1,maxZoom:8},69:{center:[4.65,45.85],scale:25e3,minZoom:1,maxZoom:8},73:{center:[6.45,45.5],scale:16e3,minZoom:1,maxZoom:8},74:{center:[6.45,46],scale:18e3,minZoom:1,maxZoom:8},"09":{center:[1.55,42.95],scale:2e4,minZoom:1,maxZoom:8},11:{center:[2.35,43.15],scale:18e3,minZoom:1,maxZoom:8},12:{center:[2.65,44.25],scale:14e3,minZoom:1,maxZoom:8},30:{center:[4.2,44],scale:18e3,minZoom:1,maxZoom:8},31:{center:[1.45,43.35],scale:16e3,minZoom:1,maxZoom:8},32:{center:[.55,43.7],scale:18e3,minZoom:1,maxZoom:8},34:{center:[3.55,43.6],scale:18e3,minZoom:1,maxZoom:8},46:{center:[1.65,44.55],scale:2e4,minZoom:1,maxZoom:8},48:{center:[3.5,44.5],scale:2e4,minZoom:1,maxZoom:8},65:{center:[.15,43.05],scale:2e4,minZoom:1,maxZoom:8},66:{center:[2.55,42.6],scale:2e4,minZoom:1,maxZoom:8},81:{center:[2.15,43.85],scale:2e4,minZoom:1,maxZoom:8},82:{center:[1.35,44.05],scale:25e3,minZoom:1,maxZoom:8},16:{center:[.2,45.7],scale:2e4,minZoom:1,maxZoom:8},17:{center:[-.9,45.9],scale:16e3,minZoom:1,maxZoom:8},19:{center:[1.85,45.3],scale:2e4,minZoom:1,maxZoom:8},23:{center:[2.05,46.15],scale:2e4,minZoom:1,maxZoom:8},24:{center:[.85,45.1],scale:14e3,minZoom:1,maxZoom:8},33:{center:[-.6,44.85],scale:14e3,minZoom:1,maxZoom:8},40:{center:[-.85,43.9],scale:14e3,minZoom:1,maxZoom:8},47:{center:[.5,44.35],scale:2e4,minZoom:1,maxZoom:8},64:{center:[-.85,43.25],scale:16e3,minZoom:1,maxZoom:8},79:{center:[-.4,46.55],scale:2e4,minZoom:1,maxZoom:8},86:{center:[.55,46.55],scale:18e3,minZoom:1,maxZoom:8},87:{center:[1.3,45.9],scale:2e4,minZoom:1,maxZoom:8},"08":{center:[4.65,49.75],scale:2e4,minZoom:1,maxZoom:8},10:{center:[4.1,48.3],scale:2e4,minZoom:1,maxZoom:8},51:{center:[4.2,49],scale:14e3,minZoom:1,maxZoom:8},52:{center:[5.2,48.1],scale:18e3,minZoom:1,maxZoom:8},54:{center:[6.2,48.75],scale:2e4,minZoom:1,maxZoom:8},55:{center:[5.4,49],scale:18e3,minZoom:1,maxZoom:8},57:{center:[6.65,49.1],scale:18e3,minZoom:1,maxZoom:8},67:{center:[7.55,48.65],scale:2e4,minZoom:1,maxZoom:8},68:{center:[7.25,47.85],scale:22e3,minZoom:1,maxZoom:8},88:{center:[6.4,48.2],scale:2e4,minZoom:1,maxZoom:8},21:{center:[4.85,47.35],scale:14e3,minZoom:1,maxZoom:8},25:{center:[6.35,47.15],scale:2e4,minZoom:1,maxZoom:8},39:{center:[5.7,46.75],scale:2e4,minZoom:1,maxZoom:8},58:{center:[3.5,47.1],scale:16e3,minZoom:1,maxZoom:8},70:{center:[6.15,47.65],scale:2e4,minZoom:1,maxZoom:8},71:{center:[4.55,46.65],scale:14e3,minZoom:1,maxZoom:8},89:{center:[3.55,47.8],scale:16e3,minZoom:1,maxZoom:8},90:{center:[6.9,47.65],scale:5e4,minZoom:1,maxZoom:8},18:{center:[2.45,46.95],scale:16e3,minZoom:1,maxZoom:8},28:{center:[1.45,48.3],scale:18e3,minZoom:1,maxZoom:8},36:{center:[1.7,46.75],scale:18e3,minZoom:1,maxZoom:8},37:{center:[.75,47.25],scale:18e3,minZoom:1,maxZoom:8},41:{center:[1.35,47.55],scale:18e3,minZoom:1,maxZoom:8},45:{center:[2.35,47.9],scale:16e3,minZoom:1,maxZoom:8},14:{center:[-.4,49.1],scale:2e4,minZoom:1,maxZoom:8},27:{center:[.95,49.1],scale:18e3,minZoom:1,maxZoom:8},50:{center:[-1.3,49.1],scale:18e3,minZoom:1,maxZoom:8},61:{center:[.15,48.55],scale:18e3,minZoom:1,maxZoom:8},76:{center:[.95,49.65],scale:18e3,minZoom:1,maxZoom:8},"02":{center:[3.65,49.55],scale:16e3,minZoom:1,maxZoom:8},59:{center:[3.25,50.35],scale:16e3,minZoom:1,maxZoom:8},60:{center:[2.45,49.4],scale:2e4,minZoom:1,maxZoom:8},62:{center:[2.35,50.5],scale:16e3,minZoom:1,maxZoom:8},80:{center:[2.35,49.9],scale:18e3,minZoom:1,maxZoom:8},44:{center:[-1.7,47.25],scale:16e3,minZoom:1,maxZoom:8},49:{center:[-.55,47.35],scale:16e3,minZoom:1,maxZoom:8},53:{center:[-.8,48.1],scale:2e4,minZoom:1,maxZoom:8},72:{center:[.25,47.95],scale:18e3,minZoom:1,maxZoom:8},85:{center:[-1.35,46.7],scale:18e3,minZoom:1,maxZoom:8},"2A":{center:[8.95,41.9],scale:22e3,minZoom:1,maxZoom:8},"2B":{center:[9.25,42.45],scale:2e4,minZoom:1,maxZoom:8}},um={center:[2.5,46.5],scale:18e3,minZoom:1,maxZoom:8};function mm({departmentCode:e,departmentName:t,communes:n,onCommuneSelect:r}){const[o,i]=M.useState(null),[a,c]=M.useState({x:0,y:0}),[u,m]=M.useState(1),s=lm[e]||um,p=M.useMemo(()=>sm(e,t),[e,t]),f=M.useCallback(A=>$n[A%$n.length],[]),d=M.useCallback(A=>n.find(P=>P.name.toLowerCase()===A.toLowerCase()),[n]),h=M.useMemo(()=>Wr.find(A=>A.code===e),[e]),v=M.useCallback((A,P)=>{const B=d(A);if(B){r(B);return}const F={code:P,name:A,department_code:e,department_name:t,region_code:(h==null?void 0:h.region_code)||"",region_name:(h==null?void 0:h.region_name)||"",population:0,postal_codes:[],type:"town"};r(F)},[d,r,e,t,h]),y=M.useCallback((A,P)=>{var F;i(A);const B=(F=P.currentTarget.closest(".map-container"))==null?void 0:F.getBoundingClientRect();B&&c({x:P.clientX-B.left,y:P.clientY-B.top})},[]),g=M.useCallback(A=>{var B;const P=(B=A.currentTarget.closest(".map-container"))==null?void 0:B.getBoundingClientRect();P&&c({x:A.clientX-P.left,y:A.clientY-P.top})},[]),_=M.useCallback(()=>{m(A=>Math.min(A*1.5,s.maxZoom))},[s.maxZoom]),x=M.useCallback(()=>{m(A=>Math.max(A/1.5,s.minZoom))},[s.minZoom]),C=M.useCallback(()=>{m(1)},[]),N=M.useCallback(A=>{m(A.zoom)},[]),j=M.useMemo(()=>o?d(o):null,[o,d]),S=M.useMemo(()=>u>=4?8:u>=2.5?6:u>=1.5?5:0,[u]);return l.jsxs("div",{className:"relative mb-6",children:[l.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Communes of ",t]}),l.jsxs("div",{className:"map-container relative bg-gradient-to-br from-emerald-50 to-green-100 rounded-xl overflow-hidden shadow-inner border border-green-200",children:[l.jsxs("div",{className:"absolute top-3 right-3 z-10 flex flex-col gap-1",children:[l.jsx("button",{onClick:_,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom in",children:"+"}),l.jsx("button",{onClick:x,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom out",children:""}),l.jsx("button",{onClick:C,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-500 text-xs","aria-label":"Reset zoom",children:""})]}),l.jsxs("div",{className:"absolute bottom-3 right-3 z-10 bg-white/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-gray-600",children:[u.toFixed(1),"x"]}),l.jsxs("div",{className:"absolute top-3 left-3 z-10 bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-gray-600 max-w-[200px]",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Navigate the map:"}),l.jsxs("ul",{className:"space-y-0.5",children:[l.jsx("li",{children:" Zoom in to see commune names"}),l.jsx("li",{children:" Click any commune for details"}),l.jsx("li",{children:" Drag to pan around"})]})]}),l.jsx(Lt,{projection:"geoMercator",projectionConfig:{center:s.center,scale:s.scale},style:{width:"100%",height:"auto",minHeight:"450px",maxHeight:"550px"},children:l.jsxs(kn,{center:s.center,zoom:u,minZoom:s.minZoom,maxZoom:s.maxZoom,onMoveEnd:N,children:[l.jsx(it,{geography:p,children:({geographies:A})=>A.map((P,B)=>{const F=P.properties.nom,G=P.properties.code,w=o===F?cm:f(B);return l.jsx(Ur,{geography:P,fill:w,stroke:"#FFFFFF",strokeWidth:.5/u,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>v(F,G),onMouseEnter:b=>y(F,b),onMouseLeave:()=>i(null),onMouseMove:g},P.rsmKey)})}),S>0&&l.jsx(it,{geography:p,children:({geographies:A})=>A.map(P=>{const B=P.properties.nom,F=P.geometry.coordinates;let G=0,H=0;try{const w=P.geometry.type==="MultiPolygon"?F[0][0]:F[0];if(w&&w.length>0){const b=w.map(k=>k[0]),Q=w.map(k=>k[1]);G=(Math.min(...b)+Math.max(...b))/2,H=(Math.min(...Q)+Math.max(...Q))/2}}catch{return null}return l.jsx(Zn,{coordinates:[G,H],children:l.jsx("text",{textAnchor:"middle",fontSize:S/u,fontWeight:"500",fill:"#1F2937",dy:".3em",className:"pointer-events-none select-none",style:{textShadow:"0 0 3px white, 0 0 3px white, 0 0 3px white"},children:B})},`label-${P.rsmKey}`)})})]})}),o&&l.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 min-w-[180px]",style:{left:Math.min(Math.max(a.x,90),320),top:Math.max(a.y-10,60),transform:"translate(-50%, -100%)"},children:[l.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:o}),j?l.jsxs(l.Fragment,{children:[j.population>0&&l.jsxs("p",{className:"text-sm text-gray-600",children:["Population: ",j.population.toLocaleString()]}),j.postal_codes.length>0&&l.jsxs("p",{className:"text-sm text-gray-500",children:["Postal: ",j.postal_codes[0]]})]}):l.jsx("p",{className:"text-sm text-gray-500",children:t}),l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:l.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to generate report "})})]})]}),l.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-4 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3B82F6"}}),l.jsx("span",{children:"Hovered"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"flex gap-0.5",children:$n.slice(0,4).map((A,P)=>l.jsx("span",{className:"w-2 h-3 rounded-sm",style:{backgroundColor:A}},P))}),l.jsx("span",{children:"Communes"})]})]}),l.jsx("div",{className:"text-gray-500",children:"Click any commune to view details and generate a relocation report"})]})]})}const fm=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),pm=(e,t)=>{const n=fm(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},dm={city:{icon:ja,label:"City",color:"text-blue-600 bg-blue-100"},town:{icon:ti,label:"Town",color:"text-amber-600 bg-amber-100"},village:{icon:Sa,label:"Village",color:"text-emerald-600 bg-emerald-100"}};function hm({department:e,onCommuneSelect:t,onGenerateReport:n,onBack:r}){const[o,i]=M.useState([]),[a,c]=M.useState([]),[u,m]=M.useState(!0),[s,p]=M.useState(""),[f,d]=M.useState("all");M.useEffect(()=>{(async()=>{m(!0);try{const g=pm(e.code,e.name),_=await fetch(g);if(!_.ok)throw new Error(`Failed to fetch GeoJSON: ${_.status}`);const C=(await _.json()).features.map(N=>{const{code:j,nom:S}=N.properties,A=e.major_cities.some(B=>B.toLowerCase()===S.toLowerCase());let P="village";return A?P="city":(S.includes("-")||S.length>15)&&(P="town"),{code:j,name:S,postal_codes:[e.code+"000"],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:P}});C.sort((N,j)=>N.name.localeCompare(j.name,"fr")),i(C),c(C)}catch(g){console.error("Failed to fetch communes from GeoJSON:",g);const _=e.major_cities.map((x,C)=>({code:`${e.code}${String(C+1).padStart(3,"0")}`,name:x,postal_codes:[`${e.code}000`],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:"city"}));i(_),c(_)}finally{m(!1)}})()},[e]),M.useEffect(()=>{let y=o;if(s.trim()){const g=s.toLowerCase();y=y.filter(_=>_.name.toLowerCase().includes(g)||_.postal_codes.some(x=>x.includes(g)))}f!=="all"&&(y=y.filter(g=>g.type===f)),c(y)},[o,s,f]);const h=M.useCallback(y=>{p(y.target.value)},[]),v={city:a.filter(y=>y.type==="city"),town:a.filter(y=>y.type==="town"),village:a.filter(y=>y.type==="village")};return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{children:[l.jsxs("button",{onClick:r,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[l.jsx(ri,{className:"w-4 h-4"}),l.jsxs("span",{className:"text-sm",children:["Back to ",e.region_name]})]}),l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[e.name," ",l.jsxs("span",{className:"text-gray-400 font-normal",children:["(",e.code,")"]})]}),l.jsxs("p",{className:"text-gray-600 mt-1",children:[e.region_name," region"]})]}),l.jsxs("button",{onClick:()=>n("department",e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate Report"]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(Ct,{className:"w-4 h-4"}),"Prefecture"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.prefecture})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[l.jsx(ei,{className:"w-4 h-4"}),"Population"]}),l.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Area"}),l.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.area_km2.toLocaleString()," km"]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Density"}),l.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Math.round(e.population/e.area_km2),"/km"]})]})]}),!u&&l.jsx(mm,{departmentCode:e.code,departmentName:e.name,communes:o,onCommuneSelect:t}),e.major_cities.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Major Cities"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:e.major_cities.map(y=>{const g=o.find(_=>_.name.toLowerCase()===y.toLowerCase());return l.jsx("button",{onClick:()=>{g&&t(g)},disabled:!g,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${g?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:y},y)})})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(On,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",value:s,onChange:h,placeholder:"Search communes by name or postal code...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),l.jsx("div",{className:"flex gap-2",children:["all","city","town","village"].map(y=>l.jsxs("button",{onClick:()=>d(y),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${f===y?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[y==="all"?"All":y.charAt(0).toUpperCase()+y.slice(1),"s"]},y))})]}),u?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(Qt,{className:"w-6 h-6 animate-spin text-primary-600"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading communes..."})]}):a.length>0?l.jsxs("div",{className:"space-y-6",children:[v.city.length>0&&(f==="all"||f==="city")&&l.jsx(zn,{title:"Cities",communes:v.city,type:"city",onSelect:t}),v.town.length>0&&(f==="all"||f==="town")&&l.jsx(zn,{title:"Towns",communes:v.town,type:"town",onSelect:t}),v.village.length>0&&(f==="all"||f==="village")&&l.jsx(zn,{title:"Villages",communes:v.village,type:"village",onSelect:t})]}):l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(On,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"No communes found matching your search"}),s&&l.jsx("button",{onClick:()=>p(""),className:"mt-2 text-primary-600 hover:underline",children:"Clear search"})]}),l.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Department Reports"}),l.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a detailed AI-researched report about ",e.name," including local economy, housing market, transportation, healthcare facilities, schools, and practical information for relocating to this area."]})]})]})}function zn({title:e,communes:t,type:n,onSelect:r}){const[o,i]=M.useState(!1),a=dm[n],c=a.icon,u=12,m=o?t:t.slice(0,u),s=t.length>u;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("span",{className:`p-1.5 rounded-lg ${a.color}`,children:l.jsx(c,{className:"w-4 h-4"})}),l.jsx("h3",{className:"font-medium text-gray-900",children:e}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.length,")"]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(p=>l.jsx("button",{onClick:()=>r(p),className:"text-left p-3 rounded-lg border border-gray-200 hover:border-primary-300 hover:bg-primary-50 transition-all group",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-primary-700",children:p.name}),l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:p.postal_codes[0]})]}),p.population>0&&l.jsx("span",{className:"text-xs text-gray-400",children:p.population.toLocaleString()})]})},p.code))}),s&&l.jsx("div",{className:"mt-3 text-center",children:l.jsx("button",{onClick:()=>i(!o),className:"text-sm text-primary-600 hover:text-primary-700 hover:underline font-medium",children:o?"Show less":`Show all ${t.length} ${n==="city"?"cities":`${n}s`}`})})]})}function gm({onSelect:e}){const[t,n]=M.useState(""),[r,o]=M.useState([]),[i,a]=M.useState(!1),[c,u]=M.useState(!1),[m,s]=M.useState(-1),p=M.useRef(null),f=M.useRef(null),d=M.useRef(),h=M.useCallback(async _=>{if(!_.trim()){o([]);return}a(!0);const x=[],C=_.toLowerCase();if(Kt.forEach(j=>{(j.name.toLowerCase().includes(C)||j.capital.toLowerCase().includes(C))&&x.push({type:"region",code:j.code,name:j.name,subtitle:`Region  ${j.capital}`,data:j})}),Wr.forEach(j=>{(j.name.toLowerCase().includes(C)||j.prefecture.toLowerCase().includes(C)||j.code.includes(C))&&x.push({type:"department",code:j.code,name:j.name,subtitle:`Department  ${j.region_name}`,data:j})}),_.length>=3)try{const j=await In.searchCommunes({q:_,limit:10});j.communes&&j.communes.forEach(S=>{x.push({type:"commune",code:S.code,name:S.name,subtitle:`${S.type.charAt(0).toUpperCase()+S.type.slice(1)}  ${S.department_name}`,data:S})})}catch(j){console.error("Commune search failed:",j)}const N={region:0,department:1,commune:2};x.sort((j,S)=>{const A=N[j.type]-N[S.type];return A!==0?A:j.name.localeCompare(S.name)}),o(x.slice(0,15)),a(!1)},[]);M.useEffect(()=>(d.current&&clearTimeout(d.current),t.trim()?d.current=setTimeout(()=>{h(t)},300):o([]),()=>{d.current&&clearTimeout(d.current)}),[t,h]);const v=_=>{e(_.data,_.type),n(""),o([]),u(!1),s(-1)},y=_=>{if(!(!c||r.length===0))switch(_.key){case"ArrowDown":_.preventDefault(),s(x=>x<r.length-1?x+1:0);break;case"ArrowUp":_.preventDefault(),s(x=>x>0?x-1:r.length-1);break;case"Enter":_.preventDefault(),m>=0&&m<r.length&&v(r[m]);break;case"Escape":_.preventDefault(),u(!1),s(-1);break}};M.useEffect(()=>{const _=x=>{var C;f.current&&!f.current.contains(x.target)&&!((C=p.current)!=null&&C.contains(x.target))&&u(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const g=_=>{switch(_){case"region":return l.jsx(Ct,{className:"w-4 h-4 text-primary-600"});case"department":return l.jsx(Gn,{className:"w-4 h-4 text-amber-600"});case"commune":return l.jsx(ti,{className:"w-4 h-4 text-emerald-600"})}};return l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"relative",children:[l.jsx(On,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{ref:p,type:"text",value:t,onChange:_=>{n(_.target.value),u(!0),s(-1)},onFocus:()=>u(!0),onKeyDown:y,placeholder:"Search regions, departments, towns...",className:"w-64 pl-10 pr-8 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-label":"Search locations","aria-expanded":c,"aria-haspopup":"listbox","aria-controls":"location-search-results",role:"combobox"}),t&&l.jsx("button",{onClick:()=>{var _;n(""),o([]),(_=p.current)==null||_.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:l.jsx(ni,{className:"w-4 h-4"})})]}),c&&(t||r.length>0)&&l.jsx("div",{ref:f,id:"location-search-results",role:"listbox",className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:i?l.jsxs("div",{className:"flex items-center justify-center py-4",children:[l.jsx(Qt,{className:"w-5 h-5 animate-spin text-primary-600"}),l.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Searching..."})]}):r.length>0?l.jsx("ul",{className:"max-h-80 overflow-y-auto",children:r.map((_,x)=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>v(_),onMouseEnter:()=>s(x),className:`w-full text-left px-4 py-3 flex items-start gap-3 transition-colors ${x===m?"bg-primary-50":"hover:bg-gray-50"}`,role:"option","aria-selected":x===m,children:[l.jsx("span",{className:"mt-0.5",children:g(_.type)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900",children:_.name}),l.jsx("p",{className:"text-sm text-gray-500",children:_.subtitle})]})]})},`${_.type}-${_.code}`))}):t.length>=2?l.jsxs("div",{className:"py-4 text-center text-gray-500 text-sm",children:['No results found for "',t,'"']}):l.jsx("div",{className:"py-4 text-center text-gray-500 text-sm",children:"Type to search locations..."})})]})}function xm(e){switch(e){case"api_key_missing":return"The AI service is not configured. Please contact support to enable AI-generated reports with specific local data.";case"api_error":return"Unable to connect to the AI service. Please try again later or contact support.";case"parse_error":return"The AI response could not be processed. Please try regenerating the report.";default:return'This is a template report with generic information. Click "Generate AI Report" to get location-specific data.'}}function ym({isOpen:e,onClose:t,locationType:n,locationCode:r,locationName:o}){const[i,a]=M.useState("initial"),[c,u]=M.useState(null),[m,s]=M.useState(null),[p,f]=M.useState(!1),[d,h]=M.useState(null),[v,y]=M.useState(!1),[g,_]=M.useState(null);M.useEffect(()=>{e&&(a("initial"),u(null),s(null),f(!1),h(null),y(!1),_(null))},[e,r]);const x=async(j=!1)=>{a("generating"),s(null);try{const S=await In.generateReport({location_type:n,location_code:r,location_name:o,force_refresh:j});u(S.report),f(S.cached),h(S.cache_age||null),y(S.is_placeholder||!1),_(S.placeholder_reason||null),a("ready")}catch(S){console.error("Report generation failed:",S),s(S instanceof Error?S.message:"Failed to generate report. Please try again."),a("error")}},C=async()=>{if(c){a("saving");try{await In.saveReport(c.id),a("saved")}catch(j){console.error("Failed to save report:",j),s("Failed to save report to your documents."),a("ready")}}},N=()=>{if(!(c!=null&&c.id))return;const j=window.fraPortalData||{nonce:"",apiUrl:"/wp-json/fra-portal/v1"},S=`${j.apiUrl}/research/report/${c.id}/html?_wpnonce=${j.nonce}`;window.open(S,"_blank")};return e?l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",role:"presentation",onClick:j=>{j.target===j.currentTarget&&t()},children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[l.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:"Generate Relocation Report"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:l.jsx(ni,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6",children:[i==="initial"&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Le,{className:"w-8 h-8 text-primary-600"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:o}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Generate a comprehensive AI-researched relocation report for"," ",n==="region"?"this region":n==="department"?"this department":"this area","."]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Report includes:"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" Geography & landscape overview"}),l.jsx("li",{children:" Climate and weather patterns"}),l.jsx("li",{children:" Economy and job market"}),l.jsx("li",{children:" Housing and real estate"}),l.jsx("li",{children:" Food and wine culture"}),l.jsx("li",{children:" Culture and lifestyle"}),l.jsx("li",{children:" Quality of life (healthcare, education)"}),l.jsx("li",{children:" Transportation options"}),l.jsx("li",{children:" Environment and outdoor activities"}),l.jsx("li",{children:" Practical information"})]})]}),l.jsxs("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate Report"]})]}),i==="generating"&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Qt,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Generating Report"}),l.jsxs("p",{className:"text-gray-600",children:["Our AI is researching and compiling information about ",o,"..."]}),l.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"This may take a minute or two."})]}),i==="ready"&&c&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(no,{className:"w-8 h-8 text-green-600"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Report Ready"}),p&&!v&&l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full mb-2",children:[l.jsx(ba,{className:"w-3 h-3"}),l.jsxs("span",{children:["Cached report ",d&&`(${d})`]})]}),v&&l.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-700 text-sm rounded-full mb-2",children:[l.jsx(ro,{className:"w-3 h-3"}),l.jsx("span",{children:"Template report (generic data)"})]}),l.jsx("p",{className:"text-gray-600",children:v?xm(g):`Your relocation report for ${o} is ready.`})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:c.location_name}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Version ",c.version]})]}),l.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[n.charAt(0).toUpperCase()+n.slice(1)," Report"]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(c.updated_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:N,className:"btn btn-primary w-full",children:[l.jsx(Le,{className:"w-4 h-4"}),"View Report"]}),l.jsxs("button",{onClick:C,className:"btn btn-outline w-full",children:[l.jsx(Na,{className:"w-4 h-4"}),"Save to My Documents"]}),(p||v)&&l.jsxs("button",{onClick:()=>x(!0),className:`btn w-full text-sm ${v?"btn-primary":"btn-ghost"}`,children:[l.jsx(Ca,{className:"w-4 h-4"}),v?"Generate AI Report":"Regenerate with fresh data"]})]})]}),i==="saving"&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Qt,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Saving to Documents"}),l.jsx("p",{className:"text-gray-600",children:"Adding this report to your document library..."})]}),i==="saved"&&c&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(no,{className:"w-8 h-8 text-green-600"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Saved to Documents"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"This report is now linked in your documents. You'll always have access to the latest version."}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left",children:l.jsxs("p",{className:"text-sm text-blue-700",children:[l.jsx("strong",{children:"Note:"})," When this report is updated, your saved link will automatically point to the newest version with the latest information."]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:N,className:"btn btn-primary w-full",children:[l.jsx(Le,{className:"w-4 h-4"}),"View Report"]}),l.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Close"})]})]}),i==="error"&&l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(ro,{className:"w-8 h-8 text-red-600"})}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Generation Failed"}),l.jsx("p",{className:"text-gray-600 mb-2",children:m}),l.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the issue persists."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:"Try Again"}),l.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Cancel"})]})]})]})]})}):null}function Pm(){const[e,t]=M.useState({level:"france"}),[n,r]=M.useState([]),[o,i]=M.useState(!1),[a,c]=M.useState(null),u=M.useCallback(h=>{t({level:"region",region:h}),r([{level:"region",code:h.code,name:h.name}])},[]),m=M.useCallback(h=>{t(v=>({...v,level:"department",department:h})),r(v=>[...v.slice(0,1),{level:"department",code:h.code,name:h.name}])},[]),s=M.useCallback(h=>{t(v=>({...v,level:"commune",commune:h})),r(v=>[...v.slice(0,2),{level:"commune",code:h.code,name:h.name}])},[]),p=M.useCallback(h=>{if(h===-1)t({level:"france"}),r([]);else{const v=n[h],y=n.slice(0,h+1);r(y),v.level==="region"?t(g=>({level:"region",region:g.region})):v.level==="department"&&t(g=>({level:"department",region:g.region,department:g.department}))}},[n]),f=M.useCallback((h,v,y)=>{c({type:h,code:v,name:y}),i(!0)},[]),d=M.useCallback((h,v)=>{if(v==="region")u(h);else if(v==="department"){const y=h;t({level:"department",region:{code:y.region_code,name:y.region_name},department:y}),r([{level:"region",code:y.region_code,name:y.region_name},{level:"department",code:y.code,name:y.name}])}else if(v==="commune"){const y=h;t({level:"commune",region:{code:y.region_code,name:y.region_name},department:{code:y.department_code,name:y.department_name},commune:y}),r([{level:"region",code:y.region_code,name:y.region_name},{level:"department",code:y.department_code,name:y.department_name},{level:"commune",code:y.code,name:y.name}])}},[u]);return l.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[l.jsx(Ct,{className:"w-6 h-6 text-primary-600"}),"Explore France"]}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Discover regions, departments, and towns. Generate detailed relocation reports."})]}),l.jsx(gm,{onSelect:d})]})}),l.jsx("nav",{className:"mb-6","aria-label":"Location breadcrumb",children:l.jsxs("ol",{className:"flex items-center gap-2 text-sm",children:[l.jsx("li",{children:l.jsxs("button",{onClick:()=>p(-1),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg transition-colors ${e.level==="france"?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[l.jsx(Ct,{className:"w-4 h-4"}),"France"]})}),n.map((h,v)=>l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx(Qa,{className:"w-4 h-4 text-gray-400"}),l.jsx("button",{onClick:()=>p(v),className:`px-3 py-1.5 rounded-lg transition-colors ${v===n.length-1?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:h.name})]},h.code))]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.level==="france"&&l.jsx(z0,{onRegionSelect:u,onGenerateReport:(h,v)=>f("region",h,v)}),e.level==="region"&&e.region&&l.jsx(im,{region:e.region,onDepartmentSelect:m,onGenerateReport:(h,v)=>f("region",h,v),onBack:()=>p(-1)}),e.level==="department"&&e.department&&l.jsx(hm,{department:e.department,onCommuneSelect:s,onGenerateReport:(h,v,y)=>f(h,v,y),onBack:()=>p(0)}),e.level==="commune"&&e.commune&&l.jsx(vm,{commune:e.commune,onGenerateReport:(h,v)=>f("commune",h,v)})]}),o&&a&&l.jsx(ym,{isOpen:o,onClose:()=>i(!1),locationType:a.type,locationCode:a.code,locationName:a.name})]})}function vm({commune:e,onGenerateReport:t}){return l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),l.jsxs("p",{className:"text-gray-600",children:[e.department_name,", ",e.region_name]})]}),l.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate Report"]})]}),l.jsxs("div",{className:`grid grid-cols-1 gap-4 mb-6 ${e.population>0?"md:grid-cols-3":"md:grid-cols-2"}`,children:[e.population>0&&l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Population"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.population.toLocaleString()})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:e.type})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Department"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.department_name})]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Generate a Detailed Report"}),l.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Get a comprehensive AI-researched guide about ",e.name,", including local history, cost of living, healthcare facilities, schools, transportation, and practical information for relocating to this area."]}),l.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[l.jsx(Le,{className:"w-4 h-4"}),"Generate ",e.name," Report"]})]})]})}export{Pm as default};
