const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TasksView-CKq0y8MF.js","./vendor-query-D8MH73Ff.js","./vendor-react-F9Y4d3HK.js","./vendor-utils-C5RVuWu4.js","./useVirtualization-CJ9Vo0Ze.js","./vendor-virtual-Bs6oCvg1.js","./filter-BjMjKfZh.js","./circle-CiE8CvBv.js","./more-vertical-DHdKfuWC.js","./grip-vertical-D3uREFfT.js","./loader-2-DLuMvMXi.js","./flag-BMJoGJD6.js","./trash-2-C1GhNnss.js","./DocumentsView-BeCEmHUU.js","./alert-circle-B9bLE31V.js","./download-nHkMjK7A.js","./shield-BmyKY86e.js","./external-link-Bm4GD2o6.js","./chevron-up-CUPxDSxJ.js","./chevron-down-DjLvvQDk.js","./MessagesView-BhCBrjuY.js","./pen-_cEPL1B0.js","./send-XED6OeJd.js","./arrow-left-BH2DXfy0.js","./check-circle-2-D3JKjnz5.js","./TimelineView-CC_fUXgN.js","./user-plus-CatT2cgf.js","./SettingsView-BeuzW24j.js","./save-ZAfgAwLm.js","./HelpView-zZ5QT1Zd.js","./book-SNp_0b_0.js","./plane-CK-uKDWY.js","./briefcase-DnQrp3L-.js","./graduation-cap-C0ihewiU.js","./GuidesView-BNSuRnkB.js","./heart-CL8khaX7.js","./car-CE6M-qEN.js","./dollar-sign-jS_nGPzp.js","./FamilyView-Cqsk04HB.js","./lock-DAHx9MdM.js","./ProfileView-lZ5pUIfB.js","./ChecklistsView-B5w5qe2o.js","./GlossaryView-Dw73myFY.js","./building-2-koQIcsL1.js","./copy-CGDZ7DCz.js","./KnowledgeBaseChat-Bw-tY4v3.js","./building-DFmGtIdC.js","./MembershipView-BegRNj29.js","./x-circle-JqXrWSQ-.js","./ResearchView-CKfVb4d9.js","./SchengenDashboard-B5RFwrqz.js"])))=>i.map(i=>d[i]);
var fe=Object.defineProperty;var be=(e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var B=(e,t,r)=>be(e,typeof t!="symbol"?t+"":t,r);import{u as x,a as d,b as u,j as s,Q as ve,c as ke}from"./vendor-query-D8MH73Ff.js";import{a as je,r as g,R as Se}from"./vendor-react-F9Y4d3HK.js";import{c as we,a as S}from"./vendor-utils-C5RVuWu4.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var W={},se=je;W.createRoot=se.createRoot,W.hydrateRoot=se.hydrateRoot;const Ne="modulepreload",Te=function(e,t){return new URL(e,t).href},re={},w=function(t,r,a){let o=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),y=document.querySelector("meta[property=csp-nonce]"),b=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));o=Promise.allSettled(r.map(h=>{if(h=Te(h,a),h in re)return;re[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(!!a)for(let T=l.length-1;T>=0;T--){const C=l[T];if(C.href===h&&(!p||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${v}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":Ne,p||(N.as="script"),N.crossOrigin="",N.href=h,b&&N.setAttribute("nonce",b),document.head.appendChild(N),p)return new Promise((T,C)=>{N.addEventListener("load",T),N.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(l){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=l,window.dispatchEvent(y),!y.defaultPrevented)throw l}return o.then(l=>{for(const y of l||[])y.status==="rejected"&&c(y.reason);return t().catch(c)})},Y=1e3,Q=60*Y,Ce=60*Q,f={DYNAMIC:10*Y,DEFAULT:30*Y,SHORT:Q,MEDIUM:5*Q,LONG:Ce},qe={SUPPORT_UNREAD:Q},_e={MIN_QUERY_LENGTH:2};function X(){return window.fraPortalData||{apiUrl:"/wp-json/fra-portal/v1",nonce:"",userId:0,siteUrl:"",pluginUrl:"",isAdmin:!1}}async function i(e,t={}){const r=X(),a=`${r.apiUrl}${e}`,{signal:o,...c}=t,l=await fetch(a,{...c,signal:o,headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce,...c.headers},credentials:"same-origin"});if(!l.ok){const y=await l.json().catch(()=>({message:"An error occurred"}));throw new Error(y.message||`HTTP error ${l.status}`)}return l.json()}async function ue(e,t,r){const a=X(),o=`${a.apiUrl}${e}`,c=await fetch(o,{method:"POST",headers:{"X-WP-Nonce":a.nonce},credentials:"same-origin",body:t,signal:r});if(!c.ok){const l=await c.json().catch(()=>({message:"Request failed"}));throw new Error(l.message||`HTTP error ${c.status}`)}return c.json()}function Ee(e,t={}){const r=new AbortController;return{promise:i(e,{...t,signal:r.signal}),abort:()=>r.abort()}}const de={get:()=>i("/dashboard"),dismissWelcomeBanner:()=>i("/welcome-banner/dismiss",{method:"POST"})},Fe={list:()=>i("/projects"),get:e=>i(`/projects/${e}`),create:e=>i("/projects",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>i(`/projects/${e}`,{method:"DELETE"})},L={list:(e,t)=>{const r=new URLSearchParams;t!=null&&t.stage&&r.set("stage",t.stage),t!=null&&t.status&&r.set("status",t.status),t!=null&&t.task_type&&r.set("task_type",t.task_type);const a=r.toString();return i(`/projects/${e}/tasks${a?`?${a}`:""}`)},get:e=>i(`/tasks/${e}`),create:(e,t)=>i(`/projects/${e}/tasks`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>i(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>i(`/tasks/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),delete:e=>i(`/tasks/${e}`,{method:"DELETE"}),reorder:e=>i("/tasks/reorder",{method:"POST",body:JSON.stringify({order:e})})},Me={list:(e,t)=>{const r=new URLSearchParams;t!=null&&t.limit&&r.set("limit",String(t.limit)),t!=null&&t.offset&&r.set("offset",String(t.offset)),t!=null&&t.grouped&&r.set("grouped","true");const a=r.toString();return i(`/projects/${e}/activity${a?`?${a}`:""}`)}},O={me:()=>i("/me"),updateProfile:e=>i("/me",{method:"PUT",body:JSON.stringify(e)}),getSettings:()=>i("/me/settings"),updateSettings:e=>i("/me/settings",{method:"PUT",body:JSON.stringify(e)}),deleteAccount:e=>i("/account/delete",{method:"POST",body:JSON.stringify({confirmation:e})})},A={list:(e,t)=>{const r=new URLSearchParams;t!=null&&t.category&&r.set("category",t.category),t!=null&&t.file_type&&r.set("file_type",t.file_type);const a=r.toString();return i(`/projects/${e}/files${a?`?${a}`:""}`)},get:e=>i(`/files/${e}`),upload:(e,t,r,a)=>{const o=new FormData;return o.append("file",t),r!=null&&r.category&&o.append("category",r.category),r!=null&&r.description&&o.append("description",r.description),ue(`/projects/${e}/files`,o,a)},update:(e,t)=>i(`/files/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>i(`/files/${e}`,{method:"DELETE"}),download:e=>{const t=X();return`${t.apiUrl}/files/${e}/download?_wpnonce=${t.nonce}`}},U={list:(e,t)=>{const r=new URLSearchParams;t!=null&&t.task_id&&r.set("task_id",String(t.task_id)),t!=null&&t.pinned&&r.set("pinned","true");const a=r.toString();return i(`/projects/${e}/notes${a?`?${a}`:""}`)},get:e=>i(`/notes/${e}`),create:(e,t)=>i(`/projects/${e}/notes`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>i(`/notes/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>i(`/notes/${e}`,{method:"DELETE"}),togglePin:e=>i(`/notes/${e}/pin`,{method:"PATCH"})},V={get:()=>i("/profile"),update:e=>i("/profile",{method:"PUT",body:JSON.stringify(e)}),getCompletion:()=>i("/profile/completion"),reset:e=>i("/profile/reset",{method:"POST",body:JSON.stringify({confirmation:e})})},M={list:e=>{const t=new URLSearchParams;e&&t.set("visa_type",e);const r=t.toString();return i(`/checklists${r?`?${r}`:""}`)},get:e=>i(`/checklists/${e}`),updateItem:(e,t,r)=>i(`/checklists/${e}/items/${t}`,{method:"PUT",body:JSON.stringify(r)}),getTaskChecklist:e=>i(`/tasks/${e}/checklist`),updateTaskChecklistItem:(e,t,r)=>i(`/tasks/${e}/checklist/${t}`,{method:"PUT",body:JSON.stringify({completed:r})}),addTaskChecklistItem:(e,t)=>i(`/tasks/${e}/checklist`,{method:"POST",body:JSON.stringify({title:t})}),deleteTaskChecklistItem:(e,t)=>i(`/tasks/${e}/checklist/${t}`,{method:"DELETE"})},De={getAll:()=>i("/glossary")},me={verify:e=>i("/verify",{method:"POST",body:JSON.stringify(e)}),verifyFile:(e,t,r)=>{const a=new FormData;return a.append("file",t),a.append("verification_type",r),ue(`/projects/${e}/verify`,a)},getHistory:e=>i(`/projects/${e}/verify/history`)},Z={list:()=>i("/guides"),get:e=>i(`/guides/${e}`),getPersonalized:e=>i(`/guides/${e}/personalized`),generateAI:e=>i(`/guides/${e}/generate`,{method:"POST"})},ee={send:(e,t)=>i("/chat",{method:"POST",body:JSON.stringify(e),signal:t}),sendCancellable:e=>Ee("/chat",{method:"POST",body:JSON.stringify(e)}),getCategories:()=>i("/chat/categories"),searchTopics:(e,t)=>i(`/chat/search?q=${encodeURIComponent(e)}`,{signal:t})},_={getInfo:()=>i("/membership"),getSubscriptions:()=>i("/membership/subscriptions"),getPayments:()=>i("/membership/payments"),cancelSubscription:e=>i(`/membership/subscriptions/${e}/cancel`,{method:"POST"}),suspendSubscription:e=>i(`/membership/subscriptions/${e}/suspend`,{method:"POST"}),resumeSubscription:e=>i(`/membership/subscriptions/${e}/resume`,{method:"POST"}),getUpgradeOptions:()=>i("/membership/upgrade-options")},Pe={searchCommunes:(e,t)=>{const r=new URLSearchParams;return e.department&&r.set("department",e.department),e.q&&r.set("q",e.q),e.limit&&r.set("limit",String(e.limit)),i(`/research/communes/search?${r.toString()}`,{signal:t})},generateReport:e=>i("/research/report/generate",{method:"POST",body:JSON.stringify(e)}),saveReport:e=>i(`/research/report/${e}/save`,{method:"POST"}),getSavedReports:()=>i("/research/saved")},D={getTickets:()=>i("/support/tickets"),getTicket:e=>i(`/support/tickets/${e}`),createTicket:e=>i("/support/tickets",{method:"POST",body:JSON.stringify(e)}),replyToTicket:(e,t)=>i(`/support/tickets/${e}/reply`,{method:"POST",body:JSON.stringify(t)}),deleteTicket:e=>i(`/support/tickets/${e}`,{method:"DELETE"}),getUnreadCount:()=>i("/support/unread-count")},z={getFeatureStatus:()=>i("/family/feature-status"),getAll:()=>i("/family"),get:e=>i(`/family/${e}`),create:e=>i("/family",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i(`/family/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>i(`/family/${e}`,{method:"DELETE"})},k={getTrips:()=>i("/schengen/trips"),getTrip:e=>i(`/schengen/trips/${e}`),createTrip:e=>i("/schengen/trips",{method:"POST",body:JSON.stringify({start_date:e.startDate,end_date:e.endDate,country:e.country,category:e.category,notes:e.notes})}),updateTrip:(e,t)=>i(`/schengen/trips/${e}`,{method:"PUT",body:JSON.stringify({...t.startDate!==void 0&&{start_date:t.startDate},...t.endDate!==void 0&&{end_date:t.endDate},...t.country!==void 0&&{country:t.country},...t.category!==void 0&&{category:t.category},...t.notes!==void 0&&{notes:t.notes}})}),deleteTrip:e=>i(`/schengen/trips/${e}`,{method:"DELETE"}),getSummary:()=>i("/schengen/summary"),getSettings:()=>i("/schengen/settings"),updateSettings:e=>i("/schengen/settings",{method:"PUT",body:JSON.stringify(e)}),getFeatureStatus:()=>i("/schengen/feature-status"),simulateTrip:e=>i("/schengen/simulate",{method:"POST",body:JSON.stringify({start_date:e.startDate,end_date:e.endDate})}),generateReport:()=>i("/schengen/report"),testAlert:()=>i("/schengen/test-alert",{method:"POST"}),storeLocation:e=>i("/schengen/location",{method:"POST",body:JSON.stringify(e)}),getLocationHistory:e=>i("/schengen/location/history",{method:"GET",...e&&{headers:{"X-Query-Params":JSON.stringify(e)}}}),getTodayStatus:()=>i("/schengen/location/today"),geocode:(e,t)=>i("/schengen/location/geocode",{method:"POST",body:JSON.stringify({lat:e,lng:t})}),deleteLocation:e=>i(`/schengen/location/${e}`,{method:"DELETE"}),clearLocationHistory:()=>i("/schengen/location/clear",{method:"POST"}),getLocationSettings:()=>i("/schengen/location/settings"),updateLocationSettings:e=>i("/schengen/location/settings",{method:"PUT",body:JSON.stringify({trackingEnabled:e.tracking_enabled,dailyReminder:e.daily_reminder,autoDetect:e.auto_detect})}),detectFromIP:()=>i("/schengen/location/detect")},n={dashboard:["dashboard"],projects:["projects"],project:e=>["project",e],tasks:(e,t)=>["tasks",e,t],task:e=>["task",e],taskChecklist:e=>["taskChecklist",e],activity:e=>["activity",e],user:["user"],userSettings:["userSettings"],files:(e,t)=>["files",e,t],file:e=>["file",e],notes:(e,t)=>["notes",e,t],note:e=>["note",e],profile:["profile"],profileCompletion:["profileCompletion"],checklists:e=>["checklists",e],checklist:e=>["checklist",e],documentTypes:["documentTypes"],generatedDocuments:e=>["generatedDocuments",e],glossary:["glossary"],glossarySearch:e=>["glossary","search",e],verificationHistory:e=>["verificationHistory",e],guides:["guides"],chatSearch:e=>["chatSearch",e],guide:e=>["guide",e],personalizedGuide:e=>["personalizedGuide",e],chatCategories:["chatCategories"],membership:["membership"],subscriptions:["subscriptions"],payments:["payments"],upgradeOptions:["upgradeOptions"],supportTickets:["supportTickets"],supportTicket:e=>["supportTicket",e],supportUnreadCount:["supportUnreadCount"],savedReports:["savedReports"],familyMembers:["familyMembers"],familyMember:e=>["familyMember",e],familyFeatureStatus:["familyFeatureStatus"],schengenTrips:["schengenTrips"],schengenTrip:e=>["schengenTrip",e],schengenSummary:["schengenSummary"],schengenSettings:["schengenSettings"],schengenFeatureStatus:["schengenFeatureStatus"],schengenLocationHistory:["schengenLocationHistory"],schengenLocationToday:["schengenLocationToday"],schengenLocationSettings:["schengenLocationSettings"]};function ye(){return x({queryKey:n.dashboard,queryFn:de.get,staleTime:f.DEFAULT})}function Le(){const e=d();return u({mutationFn:de.dismissWelcomeBanner,onSuccess:()=>{e.setQueryData(n.dashboard,t=>t&&{...t,welcome_banner:null})}})}function he(){return x({queryKey:n.user,queryFn:O.me,staleTime:f.MEDIUM})}function ss(){const e=d();return u({mutationFn:t=>O.updateProfile(t),onSuccess:t=>{e.setQueryData(n.user,t)}})}function Oe(){return x({queryKey:n.userSettings,queryFn:O.getSettings,staleTime:f.MEDIUM})}function rs(){const e=d();return u({mutationFn:t=>O.updateSettings(t),onMutate:async t=>{await e.cancelQueries({queryKey:n.userSettings});const r=e.getQueryData(n.userSettings);return r&&e.setQueryData(n.userSettings,{...r,...t}),{previousSettings:r}},onError:(t,r,a)=>{a!=null&&a.previousSettings&&e.setQueryData(n.userSettings,a.previousSettings)},onSuccess:t=>{e.setQueryData(n.userSettings,t)}})}function as(){return u({mutationFn:e=>O.deleteAccount(e)})}function ns(){const e=d();return u({mutationFn:t=>V.reset(t),onSuccess:()=>{e.invalidateQueries()}})}function Ae(){const e=d();return u({mutationFn:({id:t,data:r})=>Fe.update(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:n.dashboard}),e.invalidateQueries({queryKey:n.projects}),e.setQueryData(n.project(t.id),t)}})}function is(e,t){return x({queryKey:n.tasks(e,t),queryFn:()=>L.list(e,t),enabled:e>0,staleTime:f.DEFAULT})}function os(e){const t=d();return u({mutationFn:r=>L.create(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:n.tasks(e)}),t.invalidateQueries({queryKey:n.dashboard})}})}function cs(){const e=d();return u({mutationFn:({id:t,data:r})=>L.update(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:n.tasks(t.project_id)}),e.invalidateQueries({queryKey:n.dashboard}),e.setQueryData(n.task(t.id),t)}})}function ls(){const e=d();return u({mutationFn:({id:t,status:r})=>L.updateStatus(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:n.tasks(t.project_id)}),e.invalidateQueries({queryKey:n.dashboard}),e.setQueryData(n.task(t.id),t)}})}function us(){const e=d();return u({mutationFn:({id:t,projectId:r})=>L.delete(t).then(a=>({...a,projectId:r})),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.tasks(r.projectId)}),e.invalidateQueries({queryKey:n.dashboard})}})}function ds(e,t){return x({queryKey:n.activity(e),queryFn:()=>Me.list(e,t),enabled:e>0,staleTime:f.DYNAMIC})}function ms(e,t){return x({queryKey:n.files(e,t),queryFn:()=>A.list(e,t),enabled:e>0,staleTime:f.DEFAULT})}function ys(e){const t=d();return u({mutationFn:({file:r,data:a})=>A.upload(e,r,a),onSuccess:()=>{t.invalidateQueries({queryKey:n.files(e)}),t.invalidateQueries({queryKey:n.dashboard})}})}function hs(){const e=d();return u({mutationFn:({id:t,data:r})=>A.update(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:n.files(t.project_id)}),e.setQueryData(n.file(t.id),t)}})}function ps(){const e=d();return u({mutationFn:({id:t,projectId:r})=>A.delete(t).then(a=>({...a,projectId:r})),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.files(r.projectId)}),e.invalidateQueries({queryKey:n.dashboard})}})}function gs(){return{download:e=>{const t=A.download(e);window.open(t,"_blank")}}}function xs(e,t){return x({queryKey:n.notes(e,t),queryFn:()=>U.list(e,t),enabled:e>0,staleTime:f.DEFAULT})}function fs(e){const t=d();return u({mutationFn:r=>U.create(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:n.notes(e)}),t.invalidateQueries({queryKey:n.activity(e)})}})}function bs(){const e=d();return u({mutationFn:({id:t,data:r})=>U.update(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:n.notes(t.project_id)}),e.setQueryData(n.note(t.id),t)}})}function vs(){const e=d();return u({mutationFn:({id:t,projectId:r})=>U.delete(t).then(a=>({...a,projectId:r})),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.notes(r.projectId)})}})}function ks(){const e=d();return u({mutationFn:t=>U.togglePin(t),onSuccess:t=>{e.invalidateQueries({queryKey:n.notes(t.project_id)}),e.setQueryData(n.note(t.id),t)}})}function js(){return x({queryKey:n.profile,queryFn:V.get,staleTime:f.MEDIUM})}function Ss(){const e=d();return u({mutationFn:t=>V.update(t),onMutate:async t=>{await e.cancelQueries({queryKey:n.profile});const r=e.getQueryData(n.profile);return r&&e.setQueryData(n.profile,{...r,...t}),{previousProfile:r}},onError:(t,r,a)=>{a!=null&&a.previousProfile&&e.setQueryData(n.profile,a.previousProfile)},onSuccess:t=>{e.setQueryData(n.profile,t),e.invalidateQueries({queryKey:n.profileCompletion})}})}function ws(){return x({queryKey:n.profileCompletion,queryFn:V.getCompletion,staleTime:f.SHORT})}function Ns(e){return x({queryKey:n.checklists(e),queryFn:()=>M.list(e),staleTime:f.SHORT})}function Ts(){const e=d();return u({mutationFn:({checklistType:t,itemId:r,data:a})=>M.updateItem(t,r,a),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.checklist(r.checklistType)}),e.invalidateQueries({queryKey:n.checklists()})}})}function Cs(e){return x({queryKey:n.taskChecklist(e),queryFn:()=>M.getTaskChecklist(e),enabled:e>0,staleTime:f.DEFAULT})}function qs(e){const t=d();return u({mutationFn:({itemId:r,completed:a})=>M.updateTaskChecklistItem(e,r,a),onSuccess:()=>{t.invalidateQueries({queryKey:n.taskChecklist(e)})}})}function _s(e){const t=d();return u({mutationFn:r=>M.addTaskChecklistItem(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:n.taskChecklist(e)})}})}function Es(e){const t=d();return u({mutationFn:r=>M.deleteTaskChecklistItem(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:n.taskChecklist(e)})}})}function Fs(){return x({queryKey:n.glossary,queryFn:De.getAll,staleTime:f.LONG})}function Ms(e){const t=d();return u({mutationFn:({file:r,verificationType:a})=>me.verifyFile(e,r,a),onSuccess:()=>{t.invalidateQueries({queryKey:n.verificationHistory(e)})}})}function Ds(e){return x({queryKey:n.verificationHistory(e),queryFn:()=>me.getHistory(e),enabled:e>0,staleTime:f.SHORT})}function Ps(){return x({queryKey:n.guides,queryFn:Z.list,staleTime:f.MEDIUM})}function Ls(e){return x({queryKey:n.personalizedGuide(e),queryFn:()=>Z.getPersonalized(e),enabled:!!e,staleTime:f.MEDIUM})}function Os(){const e=d();return u({mutationFn:t=>Z.generateAI(t),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.personalizedGuide(r)})}})}function As(){return x({queryKey:n.chatCategories,queryFn:ee.getCategories,staleTime:f.LONG})}function Us(){return u({mutationFn:e=>ee.send(e)})}function Ks(e){return x({queryKey:n.chatSearch(e),queryFn:()=>ee.searchTopics(e),enabled:e.length>=_e.MIN_QUERY_LENGTH,staleTime:f.DEFAULT})}function Rs(){return x({queryKey:n.membership,queryFn:_.getInfo,staleTime:f.MEDIUM})}function $s(){return x({queryKey:n.subscriptions,queryFn:_.getSubscriptions,staleTime:f.MEDIUM})}function Qs(){return x({queryKey:n.payments,queryFn:_.getPayments,staleTime:f.MEDIUM})}function Is(){const e=d();return u({mutationFn:t=>_.cancelSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.subscriptions}),e.invalidateQueries({queryKey:n.membership})}})}function Hs(){const e=d();return u({mutationFn:t=>_.suspendSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.subscriptions}),e.invalidateQueries({queryKey:n.membership})}})}function Vs(){const e=d();return u({mutationFn:t=>_.resumeSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:n.subscriptions}),e.invalidateQueries({queryKey:n.membership})}})}function zs(){return x({queryKey:n.upgradeOptions,queryFn:_.getUpgradeOptions,staleTime:f.LONG})}function Js(){return x({queryKey:n.supportTickets,queryFn:D.getTickets,staleTime:f.DEFAULT})}function Gs(e){return x({queryKey:n.supportTicket(e||0),queryFn:()=>{if(!e)throw new Error("ticketId is required");return D.getTicket(e)},enabled:!!e,staleTime:f.DYNAMIC})}function Bs(){return x({queryKey:n.supportUnreadCount,queryFn:D.getUnreadCount,staleTime:f.DEFAULT,refetchInterval:qe.SUPPORT_UNREAD})}function Ws(){const e=d();return u({mutationFn:D.createTicket,onSuccess:()=>{e.invalidateQueries({queryKey:n.supportTickets}),e.invalidateQueries({queryKey:n.supportUnreadCount})}})}function Ys(){const e=d();return u({mutationFn:({ticketId:t,content:r})=>D.replyToTicket(t,{content:r}),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:n.supportTickets}),e.invalidateQueries({queryKey:n.supportTicket(r.ticketId)})}})}function Xs(){const e=d();return u({mutationFn:D.deleteTicket,onSuccess:()=>{e.invalidateQueries({queryKey:n.supportTickets}),e.invalidateQueries({queryKey:n.supportUnreadCount})}})}function Zs(){return x({queryKey:n.savedReports,queryFn:Pe.getSavedReports,staleTime:f.SHORT})}function er(){return x({queryKey:n.familyMembers,queryFn:z.getAll,staleTime:f.DEFAULT})}function tr(){const e=d();return u({mutationFn:z.create,onSuccess:()=>{e.invalidateQueries({queryKey:n.familyMembers})}})}function sr(){const e=d();return u({mutationFn:({memberId:t,data:r})=>z.update(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:n.familyMembers})}})}function rr(){const e=d();return u({mutationFn:z.delete,onSuccess:()=>{e.invalidateQueries({queryKey:n.familyMembers})}})}function ar(){return x({queryKey:n.schengenTrips,queryFn:k.getTrips,staleTime:f.DEFAULT})}function nr(){return x({queryKey:n.schengenSettings,queryFn:k.getSettings,staleTime:f.MEDIUM})}function ir(){const e=d();return u({mutationFn:k.createTrip,onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenTrips}),e.invalidateQueries({queryKey:n.schengenSummary})}})}function or(){const e=d();return u({mutationFn:({id:t,data:r})=>k.updateTrip(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenTrips}),e.invalidateQueries({queryKey:n.schengenSummary})}})}function cr(){const e=d();return u({mutationFn:k.deleteTrip,onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenTrips}),e.invalidateQueries({queryKey:n.schengenSummary})}})}function lr(){const e=d();return u({mutationFn:t=>k.updateSettings(t),onSuccess:t=>{e.setQueryData(n.schengenSettings,t),e.invalidateQueries({queryKey:n.schengenSummary})}})}function ur(){return x({queryKey:n.schengenFeatureStatus,queryFn:k.getFeatureStatus,staleTime:f.MEDIUM})}function dr(){return u({mutationFn:k.simulateTrip})}function mr(){return u({mutationFn:k.generateReport})}function yr(){return u({mutationFn:k.testAlert})}function hr(e){return x({queryKey:n.schengenLocationHistory,queryFn:()=>k.getLocationHistory(e),staleTime:f.DEFAULT})}function pr(){return x({queryKey:n.schengenLocationToday,queryFn:k.getTodayStatus,staleTime:f.DEFAULT})}function gr(){const e=d();return u({mutationFn:k.storeLocation,onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenLocationHistory}),e.invalidateQueries({queryKey:n.schengenLocationToday})}})}function xr(){const e=d();return u({mutationFn:k.deleteLocation,onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenLocationHistory}),e.invalidateQueries({queryKey:n.schengenLocationToday})}})}function fr(){const e=d();return u({mutationFn:k.clearLocationHistory,onSuccess:()=>{e.invalidateQueries({queryKey:n.schengenLocationHistory}),e.invalidateQueries({queryKey:n.schengenLocationToday})}})}function br(){return x({queryKey:["schengenIPDetection"],queryFn:k.detectFromIP,staleTime:f.MEDIUM,retry:1})}const Ue={colors:{primary:"#22c55e",secondary:"#3b82f6",accent:"#f59e0b",sidebarBg:"#1f2937",sidebarText:"#ffffff",headerBg:"#ffffff"},layout:{showWpHeader:!1,showWpFooter:!1,showPromoBanner:!1,sidebarPosition:"left",sidebarCollapsed:!1},branding:{title:"Members Portal",logoUrl:""},features:{notifications:!0,fileUpload:!0},menu:[{id:"dashboard",label:"Dashboard",icon:"LayoutDashboard",path:"/dashboard"},{id:"tasks",label:"Tasks",icon:"CheckSquare",path:"/tasks"},{id:"checklists",label:"Checklists",icon:"ClipboardList",path:"/checklists"},{id:"timeline",label:"Timeline",icon:"Calendar",path:"/timeline"},{id:"messages",label:"Messages",icon:"MessageSquare",path:"/messages"},{id:"research",label:"Explore France",icon:"MapPin",path:"/research"},{id:"chat",label:"Ask AI",icon:"Bot",path:"/chat"},{id:"documents",label:"Documents",icon:"FileText",path:"/documents"},{id:"guides",label:"Guides",icon:"BookOpen",path:"/guides"},{id:"glossary",label:"Glossary",icon:"BookMarked",path:"/glossary"},{id:"schengen",label:"Schengen Tracker",icon:"Globe",path:"/schengen"},{id:"files",label:"Files",icon:"FolderOpen",path:"/files"},{id:"profile",label:"My Profile",icon:"User",path:"/profile"},{id:"family",label:"Family Members",icon:"Users",path:"/family"},{id:"membership",label:"Membership",icon:"CreditCard",path:"/membership"},{id:"settings",label:"Settings",icon:"Settings",path:"/settings"},{id:"help",label:"Help",icon:"HelpCircle",path:"/help"}],customCss:""},Ke=()=>typeof window<"u"&&window.PORTAL_SETTINGS?window.PORTAL_SETTINGS:Ue,Re=()=>{if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("view");if(t)return t}return"dashboard"},K=we((e,t)=>{const r=Ke();return{user:null,setUser:a=>e({user:a}),currentProject:null,setCurrentProject:a=>e({currentProject:a}),settings:r,updateSettings:a=>e(o=>({settings:{...o.settings,...a}})),sidebarCollapsed:r.layout.sidebarCollapsed,toggleSidebar:()=>e(a=>({sidebarCollapsed:!a.sidebarCollapsed})),setSidebarCollapsed:a=>e({sidebarCollapsed:a}),activeView:Re(),setActiveView:a=>e({activeView:a}),settingsTab:null,setSettingsTab:a=>e({settingsTab:a}),taskFilters:{stage:null,status:null,taskType:null},setTaskFilters:a=>e(o=>({taskFilters:{...o.taskFilters,...a}})),resetTaskFilters:()=>e({taskFilters:{stage:null,status:null,taskType:null}}),activeModal:null,modalData:null,openModal:(a,o=null)=>e({activeModal:a,modalData:o}),closeModal:()=>e({activeModal:null,modalData:null}),getMenuItems:()=>t().settings.menu,isMenuItemVisible:a=>t().settings.menu.some(o=>o.id===a)}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),m=(e,t)=>{const r=g.forwardRef(({color:a="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:y="",children:b,...h},p)=>g.createElement("svg",{ref:p,...$e,width:o,height:o,stroke:a,strokeWidth:l?Number(c)*24/Number(o):c,className:["lucide",`lucide-${Qe(e)}`,y].join(" "),...h},[...t.map(([v,j])=>g.createElement(v,j)),...Array.isArray(b)?b:[b]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=m("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=m("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=m("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=m("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=m("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=m("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=m("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=m("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=m("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=m("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=m("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=m("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=m("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=m("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=m("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=m("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=m("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=m("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=m("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=m("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=m("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=m("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=m("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=m("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=m("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=m("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=m("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=m("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=m("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=m("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=m("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=m("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=m("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=m("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=m("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=m("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=m("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class ht extends g.Component{constructor(r){super(r);B(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});B(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null}),window.location.hash="#dashboard",window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){console.error("ErrorBoundary caught an error:",r,a),this.props.onError&&this.props.onError(r,a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx(pt,{error:this.state.error,onRetry:this.handleRetry,onGoHome:this.handleGoHome}):this.props.children}}function pt({error:e,onRetry:t,onGoHome:r}){return s.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",role:"alert","aria-live":"assertive",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(E,{className:"w-8 h-8 text-red-600","aria-hidden":"true"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try again or return to the dashboard."}),e&&!1,s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsxs("button",{onClick:t,className:"btn btn-primary flex items-center gap-2",children:[s.jsx(ot,{className:"w-4 h-4","aria-hidden":"true"}),"Try Again"]}),s.jsxs("button",{onClick:r,className:"btn btn-secondary flex items-center gap-2",children:[s.jsx(rt,{className:"w-4 h-4","aria-hidden":"true"}),"Go to Dashboard"]})]})]})})}const gt={LayoutDashboard:ge,CheckSquare:Ge,FileText:te,MessageSquare:H,Users:yt,Settings:lt,HelpCircle:st,FolderOpen:ne,FolderKanban:ne,BookOpen:ze,Calendar:I,ClipboardList:Xe,BookMarked:Ve,Bot:Je,User:P,CreditCard:Ze,MapPin:nt,Headphones:tt,Globe:et},R={project:["dashboard","tasks","checklists","timeline","messages"],resources:["research","chat","documents","guides","glossary","schengen","files"],account:["profile","family","membership","support","settings","help"]},xt=e=>e?{project:[...e.project,...R.project.filter(t=>!e.project.includes(t))],resources:[...e.resources,...R.resources.filter(t=>!e.resources.includes(t))],account:[...e.account,...R.account.filter(t=>!e.account.includes(t))]}:R,ft=(e,t)=>{const r=xt(t),a=[{id:"project",label:"PROJECT",itemIds:r.project},{id:"resources",label:"RESOURCES",itemIds:r.resources},{id:"account",label:"ACCOUNT",itemIds:r.account}],o=e.reduce((c,l)=>(c[l.id]=l,c),{});return a.map(c=>({...c,items:c.itemIds.map(l=>o[l]).filter(l=>l!==void 0)})).filter(c=>c.items.length>0)};function bt(){const{sidebarCollapsed:e,toggleSidebar:t,activeView:r,setActiveView:a,settings:o}=K(),{data:c}=Oe(),l=o.menu,y=ft(l,c==null?void 0:c.menu_order),b={"--sidebar-bg":o.colors.sidebarBg,"--sidebar-text":o.colors.sidebarText};return s.jsxs("aside",{className:S("sidebar flex flex-col",e?"sidebar-collapsed":"sidebar-expanded"),style:b,children:[s.jsxs("div",{className:"flex items-center h-16 px-4 border-b border-gray-700/50",children:[!e&&s.jsxs("div",{className:"flex items-center gap-3",children:[o.branding.logoUrl?s.jsx("img",{src:o.branding.logoUrl,alt:o.branding.title,className:"h-8 w-auto"}):s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:o.colors.primary},children:s.jsx("span",{className:"text-white font-bold text-sm",children:"R2F"})}),s.jsx("span",{className:"font-semibold text-sidebar-textActive",children:o.branding.title})]}),e&&s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mx-auto",style:{backgroundColor:o.colors.primary},children:s.jsx("span",{className:"text-white font-bold text-sm",children:"R"})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin",children:y.map(h=>s.jsxs("div",{className:"mb-6",children:[!e&&s.jsx("h3",{className:"px-4 mb-2 text-xs font-semibold text-sidebar-text/60 uppercase tracking-wider",children:h.label}),s.jsx("ul",{className:"space-y-1 px-2",children:h.items.map(p=>{const v=gt[p.icon]||ge,j=r===p.id,N=()=>{p.id==="dashboard"?window.location.reload():a(p.id)};return s.jsx("li",{children:s.jsxs("button",{onClick:N,className:S("nav-item w-full",j&&"nav-item-active",e&&"justify-center px-2"),title:e?p.label:void 0,children:[s.jsx(v,{className:"w-5 h-5 flex-shrink-0"}),!e&&s.jsx("span",{children:p.label})]})},p.id)})})]},h.id))}),s.jsx("button",{onClick:t,className:"flex items-center justify-center h-12 border-t border-gray-700/50 text-sidebar-text hover:text-sidebar-textActive transition-colors",title:e?"Expand sidebar":"Collapse sidebar",children:e?s.jsx(Ye,{className:"w-5 h-5"}):s.jsxs(s.Fragment,{children:[s.jsx(We,{className:"w-5 h-5"}),s.jsx("span",{className:"ml-2 text-sm",children:"Collapse"})]})})]})}const vt={dashboard:"Dashboard",tasks:"Tasks",timeline:"Timeline",messages:"Messages",documents:"Documents",guides:"Guides",files:"Files",family:"Family Members",settings:"Settings",help:"Help & Support",profile:"My Profile",checklists:"Checklists",glossary:"Glossary",chat:"Ask AI",membership:"Membership"};function kt(){var h,p;const{activeView:e}=K(),{data:t}=he(),{data:r}=ye(),[a,o]=g.useState(!1),c=g.useRef(null),l=vt[e]||"Dashboard";g.useEffect(()=>{const v=j=>{c.current&&!c.current.contains(j.target)&&o(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const y=[];(h=r==null?void 0:r.task_stats)!=null&&h.overdue&&r.task_stats.overdue>0&&y.push({id:"overdue",type:"warning",title:`${r.task_stats.overdue} Overdue Task${r.task_stats.overdue>1?"s":""}`,message:"You have tasks that need immediate attention",time:"Now"}),r!=null&&r.upcoming_tasks&&r.upcoming_tasks.length>0&&y.push({id:"upcoming",type:"info",title:"Upcoming Deadlines",message:`${r.upcoming_tasks.length} tasks due soon`,time:"Today"}),(p=r==null?void 0:r.project)!=null&&p.days_until_move&&r.project.days_until_move<=30&&y.push({id:"move-date",type:"info",title:"Move Date Approaching",message:`${r.project.days_until_move} days until your move`,time:"Reminder"});const b=y.length;return s.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:l})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative hidden md:block",children:[s.jsx(ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400","aria-hidden":"true"}),s.jsx("input",{type:"search",placeholder:"Search...","aria-label":"Search across portal",className:"w-64 pl-10 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),s.jsxs("div",{className:"relative",ref:c,children:[s.jsxs("button",{onClick:()=>o(!a),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors","aria-label":`Notifications${b>0?` (${b} new)`:""}`,children:[s.jsx(He,{className:"w-5 h-5"}),b>0&&s.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),a&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),s.jsx("button",{onClick:()=>o(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:s.jsx(J,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:y.length>0?s.jsx("div",{className:"divide-y divide-gray-100",children:y.map(v=>s.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-0.5",children:v.type==="warning"?s.jsx(E,{className:"w-5 h-5 text-yellow-500"}):v.type==="success"?s.jsx(F,{className:"w-5 h-5 text-green-500"}):s.jsx(at,{className:"w-5 h-5 text-blue-500"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.title}),s.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:v.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:v.time})]})]})},v.id))}):s.jsxs("div",{className:"px-4 py-8 text-center",children:[s.jsx(F,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up!"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No new notifications"})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200",children:[t!=null&&t.avatar_url?s.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-8 h-8 rounded-full"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(P,{className:"w-4 h-4 text-gray-500"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:(t==null?void 0:t.display_name)||"Loading..."}),s.jsx("p",{className:"text-xs text-gray-500",children:t!=null&&t.is_member?"Member":"Free"})]})]})]})]})}function jt({stages:e,className:t}){return s.jsxs("div",{className:S("card",t),children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Progress Tracker"})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200",children:s.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${St(e)}%`}})}),s.jsx("div",{className:"relative flex justify-between",children:e.map((r,a)=>s.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/e.length}%`},children:[s.jsx("div",{className:S("w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all z-10",r.status==="completed"&&"bg-primary-500 border-primary-500",r.status==="current"&&"bg-white border-primary-500",r.status==="upcoming"&&"bg-white border-gray-300"),children:r.status==="completed"?s.jsx(Be,{className:"w-5 h-5 text-white"}):s.jsx("span",{className:S("text-sm font-medium",r.status==="current"?"text-primary-500":"text-gray-400"),children:a+1})}),s.jsxs("div",{className:"mt-3 text-center",children:[s.jsx("p",{className:S("text-sm font-medium",r.status==="completed"&&"text-primary-600",r.status==="current"&&"text-gray-900",r.status==="upcoming"&&"text-gray-400"),children:r.title}),r.total>0&&s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.completed,"/",r.total," tasks"]})]}),r.status==="current"&&r.total>0&&s.jsxs("div",{className:"mt-2 w-full max-w-[80px]",children:[s.jsx("div",{className:"progress-bar h-1",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${r.percentage}%`}})}),s.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1",children:[r.percentage,"%"]})]})]},r.slug))})]})})]})}function St(e){const t=e.filter(c=>c.status==="completed").length,r=e.find(c=>c.status==="current"),a=e.findIndex(c=>c.status==="current");if(e.length===0)return 0;const o=t/e.length*100;if(r&&a>=0){const c=100/e.length,l=r.percentage/100*c;return o+l}return o}function oe({task:e,onClick:t}){const r={todo:"status-todo",in_progress:"status-in-progress",waiting:"status-waiting",done:"status-done"},a={low:"priority-low",medium:"priority-medium",high:"priority-high",urgent:"priority-urgent"},o=c=>{t&&(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),t())};return s.jsxs("div",{onClick:t,onKeyDown:o,role:t?"button":void 0,tabIndex:t?0:void 0,className:S("flex items-center justify-between p-3 rounded-lg border transition-colors",e.is_overdue?"border-red-200 bg-red-50":"border-gray-200 bg-white hover:bg-gray-50",t&&"cursor-pointer"),children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),e.is_overdue&&s.jsx(E,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsx("span",{className:S("badge text-xs",r[e.status]),children:e.status_label}),s.jsx("span",{className:S("badge text-xs",a[e.priority]),children:e.priority_label}),e.due_date&&s.jsxs("span",{className:S("flex items-center gap-1 text-xs",e.is_overdue?"text-red-600":"text-gray-500"),children:[s.jsx(I,{className:"w-3 h-3"}),wt(e.due_date,e.days_until_due)]})]})]}),e.task_type==="team"&&s.jsx("span",{className:"badge badge-blue text-xs ml-2",children:"Team"})]})}function wt(e,t){return t===null?new Date(e).toLocaleDateString():t===0?"Today":t===1?"Tomorrow":t===-1?"Yesterday":t<0?`${Math.abs(t)} days ago`:t<=7?`In ${t} days`:new Date(e).toLocaleDateString()}const Nt={"check-circle":F,"plus-circle":ie,pencil:it,trash:dt,"arrows-right-left":Ie,"arrow-up-tray":mt,"document-text":te,"chat-bubble-bottom-center-text":H,"user-plus":P,user:P,envelope:H,"arrow-right":pe,"folder-plus":ie};function Tt({activities:e}){return s.jsxs("div",{className:"card h-full",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),s.jsx("div",{className:"card-body overflow-y-auto max-h-[500px] scrollbar-thin",children:e.length>0?s.jsx("div",{className:"space-y-4",children:e.map(t=>s.jsx(Ct,{activity:t},t.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(H,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No recent activity"})]})})]})}function Ct({activity:e}){const t=Nt[e.action_icon]||F;return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:e.user_avatar?s.jsx("img",{src:e.user_avatar,alt:e.user_name,className:"w-8 h-8 rounded-full"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsx(P,{className:"w-4 h-4 text-gray-500"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(t,{className:"w-4 h-4 text-gray-400"}),s.jsxs("p",{className:"text-sm text-gray-900",children:[s.jsx("span",{className:"font-medium",children:e.user_name})," ",s.jsx("span",{className:"text-gray-600",children:e.action_label.toLowerCase()})]})]}),e.description&&e.description!==e.action_label&&s.jsx("p",{className:"text-sm text-gray-600 mt-0.5 truncate",children:e.description}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.relative_time})]})]})}function qt({banner:e}){const[t,r]=g.useState(!0),a=Le(),o=async()=>{r(!1);try{await a.mutateAsync()}catch(c){console.error("Failed to dismiss banner:",c)}};return t?s.jsx("div",{className:"rounded-lg border-2 p-4 md:p-5 mb-6",style:{backgroundColor:e.bg_color,borderColor:e.border_color},role:"region","aria-label":"Welcome message",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:e.border_color},children:s.jsx(ut,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),s.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.message})]})]}),s.jsx("button",{onClick:o,className:"flex-shrink-0 p-1.5 rounded-full hover:bg-black/10 transition-colors","aria-label":"Dismiss welcome message",disabled:a.isPending,children:s.jsx(J,{className:"w-5 h-5 text-gray-600"})})]})}):null}const _t={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};function Et({isOpen:e,onClose:t,title:r,size:a="md",children:o,footer:c,showHeader:l=!0}){const y=g.useRef(null);g.useEffect(()=>{const h=p=>{p.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[e,t]);const b=h=>{h.target===y.current&&t()};return e?s.jsx("div",{ref:y,role:"presentation",onClick:b,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-in fade-in duration-200",children:s.jsxs("div",{className:S("w-full bg-white rounded-xl shadow-xl animate-in zoom-in-95 duration-200",_t[a]),children:[l&&r&&s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(J,{className:"w-5 h-5"})})]}),s.jsx("div",{className:S(l&&r?"px-6 py-4":"",!l&&"relative"),children:o}),c&&s.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:c})]})}):null}const Ft={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};function vr({isOpen:e,onClose:t,title:r,children:a,footer:o,side:c="right",width:l="md"}){const y=g.useRef(null);g.useEffect(()=>{const h=p=>{p.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",h),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[e,t]);const b=h=>{h.target===y.current&&t()};return e?s.jsx("div",{ref:y,role:"presentation",onClick:b,className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in duration-200",children:s.jsxs("div",{className:S("fixed inset-y-0 w-full bg-white shadow-xl flex flex-col",Ft[l],c==="right"?"right-0 animate-in slide-in-from-right":"left-0 animate-in slide-in-from-left","duration-300"),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:r||"Details"}),s.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:s.jsx(J,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:a}),o&&s.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:o})]})}):null}function ce(){const{data:e,isLoading:t,error:r}=ye(),{setActiveView:a,setSettingsTab:o}=K(),[c,l]=g.useState(!1),[y,b]=g.useState(""),h=Ae();if(t)return s.jsx(Mt,{});if(r)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"card p-8 text-center",children:[s.jsx(E,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Dashboard"}),s.jsx("p",{className:"text-gray-600",children:r.message})]})});if(!e)return null;const{project:p,stages:v,task_stats:j,profile_visa_label:N,welcome_banner:T,upcoming_tasks:C,overdue_tasks:G,recent_activity:xe}=e;return s.jsxs("div",{className:"p-6 space-y-6",children:[T&&s.jsx(qt,{banner:T}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p.title}),s.jsxs("p",{className:"text-gray-600 mt-1",children:[N?s.jsx("span",{children:N}):s.jsxs("button",{onClick:()=>{o("visa-profile"),a("settings")},className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 hover:underline",children:[s.jsx(te,{className:"w-4 h-4"}),s.jsx("span",{children:"Set your visa type in your profile"})]}),p.target_move_date&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-2",children:""}),s.jsx(I,{className:"w-4 h-4 inline-block mr-1"}),p.days_until_move!==null&&p.days_until_move>0?s.jsxs("span",{children:[p.days_until_move," days until move"]}):s.jsxs("span",{children:["Move date: ",new Date(p.target_move_date).toLocaleDateString()]})]})]})]}),s.jsxs("button",{className:"btn btn-primary",onClick:()=>{b(p.target_move_date||""),l(!0)},children:[s.jsx(I,{className:"w-4 h-4"}),"Update Move Date"]})]}),s.jsx(Et,{isOpen:c,onClose:()=>l(!1),title:"Update Move Date",size:"sm",footer:s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>{y&&p.id&&h.mutate({id:p.id,data:{target_move_date:y}},{onSuccess:()=>{l(!1)}})},disabled:h.isPending,children:h.isPending?"Saving...":"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-600",children:"When are you planning to move to France? This helps us prioritize your tasks and deadlines."}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"move-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Move Date"}),s.jsx("input",{id:"move-date",type:"date",value:y,onChange:q=>b(q.target.value),className:"input",min:new Date().toISOString().split("T")[0]})]})]})}),s.jsx(jt,{stages:v}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx($,{label:"Tasks Completed",value:`${j.completed}/${j.total}`,subtext:`${j.percentage}% complete`,icon:F,color:"green",onClick:()=>a("tasks")}),s.jsx($,{label:"In Progress",value:j.in_progress,subtext:"Tasks being worked on",icon:ae,color:"blue",onClick:()=>a("tasks")}),s.jsx($,{label:"To Do",value:j.todo,subtext:"Tasks remaining",icon:ae,color:"gray",onClick:()=>a("tasks")}),s.jsx($,{label:"Overdue",value:j.overdue,subtext:j.overdue>0?"Need attention!":"All on track",icon:E,color:j.overdue>0?"red":"green",onClick:()=>a("tasks")})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[G.length>0&&s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:[s.jsx(E,{className:"w-5 h-5"}),"Overdue Tasks"]}),s.jsx("span",{className:"badge badge-red",children:G.length})]}),s.jsx("div",{className:"card-body space-y-3",children:G.slice(0,5).map(q=>s.jsx(oe,{task:q},q.id))})]}),s.jsxs("div",{className:"card",children:[s.jsxs("div",{className:"card-header flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Tasks"}),s.jsxs("button",{onClick:()=>a("tasks"),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:["View all",s.jsx(pe,{className:"w-4 h-4"})]})]}),s.jsx("div",{className:"card-body",children:C.length>0?s.jsx("div",{className:"space-y-3",children:C.map(q=>s.jsx(oe,{task:q},q.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(F,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No upcoming tasks due soon!"})]})})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsx(Tt,{activities:xe})})]})]})}function $({label:e,value:t,subtext:r,icon:a,color:o,onClick:c}){const l={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",gray:"bg-gray-50 text-gray-600",red:"bg-red-50 text-red-600",yellow:"bg-yellow-50 text-yellow-600"};return s.jsx("button",{type:"button",onClick:c,className:"card p-5 w-full text-left hover:shadow-md transition-shadow cursor-pointer","aria-label":`${e}: ${t}. ${r}. Click to view tasks.`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r})]}),s.jsx("div",{className:S("p-2 rounded-lg",l[o]),children:s.jsx(a,{className:"w-5 h-5"})})]})})}function Mt(){return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"h-20 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"h-40 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>s.jsx("div",{className:"h-28 bg-gray-200 rounded-lg animate-pulse"},e))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 h-96 bg-gray-200 rounded-lg animate-pulse"}),s.jsx("div",{className:"h-96 bg-gray-200 rounded-lg animate-pulse"})]})]})}const Dt=g.lazy(()=>w(()=>import("./TasksView-CKq0y8MF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),Pt=g.lazy(()=>w(()=>import("./DocumentsView-BeCEmHUU.js"),__vite__mapDeps([13,1,2,3,14,4,5,8,15,16,12,17,18,19,6]),import.meta.url)),Lt=g.lazy(()=>w(()=>import("./MessagesView-BhCBrjuY.js"),__vite__mapDeps([20,1,2,3,8,21,12,22,23,10,24,14]),import.meta.url)),Ot=g.lazy(()=>w(()=>import("./TimelineView-CC_fUXgN.js"),__vite__mapDeps([25,1,2,3,26,11,7]),import.meta.url)),At=g.lazy(()=>w(()=>import("./SettingsView-BeuzW24j.js"),__vite__mapDeps([27,1,2,3,10,28,12,18,19,9]),import.meta.url)),Ut=g.lazy(()=>w(()=>import("./HelpView-zZ5QT1Zd.js"),__vite__mapDeps([29,1,2,3,19,30,14,17,31,32,33]),import.meta.url)),Kt=g.lazy(()=>w(()=>import("./GuidesView-BNSuRnkB.js"),__vite__mapDeps([34,1,2,3,35,32,33,36,16,10,22,14,37,17]),import.meta.url)),Rt=g.lazy(()=>w(()=>import("./FamilyView-Cqsk04HB.js"),__vite__mapDeps([38,1,2,3,14,26,39,35,21,12,11]),import.meta.url)),$t=g.lazy(()=>w(()=>import("./ProfileView-lZ5pUIfB.js"),__vite__mapDeps([40,1,2,3,10,28,14,32,37,18,19]),import.meta.url)),Qt=g.lazy(()=>w(()=>import("./ChecklistsView-B5w5qe2o.js"),__vite__mapDeps([41,1,2,3,24,7,18,19,21,6,31]),import.meta.url)),It=g.lazy(()=>w(()=>import("./GlossaryView-Dw73myFY.js"),__vite__mapDeps([42,1,2,3,30,14,43,35,19,44]),import.meta.url)),Ht=g.lazy(()=>w(()=>import("./KnowledgeBaseChat-Bw-tY4v3.js"),__vite__mapDeps([45,1,2,3,10,46,36,37,35,44,14,22]),import.meta.url)),Vt=g.lazy(()=>w(()=>import("./MembershipView-BegRNj29.js"),__vite__mapDeps([47,1,2,3,48,14,10]),import.meta.url)),zt=g.lazy(()=>w(()=>import("./ResearchView-CKfVb4d9.js"),__vite__mapDeps([49,1,2,23,43,10,46,14,28,3]),import.meta.url)),Jt=g.lazy(()=>w(()=>import("./SchengenDashboard-B5RFwrqz.js"),__vite__mapDeps([50,1,2,3,48,14,32,12,18,19,10,31,15,39,22]),import.meta.url));function Gt(){return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-8 h-8 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mx-auto mb-3",role:"status","aria-label":"Loading view"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Loading..."})]})})}function Bt(){const{activeView:e}=K(),t=g.useMemo(()=>{switch(e){case"dashboard":return s.jsx(ce,{});case"tasks":return s.jsx(Dt,{});case"messages":return s.jsx(Lt,{});case"documents":case"files":return s.jsx(Pt,{});case"timeline":return s.jsx(Ot,{});case"guides":return s.jsx(Kt,{});case"family":return s.jsx(Rt,{});case"settings":return s.jsx(At,{});case"help":return s.jsx(Ut,{});case"profile":return s.jsx($t,{});case"checklists":return s.jsx(Qt,{});case"glossary":return s.jsx(It,{});case"chat":return s.jsx(Ht,{});case"membership":return s.jsx(Vt,{});case"research":return s.jsx(zt,{});case"schengen":return s.jsx(Jt,{});default:return s.jsx(ce,{})}},[e]);return s.jsx(g.Suspense,{fallback:s.jsx(Gt,{}),children:t})}function Wt(){const{sidebarCollapsed:e,setUser:t}=K(),{data:r}=he();return g.useEffect(()=>{r&&t(r)},[r,t]),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(bt,{}),s.jsxs("div",{className:S("transition-all duration-300",e?"ml-16":"ml-64"),children:[s.jsx(kt,{}),s.jsx("main",{className:"min-h-[calc(100vh-4rem)]",children:s.jsx(ht,{children:s.jsx(Bt,{})})})]})]})}const Yt=new ve({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),le=document.getElementById("fra-portal-root");le&&W.createRoot(le).render(s.jsx(Se.StrictMode,{children:s.jsx(ke,{client:Yt,children:s.jsx(Wt,{})})}));export{ss as $,E as A,nt as B,F as C,vr as D,ks as E,te as F,vs as G,bs as H,fs as I,Bs as J,tt as K,xs as L,H as M,Js as N,at as O,ie as P,Ws as Q,Gs as R,ct as S,Ys as T,P as U,Xs as V,ds as W,J as X,lt as Y,He as Z,he as _,ae as a,as as a0,ns as a1,Be as a2,ot as a3,js as a4,ws as a5,Ss as a6,Oe as a7,rs as a8,yt as a9,$s as aA,Qs as aB,zs as aC,Is as aD,Hs as aE,Vs as aF,Pe as aG,ar as aH,nr as aI,ir as aJ,or as aK,cr as aL,lr as aM,it as aN,dr as aO,mr as aP,pr as aQ,gr as aR,et as aS,hr as aT,xr as aU,fr as aV,br as aW,ur as aX,yr as aY,Ze as aa,Je as ab,Ve as ac,Xe as ad,st as ae,ze as af,ge as ag,Ye as ah,rt as ai,ut as aj,pe as ak,Us as al,Ls as am,Os as an,Ps as ao,er as ap,tr as aq,sr as ar,rr as as,Ns as at,Ts as au,Fs as av,As as aw,We as ax,Ks as ay,Rs as az,I as b,m as c,qs as d,_s as e,Es as f,Ge as g,cs as h,ls as i,us as j,os as k,Et as l,K as m,ye as n,is as o,ys as p,mt as q,ne as r,ps as s,hs as t,Cs as u,gs as v,Ms as w,Ds as x,Zs as y,ms as z};
