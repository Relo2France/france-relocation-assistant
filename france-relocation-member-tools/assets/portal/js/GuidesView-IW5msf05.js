import{j as e}from"./vendor-query-D8MH73Ff.js";import{r as F}from"./vendor-react-F9Y4d3HK.js";import{a as ye}from"./vendor-utils-C5RVuWu4.js";import{c as Mt,F as Pt,ai as cs,aa as ms,a9 as ds,aj as Q,ak as Ft,a as st,ah as re,al as us,ab as Be,M as ps,U as fs,am as hs,a4 as Gt,an as xs,af as Qe,B as gs,m as ys,ao as bs,a5 as Ns,S as Ts}from"./main-D_NnQS1P.js";import{H as Es}from"./heart-BwVsQzBm.js";import{B as ws}from"./briefcase-CrCN80bu.js";import{G as _s}from"./graduation-cap-Cxi4KCOp.js";import{C as As}from"./car-Cla7Astn.js";import{S as Ut}from"./shield-ZK3rVvP3.js";import{L as ge}from"./loader-2-nL_GCFYo.js";import{S as js}from"./send-Cjp-8zhx.js";import{A as Ze}from"./alert-circle-CyJCKFve.js";import{D as vs}from"./dollar-sign-LSh1NkFc.js";import{E as Ss}from"./external-link-RKU9U7BU.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Mt("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Mt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),vt=[{id:"visa-application",title:"Complete Visa Application Guide",description:"Step-by-step walkthrough of the French visa application process, from choosing the right visa type to attending your appointment.",category:"Visa & Immigration",readTime:"25 min",difficulty:"beginner",featured:!0,icon:Pt,sections:["Choosing the right visa type","Required documents checklist","Filling out the application form","Booking your appointment","What to expect at the consulate","After approval: next steps"]},{id:"housing-france",title:"Finding Housing in France",description:"Navigate the French rental market with confidence. Learn about dossier requirements, guarantor options, and tenant rights.",category:"Housing",readTime:"20 min",difficulty:"intermediate",featured:!0,icon:cs,sections:["Understanding the rental market","Building your dossier locatif","Guarantor options (Visale, GLI)","Viewing apartments","Signing your lease","Tenant rights and responsibilities"]},{id:"banking-finance",title:"Banking & Finance Setup",description:"Open a French bank account, understand the banking system, and manage your finances as an expat.",category:"Finance",readTime:"15 min",difficulty:"beginner",icon:ms,sections:["Choosing a bank (traditional vs online)","Documents needed to open an account","Understanding French banking fees","Setting up automatic payments","International transfers","Tax considerations"]},{id:"healthcare-system",title:"French Healthcare System",description:"Understand how French healthcare works, register with CPAM, and choose complementary health insurance (mutuelle).",category:"Healthcare",readTime:"18 min",difficulty:"intermediate",featured:!0,icon:Es,sections:["How French healthcare works","Registering with CPAM","Getting your Carte Vitale","Choosing a mutuelle","Finding doctors and specialists","Pharmacy system"]},{id:"working-france",title:"Working in France",description:"Employment contracts, workplace culture, employee rights, and setting up as a freelancer or entrepreneur.",category:"Employment",readTime:"22 min",difficulty:"intermediate",icon:ws,sections:["Types of employment contracts","Understanding your payslip","Employee rights and benefits","Setting up as auto-entrepreneur","Workplace culture tips","Networking and job hunting"]},{id:"education-schools",title:"Education & Schools",description:"Navigate the French education system for your children, from maternelle to university options.",category:"Education",readTime:"16 min",difficulty:"beginner",icon:_s,sections:["French education system overview","Public vs private schools","International schools","Enrolling your child","After-school activities","Higher education options"]},{id:"driving-transport",title:"Driving & Transportation",description:"Exchange your driving license, understand French driving rules, and navigate public transportation.",category:"Transportation",readTime:"14 min",difficulty:"beginner",icon:As,sections:["Exchanging your driving license","Buying or leasing a car","Car insurance requirements","Public transportation options","Getting a Navigo pass","French driving rules"]},{id:"social-security",title:"Social Security & Benefits",description:"Register for French social security, understand your contributions, and access family benefits.",category:"Administration",readTime:"20 min",difficulty:"advanced",icon:Ut,sections:["Social security system overview","Registration process","Understanding contributions","Family benefits (CAF)","Retirement system","Unemployment benefits"]},{id:"family-relocation",title:"Relocating with Family",description:"Special considerations when moving to France with spouse and children, including visa requirements and settling in.",category:"Family",readTime:"18 min",difficulty:"intermediate",icon:ds,sections:["Family visa requirements","Spouse work authorization","Childcare options","Family healthcare coverage","Activities and integration","Support networks"]}],Rs=[{id:"all",label:"All Guides"},{id:"Visa & Immigration",label:"Visa & Immigration"},{id:"Housing",label:"Housing"},{id:"Finance",label:"Finance"},{id:"Healthcare",label:"Healthcare"},{id:"Employment",label:"Employment"},{id:"Education",label:"Education"},{id:"Transportation",label:"Transportation"},{id:"Administration",label:"Administration"},{id:"Family",label:"Family"}],zt={beginner:"bg-green-100 text-green-700",intermediate:"bg-yellow-100 text-yellow-700",advanced:"bg-red-100 text-red-700"};function Is(n){return{"visa-application":["What documents do I need for my visa application?","How long does the visa process take?","What are the financial requirements?","Can I work while my visa is being processed?"],housing:["What documents do renters need in France?","How do I find a guarantor (garant)?","What is a dossier de location?","Should I buy or rent when first arriving?"],healthcare:["How do I register for the French healthcare system?","What is a Carte Vitale and how do I get one?","Do I need private health insurance?","How do I find an English-speaking doctor?"],banking:["Which French bank should I choose?","What documents do I need to open an account?","Can I open an account before moving?","How do transfers from the US work?"],taxes:["When do I become a French tax resident?","How does the US-France tax treaty work?","Do I need to file taxes in both countries?","What deductions can I claim?"],driving:["Can I drive with my US license in France?","How do I exchange my license?","Do I need an international driving permit?","What are the rules for buying a car?"]}[n]||["What are the first steps I should take?","What documents will I need?","How long does this process typically take?","What are common mistakes to avoid?"]}function Ls({guide:n,onClick:i}){const s=n.icon;return e.jsx("button",{onClick:i,className:"card p-5 text-left hover:shadow-md transition-shadow group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-50 rounded-lg group-hover:bg-primary-100 transition-colors",children:e.jsx(s,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:n.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[e.jsx(st,{className:"w-3 h-3"}),n.readTime]}),e.jsx("span",{className:ye("px-2 py-0.5 rounded-full",zt[n.difficulty]),children:n.difficulty})]})]}),e.jsx(re,{className:"w-5 h-5 text-gray-400 group-hover:text-primary-600 transition-colors"})]})})}function Ds({guide:n,onClick:i}){const s=n.icon;return e.jsxs("button",{onClick:i,className:"card p-6 text-left bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200 hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(s,{className:"w-5 h-5 text-primary-600"})}),e.jsx("span",{className:"text-xs font-medium text-primary-600",children:n.category})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-primary-700 transition-colors",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:n.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(st,{className:"w-3 h-3"}),n.readTime]}),e.jsxs("span",{className:"flex items-center gap-1 text-sm font-medium text-primary-600 group-hover:gap-2 transition-all",children:["Read guide",e.jsx(Ft,{className:"w-4 h-4"})]})]})]})}function ks({guide:n,onClick:i}){const s=n.icon;return e.jsxs("button",{onClick:i,className:"card p-6 text-left bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(s,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs font-medium rounded-full flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),"Personalized"]})]}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-purple-700 transition-colors",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:n.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"Based on your profile"}),e.jsxs("span",{className:"flex items-center gap-1 text-sm font-medium text-purple-600 group-hover:gap-2 transition-all",children:["View guide",e.jsx(Ft,{className:"w-4 h-4"})]})]})]})}function de(n){const i=[];let s=n,r=0;for(;s.length>0;){const d=s.match(/\[([^\]]+)\]\(([^)]+)\)/),p=s.match(/\*\*([^*]+)\*\*/),f=[d?{type:"link",match:d,index:s.indexOf(d[0])}:null,p?{type:"bold",match:p,index:s.indexOf(p[0])}:null].filter(Boolean).sort((y,A)=>((y==null?void 0:y.index)??1/0)-((A==null?void 0:A.index)??1/0));if(f.length===0||f[0]===null){i.push(s);break}const m=f[0];m.index>0&&i.push(s.slice(0,m.index)),m.type==="link"&&m.match?(i.push(e.jsx("a",{href:m.match[2],target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline font-medium",children:m.match[1]},r++)),s=s.slice(m.index+m.match[0].length)):m.type==="bold"&&m.match&&(i.push(e.jsx("strong",{className:"font-semibold text-gray-900",children:m.match[1]},r++)),s=s.slice(m.index+m.match[0].length))}return e.jsx(e.Fragment,{children:i})}function Os({content:n}){const i=n.split(`
`),s=[];let r=[],d=null;const p=()=>{if(r.length>0){const f=d==="ol";s.push(f?e.jsx("ol",{className:"my-3 ml-5 space-y-1.5 list-decimal text-sm",children:r.map((m,y)=>e.jsx("li",{className:"text-gray-700 leading-relaxed pl-1",children:m.formatted},y))},s.length):e.jsx("ul",{className:"my-3 ml-5 space-y-1.5 text-sm",children:r.map((m,y)=>e.jsxs("li",{className:"text-gray-700 leading-relaxed flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-500 mt-0.5",children:"•"}),e.jsx("span",{children:m.formatted})]},y))},s.length)),r=[],d=null}};return i.forEach(f=>{const m=f.trim();if(m.startsWith("## "))p(),s.push(e.jsx("h3",{className:"text-base font-semibold text-gray-900 mt-4 mb-2 pb-1 border-b border-gray-100",children:de(m.slice(3))},s.length));else if(m.startsWith("### "))p(),s.push(e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mt-3 mb-1.5",children:de(m.slice(4))},s.length));else if(m.startsWith("**")&&m.endsWith("**")&&!m.slice(2,-2).includes("**"))p(),s.push(e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mt-3 mb-1.5",children:m.slice(2,-2)},s.length));else if(m.match(/^[\-\*•]\s/)){d!=="ul"&&p(),d="ul";const y=m.replace(/^[\-\*•]\s/,"");r.push({text:y,formatted:de(y)})}else if(m.match(/^\d+\.\s/)){d!=="ol"&&p(),d="ol";const y=m.replace(/^\d+\.\s/,"");r.push({text:y,formatted:de(y)})}else m?(p(),s.push(e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed mb-2",children:de(m)},s.length))):p()}),p(),e.jsx("div",{className:"guide-message-content",children:s})}function Ms({guide:n,onBack:i}){const s=n.icon,[r,d]=F.useState([]),[p,f]=F.useState(""),[m,y]=F.useState(null),[A,h]=F.useState(!1),E=F.useRef(null),M=F.useRef(null),w=us();F.useEffect(()=>{r.length>0&&!A&&E.current&&setTimeout(()=>{var l;(l=E.current)==null||l.scrollIntoView({behavior:"smooth",block:"start"})},100)},[r,A]);const W=Is(n.id),X=async l=>{const S=l||p.trim();if(!S||w.isPending)return;const G={id:Date.now().toString(),role:"user",content:S,timestamp:new Date().toISOString()};d(x=>[...x,G]),f(""),h(!0);try{const x=await w.mutateAsync({message:S,context:n.id,include_practice:!0});if(x.success&&x.message){const B={id:(Date.now()+1).toString(),role:"assistant",content:x.message,timestamp:new Date().toISOString(),sources:x.sources};d(oe=>[...oe,B])}}catch{const x={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date().toISOString()};d(B=>[...B,x])}finally{h(!1)}},Z=l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),X())};return e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-12rem)]",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6 overflow-y-auto",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-primary-50 rounded-xl",children:e.jsx(s,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-primary-600",children:n.category}),e.jsx("span",{className:ye("px-2 py-0.5 rounded-full text-xs",zt[n.difficulty]),children:n.difficulty})]}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600",children:n.description})]})]})}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Guide Sections"}),e.jsx("div",{className:"space-y-1",children:n.sections.map((l,S)=>e.jsxs("button",{onClick:()=>{y(S),X(`Tell me about "${l}" for ${n.title.toLowerCase()}`)},className:ye("w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors",m===S?"bg-primary-50 text-primary-700":"hover:bg-gray-50 text-gray-700"),children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-xs font-medium flex-shrink-0",children:S+1}),e.jsx("span",{className:"text-sm",children:l})]},S))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4 text-yellow-500"}),"Quick Questions"]}),e.jsx("div",{className:"space-y-2",children:W.map((l,S)=>e.jsx("button",{onClick:()=>X(l),className:"w-full text-left text-sm text-gray-600 hover:text-primary-600 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:l},S))})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card h-full flex flex-col",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:e.jsx(Be,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Guide Assistant"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ask questions about ",n.title.toLowerCase()]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:r.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-50 flex items-center justify-center mb-4",children:e.jsx(ps,{className:"w-8 h-8 text-primary-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Start a conversation"}),e.jsx("p",{className:"text-sm text-gray-600 max-w-sm mb-4",children:"Click on a section from the guide, ask a quick question, or type your own question below."}),e.jsx("p",{className:"text-xs text-gray-500",children:"I can help you understand requirements, timelines, and next steps."})]}):e.jsxs("div",{className:"space-y-4",children:[r.map((l,S)=>{const G=l.role==="assistant"&&S===r.length-1;return l.role==="user"?e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("div",{className:"max-w-[80%] rounded-2xl rounded-tr-sm px-4 py-3 bg-primary-600 text-white",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:l.content})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center flex-shrink-0",children:e.jsx(fs,{className:"w-4 h-4 text-white"})})]},l.id):e.jsxs("div",{ref:G?E:void 0,className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"flex-1 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:e.jsx("div",{className:"px-5 py-4",children:e.jsx(Os,{content:l.content})})})]},l.id)}),A&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0",children:e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 animate-spin text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})]})]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("textarea",{ref:M,value:p,onChange:l=>f(l.target.value),onKeyPress:Z,placeholder:"Ask a question about this guide...",rows:1,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm",disabled:w.isPending}),e.jsx("button",{onClick:()=>X(),disabled:!p.trim()||w.isPending,className:ye("px-4 py-3 rounded-xl transition-colors flex items-center justify-center",p.trim()&&!w.isPending?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:e.jsx(js,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send • Shift+Enter for new line"})]})]})})]})]})}/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Wt,setPrototypeOf:St,isFrozen:Ps,getPrototypeOf:Fs,getOwnPropertyDescriptor:Gs}=Object;let{freeze:L,seal:O,create:Je}=Object,{apply:et,construct:tt}=typeof Reflect<"u"&&Reflect;L||(L=function(i){return i});O||(O=function(i){return i});et||(et=function(i,s){for(var r=arguments.length,d=new Array(r>2?r-2:0),p=2;p<r;p++)d[p-2]=arguments[p];return i.apply(s,d)});tt||(tt=function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),d=1;d<s;d++)r[d-1]=arguments[d];return new i(...r)});const je=D(Array.prototype.forEach),Us=D(Array.prototype.lastIndexOf),Ct=D(Array.prototype.pop),ue=D(Array.prototype.push),Hs=D(Array.prototype.splice),Se=D(String.prototype.toLowerCase),Ye=D(String.prototype.toString),Ve=D(String.prototype.match),pe=D(String.prototype.replace),zs=D(String.prototype.indexOf),Ws=D(String.prototype.trim),P=D(Object.prototype.hasOwnProperty),I=D(RegExp.prototype.test),fe=Bs(TypeError);function D(n){return function(i){i instanceof RegExp&&(i.lastIndex=0);for(var s=arguments.length,r=new Array(s>1?s-1:0),d=1;d<s;d++)r[d-1]=arguments[d];return et(n,i,r)}}function Bs(n){return function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return tt(n,s)}}function u(n,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Se;St&&St(n,null);let r=i.length;for(;r--;){let d=i[r];if(typeof d=="string"){const p=s(d);p!==d&&(Ps(i)||(i[r]=p),d=p)}n[d]=!0}return n}function Ys(n){for(let i=0;i<n.length;i++)P(n,i)||(n[i]=null);return n}function z(n){const i=Je(null);for(const[s,r]of Wt(n))P(n,s)&&(Array.isArray(r)?i[s]=Ys(r):r&&typeof r=="object"&&r.constructor===Object?i[s]=z(r):i[s]=r);return i}function he(n,i){for(;n!==null;){const r=Gs(n,i);if(r){if(r.get)return D(r.get);if(typeof r.value=="function")return D(r.value)}n=Fs(n)}function s(){return null}return s}const Rt=L(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qe=L(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xe=L(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Vs=L(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$e=L(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qs=L(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),It=L(["#text"]),Lt=L(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ke=L(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dt=L(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ve=L(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xs=O(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$s=O(/<%[\w\W]*|[\w\W]*%>/gm),Ks=O(/\$\{[\w\W]*/gm),Qs=O(/^data-[\-\w.\u00B7-\uFFFF]+$/),Zs=O(/^aria-[\-\w]+$/),Bt=O(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Js=O(/^(?:\w+script|data):/i),ea=O(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Yt=O(/^html$/i),ta=O(/^[a-z][.\w]*(-[.\w]+)+$/i);var kt=Object.freeze({__proto__:null,ARIA_ATTR:Zs,ATTR_WHITESPACE:ea,CUSTOM_ELEMENT:ta,DATA_ATTR:Qs,DOCTYPE_NAME:Yt,ERB_EXPR:$s,IS_ALLOWED_URI:Bt,IS_SCRIPT_OR_DATA:Js,MUSTACHE_EXPR:Xs,TMPLIT_EXPR:Ks});const xe={element:1,text:3,progressingInstruction:7,comment:8,document:9},sa=function(){return typeof window>"u"?null:window},aa=function(i,s){if(typeof i!="object"||typeof i.createPolicy!="function")return null;let r=null;const d="data-tt-policy-suffix";s&&s.hasAttribute(d)&&(r=s.getAttribute(d));const p="dompurify"+(r?"#"+r:"");try{return i.createPolicy(p,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+p+" could not be created."),null}},Ot=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Vt(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sa();const i=c=>Vt(c);if(i.version="3.3.1",i.removed=[],!n||!n.document||n.document.nodeType!==xe.document||!n.Element)return i.isSupported=!1,i;let{document:s}=n;const r=s,d=r.currentScript,{DocumentFragment:p,HTMLTemplateElement:f,Node:m,Element:y,NodeFilter:A,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:E,DOMParser:M,trustedTypes:w}=n,W=y.prototype,X=he(W,"cloneNode"),Z=he(W,"remove"),l=he(W,"nextSibling"),S=he(W,"childNodes"),G=he(W,"parentNode");if(typeof f=="function"){const c=s.createElement("template");c.content&&c.content.ownerDocument&&(s=c.content.ownerDocument)}let x,B="";const{implementation:oe,createNodeIterator:qt,createDocumentFragment:Xt,getElementsByTagName:$t}=s,{importNode:Kt}=r;let R=Ot();i.isSupported=typeof Wt=="function"&&typeof G=="function"&&oe&&oe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ce,ERB_EXPR:Re,TMPLIT_EXPR:Ie,DATA_ATTR:Qt,ARIA_ATTR:Zt,IS_SCRIPT_OR_DATA:Jt,ATTR_WHITESPACE:at,CUSTOM_ELEMENT:es}=kt;let{IS_ALLOWED_URI:nt}=kt,_=null;const it=u({},[...Rt,...qe,...Xe,...$e,...It]);let j=null;const rt=u({},[...Lt,...Ke,...Dt,...ve]);let b=Object.seal(Je(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,Le=null;const J=Object.seal(Je(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ot=!0,De=!0,lt=!1,ct=!0,ee=!1,be=!0,$=!1,ke=!1,Oe=!1,te=!1,Ne=!1,Te=!1,mt=!0,dt=!1;const ts="user-content-";let Me=!0,ce=!1,se={},U=null;const Pe=u({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ut=null;const pt=u({},["audio","video","img","source","image","track"]);let Fe=null;const ft=u({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ee="http://www.w3.org/1998/Math/MathML",we="http://www.w3.org/2000/svg",Y="http://www.w3.org/1999/xhtml";let ae=Y,Ge=!1,Ue=null;const ss=u({},[Ee,we,Y],Ye);let _e=u({},["mi","mo","mn","ms","mtext"]),Ae=u({},["annotation-xml"]);const as=u({},["title","style","font","a","script"]);let me=null;const ns=["application/xhtml+xml","text/html"],is="text/html";let T=null,ne=null;const rs=s.createElement("form"),ht=function(t){return t instanceof RegExp||t instanceof Function},He=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ne&&ne===t)){if((!t||typeof t!="object")&&(t={}),t=z(t),me=ns.indexOf(t.PARSER_MEDIA_TYPE)===-1?is:t.PARSER_MEDIA_TYPE,T=me==="application/xhtml+xml"?Ye:Se,_=P(t,"ALLOWED_TAGS")?u({},t.ALLOWED_TAGS,T):it,j=P(t,"ALLOWED_ATTR")?u({},t.ALLOWED_ATTR,T):rt,Ue=P(t,"ALLOWED_NAMESPACES")?u({},t.ALLOWED_NAMESPACES,Ye):ss,Fe=P(t,"ADD_URI_SAFE_ATTR")?u(z(ft),t.ADD_URI_SAFE_ATTR,T):ft,ut=P(t,"ADD_DATA_URI_TAGS")?u(z(pt),t.ADD_DATA_URI_TAGS,T):pt,U=P(t,"FORBID_CONTENTS")?u({},t.FORBID_CONTENTS,T):Pe,le=P(t,"FORBID_TAGS")?u({},t.FORBID_TAGS,T):z({}),Le=P(t,"FORBID_ATTR")?u({},t.FORBID_ATTR,T):z({}),se=P(t,"USE_PROFILES")?t.USE_PROFILES:!1,ot=t.ALLOW_ARIA_ATTR!==!1,De=t.ALLOW_DATA_ATTR!==!1,lt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,ct=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ee=t.SAFE_FOR_TEMPLATES||!1,be=t.SAFE_FOR_XML!==!1,$=t.WHOLE_DOCUMENT||!1,te=t.RETURN_DOM||!1,Ne=t.RETURN_DOM_FRAGMENT||!1,Te=t.RETURN_TRUSTED_TYPE||!1,Oe=t.FORCE_BODY||!1,mt=t.SANITIZE_DOM!==!1,dt=t.SANITIZE_NAMED_PROPS||!1,Me=t.KEEP_CONTENT!==!1,ce=t.IN_PLACE||!1,nt=t.ALLOWED_URI_REGEXP||Bt,ae=t.NAMESPACE||Y,_e=t.MATHML_TEXT_INTEGRATION_POINTS||_e,Ae=t.HTML_INTEGRATION_POINTS||Ae,b=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(b.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(b.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(b.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ee&&(De=!1),Ne&&(te=!0),se&&(_=u({},It),j=[],se.html===!0&&(u(_,Rt),u(j,Lt)),se.svg===!0&&(u(_,qe),u(j,Ke),u(j,ve)),se.svgFilters===!0&&(u(_,Xe),u(j,Ke),u(j,ve)),se.mathMl===!0&&(u(_,$e),u(j,Dt),u(j,ve))),t.ADD_TAGS&&(typeof t.ADD_TAGS=="function"?J.tagCheck=t.ADD_TAGS:(_===it&&(_=z(_)),u(_,t.ADD_TAGS,T))),t.ADD_ATTR&&(typeof t.ADD_ATTR=="function"?J.attributeCheck=t.ADD_ATTR:(j===rt&&(j=z(j)),u(j,t.ADD_ATTR,T))),t.ADD_URI_SAFE_ATTR&&u(Fe,t.ADD_URI_SAFE_ATTR,T),t.FORBID_CONTENTS&&(U===Pe&&(U=z(U)),u(U,t.FORBID_CONTENTS,T)),t.ADD_FORBID_CONTENTS&&(U===Pe&&(U=z(U)),u(U,t.ADD_FORBID_CONTENTS,T)),Me&&(_["#text"]=!0),$&&u(_,["html","head","body"]),_.table&&(u(_,["tbody"]),delete le.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw fe('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw fe('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=t.TRUSTED_TYPES_POLICY,B=x.createHTML("")}else x===void 0&&(x=aa(w,d)),x!==null&&typeof B=="string"&&(B=x.createHTML(""));L&&L(t),ne=t}},xt=u({},[...qe,...Xe,...Vs]),gt=u({},[...$e,...qs]),os=function(t){let a=G(t);(!a||!a.tagName)&&(a={namespaceURI:ae,tagName:"template"});const o=Se(t.tagName),g=Se(a.tagName);return Ue[t.namespaceURI]?t.namespaceURI===we?a.namespaceURI===Y?o==="svg":a.namespaceURI===Ee?o==="svg"&&(g==="annotation-xml"||_e[g]):!!xt[o]:t.namespaceURI===Ee?a.namespaceURI===Y?o==="math":a.namespaceURI===we?o==="math"&&Ae[g]:!!gt[o]:t.namespaceURI===Y?a.namespaceURI===we&&!Ae[g]||a.namespaceURI===Ee&&!_e[g]?!1:!gt[o]&&(as[o]||!xt[o]):!!(me==="application/xhtml+xml"&&Ue[t.namespaceURI]):!1},H=function(t){ue(i.removed,{element:t});try{G(t).removeChild(t)}catch{Z(t)}},K=function(t,a){try{ue(i.removed,{attribute:a.getAttributeNode(t),from:a})}catch{ue(i.removed,{attribute:null,from:a})}if(a.removeAttribute(t),t==="is")if(te||Ne)try{H(a)}catch{}else try{a.setAttribute(t,"")}catch{}},yt=function(t){let a=null,o=null;if(Oe)t="<remove></remove>"+t;else{const N=Ve(t,/^[\r\n\t ]+/);o=N&&N[0]}me==="application/xhtml+xml"&&ae===Y&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const g=x?x.createHTML(t):t;if(ae===Y)try{a=new M().parseFromString(g,me)}catch{}if(!a||!a.documentElement){a=oe.createDocument(ae,"template",null);try{a.documentElement.innerHTML=Ge?B:g}catch{}}const C=a.body||a.documentElement;return t&&o&&C.insertBefore(s.createTextNode(o),C.childNodes[0]||null),ae===Y?$t.call(a,$?"html":"body")[0]:$?a.documentElement:C},bt=function(t){return qt.call(t.ownerDocument||t,t,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},ze=function(t){return t instanceof E&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof h)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},Nt=function(t){return typeof m=="function"&&t instanceof m};function V(c,t,a){je(c,o=>{o.call(i,t,a,ne)})}const Tt=function(t){let a=null;if(V(R.beforeSanitizeElements,t,null),ze(t))return H(t),!0;const o=T(t.nodeName);if(V(R.uponSanitizeElement,t,{tagName:o,allowedTags:_}),be&&t.hasChildNodes()&&!Nt(t.firstElementChild)&&I(/<[/\w!]/g,t.innerHTML)&&I(/<[/\w!]/g,t.textContent)||t.nodeType===xe.progressingInstruction||be&&t.nodeType===xe.comment&&I(/<[/\w]/g,t.data))return H(t),!0;if(!(J.tagCheck instanceof Function&&J.tagCheck(o))&&(!_[o]||le[o])){if(!le[o]&&wt(o)&&(b.tagNameCheck instanceof RegExp&&I(b.tagNameCheck,o)||b.tagNameCheck instanceof Function&&b.tagNameCheck(o)))return!1;if(Me&&!U[o]){const g=G(t)||t.parentNode,C=S(t)||t.childNodes;if(C&&g){const N=C.length;for(let k=N-1;k>=0;--k){const q=X(C[k],!0);q.__removalCount=(t.__removalCount||0)+1,g.insertBefore(q,l(t))}}}return H(t),!0}return t instanceof y&&!os(t)||(o==="noscript"||o==="noembed"||o==="noframes")&&I(/<\/no(script|embed|frames)/i,t.innerHTML)?(H(t),!0):(ee&&t.nodeType===xe.text&&(a=t.textContent,je([Ce,Re,Ie],g=>{a=pe(a,g," ")}),t.textContent!==a&&(ue(i.removed,{element:t.cloneNode()}),t.textContent=a)),V(R.afterSanitizeElements,t,null),!1)},Et=function(t,a,o){if(mt&&(a==="id"||a==="name")&&(o in s||o in rs))return!1;if(!(De&&!Le[a]&&I(Qt,a))){if(!(ot&&I(Zt,a))){if(!(J.attributeCheck instanceof Function&&J.attributeCheck(a,t))){if(!j[a]||Le[a]){if(!(wt(t)&&(b.tagNameCheck instanceof RegExp&&I(b.tagNameCheck,t)||b.tagNameCheck instanceof Function&&b.tagNameCheck(t))&&(b.attributeNameCheck instanceof RegExp&&I(b.attributeNameCheck,a)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(a,t))||a==="is"&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&I(b.tagNameCheck,o)||b.tagNameCheck instanceof Function&&b.tagNameCheck(o))))return!1}else if(!Fe[a]){if(!I(nt,pe(o,at,""))){if(!((a==="src"||a==="xlink:href"||a==="href")&&t!=="script"&&zs(o,"data:")===0&&ut[t])){if(!(lt&&!I(Jt,pe(o,at,"")))){if(o)return!1}}}}}}}return!0},wt=function(t){return t!=="annotation-xml"&&Ve(t,es)},_t=function(t){V(R.beforeSanitizeAttributes,t,null);const{attributes:a}=t;if(!a||ze(t))return;const o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j,forceKeepAttr:void 0};let g=a.length;for(;g--;){const C=a[g],{name:N,namespaceURI:k,value:q}=C,ie=T(N),We=q;let v=N==="value"?We:Ws(We);if(o.attrName=ie,o.attrValue=v,o.keepAttr=!0,o.forceKeepAttr=void 0,V(R.uponSanitizeAttribute,t,o),v=o.attrValue,dt&&(ie==="id"||ie==="name")&&(K(N,t),v=ts+v),be&&I(/((--!?|])>)|<\/(style|title|textarea)/i,v)){K(N,t);continue}if(ie==="attributename"&&Ve(v,"href")){K(N,t);continue}if(o.forceKeepAttr)continue;if(!o.keepAttr){K(N,t);continue}if(!ct&&I(/\/>/i,v)){K(N,t);continue}ee&&je([Ce,Re,Ie],jt=>{v=pe(v,jt," ")});const At=T(t.nodeName);if(!Et(At,ie,v)){K(N,t);continue}if(x&&typeof w=="object"&&typeof w.getAttributeType=="function"&&!k)switch(w.getAttributeType(At,ie)){case"TrustedHTML":{v=x.createHTML(v);break}case"TrustedScriptURL":{v=x.createScriptURL(v);break}}if(v!==We)try{k?t.setAttributeNS(k,N,v):t.setAttribute(N,v),ze(t)?H(t):Ct(i.removed)}catch{K(N,t)}}V(R.afterSanitizeAttributes,t,null)},ls=function c(t){let a=null;const o=bt(t);for(V(R.beforeSanitizeShadowDOM,t,null);a=o.nextNode();)V(R.uponSanitizeShadowNode,a,null),Tt(a),_t(a),a.content instanceof p&&c(a.content);V(R.afterSanitizeShadowDOM,t,null)};return i.sanitize=function(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=null,o=null,g=null,C=null;if(Ge=!c,Ge&&(c="<!-->"),typeof c!="string"&&!Nt(c))if(typeof c.toString=="function"){if(c=c.toString(),typeof c!="string")throw fe("dirty is not a string, aborting")}else throw fe("toString is not a function");if(!i.isSupported)return c;if(ke||He(t),i.removed=[],typeof c=="string"&&(ce=!1),ce){if(c.nodeName){const q=T(c.nodeName);if(!_[q]||le[q])throw fe("root node is forbidden and cannot be sanitized in-place")}}else if(c instanceof m)a=yt("<!---->"),o=a.ownerDocument.importNode(c,!0),o.nodeType===xe.element&&o.nodeName==="BODY"||o.nodeName==="HTML"?a=o:a.appendChild(o);else{if(!te&&!ee&&!$&&c.indexOf("<")===-1)return x&&Te?x.createHTML(c):c;if(a=yt(c),!a)return te?null:Te?B:""}a&&Oe&&H(a.firstChild);const N=bt(ce?c:a);for(;g=N.nextNode();)Tt(g),_t(g),g.content instanceof p&&ls(g.content);if(ce)return c;if(te){if(Ne)for(C=Xt.call(a.ownerDocument);a.firstChild;)C.appendChild(a.firstChild);else C=a;return(j.shadowroot||j.shadowrootmode)&&(C=Kt.call(r,C,!0)),C}let k=$?a.outerHTML:a.innerHTML;return $&&_["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&I(Yt,a.ownerDocument.doctype.name)&&(k="<!DOCTYPE "+a.ownerDocument.doctype.name+`>
`+k),ee&&je([Ce,Re,Ie],q=>{k=pe(k,q," ")}),x&&Te?x.createHTML(k):k},i.setConfig=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};He(c),ke=!0},i.clearConfig=function(){ne=null,ke=!1},i.isValidAttribute=function(c,t,a){ne||He({});const o=T(c),g=T(t);return Et(o,g,a)},i.addHook=function(c,t){typeof t=="function"&&ue(R[c],t)},i.removeHook=function(c,t){if(t!==void 0){const a=Us(R[c],t);return a===-1?void 0:Hs(R[c],a,1)[0]}return Ct(R[c])},i.removeHooks=function(c){R[c]=[]},i.removeAllHooks=function(){R=Ot()},i}var na=Vt();function ia({html:n,className:i,as:s="div"}){const r=na.sanitize(n,{ALLOWED_TAGS:["p","br","strong","b","em","i","u","s","h1","h2","h3","h4","h5","h6","ul","ol","li","a","blockquote","code","pre","table","thead","tbody","tr","th","td","span","div"],ALLOWED_ATTR:["href","target","rel","class","id"],ALLOW_DATA_ATTR:!1});return e.jsx(s,{className:i,dangerouslySetInnerHTML:{__html:r}})}function ra({guideType:n,onBack:i}){var y,A;const{data:s,isLoading:r,error:d}=hs(n),{data:p}=Gt(),f=xs(),m=()=>{f.mutate(n)};return r?e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ge,{className:"w-8 h-8 text-primary-600 animate-spin"})})]}):d?e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Ze,{className:"w-12 h-12 text-red-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load guide"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"We could not load your personalized guide. Please try again."}),e.jsx("button",{onClick:m,disabled:f.isPending,className:"btn-primary",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Generate AI Guide"]})})]})]}):s?e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:e.jsx(Q,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs font-medium rounded-full",children:"Personalized"}),((y=s.metadata)==null?void 0:y.last_updated)&&e.jsxs("span",{className:"text-xs text-purple-600",children:["Updated ",new Date(s.metadata.last_updated).toLocaleDateString()]})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),e.jsx("p",{className:"text-gray-700",children:s.description})]})]}),!s.is_personalized&&e.jsx("button",{onClick:m,disabled:f.isPending,className:"btn-primary whitespace-nowrap",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Regenerate"]})})]})}),n==="apostille"&&((A=s.metadata)==null?void 0:A.states)&&s.metadata.states.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your State-Specific Information"}),e.jsx("div",{className:"space-y-4",children:s.metadata.states.map(h=>e.jsxs("div",{className:"card p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(gs,{className:"w-4 h-4 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:h.state_name})]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.document})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Agency"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.agency})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Method"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.method})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Cost"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"w-3 h-3 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.cost})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Processing Time"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(st,{className:"w-3 h-3 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-900",children:h.processing_time})]})]})]}),h.website&&e.jsxs("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700 font-medium",children:["Visit agency website",e.jsx(Ss,{className:"w-3 h-3"})]}),h.notes&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-yellow-800",children:h.notes})})]},h.state))})]}),s.sections&&s.sections.length>0&&e.jsx("div",{className:"space-y-6",children:s.sections.map((h,E)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-sm font-semibold flex-shrink-0",children:E+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:h.title}),e.jsx(ia,{html:h.content,className:"prose prose-sm max-w-none text-gray-700"}),h.tips&&h.tips.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Tips"]}),e.jsx("ul",{className:"space-y-1",children:h.tips.map((M,w)=>e.jsx("li",{className:"text-sm text-blue-800",children:M},w))})]}),h.warnings&&h.warnings.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-yellow-900 mb-2 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Important Notes"]}),e.jsx("ul",{className:"space-y-1",children:h.warnings.map((M,w)=>e.jsx("li",{className:"text-sm text-yellow-800",children:M},w))})]})]})]})},h.id))})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[e.jsx(re,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Qe,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Guide not available"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"This personalized guide has not been generated yet."}),e.jsx("button",{onClick:m,disabled:f.isPending,className:"btn-primary",children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4"}),"Generate AI Guide"]})})]})]})}function Ta(){const[n,i]=F.useState(""),[s,r]=F.useState("all"),[d,p]=F.useState(null),[f,m]=F.useState(null),{setActiveView:y}=ys(),{data:A,isLoading:h}=bs(),{data:E}=Gt(),{data:M}=Ns(),w=vt.filter(l=>{const S=n===""||l.title.toLowerCase().includes(n.toLowerCase())||l.description.toLowerCase().includes(n.toLowerCase()),G=s==="all"||l.category===s;return S&&G}),W=vt.filter(l=>l.featured),Z=(()=>{if(!E)return[];const l=[];return E.visa_type&&E.visa_type!=="undecided"&&l.push({type:"visa-application",title:"Your Visa Application Guide",description:`Personalized guide for your ${E.visa_type} visa application`,icon:Pt}),(E.birth_state||E.spouse_birth_state||E.marriage_state)&&l.push({type:"apostille",title:"Your Apostille Guide",description:"State-specific apostille information for your documents",icon:Ut}),E.has_pets&&E.has_pets!=="no"&&l.push({type:"pet-relocation",title:"Your Pet Relocation Guide",description:`Personalized guide for relocating with ${E.has_pets}`,icon:Cs}),l})();return f?e.jsx(ra,{guideType:f,onBack:()=>m(null)}):d?e.jsx(Ms,{guide:d,onBack:()=>p(null)}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relocation Guides"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive guides to help you navigate every aspect of moving to France"})]}),Z.length>0&&n===""&&s==="all"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-purple-600"}),"Personalized for You"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Z.map(l=>e.jsx(ks,{guide:l,onClick:()=>m(l.type)},l.type))})]}),M&&M.percentage<50&&n===""&&s==="all"&&e.jsx("div",{className:"mb-8 card p-4 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ze,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Complete your profile for personalized guides"}),e.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Fill out your profile to get customized guides based on your visa type, location, and personal circumstances. Your profile is currently ",M.percentage,"% complete."]}),e.jsx("button",{onClick:()=>y("settings"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 underline",children:"Complete your profile"})]})]})}),e.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search guides...",value:n,onChange:l=>i(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsx("div",{className:"mb-8 flex flex-wrap gap-2",children:Rs.map(l=>e.jsx("button",{onClick:()=>r(l.id),className:ye("px-4 py-2 rounded-full text-sm font-medium transition-colors",s===l.id?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:l.label},l.id))}),n===""&&s==="all"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5 text-yellow-500"}),"Featured Guides"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:W.map(l=>e.jsx(Ds,{guide:l,onClick:()=>p(l)},l.id))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-primary-600"}),s==="all"?"All Guides":s,e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",w.length,")"]})]}),w.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Qe,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guides found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(l=>e.jsx(Ls,{guide:l,onClick:()=>p(l)},l.id))})]})]})}export{Ta as default};
