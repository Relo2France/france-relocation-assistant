var d2=Object.defineProperty;var E0=e=>{throw TypeError(e)};var m2=(e,t,n)=>t in e?d2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var su=(e,t,n)=>m2(e,typeof t!="symbol"?t+"":t,n),au=(e,t,n)=>t.has(e)||E0("Cannot "+n);var S=(e,t,n)=>(au(e,t,"read from private field"),n?n.call(e):t.get(e)),X=(e,t,n)=>t.has(e)?E0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Z=(e,t,n,s)=>(au(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ne=(e,t,n)=>(au(e,t,"access private method"),n);var bl=(e,t,n,s)=>({set _(a){Z(e,t,a,n)},get _(){return S(e,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function Dm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dg={exports:{}},Sc={},Qg={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),h2=Symbol.for("react.portal"),p2=Symbol.for("react.fragment"),f2=Symbol.for("react.strict_mode"),g2=Symbol.for("react.profiler"),x2=Symbol.for("react.provider"),y2=Symbol.for("react.context"),v2=Symbol.for("react.forward_ref"),b2=Symbol.for("react.suspense"),j2=Symbol.for("react.memo"),N2=Symbol.for("react.lazy"),P0=Symbol.iterator;function w2(e){return e===null||typeof e!="object"?null:(e=P0&&e[P0]||e["@@iterator"],typeof e=="function"?e:null)}var Lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rg=Object.assign,Ig={};function _a(e,t,n){this.props=e,this.context=t,this.refs=Ig,this.updater=n||Lg}_a.prototype.isReactComponent={};_a.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Og(){}Og.prototype=_a.prototype;function Qm(e,t,n){this.props=e,this.context=t,this.refs=Ig,this.updater=n||Lg}var Lm=Qm.prototype=new Og;Lm.constructor=Qm;Rg(Lm,_a.prototype);Lm.isPureReactComponent=!0;var M0=Array.isArray,zg=Object.prototype.hasOwnProperty,Rm={current:null},$g={key:!0,ref:!0,__self:!0,__source:!0};function qg(e,t,n){var s,a={},i=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)zg.call(t,s)&&!$g.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:el,type:e,key:i,ref:l,props:a,_owner:Rm.current}}function k2(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Im(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function _2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var T0=/\/+/g;function iu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_2(""+e.key):t.toString(36)}function Xl(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case el:case h2:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+iu(l,0):s,M0(a)?(n="",e!=null&&(n=e.replace(T0,"$&/")+"/"),Xl(a,t,n,"",function(d){return d})):a!=null&&(Im(a)&&(a=k2(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T0,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",M0(e))for(var o=0;o<e.length;o++){i=e[o];var c=s+iu(i,o);l+=Xl(i,t,n,c,a)}else if(c=w2(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=s+iu(i,o++),l+=Xl(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function jl(e,t,n){if(e==null)return e;var s=[],a=0;return Xl(e,s,"","",function(i){return t.call(n,i,a++)}),s}function S2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},Jl={transition:null},C2={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:Rm};function Ug(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:jl,forEach:function(e,t,n){jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return jl(e,function(){t++}),t},toArray:function(e){return jl(e,function(t){return t})||[]},only:function(e){if(!Im(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=_a;se.Fragment=p2;se.Profiler=g2;se.PureComponent=Qm;se.StrictMode=f2;se.Suspense=b2;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C2;se.act=Ug;se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Rg({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Rm.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)zg.call(t,c)&&!$g.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:el,type:e.type,key:a,ref:i,props:s,_owner:l}};se.createContext=function(e){return e={$$typeof:y2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x2,_context:e},e.Consumer=e};se.createElement=qg;se.createFactory=function(e){var t=qg.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:v2,render:e}};se.isValidElement=Im;se.lazy=function(e){return{$$typeof:N2,_payload:{_status:-1,_result:e},_init:S2}};se.memo=function(e,t){return{$$typeof:j2,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Jl.transition;Jl.transition={};try{e()}finally{Jl.transition=t}};se.unstable_act=Ug;se.useCallback=function(e,t){return gt.current.useCallback(e,t)};se.useContext=function(e){return gt.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};se.useEffect=function(e,t){return gt.current.useEffect(e,t)};se.useId=function(){return gt.current.useId()};se.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};se.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return gt.current.useMemo(e,t)};se.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};se.useRef=function(e){return gt.current.useRef(e)};se.useState=function(e){return gt.current.useState(e)};se.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};se.useTransition=function(){return gt.current.useTransition()};se.version="18.3.1";Qg.exports=se;var N=Qg.exports;const Te=Dm(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2=N,P2=Symbol.for("react.element"),M2=Symbol.for("react.fragment"),T2=Object.prototype.hasOwnProperty,F2=E2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A2={key:!0,ref:!0,__self:!0,__source:!0};function Bg(e,t,n){var s,a={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)T2.call(t,s)&&!A2.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:P2,type:e,key:i,ref:l,props:a,_owner:F2.current}}Sc.Fragment=M2;Sc.jsx=Bg;Sc.jsxs=Bg;Dg.exports=Sc;var r=Dg.exports,Vu={},Vg={exports:{}},Rt={},Zg={exports:{}},Hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,L){var O=D.length;D.push(L);e:for(;0<O;){var W=O-1>>>1,J=D[W];if(0<a(J,L))D[W]=L,D[O]=J,O=W;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var L=D[0],O=D.pop();if(O!==L){D[0]=O;e:for(var W=0,J=D.length,le=J>>>1;W<le;){var B=2*(W+1)-1,oe=D[B],be=B+1,$e=D[be];if(0>a(oe,O))be<J&&0>a($e,oe)?(D[W]=$e,D[be]=O,W=be):(D[W]=oe,D[B]=O,W=B);else if(be<J&&0>a($e,O))D[W]=$e,D[be]=O,W=be;else break e}}return L}function a(D,L){var O=D.sortIndex-L.sortIndex;return O!==0?O:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,p=!1,y=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var L=n(d);L!==null;){if(L.callback===null)s(d);else if(L.startTime<=D)s(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(d)}}function v(D){if(b=!1,x(D),!y)if(n(c)!==null)y=!0,F(w);else{var L=n(d);L!==null&&U(v,L.startTime-D)}}function w(D,L){y=!1,b&&(b=!1,g(C),C=-1),p=!0;var O=h;try{for(x(L),m=n(c);m!==null&&(!(m.expirationTime>L)||D&&!A());){var W=m.callback;if(typeof W=="function"){m.callback=null,h=m.priorityLevel;var J=W(m.expirationTime<=L);L=e.unstable_now(),typeof J=="function"?m.callback=J:m===n(c)&&s(c),x(L)}else s(c);m=n(c)}if(m!==null)var le=!0;else{var B=n(d);B!==null&&U(v,B.startTime-L),le=!1}return le}finally{m=null,h=O,p=!1}}var _=!1,k=null,C=-1,E=5,M=-1;function A(){return!(e.unstable_now()-M<E)}function $(){if(k!==null){var D=e.unstable_now();M=D;var L=!0;try{L=k(!0,D)}finally{L?K():(_=!1,k=null)}}else _=!1}var K;if(typeof f=="function")K=function(){f($)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,T=P.port2;P.port1.onmessage=$,K=function(){T.postMessage(null)}}else K=function(){j($,0)};function F(D){k=D,_||(_=!0,K())}function U(D,L){C=j(function(){D(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,F(w))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var O=h;h=L;try{return D()}finally{h=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var O=h;h=D;try{return L()}finally{h=O}},e.unstable_scheduleCallback=function(D,L,O){var W=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?W+O:W):O=W,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=O+J,D={id:u++,callback:L,priorityLevel:D,startTime:O,expirationTime:J,sortIndex:-1},O>W?(D.sortIndex=O,t(d,D),n(c)===null&&D===n(d)&&(b?(g(C),C=-1):b=!0,U(v,O-W))):(D.sortIndex=J,t(c,D),y||p||(y=!0,F(w))),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var L=h;return function(){var O=h;h=L;try{return D.apply(this,arguments)}finally{h=O}}}})(Hg);Zg.exports=Hg;var D2=Zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2=N,Lt=D2;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gg=new Set,yi={};function vs(e,t){ua(e,t),ua(e+"Capture",t)}function ua(e,t){for(yi[e]=t,e=0;e<t.length;e++)Gg.add(t[e])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zu=Object.prototype.hasOwnProperty,L2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F0={},A0={};function R2(e){return Zu.call(A0,e)?!0:Zu.call(F0,e)?!1:L2.test(e)?A0[e]=!0:(F0[e]=!0,!1)}function I2(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function O2(e,t,n,s){if(t===null||typeof t>"u"||I2(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,n,s,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Om=/[\-:]([a-z])/g;function zm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Om,zm);Ke[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Om,zm);Ke[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Om,zm);Ke[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function $m(e,t,n,s){var a=Ke.hasOwnProperty(t)?Ke[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(O2(t,n,a,s)&&(n=null),s||a===null?R2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var er=Q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),Es=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),qm=Symbol.for("react.strict_mode"),Hu=Symbol.for("react.profiler"),Wg=Symbol.for("react.provider"),Kg=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Gu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),Bm=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Yg=Symbol.for("react.offscreen"),D0=Symbol.iterator;function Da(e){return e===null||typeof e!="object"?null:(e=D0&&e[D0]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,lu;function Ba(e){if(lu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);lu=t&&t[1]||""}return`
`+lu+e}var ou=!1;function cu(e,t){if(!e||ou)return"";ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ou=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ba(e):""}function z2(e){switch(e.tag){case 5:return Ba(e.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 2:case 15:return e=cu(e.type,!1),e;case 11:return e=cu(e.type.render,!1),e;case 1:return e=cu(e.type,!0),e;default:return""}}function Ku(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ps:return"Fragment";case Es:return"Portal";case Hu:return"Profiler";case qm:return"StrictMode";case Gu:return"Suspense";case Wu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kg:return(e.displayName||"Context")+".Consumer";case Wg:return(e._context.displayName||"Context")+".Provider";case Um:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bm:return t=e.displayName||null,t!==null?t:Ku(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return Ku(e(t))}catch{}}return null}function $2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ku(t);case 8:return t===qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q2(e){var t=Xg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wl(e){e._valueTracker||(e._valueTracker=q2(e))}function Jg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Xg(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yu(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Q0(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Tr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ex(e,t){t=t.checked,t!=null&&$m(e,"checked",t,!1)}function Xu(e,t){ex(e,t);var n=Tr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ju(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ju(e,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ju(e,t,n){(t!=="number"||bo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Va=Array.isArray;function Us(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Tr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ed(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(Va(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tr(n)}}function tx(e,t){var n=Tr(t.value),s=Tr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function I0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function td(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kl,rx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U2=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(e){U2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ri[t]=ri[e]})});function sx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ri.hasOwnProperty(e)&&ri[e]?(""+t).trim():t+"px"}function ax(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=sx(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var B2=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nd(e,t){if(t){if(B2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function rd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=null;function Vm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ad=null,Bs=null,Vs=null;function O0(e){if(e=rl(e)){if(typeof ad!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Tc(t),ad(e.stateNode,e.type,t))}}function ix(e){Bs?Vs?Vs.push(e):Vs=[e]:Bs=e}function lx(){if(Bs){var e=Bs,t=Vs;if(Vs=Bs=null,O0(e),t)for(e=0;e<t.length;e++)O0(t[e])}}function ox(e,t){return e(t)}function cx(){}var uu=!1;function ux(e,t,n){if(uu)return e(t,n);uu=!0;try{return ox(e,t,n)}finally{uu=!1,(Bs!==null||Vs!==null)&&(cx(),lx())}}function bi(e,t){var n=e.stateNode;if(n===null)return null;var s=Tc(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var id=!1;if(Hn)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){id=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{id=!1}function V2(e,t,n,s,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var si=!1,jo=null,No=!1,ld=null,Z2={onError:function(e){si=!0,jo=e}};function H2(e,t,n,s,a,i,l,o,c){si=!1,jo=null,V2.apply(Z2,arguments)}function G2(e,t,n,s,a,i,l,o,c){if(H2.apply(this,arguments),si){if(si){var d=jo;si=!1,jo=null}else throw Error(I(198));No||(No=!0,ld=d)}}function bs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function z0(e){if(bs(e)!==e)throw Error(I(188))}function W2(e){var t=e.alternate;if(!t){if(t=bs(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return z0(a),e;if(i===s)return z0(a),t;i=i.sibling}throw Error(I(188))}if(n.return!==s.return)n=a,s=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,s=i;break}if(o===s){l=!0,s=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,s=a;break}if(o===s){l=!0,s=i,n=a;break}o=o.sibling}if(!l)throw Error(I(189))}}if(n.alternate!==s)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function mx(e){return e=W2(e),e!==null?hx(e):null}function hx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hx(e);if(t!==null)return t;e=e.sibling}return null}var px=Lt.unstable_scheduleCallback,$0=Lt.unstable_cancelCallback,K2=Lt.unstable_shouldYield,Y2=Lt.unstable_requestPaint,Qe=Lt.unstable_now,X2=Lt.unstable_getCurrentPriorityLevel,Zm=Lt.unstable_ImmediatePriority,fx=Lt.unstable_UserBlockingPriority,wo=Lt.unstable_NormalPriority,J2=Lt.unstable_LowPriority,gx=Lt.unstable_IdlePriority,Cc=null,bn=null;function e5(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Cc,e,void 0,(e.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:r5,t5=Math.log,n5=Math.LN2;function r5(e){return e>>>=0,e===0?32:31-(t5(e)/n5|0)|0}var _l=64,Sl=4194304;function Za(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ko(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~a;o!==0?s=Za(o):(i&=l,i!==0&&(s=Za(i)))}else l=n&~a,l!==0?s=Za(l):i!==0&&(s=Za(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-an(t),a=1<<n,s|=e[n],t&=~a;return s}function s5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a5(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-an(i),o=1<<l,c=a[l];c===-1?(!(o&n)||o&s)&&(a[l]=s5(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function od(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xx(){var e=_l;return _l<<=1,!(_l&4194240)&&(_l=64),e}function du(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-an(t),e[t]=n}function i5(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-an(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function Hm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-an(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var pe=0;function yx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vx,Gm,bx,jx,Nx,cd=!1,Cl=[],Nr=null,wr=null,kr=null,ji=new Map,Ni=new Map,or=[],l5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function q0(e,t){switch(e){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(t.pointerId)}}function La(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=rl(t),t!==null&&Gm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function o5(e,t,n,s,a){switch(t){case"focusin":return Nr=La(Nr,e,t,n,s,a),!0;case"dragenter":return wr=La(wr,e,t,n,s,a),!0;case"mouseover":return kr=La(kr,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return ji.set(i,La(ji.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Ni.set(i,La(Ni.get(i)||null,e,t,n,s,a)),!0}return!1}function wx(e){var t=Hr(e.target);if(t!==null){var n=bs(t);if(n!==null){if(t=n.tag,t===13){if(t=dx(n),t!==null){e.blockedOn=t,Nx(e.priority,function(){bx(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);sd=s,n.target.dispatchEvent(s),sd=null}else return t=rl(n),t!==null&&Gm(t),e.blockedOn=n,!1;t.shift()}return!0}function U0(e,t,n){eo(e)&&n.delete(t)}function c5(){cd=!1,Nr!==null&&eo(Nr)&&(Nr=null),wr!==null&&eo(wr)&&(wr=null),kr!==null&&eo(kr)&&(kr=null),ji.forEach(U0),Ni.forEach(U0)}function Ra(e,t){e.blockedOn===t&&(e.blockedOn=null,cd||(cd=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,c5)))}function wi(e){function t(a){return Ra(a,e)}if(0<Cl.length){Ra(Cl[0],e);for(var n=1;n<Cl.length;n++){var s=Cl[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Nr!==null&&Ra(Nr,e),wr!==null&&Ra(wr,e),kr!==null&&Ra(kr,e),ji.forEach(t),Ni.forEach(t),n=0;n<or.length;n++)s=or[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)wx(n),n.blockedOn===null&&or.shift()}var Zs=er.ReactCurrentBatchConfig,_o=!0;function u5(e,t,n,s){var a=pe,i=Zs.transition;Zs.transition=null;try{pe=1,Wm(e,t,n,s)}finally{pe=a,Zs.transition=i}}function d5(e,t,n,s){var a=pe,i=Zs.transition;Zs.transition=null;try{pe=4,Wm(e,t,n,s)}finally{pe=a,Zs.transition=i}}function Wm(e,t,n,s){if(_o){var a=ud(e,t,n,s);if(a===null)ju(e,t,s,So,n),q0(e,s);else if(o5(a,e,t,n,s))s.stopPropagation();else if(q0(e,s),t&4&&-1<l5.indexOf(e)){for(;a!==null;){var i=rl(a);if(i!==null&&vx(i),i=ud(e,t,n,s),i===null&&ju(e,t,s,So,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else ju(e,t,s,null,n)}}var So=null;function ud(e,t,n,s){if(So=null,e=Vm(s),e=Hr(e),e!==null)if(t=bs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return So=e,null}function kx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X2()){case Zm:return 1;case fx:return 4;case wo:case J2:return 16;case gx:return 536870912;default:return 16}default:return 16}}var vr=null,Km=null,to=null;function _x(){if(to)return to;var e,t=Km,n=t.length,s,a="value"in vr?vr.value:vr.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===a[i-s];s++);return to=a.slice(e,1<s?1-s:void 0)}function no(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function El(){return!0}function B0(){return!1}function It(e){function t(n,s,a,i,l){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?El:B0,this.isPropagationStopped=B0,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),t}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=It(Sa),nl=Ce({},Sa,{view:0,detail:0}),m5=It(nl),mu,hu,Ia,Ec=Ce({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ia&&(Ia&&e.type==="mousemove"?(mu=e.screenX-Ia.screenX,hu=e.screenY-Ia.screenY):hu=mu=0,Ia=e),mu)},movementY:function(e){return"movementY"in e?e.movementY:hu}}),V0=It(Ec),h5=Ce({},Ec,{dataTransfer:0}),p5=It(h5),f5=Ce({},nl,{relatedTarget:0}),pu=It(f5),g5=Ce({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),x5=It(g5),y5=Ce({},Sa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),v5=It(y5),b5=Ce({},Sa,{data:0}),Z0=It(b5),j5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=w5[e])?!!t[e]:!1}function Xm(){return k5}var _5=Ce({},nl,{key:function(e){if(e.key){var t=j5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=no(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(e){return e.type==="keypress"?no(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?no(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),S5=It(_5),C5=Ce({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H0=It(C5),E5=Ce({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),P5=It(E5),M5=Ce({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),T5=It(M5),F5=Ce({},Ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),A5=It(F5),D5=[9,13,27,32],Jm=Hn&&"CompositionEvent"in window,ai=null;Hn&&"documentMode"in document&&(ai=document.documentMode);var Q5=Hn&&"TextEvent"in window&&!ai,Sx=Hn&&(!Jm||ai&&8<ai&&11>=ai),G0=" ",W0=!1;function Cx(e,t){switch(e){case"keyup":return D5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ex(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ms=!1;function L5(e,t){switch(e){case"compositionend":return Ex(t);case"keypress":return t.which!==32?null:(W0=!0,G0);case"textInput":return e=t.data,e===G0&&W0?null:e;default:return null}}function R5(e,t){if(Ms)return e==="compositionend"||!Jm&&Cx(e,t)?(e=_x(),to=Km=vr=null,Ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sx&&t.locale!=="ko"?null:t.data;default:return null}}var I5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!I5[e.type]:t==="textarea"}function Px(e,t,n,s){ix(s),t=Co(t,"onChange"),0<t.length&&(n=new Ym("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var ii=null,ki=null;function O5(e){zx(e,0)}function Pc(e){var t=As(e);if(Jg(t))return e}function z5(e,t){if(e==="change")return t}var Mx=!1;if(Hn){var fu;if(Hn){var gu="oninput"in document;if(!gu){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),gu=typeof Y0.oninput=="function"}fu=gu}else fu=!1;Mx=fu&&(!document.documentMode||9<document.documentMode)}function X0(){ii&&(ii.detachEvent("onpropertychange",Tx),ki=ii=null)}function Tx(e){if(e.propertyName==="value"&&Pc(ki)){var t=[];Px(t,ki,e,Vm(e)),ux(O5,t)}}function $5(e,t,n){e==="focusin"?(X0(),ii=t,ki=n,ii.attachEvent("onpropertychange",Tx)):e==="focusout"&&X0()}function q5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pc(ki)}function U5(e,t){if(e==="click")return Pc(t)}function B5(e,t){if(e==="input"||e==="change")return Pc(t)}function V5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:V5;function _i(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Zu.call(t,a)||!on(e[a],t[a]))return!1}return!0}function J0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ep(e,t){var n=J0(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J0(n)}}function Fx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ax(){for(var e=window,t=bo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bo(e.document)}return t}function eh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Z5(e){var t=Ax(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fx(n.ownerDocument.documentElement,n)){if(s!==null&&eh(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=ep(n,i);var l=ep(n,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H5=Hn&&"documentMode"in document&&11>=document.documentMode,Ts=null,dd=null,li=null,md=!1;function tp(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;md||Ts==null||Ts!==bo(s)||(s=Ts,"selectionStart"in s&&eh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),li&&_i(li,s)||(li=s,s=Co(dd,"onSelect"),0<s.length&&(t=new Ym("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ts)))}function Pl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fs={animationend:Pl("Animation","AnimationEnd"),animationiteration:Pl("Animation","AnimationIteration"),animationstart:Pl("Animation","AnimationStart"),transitionend:Pl("Transition","TransitionEnd")},xu={},Dx={};Hn&&(Dx=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Mc(e){if(xu[e])return xu[e];if(!Fs[e])return e;var t=Fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dx)return xu[e]=t[n];return e}var Qx=Mc("animationend"),Lx=Mc("animationiteration"),Rx=Mc("animationstart"),Ix=Mc("transitionend"),Ox=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Ox.set(e,t),vs(t,[e])}for(var yu=0;yu<np.length;yu++){var vu=np[yu],G5=vu.toLowerCase(),W5=vu[0].toUpperCase()+vu.slice(1);Lr(G5,"on"+W5)}Lr(Qx,"onAnimationEnd");Lr(Lx,"onAnimationIteration");Lr(Rx,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(Ix,"onTransitionEnd");ua("onMouseEnter",["mouseout","mouseover"]);ua("onMouseLeave",["mouseout","mouseover"]);ua("onPointerEnter",["pointerout","pointerover"]);ua("onPointerLeave",["pointerout","pointerover"]);vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ha));function rp(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,G2(s,t,void 0,e),e.currentTarget=null}function zx(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;rp(a,o,d),i=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;rp(a,o,d),i=c}}}if(No)throw e=ld,No=!1,ld=null,e}function ye(e,t){var n=t[xd];n===void 0&&(n=t[xd]=new Set);var s=e+"__bubble";n.has(s)||($x(t,e,2,!1),n.add(s))}function bu(e,t,n){var s=0;t&&(s|=4),$x(n,e,s,t)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Si(e){if(!e[Ml]){e[Ml]=!0,Gg.forEach(function(n){n!=="selectionchange"&&(K5.has(n)||bu(n,!1,e),bu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ml]||(t[Ml]=!0,bu("selectionchange",!1,t))}}function $x(e,t,n,s){switch(kx(t)){case 1:var a=u5;break;case 4:a=d5;break;default:a=Wm}n=a.bind(null,t,n,e),a=void 0,!id||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ju(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Hr(o),l===null)return;if(c=l.tag,c===5||c===6){s=i=l;continue e}o=o.parentNode}}s=s.return}ux(function(){var d=i,u=Vm(n),m=[];e:{var h=Ox.get(e);if(h!==void 0){var p=Ym,y=e;switch(e){case"keypress":if(no(n)===0)break e;case"keydown":case"keyup":p=S5;break;case"focusin":y="focus",p=pu;break;case"focusout":y="blur",p=pu;break;case"beforeblur":case"afterblur":p=pu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=V0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=P5;break;case Qx:case Lx:case Rx:p=x5;break;case Ix:p=T5;break;case"scroll":p=m5;break;case"wheel":p=A5;break;case"copy":case"cut":case"paste":p=v5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=H0}var b=(t&4)!==0,j=!b&&e==="scroll",g=b?h!==null?h+"Capture":null:h;b=[];for(var f=d,x;f!==null;){x=f;var v=x.stateNode;if(x.tag===5&&v!==null&&(x=v,g!==null&&(v=bi(f,g),v!=null&&b.push(Ci(f,v,x)))),j)break;f=f.return}0<b.length&&(h=new p(h,y,null,n,u),m.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==sd&&(y=n.relatedTarget||n.fromElement)&&(Hr(y)||y[Gn]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=d,y=y?Hr(y):null,y!==null&&(j=bs(y),y!==j||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(b=V0,v="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=H0,v="onPointerLeave",g="onPointerEnter",f="pointer"),j=p==null?h:As(p),x=y==null?h:As(y),h=new b(v,f+"leave",p,n,u),h.target=j,h.relatedTarget=x,v=null,Hr(u)===d&&(b=new b(g,f+"enter",y,n,u),b.target=x,b.relatedTarget=j,v=b),j=v,p&&y)t:{for(b=p,g=y,f=0,x=b;x;x=ks(x))f++;for(x=0,v=g;v;v=ks(v))x++;for(;0<f-x;)b=ks(b),f--;for(;0<x-f;)g=ks(g),x--;for(;f--;){if(b===g||g!==null&&b===g.alternate)break t;b=ks(b),g=ks(g)}b=null}else b=null;p!==null&&sp(m,h,p,b,!1),y!==null&&j!==null&&sp(m,j,y,b,!0)}}e:{if(h=d?As(d):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=z5;else if(K0(h))if(Mx)w=B5;else{w=q5;var _=$5}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=U5);if(w&&(w=w(e,d))){Px(m,w,n,u);break e}_&&_(e,h,d),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Ju(h,"number",h.value)}switch(_=d?As(d):window,e){case"focusin":(K0(_)||_.contentEditable==="true")&&(Ts=_,dd=d,li=null);break;case"focusout":li=dd=Ts=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,tp(m,n,u);break;case"selectionchange":if(H5)break;case"keydown":case"keyup":tp(m,n,u)}var k;if(Jm)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ms?Cx(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Sx&&n.locale!=="ko"&&(Ms||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ms&&(k=_x()):(vr=u,Km="value"in vr?vr.value:vr.textContent,Ms=!0)),_=Co(d,C),0<_.length&&(C=new Z0(C,e,null,n,u),m.push({event:C,listeners:_}),k?C.data=k:(k=Ex(n),k!==null&&(C.data=k)))),(k=Q5?L5(e,n):R5(e,n))&&(d=Co(d,"onBeforeInput"),0<d.length&&(u=new Z0("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=k))}zx(m,t)})}function Ci(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Co(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=bi(e,n),i!=null&&s.unshift(Ci(e,i,a)),i=bi(e,t),i!=null&&s.push(Ci(e,i,a))),e=e.return}return s}function ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sp(e,t,n,s,a){for(var i=t._reactName,l=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=bi(n,i),c!=null&&l.unshift(Ci(n,c,o))):a||(c=bi(n,i),c!=null&&l.push(Ci(n,c,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var Y5=/\r\n?/g,X5=/\u0000|\uFFFD/g;function ap(e){return(typeof e=="string"?e:""+e).replace(Y5,`
`).replace(X5,"")}function Tl(e,t,n){if(t=ap(t),ap(e)!==t&&n)throw Error(I(425))}function Eo(){}var hd=null,pd=null;function fd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gd=typeof setTimeout=="function"?setTimeout:void 0,J5=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(e){return ip.resolve(null).then(e).catch(tb)}:gd;function tb(e){setTimeout(function(){throw e})}function Nu(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),wi(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);wi(t)}function _r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),gn="__reactFiber$"+Ca,Ei="__reactProps$"+Ca,Gn="__reactContainer$"+Ca,xd="__reactEvents$"+Ca,nb="__reactListeners$"+Ca,rb="__reactHandles$"+Ca;function Hr(e){var t=e[gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gn]||n[gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lp(e);e!==null;){if(n=e[gn])return n;e=lp(e)}return t}e=n,n=e.parentNode}return null}function rl(e){return e=e[gn]||e[Gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function As(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Tc(e){return e[Ei]||null}var yd=[],Ds=-1;function Rr(e){return{current:e}}function ve(e){0>Ds||(e.current=yd[Ds],yd[Ds]=null,Ds--)}function ge(e,t){Ds++,yd[Ds]=e.current,e.current=t}var Fr={},nt=Rr(Fr),kt=Rr(!1),os=Fr;function da(e,t){var n=e.type.contextTypes;if(!n)return Fr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function _t(e){return e=e.childContextTypes,e!=null}function Po(){ve(kt),ve(nt)}function op(e,t,n){if(nt.current!==Fr)throw Error(I(168));ge(nt,t),ge(kt,n)}function qx(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(I(108,$2(e)||"Unknown",a));return Ce({},n,s)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fr,os=nt.current,ge(nt,e),ge(kt,kt.current),!0}function cp(e,t,n){var s=e.stateNode;if(!s)throw Error(I(169));n?(e=qx(e,t,os),s.__reactInternalMemoizedMergedChildContext=e,ve(kt),ve(nt),ge(nt,e)):ve(kt),ge(kt,n)}var Dn=null,Fc=!1,wu=!1;function Ux(e){Dn===null?Dn=[e]:Dn.push(e)}function sb(e){Fc=!0,Ux(e)}function Ir(){if(!wu&&Dn!==null){wu=!0;var e=0,t=pe;try{var n=Dn;for(pe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Dn=null,Fc=!1}catch(a){throw Dn!==null&&(Dn=Dn.slice(e+1)),px(Zm,Ir),a}finally{pe=t,wu=!1}}return null}var Qs=[],Ls=0,To=null,Fo=0,qt=[],Ut=0,cs=null,qn=1,Un="";function Ur(e,t){Qs[Ls++]=Fo,Qs[Ls++]=To,To=e,Fo=t}function Bx(e,t,n){qt[Ut++]=qn,qt[Ut++]=Un,qt[Ut++]=cs,cs=e;var s=qn;e=Un;var a=32-an(s)-1;s&=~(1<<a),n+=1;var i=32-an(t)+a;if(30<i){var l=a-a%5;i=(s&(1<<l)-1).toString(32),s>>=l,a-=l,qn=1<<32-an(t)+a|n<<a|s,Un=i+e}else qn=1<<i|n<<a|s,Un=e}function th(e){e.return!==null&&(Ur(e,1),Bx(e,1,0))}function nh(e){for(;e===To;)To=Qs[--Ls],Qs[Ls]=null,Fo=Qs[--Ls],Qs[Ls]=null;for(;e===cs;)cs=qt[--Ut],qt[Ut]=null,Un=qt[--Ut],qt[Ut]=null,qn=qt[--Ut],qt[Ut]=null}var Dt=null,Ft=null,je=!1,nn=null;function Vx(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function up(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=_r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ft=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cs!==null?{id:qn,overflow:Un}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ft=null,!0):!1;default:return!1}}function vd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bd(e){if(je){var t=Ft;if(t){var n=t;if(!up(e,t)){if(vd(e))throw Error(I(418));t=_r(n.nextSibling);var s=Dt;t&&up(e,t)?Vx(s,n):(e.flags=e.flags&-4097|2,je=!1,Dt=e)}}else{if(vd(e))throw Error(I(418));e.flags=e.flags&-4097|2,je=!1,Dt=e}}}function dp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Fl(e){if(e!==Dt)return!1;if(!je)return dp(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fd(e.type,e.memoizedProps)),t&&(t=Ft)){if(vd(e))throw Zx(),Error(I(418));for(;t;)Vx(e,t),t=_r(t.nextSibling)}if(dp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ft=_r(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ft=null}}else Ft=Dt?_r(e.stateNode.nextSibling):null;return!0}function Zx(){for(var e=Ft;e;)e=_r(e.nextSibling)}function ma(){Ft=Dt=null,je=!1}function rh(e){nn===null?nn=[e]:nn.push(e)}var ab=er.ReactCurrentBatchConfig;function Oa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var s=n.stateNode}if(!s)throw Error(I(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function Al(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mp(e){var t=e._init;return t(e._payload)}function Hx(e){function t(g,f){if(e){var x=g.deletions;x===null?(g.deletions=[f],g.flags|=16):x.push(f)}}function n(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function s(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function a(g,f){return g=Pr(g,f),g.index=0,g.sibling=null,g}function i(g,f,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<f?(g.flags|=2,f):x):(g.flags|=2,f)):(g.flags|=1048576,f)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,x,v){return f===null||f.tag!==6?(f=Mu(x,g.mode,v),f.return=g,f):(f=a(f,x),f.return=g,f)}function c(g,f,x,v){var w=x.type;return w===Ps?u(g,f,x.props.children,v,x.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===sr&&mp(w)===f.type)?(v=a(f,x.props),v.ref=Oa(g,f,x),v.return=g,v):(v=co(x.type,x.key,x.props,null,g.mode,v),v.ref=Oa(g,f,x),v.return=g,v)}function d(g,f,x,v){return f===null||f.tag!==4||f.stateNode.containerInfo!==x.containerInfo||f.stateNode.implementation!==x.implementation?(f=Tu(x,g.mode,v),f.return=g,f):(f=a(f,x.children||[]),f.return=g,f)}function u(g,f,x,v,w){return f===null||f.tag!==7?(f=ls(x,g.mode,v,w),f.return=g,f):(f=a(f,x),f.return=g,f)}function m(g,f,x){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Mu(""+f,g.mode,x),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Nl:return x=co(f.type,f.key,f.props,null,g.mode,x),x.ref=Oa(g,null,f),x.return=g,x;case Es:return f=Tu(f,g.mode,x),f.return=g,f;case sr:var v=f._init;return m(g,v(f._payload),x)}if(Va(f)||Da(f))return f=ls(f,g.mode,x,null),f.return=g,f;Al(g,f)}return null}function h(g,f,x,v){var w=f!==null?f.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:o(g,f,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:return x.key===w?c(g,f,x,v):null;case Es:return x.key===w?d(g,f,x,v):null;case sr:return w=x._init,h(g,f,w(x._payload),v)}if(Va(x)||Da(x))return w!==null?null:u(g,f,x,v,null);Al(g,x)}return null}function p(g,f,x,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(x)||null,o(f,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nl:return g=g.get(v.key===null?x:v.key)||null,c(f,g,v,w);case Es:return g=g.get(v.key===null?x:v.key)||null,d(f,g,v,w);case sr:var _=v._init;return p(g,f,x,_(v._payload),w)}if(Va(v)||Da(v))return g=g.get(x)||null,u(f,g,v,w,null);Al(f,v)}return null}function y(g,f,x,v){for(var w=null,_=null,k=f,C=f=0,E=null;k!==null&&C<x.length;C++){k.index>C?(E=k,k=null):E=k.sibling;var M=h(g,k,x[C],v);if(M===null){k===null&&(k=E);break}e&&k&&M.alternate===null&&t(g,k),f=i(M,f,C),_===null?w=M:_.sibling=M,_=M,k=E}if(C===x.length)return n(g,k),je&&Ur(g,C),w;if(k===null){for(;C<x.length;C++)k=m(g,x[C],v),k!==null&&(f=i(k,f,C),_===null?w=k:_.sibling=k,_=k);return je&&Ur(g,C),w}for(k=s(g,k);C<x.length;C++)E=p(k,g,C,x[C],v),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?C:E.key),f=i(E,f,C),_===null?w=E:_.sibling=E,_=E);return e&&k.forEach(function(A){return t(g,A)}),je&&Ur(g,C),w}function b(g,f,x,v){var w=Da(x);if(typeof w!="function")throw Error(I(150));if(x=w.call(x),x==null)throw Error(I(151));for(var _=w=null,k=f,C=f=0,E=null,M=x.next();k!==null&&!M.done;C++,M=x.next()){k.index>C?(E=k,k=null):E=k.sibling;var A=h(g,k,M.value,v);if(A===null){k===null&&(k=E);break}e&&k&&A.alternate===null&&t(g,k),f=i(A,f,C),_===null?w=A:_.sibling=A,_=A,k=E}if(M.done)return n(g,k),je&&Ur(g,C),w;if(k===null){for(;!M.done;C++,M=x.next())M=m(g,M.value,v),M!==null&&(f=i(M,f,C),_===null?w=M:_.sibling=M,_=M);return je&&Ur(g,C),w}for(k=s(g,k);!M.done;C++,M=x.next())M=p(k,g,C,M.value,v),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?C:M.key),f=i(M,f,C),_===null?w=M:_.sibling=M,_=M);return e&&k.forEach(function($){return t(g,$)}),je&&Ur(g,C),w}function j(g,f,x,v){if(typeof x=="object"&&x!==null&&x.type===Ps&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:e:{for(var w=x.key,_=f;_!==null;){if(_.key===w){if(w=x.type,w===Ps){if(_.tag===7){n(g,_.sibling),f=a(_,x.props.children),f.return=g,g=f;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===sr&&mp(w)===_.type){n(g,_.sibling),f=a(_,x.props),f.ref=Oa(g,_,x),f.return=g,g=f;break e}n(g,_);break}else t(g,_);_=_.sibling}x.type===Ps?(f=ls(x.props.children,g.mode,v,x.key),f.return=g,g=f):(v=co(x.type,x.key,x.props,null,g.mode,v),v.ref=Oa(g,f,x),v.return=g,g=v)}return l(g);case Es:e:{for(_=x.key;f!==null;){if(f.key===_)if(f.tag===4&&f.stateNode.containerInfo===x.containerInfo&&f.stateNode.implementation===x.implementation){n(g,f.sibling),f=a(f,x.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else t(g,f);f=f.sibling}f=Tu(x,g.mode,v),f.return=g,g=f}return l(g);case sr:return _=x._init,j(g,f,_(x._payload),v)}if(Va(x))return y(g,f,x,v);if(Da(x))return b(g,f,x,v);Al(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,f!==null&&f.tag===6?(n(g,f.sibling),f=a(f,x),f.return=g,g=f):(n(g,f),f=Mu(x,g.mode,v),f.return=g,g=f),l(g)):n(g,f)}return j}var ha=Hx(!0),Gx=Hx(!1),Ao=Rr(null),Do=null,Rs=null,sh=null;function ah(){sh=Rs=Do=null}function ih(e){var t=Ao.current;ve(Ao),e._currentValue=t}function jd(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Hs(e,t){Do=e,sh=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(sh!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(Do===null)throw Error(I(308));Rs=e,Do.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var Gr=null;function lh(e){Gr===null?Gr=[e]:Gr.push(e)}function Wx(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,lh(t)):(n.next=a.next,a.next=n),t.interleaved=n,Wn(e,s)}function Wn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ar=!1;function oh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ce&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Wn(e,n)}return a=s.interleaved,a===null?(t.next=t,lh(s)):(t.next=a.next,a.next=t),s.interleaved=t,Wn(e,n)}function ro(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Hm(e,n)}}function hp(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qo(e,t,n,s){var a=e.updateQueue;ar=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,p=o.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,b=o;switch(h=t,p=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){m=y.call(p,m,h);break e}m=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,h=typeof y=="function"?y.call(p,m,h):y,h==null)break e;m=Ce({},m,h);break e;case 2:ar=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ds|=l,e.lanes=l,e.memoizedState=m}}function pp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(I(191,a));a.call(s)}}}var sl={},jn=Rr(sl),Pi=Rr(sl),Mi=Rr(sl);function Wr(e){if(e===sl)throw Error(I(174));return e}function ch(e,t){switch(ge(Mi,t),ge(Pi,e),ge(jn,sl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:td(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=td(t,e)}ve(jn),ge(jn,t)}function pa(){ve(jn),ve(Pi),ve(Mi)}function Yx(e){Wr(Mi.current);var t=Wr(jn.current),n=td(t,e.type);t!==n&&(ge(Pi,e),ge(jn,n))}function uh(e){Pi.current===e&&(ve(jn),ve(Pi))}var we=Rr(0);function Lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ku=[];function dh(){for(var e=0;e<ku.length;e++)ku[e]._workInProgressVersionPrimary=null;ku.length=0}var so=er.ReactCurrentDispatcher,_u=er.ReactCurrentBatchConfig,us=0,Se=null,Ie=null,Ue=null,Ro=!1,oi=!1,Ti=0,ib=0;function Xe(){throw Error(I(321))}function mh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function hh(e,t,n,s,a,i){if(us=i,Se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=e===null||e.memoizedState===null?ub:db,e=n(s,a),oi){i=0;do{if(oi=!1,Ti=0,25<=i)throw Error(I(301));i+=1,Ue=Ie=null,t.updateQueue=null,so.current=mb,e=n(s,a)}while(oi)}if(so.current=Io,t=Ie!==null&&Ie.next!==null,us=0,Ue=Ie=Se=null,Ro=!1,t)throw Error(I(300));return e}function ph(){var e=Ti!==0;return Ti=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Se.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Wt(){if(Ie===null){var e=Se.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Ue===null?Se.memoizedState:Ue.next;if(t!==null)Ue=t,Ie=e;else{if(e===null)throw Error(I(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Ue===null?Se.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Fi(e,t){return typeof t=="function"?t(e):t}function Su(e){var t=Wt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var s=Ie,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((us&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=s):c=c.next=m,Se.lanes|=u,ds|=u}d=d.next}while(d!==null&&d!==i);c===null?l=s:c.next=o,on(s,t.memoizedState)||(Nt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Se.lanes|=i,ds|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cu(e){var t=Wt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);on(i,t.memoizedState)||(Nt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Xx(){}function Jx(e,t){var n=Se,s=Wt(),a=t(),i=!on(s.memoizedState,a);if(i&&(s.memoizedState=a,Nt=!0),s=s.queue,fh(ny.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Ai(9,ty.bind(null,n,s,a,t),void 0,null),Be===null)throw Error(I(349));us&30||ey(n,t,a)}return a}function ey(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ty(e,t,n,s){t.value=n,t.getSnapshot=s,ry(t)&&sy(e)}function ny(e,t,n){return n(function(){ry(t)&&sy(e)})}function ry(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!on(e,n)}catch{return!0}}function sy(e){var t=Wn(e,1);t!==null&&ln(t,e,1,-1)}function fp(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},t.queue=e,e=e.dispatch=cb.bind(null,Se,e),[t.memoizedState,e]}function Ai(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Se.updateQueue,t===null?(t={lastEffect:null,stores:null},Se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function ay(){return Wt().memoizedState}function ao(e,t,n,s){var a=mn();Se.flags|=e,a.memoizedState=Ai(1|t,n,void 0,s===void 0?null:s)}function Ac(e,t,n,s){var a=Wt();s=s===void 0?null:s;var i=void 0;if(Ie!==null){var l=Ie.memoizedState;if(i=l.destroy,s!==null&&mh(s,l.deps)){a.memoizedState=Ai(t,n,i,s);return}}Se.flags|=e,a.memoizedState=Ai(1|t,n,i,s)}function gp(e,t){return ao(8390656,8,e,t)}function fh(e,t){return Ac(2048,8,e,t)}function iy(e,t){return Ac(4,2,e,t)}function ly(e,t){return Ac(4,4,e,t)}function oy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cy(e,t,n){return n=n!=null?n.concat([e]):null,Ac(4,4,oy.bind(null,t,e),n)}function gh(){}function uy(e,t){var n=Wt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mh(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function dy(e,t){var n=Wt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&mh(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function my(e,t,n){return us&21?(on(n,t)||(n=xx(),Se.lanes|=n,ds|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nt=!0),e.memoizedState=n)}function lb(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var s=_u.transition;_u.transition={};try{e(!1),t()}finally{pe=n,_u.transition=s}}function hy(){return Wt().memoizedState}function ob(e,t,n){var s=Er(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},py(e))fy(t,n);else if(n=Wx(e,t,n,s),n!==null){var a=mt();ln(n,e,s,a),gy(n,t,s)}}function cb(e,t,n){var s=Er(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(e))fy(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,n);if(a.hasEagerState=!0,a.eagerState=o,on(o,l)){var c=t.interleaved;c===null?(a.next=a,lh(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=Wx(e,t,a,s),n!==null&&(a=mt(),ln(n,e,s,a),gy(n,t,s))}}function py(e){var t=e.alternate;return e===Se||t!==null&&t===Se}function fy(e,t){oi=Ro=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gy(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Hm(e,n)}}var Io={readContext:Gt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},ub={readContext:Gt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ao(4194308,4,oy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){return ao(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=mn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=ob.bind(null,Se,e),[s.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:fp,useDebugValue:gh,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=fp(!1),t=e[0];return e=lb.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Se,a=mn();if(je){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Be===null)throw Error(I(349));us&30||ey(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,gp(ny.bind(null,s,i,e),[e]),s.flags|=2048,Ai(9,ty.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=mn(),t=Be.identifierPrefix;if(je){var n=Un,s=qn;n=(s&~(1<<32-an(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ti++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ib++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},db={readContext:Gt,useCallback:uy,useContext:Gt,useEffect:fh,useImperativeHandle:cy,useInsertionEffect:iy,useLayoutEffect:ly,useMemo:dy,useReducer:Su,useRef:ay,useState:function(){return Su(Fi)},useDebugValue:gh,useDeferredValue:function(e){var t=Wt();return my(t,Ie.memoizedState,e)},useTransition:function(){var e=Su(Fi)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Xx,useSyncExternalStore:Jx,useId:hy,unstable_isNewReconciler:!1},mb={readContext:Gt,useCallback:uy,useContext:Gt,useEffect:fh,useImperativeHandle:cy,useInsertionEffect:iy,useLayoutEffect:ly,useMemo:dy,useReducer:Cu,useRef:ay,useState:function(){return Cu(Fi)},useDebugValue:gh,useDeferredValue:function(e){var t=Wt();return Ie===null?t.memoizedState=e:my(t,Ie.memoizedState,e)},useTransition:function(){var e=Cu(Fi)[0],t=Wt().memoizedState;return[e,t]},useMutableSource:Xx,useSyncExternalStore:Jx,useId:hy,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nd(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dc={isMounted:function(e){return(e=e._reactInternals)?bs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=mt(),a=Er(e),i=Vn(s,a);i.payload=t,n!=null&&(i.callback=n),t=Sr(e,i,a),t!==null&&(ln(t,e,a,s),ro(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=mt(),a=Er(e),i=Vn(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Sr(e,i,a),t!==null&&(ln(t,e,a,s),ro(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mt(),s=Er(e),a=Vn(n,s);a.tag=2,t!=null&&(a.callback=t),t=Sr(e,a,s),t!==null&&(ln(t,e,s,n),ro(t,e,s))}};function xp(e,t,n,s,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,l):t.prototype&&t.prototype.isPureReactComponent?!_i(n,s)||!_i(a,i):!0}function xy(e,t,n){var s=!1,a=Fr,i=t.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(a=_t(t)?os:nt.current,s=t.contextTypes,i=(s=s!=null)?da(e,a):Fr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dc,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function yp(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Dc.enqueueReplaceState(t,t.state,null)}function wd(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},oh(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Gt(i):(i=_t(t)?os:nt.current,a.context=da(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Nd(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Dc.enqueueReplaceState(a,a.state,null),Qo(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function fa(e,t){try{var n="",s=t;do n+=z2(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Eu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hb=typeof WeakMap=="function"?WeakMap:Map;function yy(e,t,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){zo||(zo=!0,Dd=s),kd(e,t)},n}function vy(e,t,n){n=Vn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){kd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kd(e,t),typeof s!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function vp(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new hb;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Cb.bind(null,e,t,n),t.then(e,e))}function bp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jp(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vn(-1,1),t.tag=2,Sr(n,t,1))),n.lanes|=1),e)}var pb=er.ReactCurrentOwner,Nt=!1;function lt(e,t,n,s){t.child=e===null?Gx(t,null,n,s):ha(t,e.child,n,s)}function Np(e,t,n,s,a){n=n.render;var i=t.ref;return Hs(t,a),s=hh(e,t,n,s,i,a),n=ph(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kn(e,t,a)):(je&&n&&th(t),t.flags|=1,lt(e,t,s,a),t.child)}function wp(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!kh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,by(e,t,i,s,a)):(e=co(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:_i,n(l,s)&&e.ref===t.ref)return Kn(e,t,a)}return t.flags|=1,e=Pr(i,s),e.ref=t.ref,e.return=t,t.child=e}function by(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(_i(i,s)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Kn(e,t,a)}return _d(e,t,n,s,a)}function jy(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Os,Pt),Pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(Os,Pt),Pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,ge(Os,Pt),Pt|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,ge(Os,Pt),Pt|=s;return lt(e,t,a,n),t.child}function Ny(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _d(e,t,n,s,a){var i=_t(n)?os:nt.current;return i=da(t,i),Hs(t,a),n=hh(e,t,n,s,i,a),s=ph(),e!==null&&!Nt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kn(e,t,a)):(je&&s&&th(t),t.flags|=1,lt(e,t,n,a),t.child)}function kp(e,t,n,s,a){if(_t(n)){var i=!0;Mo(t)}else i=!1;if(Hs(t,a),t.stateNode===null)io(e,t),xy(t,n,s),wd(t,n,s,a),s=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=_t(n)?os:nt.current,d=da(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==d)&&yp(t,l,s,d),ar=!1;var h=t.memoizedState;l.state=h,Qo(t,s,l,a),c=t.memoizedState,o!==s||h!==c||kt.current||ar?(typeof u=="function"&&(Nd(t,n,u,s),c=t.memoizedState),(o=ar||xp(t,n,o,s,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),l.props=s,l.state=c,l.context=d,s=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Kx(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Xt(t.type,o),l.props=d,m=t.pendingProps,h=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gt(c):(c=_t(n)?os:nt.current,c=da(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&yp(t,l,s,c),ar=!1,h=t.memoizedState,l.state=h,Qo(t,s,l,a);var y=t.memoizedState;o!==m||h!==y||kt.current||ar?(typeof p=="function"&&(Nd(t,n,p,s),y=t.memoizedState),(d=ar||xp(t,n,d,s,h,y,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=y),l.props=s,l.state=y,l.context=c,s=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Sd(e,t,n,s,i,a)}function Sd(e,t,n,s,a,i){Ny(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&cp(t,n,!1),Kn(e,t,i);s=t.stateNode,pb.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=ha(t,e.child,null,i),t.child=ha(t,null,o,i)):lt(e,t,o,i),t.memoizedState=s.state,a&&cp(t,n,!0),t.child}function wy(e){var t=e.stateNode;t.pendingContext?op(e,t.pendingContext,t.pendingContext!==t.context):t.context&&op(e,t.context,!1),ch(e,t.containerInfo)}function _p(e,t,n,s,a){return ma(),rh(a),t.flags|=256,lt(e,t,n,s),t.child}var Cd={dehydrated:null,treeContext:null,retryLane:0};function Ed(e){return{baseLanes:e,cachePool:null,transitions:null}}function ky(e,t,n){var s=t.pendingProps,a=we.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ge(we,a&1),e===null)return bd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,i?(s=t.mode,i=t.child,l={mode:"hidden",children:l},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Rc(l,s,0,null),e=ls(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ed(n),t.memoizedState=Cd,e):xh(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return fb(e,t,l,s,o,a,n);if(i){i=s.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Pr(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Pr(o,i):(i=ls(i,l,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,l=e.child.memoizedState,l=l===null?Ed(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Cd,s}return i=e.child,e=i.sibling,s=Pr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function xh(e,t){return t=Rc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Dl(e,t,n,s){return s!==null&&rh(s),ha(t,e.child,null,n),e=xh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fb(e,t,n,s,a,i,l){if(n)return t.flags&256?(t.flags&=-257,s=Eu(Error(I(422))),Dl(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=Rc({mode:"visible",children:s.children},a,0,null),i=ls(i,a,l,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ha(t,e.child,null,l),t.child.memoizedState=Ed(l),t.memoizedState=Cd,i);if(!(t.mode&1))return Dl(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,i=Error(I(419)),s=Eu(i,s,void 0),Dl(e,t,l,s)}if(o=(l&e.childLanes)!==0,Nt||o){if(s=Be,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Wn(e,a),ln(s,e,a,-1))}return wh(),s=Eu(Error(I(421))),Dl(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Eb.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ft=_r(a.nextSibling),Dt=t,je=!0,nn=null,e!==null&&(qt[Ut++]=qn,qt[Ut++]=Un,qt[Ut++]=cs,qn=e.id,Un=e.overflow,cs=t),t=xh(t,s.children),t.flags|=4096,t)}function Sp(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),jd(e.return,t,n)}function Pu(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function _y(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(lt(e,t,s.children,n),s=we.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sp(e,n,t);else if(e.tag===19)Sp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ge(we,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Lo(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Pu(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Lo(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Pu(t,!0,n,null,i);break;case"together":Pu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ds|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=Pr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gb(e,t,n){switch(t.tag){case 3:wy(t),ma();break;case 5:Yx(t);break;case 1:_t(t.type)&&Mo(t);break;case 4:ch(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ge(Ao,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ge(we,we.current&1),t.flags|=128,null):n&t.child.childLanes?ky(e,t,n):(ge(we,we.current&1),e=Kn(e,t,n),e!==null?e.sibling:null);ge(we,we.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return _y(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ge(we,we.current),s)break;return null;case 22:case 23:return t.lanes=0,jy(e,t,n)}return Kn(e,t,n)}var Sy,Pd,Cy,Ey;Sy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pd=function(){};Cy=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Wr(jn.current);var i=null;switch(n){case"input":a=Yu(e,a),s=Yu(e,s),i=[];break;case"select":a=Ce({},a,{value:void 0}),s=Ce({},s,{value:void 0}),i=[];break;case"textarea":a=ed(e,a),s=ed(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Eo)}nd(n,s);var l;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ye("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Ey=function(e,t,n,s){n!==s&&(t.flags|=4)};function za(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function xb(e,t,n){var s=t.pendingProps;switch(nh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return _t(t.type)&&Po(),Je(t),null;case 3:return s=t.stateNode,pa(),ve(kt),ve(nt),dh(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Fl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Rd(nn),nn=null))),Pd(e,t),Je(t),null;case 5:uh(t);var a=Wr(Mi.current);if(n=t.type,e!==null&&t.stateNode!=null)Cy(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(I(166));return Je(t),null}if(e=Wr(jn.current),Fl(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[gn]=t,s[Ei]=i,e=(t.mode&1)!==0,n){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(a=0;a<Ha.length;a++)ye(Ha[a],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":Q0(s,i),ye("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ye("invalid",s);break;case"textarea":R0(s,i),ye("invalid",s)}nd(n,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?s.textContent!==o&&(i.suppressHydrationWarning!==!0&&Tl(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Tl(s.textContent,o,e),a=["children",""+o]):yi.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ye("scroll",s)}switch(n){case"input":wl(s),L0(s,i,!0);break;case"textarea":wl(s),I0(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Eo)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[gn]=t,e[Ei]=s,Sy(e,t,!1,!1),t.stateNode=e;e:{switch(l=rd(n,s),n){case"dialog":ye("cancel",e),ye("close",e),a=s;break;case"iframe":case"object":case"embed":ye("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ha.length;a++)ye(Ha[a],e);a=s;break;case"source":ye("error",e),a=s;break;case"img":case"image":case"link":ye("error",e),ye("load",e),a=s;break;case"details":ye("toggle",e),a=s;break;case"input":Q0(e,s),a=Yu(e,s),ye("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ce({},s,{value:void 0}),ye("invalid",e);break;case"textarea":R0(e,s),a=ed(e,s),ye("invalid",e);break;default:a=s}nd(n,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?ax(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rx(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vi(e,c):typeof c=="number"&&vi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ye("scroll",e):c!=null&&$m(e,i,c,l))}switch(n){case"input":wl(e),L0(e,s,!1);break;case"textarea":wl(e),I0(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Tr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Us(e,!!s.multiple,i,!1):s.defaultValue!=null&&Us(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Eo)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Ey(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(I(166));if(n=Wr(Mi.current),Wr(jn.current),Fl(t)){if(s=t.stateNode,n=t.memoizedProps,s[gn]=t,(i=s.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Tl(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[gn]=t,t.stateNode=s}return Je(t),null;case 13:if(ve(we),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&Ft!==null&&t.mode&1&&!(t.flags&128))Zx(),ma(),t.flags|=98560,i=!1;else if(i=Fl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(I(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[gn]=t}else ma(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),i=!1}else nn!==null&&(Rd(nn),nn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?ze===0&&(ze=3):wh())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return pa(),Pd(e,t),e===null&&Si(t.stateNode.containerInfo),Je(t),null;case 10:return ih(t.type._context),Je(t),null;case 17:return _t(t.type)&&Po(),Je(t),null;case 19:if(ve(we),i=t.memoizedState,i===null)return Je(t),null;if(s=(t.flags&128)!==0,l=i.rendering,l===null)if(s)za(i,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Lo(e),l!==null){for(t.flags|=128,za(i,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(we,we.current&1|2),t.child}e=e.sibling}i.tail!==null&&Qe()>ga&&(t.flags|=128,s=!0,za(i,!1),t.lanes=4194304)}else{if(!s)if(e=Lo(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),za(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!je)return Je(t),null}else 2*Qe()-i.renderingStartTime>ga&&n!==1073741824&&(t.flags|=128,s=!0,za(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=we.current,ge(we,s?n&1|2:n&1),t):(Je(t),null);case 22:case 23:return Nh(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Pt&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function yb(e,t){switch(nh(t),t.tag){case 1:return _t(t.type)&&Po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pa(),ve(kt),ve(nt),dh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uh(t),null;case 13:if(ve(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(we),null;case 4:return pa(),null;case 10:return ih(t.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var Ql=!1,et=!1,vb=typeof WeakSet=="function"?WeakSet:Set,G=null;function Is(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Me(e,t,s)}else n.current=null}function Md(e,t,n){try{n()}catch(s){Me(e,t,s)}}var Cp=!1;function bb(e,t){if(hd=_o,e=Ax(),eh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==n||a!==0&&m.nodeType!==3||(o=l+a),m!==i||s!==0&&m.nodeType!==3||(c=l+s),m.nodeType===3&&(l+=m.nodeValue.length),(p=m.firstChild)!==null;)h=m,m=p;for(;;){if(m===e)break t;if(h===n&&++d===a&&(o=l),h===i&&++u===s&&(c=l),(p=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:e,selectionRange:n},_o=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,j=y.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:Xt(t.type,b),j);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(v){Me(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return y=Cp,Cp=!1,y}function ci(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Md(t,n,i)}a=a.next}while(a!==s)}}function Qc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Td(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Py(e){var t=e.alternate;t!==null&&(e.alternate=null,Py(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gn],delete t[Ei],delete t[xd],delete t[nb],delete t[rb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function My(e){return e.tag===5||e.tag===3||e.tag===4}function Ep(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||My(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fd(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Eo));else if(s!==4&&(e=e.child,e!==null))for(Fd(e,t,n),e=e.sibling;e!==null;)Fd(e,t,n),e=e.sibling}function Ad(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ad(e,t,n),e=e.sibling;e!==null;)Ad(e,t,n),e=e.sibling}var He=null,tn=!1;function nr(e,t,n){for(n=n.child;n!==null;)Ty(e,t,n),n=n.sibling}function Ty(e,t,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Cc,n)}catch{}switch(n.tag){case 5:et||Is(n,t);case 6:var s=He,a=tn;He=null,nr(e,t,n),He=s,tn=a,He!==null&&(tn?(e=He,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(tn?(e=He,n=n.stateNode,e.nodeType===8?Nu(e.parentNode,n):e.nodeType===1&&Nu(e,n),wi(e)):Nu(He,n.stateNode));break;case 4:s=He,a=tn,He=n.stateNode.containerInfo,tn=!0,nr(e,t,n),He=s,tn=a;break;case 0:case 11:case 14:case 15:if(!et&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Md(n,t,l),a=a.next}while(a!==s)}nr(e,t,n);break;case 1:if(!et&&(Is(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Me(n,t,o)}nr(e,t,n);break;case 21:nr(e,t,n);break;case 22:n.mode&1?(et=(s=et)||n.memoizedState!==null,nr(e,t,n),et=s):nr(e,t,n);break;default:nr(e,t,n)}}function Pp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new vb),t.forEach(function(s){var a=Pb.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:He=o.stateNode,tn=!1;break e;case 3:He=o.stateNode.containerInfo,tn=!0;break e;case 4:He=o.stateNode.containerInfo,tn=!0;break e}o=o.return}if(He===null)throw Error(I(160));Ty(i,l,a),He=null,tn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Me(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fy(t,e),t=t.sibling}function Fy(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),dn(e),s&4){try{ci(3,e,e.return),Qc(3,e)}catch(b){Me(e,e.return,b)}try{ci(5,e,e.return)}catch(b){Me(e,e.return,b)}}break;case 1:Yt(t,e),dn(e),s&512&&n!==null&&Is(n,n.return);break;case 5:if(Yt(t,e),dn(e),s&512&&n!==null&&Is(n,n.return),e.flags&32){var a=e.stateNode;try{vi(a,"")}catch(b){Me(e,e.return,b)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&ex(a,i),rd(o,l);var d=rd(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?ax(a,m):u==="dangerouslySetInnerHTML"?rx(a,m):u==="children"?vi(a,m):$m(a,u,m,d)}switch(o){case"input":Xu(a,i);break;case"textarea":tx(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Us(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Us(a,!!i.multiple,i.defaultValue,!0):Us(a,!!i.multiple,i.multiple?[]:"",!1))}a[Ei]=i}catch(b){Me(e,e.return,b)}}break;case 6:if(Yt(t,e),dn(e),s&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(b){Me(e,e.return,b)}}break;case 3:if(Yt(t,e),dn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{wi(t.containerInfo)}catch(b){Me(e,e.return,b)}break;case 4:Yt(t,e),dn(e);break;case 13:Yt(t,e),dn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(bh=Qe())),s&4&&Pp(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(et=(d=et)||u,Yt(t,e),et=d):Yt(t,e),dn(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(G=e,u=e.child;u!==null;){for(m=G=u;G!==null;){switch(h=G,p=h.child,h.tag){case 0:case 11:case 14:case 15:ci(4,h,h.return);break;case 1:Is(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(b){Me(s,n,b)}}break;case 5:Is(h,h.return);break;case 22:if(h.memoizedState!==null){Tp(m);continue}}p!==null?(p.return=h,G=p):Tp(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=sx("display",l))}catch(b){Me(e,e.return,b)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Me(e,e.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(t,e),dn(e),s&4&&Pp(e);break;case 21:break;default:Yt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(My(n)){var s=n;break e}n=n.return}throw Error(I(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(vi(a,""),s.flags&=-33);var i=Ep(e);Ad(e,i,a);break;case 3:case 4:var l=s.stateNode.containerInfo,o=Ep(e);Fd(e,o,l);break;default:throw Error(I(161))}}catch(c){Me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jb(e,t,n){G=e,Ay(e)}function Ay(e,t,n){for(var s=(e.mode&1)!==0;G!==null;){var a=G,i=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Ql;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||et;o=Ql;var d=et;if(Ql=l,(et=c)&&!d)for(G=a;G!==null;)l=G,c=l.child,l.tag===22&&l.memoizedState!==null?Fp(a):c!==null?(c.return=l,G=c):Fp(a);for(;i!==null;)G=i,Ay(i),i=i.sibling;G=a,Ql=o,et=d}Mp(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,G=i):Mp(e)}}function Mp(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||Qc(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!et)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&pp(t,i,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pp(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&wi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}et||t.flags&512&&Td(t)}catch(h){Me(t,t.return,h)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function Tp(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Fp(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qc(4,t)}catch(c){Me(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Me(t,a,c)}}var i=t.return;try{Td(t)}catch(c){Me(t,i,c)}break;case 5:var l=t.return;try{Td(t)}catch(c){Me(t,l,c)}}}catch(c){Me(t,t.return,c)}if(t===e){G=null;break}var o=t.sibling;if(o!==null){o.return=t.return,G=o;break}G=t.return}}var Nb=Math.ceil,Oo=er.ReactCurrentDispatcher,yh=er.ReactCurrentOwner,Ht=er.ReactCurrentBatchConfig,ce=0,Be=null,Re=null,We=0,Pt=0,Os=Rr(0),ze=0,Di=null,ds=0,Lc=0,vh=0,ui=null,bt=null,bh=0,ga=1/0,An=null,zo=!1,Dd=null,Cr=null,Ll=!1,br=null,$o=0,di=0,Qd=null,lo=-1,oo=0;function mt(){return ce&6?Qe():lo!==-1?lo:lo=Qe()}function Er(e){return e.mode&1?ce&2&&We!==0?We&-We:ab.transition!==null?(oo===0&&(oo=xx()),oo):(e=pe,e!==0||(e=window.event,e=e===void 0?16:kx(e.type)),e):1}function ln(e,t,n,s){if(50<di)throw di=0,Qd=null,Error(I(185));tl(e,n,s),(!(ce&2)||e!==Be)&&(e===Be&&(!(ce&2)&&(Lc|=n),ze===4&&cr(e,We)),St(e,s),n===1&&ce===0&&!(t.mode&1)&&(ga=Qe()+500,Fc&&Ir()))}function St(e,t){var n=e.callbackNode;a5(e,t);var s=ko(e,e===Be?We:0);if(s===0)n!==null&&$0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&$0(n),t===1)e.tag===0?sb(Ap.bind(null,e)):Ux(Ap.bind(null,e)),eb(function(){!(ce&6)&&Ir()}),n=null;else{switch(yx(s)){case 1:n=Zm;break;case 4:n=fx;break;case 16:n=wo;break;case 536870912:n=gx;break;default:n=wo}n=$y(n,Dy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Dy(e,t){if(lo=-1,oo=0,ce&6)throw Error(I(327));var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var s=ko(e,e===Be?We:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=qo(e,s);else{t=s;var a=ce;ce|=2;var i=Ly();(Be!==e||We!==t)&&(An=null,ga=Qe()+500,is(e,t));do try{_b();break}catch(o){Qy(e,o)}while(!0);ah(),Oo.current=i,ce=a,Re!==null?t=0:(Be=null,We=0,t=ze)}if(t!==0){if(t===2&&(a=od(e),a!==0&&(s=a,t=Ld(e,a))),t===1)throw n=Di,is(e,0),cr(e,s),St(e,Qe()),n;if(t===6)cr(e,s);else{if(a=e.current.alternate,!(s&30)&&!wb(a)&&(t=qo(e,s),t===2&&(i=od(e),i!==0&&(s=i,t=Ld(e,i))),t===1))throw n=Di,is(e,0),cr(e,s),St(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(I(345));case 2:Br(e,bt,An);break;case 3:if(cr(e,s),(s&130023424)===s&&(t=bh+500-Qe(),10<t)){if(ko(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){mt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=gd(Br.bind(null,e,bt,An),t);break}Br(e,bt,An);break;case 4:if(cr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-an(s);i=1<<l,l=t[l],l>a&&(a=l),s&=~i}if(s=a,s=Qe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nb(s/1960))-s,10<s){e.timeoutHandle=gd(Br.bind(null,e,bt,An),s);break}Br(e,bt,An);break;case 5:Br(e,bt,An);break;default:throw Error(I(329))}}}return St(e,Qe()),e.callbackNode===n?Dy.bind(null,e):null}function Ld(e,t){var n=ui;return e.current.memoizedState.isDehydrated&&(is(e,t).flags|=256),e=qo(e,t),e!==2&&(t=bt,bt=n,t!==null&&Rd(t)),e}function Rd(e){bt===null?bt=e:bt.push.apply(bt,e)}function wb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!on(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cr(e,t){for(t&=~vh,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-an(t),s=1<<n;e[n]=-1,t&=~s}}function Ap(e){if(ce&6)throw Error(I(327));Gs();var t=ko(e,0);if(!(t&1))return St(e,Qe()),null;var n=qo(e,t);if(e.tag!==0&&n===2){var s=od(e);s!==0&&(t=s,n=Ld(e,s))}if(n===1)throw n=Di,is(e,0),cr(e,t),St(e,Qe()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,bt,An),St(e,Qe()),null}function jh(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===0&&(ga=Qe()+500,Fc&&Ir())}}function ms(e){br!==null&&br.tag===0&&!(ce&6)&&Gs();var t=ce;ce|=1;var n=Ht.transition,s=pe;try{if(Ht.transition=null,pe=1,e)return e()}finally{pe=s,Ht.transition=n,ce=t,!(ce&6)&&Ir()}}function Nh(){Pt=Os.current,ve(Os)}function is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,J5(n)),Re!==null)for(n=Re.return;n!==null;){var s=n;switch(nh(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Po();break;case 3:pa(),ve(kt),ve(nt),dh();break;case 5:uh(s);break;case 4:pa();break;case 13:ve(we);break;case 19:ve(we);break;case 10:ih(s.type._context);break;case 22:case 23:Nh()}n=n.return}if(Be=e,Re=e=Pr(e.current,null),We=Pt=t,ze=0,Di=null,vh=Lc=ds=0,bt=ui=null,Gr!==null){for(t=0;t<Gr.length;t++)if(n=Gr[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var l=i.next;i.next=a,s.next=l}n.pending=s}Gr=null}return e}function Qy(e,t){do{var n=Re;try{if(ah(),so.current=Io,Ro){for(var s=Se.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ro=!1}if(us=0,Ue=Ie=Se=null,oi=!1,Ti=0,yh.current=null,n===null||n.return===null){ze=1,Di=t,Re=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=We,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=bp(l);if(p!==null){p.flags&=-257,jp(p,l,o,i,t),p.mode&1&&vp(i,d,t),t=p,c=d;var y=t.updateQueue;if(y===null){var b=new Set;b.add(c),t.updateQueue=b}else y.add(c);break e}else{if(!(t&1)){vp(i,d,t),wh();break e}c=Error(I(426))}}else if(je&&o.mode&1){var j=bp(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),jp(j,l,o,i,t),rh(fa(c,o));break e}}i=c=fa(c,o),ze!==4&&(ze=2),ui===null?ui=[i]:ui.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=yy(i,c,t);hp(i,g);break e;case 1:o=c;var f=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Cr===null||!Cr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=vy(i,o,t);hp(i,v);break e}}i=i.return}while(i!==null)}Iy(n)}catch(w){t=w,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Ly(){var e=Oo.current;return Oo.current=Io,e===null?Io:e}function wh(){(ze===0||ze===3||ze===2)&&(ze=4),Be===null||!(ds&268435455)&&!(Lc&268435455)||cr(Be,We)}function qo(e,t){var n=ce;ce|=2;var s=Ly();(Be!==e||We!==t)&&(An=null,is(e,t));do try{kb();break}catch(a){Qy(e,a)}while(!0);if(ah(),ce=n,Oo.current=s,Re!==null)throw Error(I(261));return Be=null,We=0,ze}function kb(){for(;Re!==null;)Ry(Re)}function _b(){for(;Re!==null&&!K2();)Ry(Re)}function Ry(e){var t=zy(e.alternate,e,Pt);e.memoizedProps=e.pendingProps,t===null?Iy(e):Re=t,yh.current=null}function Iy(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yb(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,Re=null;return}}else if(n=xb(n,t,Pt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);ze===0&&(ze=5)}function Br(e,t,n){var s=pe,a=Ht.transition;try{Ht.transition=null,pe=1,Sb(e,t,n,s)}finally{Ht.transition=a,pe=s}return null}function Sb(e,t,n,s){do Gs();while(br!==null);if(ce&6)throw Error(I(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(i5(e,i),e===Be&&(Re=Be=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ll||(Ll=!0,$y(wo,function(){return Gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var l=pe;pe=1;var o=ce;ce|=4,yh.current=null,bb(e,n),Fy(n,e),Z5(pd),_o=!!hd,pd=hd=null,e.current=n,jb(n),Y2(),ce=o,pe=l,Ht.transition=i}else e.current=n;if(Ll&&(Ll=!1,br=e,$o=a),i=e.pendingLanes,i===0&&(Cr=null),e5(n.stateNode),St(e,Qe()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(zo)throw zo=!1,e=Dd,Dd=null,e;return $o&1&&e.tag!==0&&Gs(),i=e.pendingLanes,i&1?e===Qd?di++:(di=0,Qd=e):di=0,Ir(),null}function Gs(){if(br!==null){var e=yx($o),t=Ht.transition,n=pe;try{if(Ht.transition=null,pe=16>e?16:e,br===null)var s=!1;else{if(e=br,br=null,$o=0,ce&6)throw Error(I(331));var a=ce;for(ce|=4,G=e.current;G!==null;){var i=G,l=i.child;if(G.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(G=d;G!==null;){var u=G;switch(u.tag){case 0:case 11:case 15:ci(8,u,i)}var m=u.child;if(m!==null)m.return=u,G=m;else for(;G!==null;){u=G;var h=u.sibling,p=u.return;if(Py(u),u===d){G=null;break}if(h!==null){h.return=p,G=h;break}G=p}}}var y=i.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}G=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,G=l;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ci(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,G=g;break e}G=i.return}}var f=e.current;for(G=f;G!==null;){l=G;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,G=x;else e:for(l=f;G!==null;){if(o=G,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qc(9,o)}}catch(w){Me(o,o.return,w)}if(o===l){G=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,G=v;break e}G=o.return}}if(ce=a,Ir(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Cc,e)}catch{}s=!0}return s}finally{pe=n,Ht.transition=t}}return!1}function Dp(e,t,n){t=fa(n,t),t=yy(e,t,1),e=Sr(e,t,1),t=mt(),e!==null&&(tl(e,1,t),St(e,t))}function Me(e,t,n){if(e.tag===3)Dp(e,e,n);else for(;t!==null;){if(t.tag===3){Dp(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Cr===null||!Cr.has(s))){e=fa(n,e),e=vy(t,e,1),t=Sr(t,e,1),e=mt(),t!==null&&(tl(t,1,e),St(t,e));break}}t=t.return}}function Cb(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=mt(),e.pingedLanes|=e.suspendedLanes&n,Be===e&&(We&n)===n&&(ze===4||ze===3&&(We&130023424)===We&&500>Qe()-bh?is(e,0):vh|=n),St(e,t)}function Oy(e,t){t===0&&(e.mode&1?(t=Sl,Sl<<=1,!(Sl&130023424)&&(Sl=4194304)):t=1);var n=mt();e=Wn(e,t),e!==null&&(tl(e,t,n),St(e,n))}function Eb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Oy(e,n)}function Pb(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(t),Oy(e,n)}var zy;zy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)Nt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nt=!1,gb(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,je&&t.flags&1048576&&Bx(t,Fo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;io(e,t),e=t.pendingProps;var a=da(t,nt.current);Hs(t,n),a=hh(null,t,s,e,a,n);var i=ph();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_t(s)?(i=!0,Mo(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,oh(t),a.updater=Dc,t.stateNode=a,a._reactInternals=t,wd(t,s,e,n),t=Sd(null,t,s,!0,i,n)):(t.tag=0,je&&i&&th(t),lt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(io(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Tb(s),e=Xt(s,e),a){case 0:t=_d(null,t,s,e,n);break e;case 1:t=kp(null,t,s,e,n);break e;case 11:t=Np(null,t,s,e,n);break e;case 14:t=wp(null,t,s,Xt(s.type,e),n);break e}throw Error(I(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),_d(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),kp(e,t,s,a,n);case 3:e:{if(wy(t),e===null)throw Error(I(387));s=t.pendingProps,i=t.memoizedState,a=i.element,Kx(e,t),Qo(t,s,null,n);var l=t.memoizedState;if(s=l.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=fa(Error(I(423)),t),t=_p(e,t,s,n,a);break e}else if(s!==a){a=fa(Error(I(424)),t),t=_p(e,t,s,n,a);break e}else for(Ft=_r(t.stateNode.containerInfo.firstChild),Dt=t,je=!0,nn=null,n=Gx(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ma(),s===a){t=Kn(e,t,n);break e}lt(e,t,s,n)}t=t.child}return t;case 5:return Yx(t),e===null&&bd(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,fd(s,a)?l=null:i!==null&&fd(s,i)&&(t.flags|=32),Ny(e,t),lt(e,t,l,n),t.child;case 6:return e===null&&bd(t),null;case 13:return ky(e,t,n);case 4:return ch(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ha(t,null,s,n):lt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),Np(e,t,s,a,n);case 7:return lt(e,t,t.pendingProps,n),t.child;case 8:return lt(e,t,t.pendingProps.children,n),t.child;case 12:return lt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,ge(Ao,s._currentValue),s._currentValue=l,i!==null)if(on(i.value,l)){if(i.children===a.children&&!kt.current){t=Kn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Vn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),jd(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(I(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),jd(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}lt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Hs(t,n),a=Gt(a),s=s(a),t.flags|=1,lt(e,t,s,n),t.child;case 14:return s=t.type,a=Xt(s,t.pendingProps),a=Xt(s.type,a),wp(e,t,s,a,n);case 15:return by(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Xt(s,a),io(e,t),t.tag=1,_t(s)?(e=!0,Mo(t)):e=!1,Hs(t,n),xy(t,s,a),wd(t,s,a,n),Sd(null,t,s,!0,e,n);case 19:return _y(e,t,n);case 22:return jy(e,t,n)}throw Error(I(156,t.tag))};function $y(e,t){return px(e,t)}function Mb(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,s){return new Mb(e,t,n,s)}function kh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tb(e){if(typeof e=="function")return kh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Um)return 11;if(e===Bm)return 14}return 2}function Pr(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function co(e,t,n,s,a,i){var l=2;if(s=e,typeof e=="function")kh(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ps:return ls(n.children,a,i,t);case qm:l=8,a|=8;break;case Hu:return e=Vt(12,n,t,a|2),e.elementType=Hu,e.lanes=i,e;case Gu:return e=Vt(13,n,t,a),e.elementType=Gu,e.lanes=i,e;case Wu:return e=Vt(19,n,t,a),e.elementType=Wu,e.lanes=i,e;case Yg:return Rc(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wg:l=10;break e;case Kg:l=9;break e;case Um:l=11;break e;case Bm:l=14;break e;case sr:l=16,s=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=Vt(l,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function ls(e,t,n,s){return e=Vt(7,e,s,t),e.lanes=n,e}function Rc(e,t,n,s){return e=Vt(22,e,s,t),e.elementType=Yg,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function Tu(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fb(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=du(0),this.expirationTimes=du(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _h(e,t,n,s,a,i,l,o,c){return e=new Fb(e,t,n,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Vt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(i),e}function Ab(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function qy(e){if(!e)return Fr;e=e._reactInternals;e:{if(bs(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_t(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(_t(n))return qx(e,n,t)}return t}function Uy(e,t,n,s,a,i,l,o,c){return e=_h(n,s,!0,e,a,i,l,o,c),e.context=qy(null),n=e.current,s=mt(),a=Er(n),i=Vn(s,a),i.callback=t??null,Sr(n,i,a),e.current.lanes=a,tl(e,a,s),St(e,s),e}function Ic(e,t,n,s){var a=t.current,i=mt(),l=Er(a);return n=qy(n),t.context===null?t.context=n:t.pendingContext=n,t=Vn(i,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Sr(a,t,l),e!==null&&(ln(e,a,l,i),ro(e,a,l)),l}function Uo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sh(e,t){Qp(e,t),(e=e.alternate)&&Qp(e,t)}function Db(){return null}var By=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ch(e){this._internalRoot=e}Oc.prototype.render=Ch.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Ic(e,t,null,null)};Oc.prototype.unmount=Ch.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ms(function(){Ic(null,e,null,null)}),t[Gn]=null}};function Oc(e){this._internalRoot=e}Oc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jx();e={blockedOn:null,target:e,priority:t};for(var n=0;n<or.length&&t!==0&&t<or[n].priority;n++);or.splice(n,0,e),n===0&&wx(e)}};function Eh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lp(){}function Qb(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=Uo(l);i.call(d)}}var l=Uy(t,s,e,0,null,!1,!1,"",Lp);return e._reactRootContainer=l,e[Gn]=l.current,Si(e.nodeType===8?e.parentNode:e),ms(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=Uo(c);o.call(d)}}var c=_h(e,0,!1,null,null,!1,!1,"",Lp);return e._reactRootContainer=c,e[Gn]=c.current,Si(e.nodeType===8?e.parentNode:e),ms(function(){Ic(t,c,n,s)}),c}function $c(e,t,n,s,a){var i=n._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Uo(l);o.call(c)}}Ic(t,l,e,a)}else l=Qb(n,t,e,a,s);return Uo(l)}vx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Za(t.pendingLanes);n!==0&&(Hm(t,n|1),St(t,Qe()),!(ce&6)&&(ga=Qe()+500,Ir()))}break;case 13:ms(function(){var s=Wn(e,1);if(s!==null){var a=mt();ln(s,e,1,a)}}),Sh(e,1)}};Gm=function(e){if(e.tag===13){var t=Wn(e,134217728);if(t!==null){var n=mt();ln(t,e,134217728,n)}Sh(e,134217728)}};bx=function(e){if(e.tag===13){var t=Er(e),n=Wn(e,t);if(n!==null){var s=mt();ln(n,e,t,s)}Sh(e,t)}};jx=function(){return pe};Nx=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};ad=function(e,t,n){switch(t){case"input":if(Xu(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Tc(s);if(!a)throw Error(I(90));Jg(s),Xu(s,a)}}}break;case"textarea":tx(e,n);break;case"select":t=n.value,t!=null&&Us(e,!!n.multiple,t,!1)}};ox=jh;cx=ms;var Lb={usingClientEntryPoint:!1,Events:[rl,As,Tc,ix,lx,jh]},$a={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rb={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mx(e),e===null?null:e.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||Db,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Cc=Rl.inject(Rb),bn=Rl}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lb;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(t))throw Error(I(200));return Ab(e,t,null,n)};Rt.createRoot=function(e,t){if(!Eh(e))throw Error(I(299));var n=!1,s="",a=By;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_h(e,1,!1,null,null,n,!1,s,a),e[Gn]=t.current,Si(e.nodeType===8?e.parentNode:e),new Ch(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=mx(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return ms(e)};Rt.hydrate=function(e,t,n){if(!zc(t))throw Error(I(200));return $c(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!Eh(e))throw Error(I(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",l=By;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Uy(t,null,e,1,n??null,a,!1,i,l),e[Gn]=t.current,Si(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Oc(t)};Rt.render=function(e,t,n){if(!zc(t))throw Error(I(200));return $c(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!zc(e))throw Error(I(40));return e._reactRootContainer?(ms(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[Gn]=null})}),!0):!1};Rt.unstable_batchedUpdates=jh;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!zc(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return $c(e,t,n,!1,s)};Rt.version="18.3.1-next-f1338f8080-20240426";function Vy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vy)}catch(e){console.error(e)}}Vy(),Vg.exports=Rt;var Ib=Vg.exports,Rp=Ib;Vu.createRoot=Rp.createRoot,Vu.hydrateRoot=Rp.hydrateRoot;var Ea=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ob={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ur,Am,wg,zb=(wg=class{constructor(){X(this,ur,Ob);X(this,Am,!1)}setTimeoutProvider(e){Z(this,ur,e)}setTimeout(e,t){return S(this,ur).setTimeout(e,t)}clearTimeout(e){S(this,ur).clearTimeout(e)}setInterval(e,t){return S(this,ur).setInterval(e,t)}clearInterval(e){S(this,ur).clearInterval(e)}},ur=new WeakMap,Am=new WeakMap,wg),Kr=new zb;function $b(e){setTimeout(e,0)}var hs=typeof window>"u"||"Deno"in globalThis;function ot(){}function qb(e,t){return typeof e=="function"?e(t):e}function Id(e){return typeof e=="number"&&e>=0&&e!==1/0}function Zy(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Mr(e,t){return typeof e=="function"?e(t):e}function $t(e,t){return typeof e=="function"?e(t):e}function Ip(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(s){if(t.queryHash!==Ph(l,t.options))return!1}else if(!Qi(t.queryKey,l))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function Op(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(ps(t.options.mutationKey)!==ps(i))return!1}else if(!Qi(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function Ph(e,t){return((t==null?void 0:t.queryKeyHashFn)||ps)(e)}function ps(e){return JSON.stringify(e,(t,n)=>Od(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Qi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Qi(e[n],t[n])):!1}var Ub=Object.prototype.hasOwnProperty;function Hy(e,t){if(e===t)return e;const n=zp(e)&&zp(t);if(!n&&!(Od(e)&&Od(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),l=i.length,o=n?new Array(l):{};let c=0;for(let d=0;d<l;d++){const u=n?d:i[d],m=e[u],h=t[u];if(m===h){o[u]=m,(n?d<a:Ub.call(e,u))&&c++;continue}if(m===null||h===null||typeof m!="object"||typeof h!="object"){o[u]=h;continue}const p=Hy(m,h);o[u]=p,p===m&&c++}return a===l&&c===a?e:o}function Bo(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function zp(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Od(e){if(!$p(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!$p(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function $p(e){return Object.prototype.toString.call(e)==="[object Object]"}function Bb(e){return new Promise(t=>{Kr.setTimeout(t,e)})}function zd(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Hy(e,t):t}function Vb(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Zb(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Mh=Symbol();function Gy(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Mh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Wy(e,t){return typeof e=="function"?e(...t):!!e}var Yr,dr,Xs,kg,Hb=(kg=class extends Ea{constructor(){super();X(this,Yr);X(this,dr);X(this,Xs);Z(this,Xs,t=>{if(!hs&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){S(this,dr)||this.setEventListener(S(this,Xs))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,dr))==null||t.call(this),Z(this,dr,void 0))}setEventListener(t){var n;Z(this,Xs,t),(n=S(this,dr))==null||n.call(this),Z(this,dr,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){S(this,Yr)!==t&&(Z(this,Yr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof S(this,Yr)=="boolean"?S(this,Yr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Yr=new WeakMap,dr=new WeakMap,Xs=new WeakMap,kg),Th=new Hb;function $d(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}var Gb=$b;function Wb(){let e=[],t=0,n=o=>{o()},s=o=>{o()},a=Gb;const i=o=>{t?e.push(o):a(()=>{n(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{s(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{a=o}}}var Oe=Wb(),Js,mr,ea,_g,Kb=(_g=class extends Ea{constructor(){super();X(this,Js,!0);X(this,mr);X(this,ea);Z(this,ea,t=>{if(!hs&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){S(this,mr)||this.setEventListener(S(this,ea))}onUnsubscribe(){var t;this.hasListeners()||((t=S(this,mr))==null||t.call(this),Z(this,mr,void 0))}setEventListener(t){var n;Z(this,ea,t),(n=S(this,mr))==null||n.call(this),Z(this,mr,t(this.setOnline.bind(this)))}setOnline(t){S(this,Js)!==t&&(Z(this,Js,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return S(this,Js)}},Js=new WeakMap,mr=new WeakMap,ea=new WeakMap,_g),Vo=new Kb;function Yb(e){return Math.min(1e3*2**e,3e4)}function Ky(e){return(e??"online")==="online"?Vo.isOnline():!0}var qd=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Yy(e){let t=!1,n=0,s;const a=$d(),i=()=>a.status!=="pending",l=b=>{var j;if(!i()){const g=new qd(b);h(g),(j=e.onCancel)==null||j.call(e,g)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>Th.isFocused()&&(e.networkMode==="always"||Vo.isOnline())&&e.canRun(),u=()=>Ky(e.networkMode)&&e.canRun(),m=b=>{i()||(s==null||s(),a.resolve(b))},h=b=>{i()||(s==null||s(),a.reject(b))},p=()=>new Promise(b=>{var j;s=g=>{(i()||d())&&b(g)},(j=e.onPause)==null||j.call(e)}).then(()=>{var b;s=void 0,i()||(b=e.onContinue)==null||b.call(e)}),y=()=>{if(i())return;let b;const j=n===0?e.initialPromise:void 0;try{b=j??e.fn()}catch(g){b=Promise.reject(g)}Promise.resolve(b).then(m).catch(g=>{var _;if(i())return;const f=e.retry??(hs?0:3),x=e.retryDelay??Yb,v=typeof x=="function"?x(n,g):x,w=f===!0||typeof f=="number"&&n<f||typeof f=="function"&&f(n,g);if(t||!w){h(g);return}n++,(_=e.onFail)==null||_.call(e,n,g),Bb(v).then(()=>d()?void 0:p()).then(()=>{t?h(g):y()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?y():p().then(y),a)}}var Xr,Sg,Xy=(Sg=class{constructor(){X(this,Xr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Id(this.gcTime)&&Z(this,Xr,Kr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(hs?1/0:5*60*1e3))}clearGcTimeout(){S(this,Xr)&&(Kr.clearTimeout(S(this,Xr)),Z(this,Xr,void 0))}},Xr=new WeakMap,Sg),Jr,ta,zt,es,qe,Wi,ts,Jt,Fn,Cg,Xb=(Cg=class extends Xy{constructor(t){super();X(this,Jt);X(this,Jr);X(this,ta);X(this,zt);X(this,es);X(this,qe);X(this,Wi);X(this,ts);Z(this,ts,!1),Z(this,Wi,t.defaultOptions),this.setOptions(t.options),this.observers=[],Z(this,es,t.client),Z(this,zt,S(this,es).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Z(this,Jr,Up(this.options)),this.state=t.state??S(this,Jr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=S(this,qe))==null?void 0:t.promise}setOptions(t){if(this.options={...S(this,Wi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Up(this.options);n.data!==void 0&&(this.setState(qp(n.data,n.dataUpdatedAt)),Z(this,Jr,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,zt).remove(this)}setData(t,n){const s=zd(this.state.data,t,this.options);return ne(this,Jt,Fn).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){ne(this,Jt,Fn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=S(this,qe))==null?void 0:s.promise;return(a=S(this,qe))==null||a.cancel(t),n?n.then(ot).catch(ot):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,Jr))}isActive(){return this.observers.some(t=>$t(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Mh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Mr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Zy(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,qe))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=S(this,qe))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),S(this,zt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(S(this,qe)&&(S(this,ts)?S(this,qe).cancel({revert:!0}):S(this,qe).cancelRetry()),this.scheduleGc()),S(this,zt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ne(this,Jt,Fn).call(this,{type:"invalidate"})}async fetch(t,n){var c,d,u,m,h,p,y,b,j,g,f,x;if(this.state.fetchStatus!=="idle"&&((c=S(this,qe))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(S(this,qe))return S(this,qe).continueRetry(),S(this,qe).promise}if(t&&this.setOptions(t),!this.options.queryFn){const v=this.observers.find(w=>w.options.queryFn);v&&this.setOptions(v.options)}const s=new AbortController,a=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Z(this,ts,!0),s.signal)})},i=()=>{const v=Gy(this.options,n),_=(()=>{const k={client:S(this,es),queryKey:this.queryKey,meta:this.meta};return a(k),k})();return Z(this,ts,!1),this.options.persister?this.options.persister(v,_,this):v(_)},o=(()=>{const v={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:S(this,es),state:this.state,fetchFn:i};return a(v),v})();(d=this.options.behavior)==null||d.onFetch(o,this),Z(this,ta,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ne(this,Jt,Fn).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta}),Z(this,qe,Yy({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,onCancel:v=>{v instanceof qd&&v.revert&&this.setState({...S(this,ta),fetchStatus:"idle"}),s.abort()},onFail:(v,w)=>{ne(this,Jt,Fn).call(this,{type:"failed",failureCount:v,error:w})},onPause:()=>{ne(this,Jt,Fn).call(this,{type:"pause"})},onContinue:()=>{ne(this,Jt,Fn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const v=await S(this,qe).start();if(v===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(v),(p=(h=S(this,zt).config).onSuccess)==null||p.call(h,v,this),(b=(y=S(this,zt).config).onSettled)==null||b.call(y,v,this.state.error,this),v}catch(v){if(v instanceof qd){if(v.silent)return S(this,qe).promise;if(v.revert){if(this.state.data===void 0)throw v;return this.state.data}}throw ne(this,Jt,Fn).call(this,{type:"error",error:v}),(g=(j=S(this,zt).config).onError)==null||g.call(j,v,this),(x=(f=S(this,zt).config).onSettled)==null||x.call(f,this.state.data,v,this),v}finally{this.scheduleGc()}}},Jr=new WeakMap,ta=new WeakMap,zt=new WeakMap,es=new WeakMap,qe=new WeakMap,Wi=new WeakMap,ts=new WeakMap,Jt=new WeakSet,Fn=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Jy(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...qp(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Z(this,ta,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),Oe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),S(this,zt).notify({query:this,type:"updated",action:t})})},Cg);function Jy(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ky(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qp(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Up(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yt,ae,Ki,at,ns,na,Ln,hr,Yi,ra,sa,rs,ss,pr,aa,he,Ga,Ud,Bd,Vd,Zd,Hd,Gd,Wd,ev,Eg,Jb=(Eg=class extends Ea{constructor(t,n){super();X(this,he);X(this,yt);X(this,ae);X(this,Ki);X(this,at);X(this,ns);X(this,na);X(this,Ln);X(this,hr);X(this,Yi);X(this,ra);X(this,sa);X(this,rs);X(this,ss);X(this,pr);X(this,aa,new Set);this.options=n,Z(this,yt,t),Z(this,hr,null),Z(this,Ln,$d()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,ae).addObserver(this),Bp(S(this,ae),this.options)?ne(this,he,Ga).call(this):this.updateResult(),ne(this,he,Zd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kd(S(this,ae),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kd(S(this,ae),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ne(this,he,Hd).call(this),ne(this,he,Gd).call(this),S(this,ae).removeObserver(this)}setOptions(t){const n=this.options,s=S(this,ae);if(this.options=S(this,yt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $t(this.options.enabled,S(this,ae))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ne(this,he,Wd).call(this),S(this,ae).setOptions(this.options),n._defaulted&&!Bo(this.options,n)&&S(this,yt).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,ae),observer:this});const a=this.hasListeners();a&&Vp(S(this,ae),s,this.options,n)&&ne(this,he,Ga).call(this),this.updateResult(),a&&(S(this,ae)!==s||$t(this.options.enabled,S(this,ae))!==$t(n.enabled,S(this,ae))||Mr(this.options.staleTime,S(this,ae))!==Mr(n.staleTime,S(this,ae)))&&ne(this,he,Ud).call(this);const i=ne(this,he,Bd).call(this);a&&(S(this,ae)!==s||$t(this.options.enabled,S(this,ae))!==$t(n.enabled,S(this,ae))||i!==S(this,pr))&&ne(this,he,Vd).call(this,i)}getOptimisticResult(t){const n=S(this,yt).getQueryCache().build(S(this,yt),t),s=this.createResult(n,t);return tj(this,s)&&(Z(this,at,s),Z(this,na,this.options),Z(this,ns,S(this,ae).state)),s}getCurrentResult(){return S(this,at)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,Ln).status==="pending"&&S(this,Ln).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){S(this,aa).add(t)}getCurrentQuery(){return S(this,ae)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=S(this,yt).defaultQueryOptions(t),s=S(this,yt).getQueryCache().build(S(this,yt),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return ne(this,he,Ga).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,at)))}createResult(t,n){var E;const s=S(this,ae),a=this.options,i=S(this,at),l=S(this,ns),o=S(this,na),d=t!==s?t.state:S(this,Ki),{state:u}=t;let m={...u},h=!1,p;if(n._optimisticResults){const M=this.hasListeners(),A=!M&&Bp(t,n),$=M&&Vp(t,s,n,a);(A||$)&&(m={...m,...Jy(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:j}=m;p=m.data;let g=!1;if(n.placeholderData!==void 0&&p===void 0&&j==="pending"){let M;i!=null&&i.isPlaceholderData&&n.placeholderData===(o==null?void 0:o.placeholderData)?(M=i.data,g=!0):M=typeof n.placeholderData=="function"?n.placeholderData((E=S(this,sa))==null?void 0:E.state.data,S(this,sa)):n.placeholderData,M!==void 0&&(j="success",p=zd(i==null?void 0:i.data,M,n),h=!0)}if(n.select&&p!==void 0&&!g)if(i&&p===(l==null?void 0:l.data)&&n.select===S(this,Yi))p=S(this,ra);else try{Z(this,Yi,n.select),p=n.select(p),p=zd(i==null?void 0:i.data,p,n),Z(this,ra,p),Z(this,hr,null)}catch(M){Z(this,hr,M)}S(this,hr)&&(y=S(this,hr),p=S(this,ra),b=Date.now(),j="error");const f=m.fetchStatus==="fetching",x=j==="pending",v=j==="error",w=x&&f,_=p!==void 0,C={status:j,fetchStatus:m.fetchStatus,isPending:x,isSuccess:j==="success",isError:v,isInitialLoading:w,isLoading:w,data:p,dataUpdatedAt:m.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:f,isRefetching:f&&!x,isLoadingError:v&&!_,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&_,isStale:Fh(t,n),refetch:this.refetch,promise:S(this,Ln),isEnabled:$t(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const M=K=>{C.status==="error"?K.reject(C.error):C.data!==void 0&&K.resolve(C.data)},A=()=>{const K=Z(this,Ln,C.promise=$d());M(K)},$=S(this,Ln);switch($.status){case"pending":t.queryHash===s.queryHash&&M($);break;case"fulfilled":(C.status==="error"||C.data!==$.value)&&A();break;case"rejected":(C.status!=="error"||C.error!==$.reason)&&A();break}}return C}updateResult(){const t=S(this,at),n=this.createResult(S(this,ae),this.options);if(Z(this,ns,S(this,ae).state),Z(this,na,this.options),S(this,ns).data!==void 0&&Z(this,sa,S(this,ae)),Bo(n,t))return;Z(this,at,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!S(this,aa).size)return!0;const l=new Set(i??S(this,aa));return this.options.throwOnError&&l.add("error"),Object.keys(S(this,at)).some(o=>{const c=o;return S(this,at)[c]!==t[c]&&l.has(c)})};ne(this,he,ev).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ne(this,he,Zd).call(this)}},yt=new WeakMap,ae=new WeakMap,Ki=new WeakMap,at=new WeakMap,ns=new WeakMap,na=new WeakMap,Ln=new WeakMap,hr=new WeakMap,Yi=new WeakMap,ra=new WeakMap,sa=new WeakMap,rs=new WeakMap,ss=new WeakMap,pr=new WeakMap,aa=new WeakMap,he=new WeakSet,Ga=function(t){ne(this,he,Wd).call(this);let n=S(this,ae).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ot)),n},Ud=function(){ne(this,he,Hd).call(this);const t=Mr(this.options.staleTime,S(this,ae));if(hs||S(this,at).isStale||!Id(t))return;const s=Zy(S(this,at).dataUpdatedAt,t)+1;Z(this,rs,Kr.setTimeout(()=>{S(this,at).isStale||this.updateResult()},s))},Bd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,ae)):this.options.refetchInterval)??!1},Vd=function(t){ne(this,he,Gd).call(this),Z(this,pr,t),!(hs||$t(this.options.enabled,S(this,ae))===!1||!Id(S(this,pr))||S(this,pr)===0)&&Z(this,ss,Kr.setInterval(()=>{(this.options.refetchIntervalInBackground||Th.isFocused())&&ne(this,he,Ga).call(this)},S(this,pr)))},Zd=function(){ne(this,he,Ud).call(this),ne(this,he,Vd).call(this,ne(this,he,Bd).call(this))},Hd=function(){S(this,rs)&&(Kr.clearTimeout(S(this,rs)),Z(this,rs,void 0))},Gd=function(){S(this,ss)&&(Kr.clearInterval(S(this,ss)),Z(this,ss,void 0))},Wd=function(){const t=S(this,yt).getQueryCache().build(S(this,yt),this.options);if(t===S(this,ae))return;const n=S(this,ae);Z(this,ae,t),Z(this,Ki,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ev=function(t){Oe.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(S(this,at))}),S(this,yt).getQueryCache().notify({query:S(this,ae),type:"observerResultsUpdated"})})},Eg);function ej(e,t){return $t(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Bp(e,t){return ej(e,t)||e.state.data!==void 0&&Kd(e,t,t.refetchOnMount)}function Kd(e,t,n){if($t(t.enabled,e)!==!1&&Mr(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&Fh(e,t)}return!1}function Vp(e,t,n,s){return(e!==t||$t(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Fh(e,n)}function Fh(e,t){return $t(t.enabled,e)!==!1&&e.isStaleByTime(Mr(t.staleTime,e))}function tj(e,t){return!Bo(e.getCurrentResult(),t)}function Zp(e){return{onFetch:(t,n)=>{var u,m,h,p,y;const s=t.options,a=(h=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],l=((y=t.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let b=!1;const j=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},g=Gy(t.options,t.fetchOptions),f=async(x,v,w)=>{if(b)return Promise.reject();if(v==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:v,direction:w?"backward":"forward",meta:t.options.meta};return j(A),A})(),C=await g(k),{maxPages:E}=t.options,M=w?Zb:Vb;return{pages:M(x.pages,C,E),pageParams:M(x.pageParams,v,E)}};if(a&&i.length){const x=a==="backward",v=x?nj:Hp,w={pages:i,pageParams:l},_=v(s,w);o=await f(w,_,x)}else{const x=e??i.length;do{const v=c===0?l[0]??s.initialPageParam:Hp(s,o);if(c>0&&v==null)break;o=await f(o,v),c++}while(c<x)}return o};t.options.persister?t.fetchFn=()=>{var b,j;return(j=(b=t.options).persister)==null?void 0:j.call(b,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Hp(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function nj(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Xi,hn,it,as,pn,rr,Pg,rj=(Pg=class extends Xy{constructor(t){super();X(this,pn);X(this,Xi);X(this,hn);X(this,it);X(this,as);Z(this,Xi,t.client),this.mutationId=t.mutationId,Z(this,it,t.mutationCache),Z(this,hn,[]),this.state=t.state||tv(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){S(this,hn).includes(t)||(S(this,hn).push(t),this.clearGcTimeout(),S(this,it).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Z(this,hn,S(this,hn).filter(n=>n!==t)),this.scheduleGc(),S(this,it).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){S(this,hn).length||(this.state.status==="pending"?this.scheduleGc():S(this,it).remove(this))}continue(){var t;return((t=S(this,as))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,u,m,h,p,y,b,j,g,f,x,v,w,_,k,C,E;const n=()=>{ne(this,pn,rr).call(this,{type:"continue"})},s={client:S(this,Xi),meta:this.options.meta,mutationKey:this.options.mutationKey};Z(this,as,Yy({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(M,A)=>{ne(this,pn,rr).call(this,{type:"failed",failureCount:M,error:A})},onPause:()=>{ne(this,pn,rr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,it).canRun(this)}));const a=this.state.status==="pending",i=!S(this,as).canStart();try{if(a)n();else{ne(this,pn,rr).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=S(this,it).config).onMutate)==null?void 0:o.call(l,t,this,s));const A=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,s));A!==this.state.context&&ne(this,pn,rr).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const M=await S(this,as).start();return await((m=(u=S(this,it).config).onSuccess)==null?void 0:m.call(u,M,t,this.state.context,this,s)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,M,t,this.state.context,s)),await((b=(y=S(this,it).config).onSettled)==null?void 0:b.call(y,M,null,this.state.variables,this.state.context,this,s)),await((g=(j=this.options).onSettled)==null?void 0:g.call(j,M,null,t,this.state.context,s)),ne(this,pn,rr).call(this,{type:"success",data:M}),M}catch(M){try{throw await((x=(f=S(this,it).config).onError)==null?void 0:x.call(f,M,t,this.state.context,this,s)),await((w=(v=this.options).onError)==null?void 0:w.call(v,M,t,this.state.context,s)),await((k=(_=S(this,it).config).onSettled)==null?void 0:k.call(_,void 0,M,this.state.variables,this.state.context,this,s)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,M,t,this.state.context,s)),M}finally{ne(this,pn,rr).call(this,{type:"error",error:M})}}finally{S(this,it).runNext(this)}}},Xi=new WeakMap,hn=new WeakMap,it=new WeakMap,as=new WeakMap,pn=new WeakSet,rr=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Oe.batch(()=>{S(this,hn).forEach(s=>{s.onMutationUpdate(t)}),S(this,it).notify({mutation:this,type:"updated",action:t})})},Pg);function tv(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rn,en,Ji,Mg,sj=(Mg=class extends Ea{constructor(t={}){super();X(this,Rn);X(this,en);X(this,Ji);this.config=t,Z(this,Rn,new Set),Z(this,en,new Map),Z(this,Ji,0)}build(t,n,s){const a=new rj({client:t,mutationCache:this,mutationId:++bl(this,Ji)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){S(this,Rn).add(t);const n=Il(t);if(typeof n=="string"){const s=S(this,en).get(n);s?s.push(t):S(this,en).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(S(this,Rn).delete(t)){const n=Il(t);if(typeof n=="string"){const s=S(this,en).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&S(this,en).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Il(t);if(typeof n=="string"){const s=S(this,en).get(n),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=Il(t);if(typeof n=="string"){const a=(s=S(this,en).get(n))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Oe.batch(()=>{S(this,Rn).forEach(t=>{this.notify({type:"removed",mutation:t})}),S(this,Rn).clear(),S(this,en).clear()})}getAll(){return Array.from(S(this,Rn))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Op(n,s))}findAll(t={}){return this.getAll().filter(n=>Op(t,n))}notify(t){Oe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Oe.batch(()=>Promise.all(t.map(n=>n.continue().catch(ot))))}},Rn=new WeakMap,en=new WeakMap,Ji=new WeakMap,Mg);function Il(e){var t;return(t=e.options.scope)==null?void 0:t.id}var In,fr,vt,On,Zn,uo,Yd,Tg,aj=(Tg=class extends Ea{constructor(n,s){super();X(this,Zn);X(this,In);X(this,fr);X(this,vt);X(this,On);Z(this,In,n),this.setOptions(s),this.bindMethods(),ne(this,Zn,uo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=S(this,In).defaultMutationOptions(n),Bo(this.options,s)||S(this,In).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,vt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ps(s.mutationKey)!==ps(this.options.mutationKey)?this.reset():((a=S(this,vt))==null?void 0:a.state.status)==="pending"&&S(this,vt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=S(this,vt))==null||n.removeObserver(this)}onMutationUpdate(n){ne(this,Zn,uo).call(this),ne(this,Zn,Yd).call(this,n)}getCurrentResult(){return S(this,fr)}reset(){var n;(n=S(this,vt))==null||n.removeObserver(this),Z(this,vt,void 0),ne(this,Zn,uo).call(this),ne(this,Zn,Yd).call(this)}mutate(n,s){var a;return Z(this,On,s),(a=S(this,vt))==null||a.removeObserver(this),Z(this,vt,S(this,In).getMutationCache().build(S(this,In),this.options)),S(this,vt).addObserver(this),S(this,vt).execute(n)}},In=new WeakMap,fr=new WeakMap,vt=new WeakMap,On=new WeakMap,Zn=new WeakSet,uo=function(){var s;const n=((s=S(this,vt))==null?void 0:s.state)??tv();Z(this,fr,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Yd=function(n){Oe.batch(()=>{var s,a,i,l,o,c,d,u;if(S(this,On)&&this.hasListeners()){const m=S(this,fr).variables,h=S(this,fr).context,p={client:S(this,In),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(s=S(this,On)).onSuccess)==null||a.call(s,n.data,m,h,p),(l=(i=S(this,On)).onSettled)==null||l.call(i,n.data,null,m,h,p)):(n==null?void 0:n.type)==="error"&&((c=(o=S(this,On)).onError)==null||c.call(o,n.error,m,h,p),(u=(d=S(this,On)).onSettled)==null||u.call(d,void 0,n.error,m,h,p))}this.listeners.forEach(m=>{m(S(this,fr))})})},Tg),fn,Fg,ij=(Fg=class extends Ea{constructor(t={}){super();X(this,fn);this.config=t,Z(this,fn,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??Ph(a,n);let l=this.get(i);return l||(l=new Xb({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){S(this,fn).has(t.queryHash)||(S(this,fn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=S(this,fn).get(t.queryHash);n&&(t.destroy(),n===t&&S(this,fn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Oe.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return S(this,fn).get(t)}getAll(){return[...S(this,fn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Ip(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Ip(t,s)):n}notify(t){Oe.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Oe.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Oe.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fn=new WeakMap,Fg),Ee,gr,xr,ia,la,yr,oa,ca,Ag,lj=(Ag=class{constructor(e={}){X(this,Ee);X(this,gr);X(this,xr);X(this,ia);X(this,la);X(this,yr);X(this,oa);X(this,ca);Z(this,Ee,e.queryCache||new ij),Z(this,gr,e.mutationCache||new sj),Z(this,xr,e.defaultOptions||{}),Z(this,ia,new Map),Z(this,la,new Map),Z(this,yr,0)}mount(){bl(this,yr)._++,S(this,yr)===1&&(Z(this,oa,Th.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,Ee).onFocus())})),Z(this,ca,Vo.subscribe(async e=>{e&&(await this.resumePausedMutations(),S(this,Ee).onOnline())})))}unmount(){var e,t;bl(this,yr)._--,S(this,yr)===0&&((e=S(this,oa))==null||e.call(this),Z(this,oa,void 0),(t=S(this,ca))==null||t.call(this),Z(this,ca,void 0))}isFetching(e){return S(this,Ee).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return S(this,gr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,Ee).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=S(this,Ee).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Mr(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return S(this,Ee).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=S(this,Ee).get(s.queryHash),i=a==null?void 0:a.state.data,l=qb(t,i);if(l!==void 0)return S(this,Ee).build(this,s).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return Oe.batch(()=>S(this,Ee).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=S(this,Ee).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=S(this,Ee);Oe.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=S(this,Ee);return Oe.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=Oe.batch(()=>S(this,Ee).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(ot).catch(ot)}invalidateQueries(e,t={}){return Oe.batch(()=>(S(this,Ee).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=Oe.batch(()=>S(this,Ee).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(ot)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(ot)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=S(this,Ee).build(this,t);return n.isStaleByTime(Mr(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ot).catch(ot)}fetchInfiniteQuery(e){return e.behavior=Zp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ot).catch(ot)}ensureInfiniteQueryData(e){return e.behavior=Zp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vo.isOnline()?S(this,gr).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,Ee)}getMutationCache(){return S(this,gr)}getDefaultOptions(){return S(this,xr)}setDefaultOptions(e){Z(this,xr,e)}setQueryDefaults(e,t){S(this,ia).set(ps(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...S(this,ia).values()],n={};return t.forEach(s=>{Qi(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){S(this,la).set(ps(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...S(this,la).values()],n={};return t.forEach(s=>{Qi(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...S(this,xr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Ph(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Mh&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...S(this,xr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){S(this,Ee).clear(),S(this,gr).clear()}},Ee=new WeakMap,gr=new WeakMap,xr=new WeakMap,ia=new WeakMap,la=new WeakMap,yr=new WeakMap,oa=new WeakMap,ca=new WeakMap,Ag),nv=N.createContext(void 0),ue=e=>{const t=N.useContext(nv);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oj=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(nv.Provider,{value:e,children:t})),rv=N.createContext(!1),cj=()=>N.useContext(rv);rv.Provider;function uj(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var dj=N.createContext(uj()),mj=()=>N.useContext(dj),hj=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},pj=e=>{N.useEffect(()=>{e.clearReset()},[e])},fj=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Wy(n,[e.error,s])),gj=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},xj=(e,t)=>e.isLoading&&e.isFetching&&!t,yj=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Gp=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function vj(e,t,n){var m,h,p,y,b;const s=cj(),a=mj(),i=ue(),l=i.defaultQueryOptions(e);(h=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,l),l._optimisticResults=s?"isRestoring":"optimistic",gj(l),hj(l,a),pj(a);const o=!i.getQueryCache().get(l.queryHash),[c]=N.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),u=!s&&e.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(j=>{const g=u?c.subscribe(Oe.batchCalls(j)):ot;return c.updateResult(),g},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(l)},[l,c]),yj(l,d))throw Gp(l,c,a);if(fj({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||y.call(p,l,d),l.experimental_prefetchInRender&&!hs&&xj(d,s)){const j=o?Gp(l,c,a):(b=i.getQueryCache().get(l.queryHash))==null?void 0:b.promise;j==null||j.catch(ot).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function xe(e,t){return vj(e,Jb)}function de(e,t){const n=ue(),[s]=N.useState(()=>new aj(n,e));N.useEffect(()=>{s.setOptions(e)},[s,e]);const a=N.useSyncExternalStore(N.useCallback(l=>s.subscribe(Oe.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=N.useCallback((l,o)=>{s.mutate(l,o).catch(ot)},[s]);if(a.error&&Wy(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}function sv(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=sv(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Q(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=sv(e))&&(s&&(s+=" "),s+=t);return s}function Zo(){return window.fraPortalData||{apiUrl:"/wp-json/fra-portal/v1",nonce:"",userId:0,siteUrl:"",pluginUrl:"",isAdmin:!1}}async function V(e,t={}){const n=Zo(),s=`${n.apiUrl}${e}`,{signal:a,...i}=t,l=await fetch(s,{...i,signal:a,headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce,...i.headers},credentials:"same-origin"});if(!l.ok){const o=await l.json().catch(()=>({message:"An error occurred"}));throw new Error(o.message||`HTTP error ${l.status}`)}return l.json()}function bj(e,t={}){const n=new AbortController;return{promise:V(e,{...t,signal:n.signal}),abort:()=>n.abort()}}const av={get:()=>V("/dashboard"),dismissWelcomeBanner:()=>V("/welcome-banner/dismiss",{method:"POST"})},jj={list:()=>V("/projects"),get:e=>V(`/projects/${e}`),create:e=>V("/projects",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>V(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>V(`/projects/${e}`,{method:"DELETE"})},al={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.stage&&n.set("stage",t.stage),t!=null&&t.status&&n.set("status",t.status),t!=null&&t.task_type&&n.set("task_type",t.task_type);const s=n.toString();return V(`/projects/${e}/tasks${s?`?${s}`:""}`)},get:e=>V(`/tasks/${e}`),create:(e,t)=>V(`/projects/${e}/tasks`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>V(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>V(`/tasks/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),delete:e=>V(`/tasks/${e}`,{method:"DELETE"}),reorder:e=>V("/tasks/reorder",{method:"POST",body:JSON.stringify({order:e})})},Nj={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.limit&&n.set("limit",String(t.limit)),t!=null&&t.offset&&n.set("offset",String(t.offset)),t!=null&&t.grouped&&n.set("grouped","true");const s=n.toString();return V(`/projects/${e}/activity${s?`?${s}`:""}`)}},il={me:()=>V("/me"),updateProfile:e=>V("/me",{method:"PUT",body:JSON.stringify(e)}),getSettings:()=>V("/me/settings"),updateSettings:e=>V("/me/settings",{method:"PUT",body:JSON.stringify(e)}),deleteAccount:e=>V("/account/delete",{method:"POST",body:JSON.stringify({confirmation:e})})},ll={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.category&&n.set("category",t.category),t!=null&&t.file_type&&n.set("file_type",t.file_type);const s=n.toString();return V(`/projects/${e}/files${s?`?${s}`:""}`)},get:e=>V(`/files/${e}`),upload:async(e,t,n,s)=>{const a=Zo(),i=new FormData;i.append("file",t),n!=null&&n.category&&i.append("category",n.category),n!=null&&n.description&&i.append("description",n.description);const l=await fetch(`${a.apiUrl}/projects/${e}/files`,{method:"POST",headers:{"X-WP-Nonce":a.nonce},credentials:"same-origin",body:i,signal:s});if(!l.ok){const o=await l.json().catch(()=>({message:"Upload failed"}));throw new Error(o.message||`HTTP error ${l.status}`)}return l.json()},update:(e,t)=>V(`/files/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>V(`/files/${e}`,{method:"DELETE"}),download:e=>{const t=Zo();return`${t.apiUrl}/files/${e}/download?_wpnonce=${t.nonce}`}},ol={list:(e,t)=>{const n=new URLSearchParams;t!=null&&t.task_id&&n.set("task_id",String(t.task_id)),t!=null&&t.pinned&&n.set("pinned","true");const s=n.toString();return V(`/projects/${e}/notes${s?`?${s}`:""}`)},get:e=>V(`/notes/${e}`),create:(e,t)=>V(`/projects/${e}/notes`,{method:"POST",body:JSON.stringify(t)}),update:(e,t)=>V(`/notes/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>V(`/notes/${e}`,{method:"DELETE"}),togglePin:e=>V(`/notes/${e}/pin`,{method:"PATCH"})},Ah={get:()=>V("/profile"),update:e=>V("/profile",{method:"PUT",body:JSON.stringify(e)}),getCompletion:()=>V("/profile/completion")},Pa={list:e=>{const t=new URLSearchParams;e&&t.set("visa_type",e);const n=t.toString();return V(`/checklists${n?`?${n}`:""}`)},get:e=>V(`/checklists/${e}`),updateItem:(e,t,n)=>V(`/checklists/${e}/items/${t}`,{method:"PUT",body:JSON.stringify(n)}),getTaskChecklist:e=>V(`/tasks/${e}/checklist`),updateTaskChecklistItem:(e,t,n)=>V(`/tasks/${e}/checklist/${t}`,{method:"PUT",body:JSON.stringify({completed:n})}),addTaskChecklistItem:(e,t)=>V(`/tasks/${e}/checklist`,{method:"POST",body:JSON.stringify({title:t})}),deleteTaskChecklistItem:(e,t)=>V(`/tasks/${e}/checklist/${t}`,{method:"DELETE"})},wj={getAll:()=>V("/glossary")},iv={verify:e=>V("/verify",{method:"POST",body:JSON.stringify(e)}),verifyFile:async(e,t,n)=>{const s=Zo(),a=new FormData;a.append("file",t),a.append("verification_type",n);const i=await fetch(`${s.apiUrl}/projects/${e}/verify`,{method:"POST",headers:{"X-WP-Nonce":s.nonce},credentials:"same-origin",body:a});if(!i.ok){const l=await i.json().catch(()=>({message:"Verification failed"}));throw new Error(l.message||`HTTP error ${i.status}`)}return i.json()},getHistory:e=>V(`/projects/${e}/verify/history`)},Dh={list:()=>V("/guides"),get:e=>V(`/guides/${e}`),getPersonalized:e=>V(`/guides/${e}/personalized`),generateAI:e=>V(`/guides/${e}/generate`,{method:"POST"})},Qh={send:(e,t)=>V("/chat",{method:"POST",body:JSON.stringify(e),signal:t}),sendCancellable:e=>bj("/chat",{method:"POST",body:JSON.stringify(e)}),getCategories:()=>V("/chat/categories"),searchTopics:(e,t)=>V(`/chat/search?q=${encodeURIComponent(e)}`,{signal:t})},js={getInfo:()=>V("/membership"),getSubscriptions:()=>V("/membership/subscriptions"),getPayments:()=>V("/membership/payments"),cancelSubscription:e=>V(`/membership/subscriptions/${e}/cancel`,{method:"POST"}),suspendSubscription:e=>V(`/membership/subscriptions/${e}/suspend`,{method:"POST"}),resumeSubscription:e=>V(`/membership/subscriptions/${e}/resume`,{method:"POST"}),getUpgradeOptions:()=>V("/membership/upgrade-options")},Ho={searchCommunes:(e,t)=>{const n=new URLSearchParams;return e.department&&n.set("department",e.department),e.q&&n.set("q",e.q),e.limit&&n.set("limit",String(e.limit)),V(`/research/communes/search?${n.toString()}`,{signal:t})},generateReport:e=>V("/research/report/generate",{method:"POST",body:JSON.stringify(e)}),saveReport:e=>V(`/research/report/${e}/save`,{method:"POST"}),getSavedReports:()=>V("/research/saved")},Ma={getTickets:()=>V("/support/tickets"),getTicket:e=>V(`/support/tickets/${e}`),createTicket:e=>V("/support/tickets",{method:"POST",body:JSON.stringify(e)}),replyToTicket:(e,t)=>V(`/support/tickets/${e}/reply`,{method:"POST",body:JSON.stringify(t)}),deleteTicket:e=>V(`/support/tickets/${e}`,{method:"DELETE"}),getUnreadCount:()=>V("/support/unread-count")},qc={getFeatureStatus:()=>V("/family/feature-status"),getAll:()=>V("/family"),get:e=>V(`/family/${e}`),create:e=>V("/family",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>V(`/family/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>V(`/family/${e}`,{method:"DELETE"})},q={dashboard:["dashboard"],projects:["projects"],project:e=>["project",e],tasks:(e,t)=>["tasks",e,t],task:e=>["task",e],taskChecklist:e=>["taskChecklist",e],activity:e=>["activity",e],user:["user"],userSettings:["userSettings"],files:(e,t)=>["files",e,t],file:e=>["file",e],notes:(e,t)=>["notes",e,t],note:e=>["note",e],profile:["profile"],profileCompletion:["profileCompletion"],checklists:e=>["checklists",e],checklist:e=>["checklist",e],documentTypes:["documentTypes"],generatedDocuments:e=>["generatedDocuments",e],glossary:["glossary"],glossarySearch:e=>["glossary","search",e],verificationHistory:e=>["verificationHistory",e],guides:["guides"],guide:e=>["guide",e],personalizedGuide:e=>["personalizedGuide",e],chatCategories:["chatCategories"],membership:["membership"],subscriptions:["subscriptions"],payments:["payments"],upgradeOptions:["upgradeOptions"],supportTickets:["supportTickets"],supportTicket:e=>["supportTicket",e],supportUnreadCount:["supportUnreadCount"],savedReports:["savedReports"],familyMembers:["familyMembers"],familyMember:e=>["familyMember",e],familyFeatureStatus:["familyFeatureStatus"]};function Ns(){return xe({queryKey:q.dashboard,queryFn:av.get,staleTime:3e4})}function kj(){const e=ue();return de({mutationFn:av.dismissWelcomeBanner,onSuccess:()=>{e.setQueryData(q.dashboard,t=>t&&{...t,welcome_banner:null})}})}function Lh(){return xe({queryKey:q.user,queryFn:il.me,staleTime:6e4*5})}function _j(){const e=ue();return de({mutationFn:t=>il.updateProfile(t),onSuccess:t=>{e.setQueryData(q.user,t)}})}function Rh(){return xe({queryKey:q.userSettings,queryFn:il.getSettings,staleTime:6e4*5})}function lv(){const e=ue();return de({mutationFn:t=>il.updateSettings(t),onSuccess:t=>{e.setQueryData(q.userSettings,t)}})}function Sj(){return de({mutationFn:e=>il.deleteAccount(e)})}function Cj(){const e=ue();return de({mutationFn:({id:t,data:n})=>jj.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:q.dashboard}),e.invalidateQueries({queryKey:q.projects}),e.setQueryData(q.project(t.id),t)}})}function Ej(e,t){return xe({queryKey:q.tasks(e,t),queryFn:()=>al.list(e,t),enabled:e>0})}function Pj(e){const t=ue();return de({mutationFn:n=>al.create(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:q.tasks(e)}),t.invalidateQueries({queryKey:q.dashboard})}})}function Mj(){const e=ue();return de({mutationFn:({id:t,data:n})=>al.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:q.tasks(t.project_id)}),e.invalidateQueries({queryKey:q.dashboard}),e.setQueryData(q.task(t.id),t)}})}function ov(){const e=ue();return de({mutationFn:({id:t,status:n})=>al.updateStatus(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:q.tasks(t.project_id)}),e.invalidateQueries({queryKey:q.dashboard}),e.setQueryData(q.task(t.id),t)}})}function Tj(){const e=ue();return de({mutationFn:({id:t,projectId:n})=>al.delete(t).then(s=>({...s,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.tasks(n.projectId)}),e.invalidateQueries({queryKey:q.dashboard})}})}function Fj(e,t){return xe({queryKey:q.activity(e),queryFn:()=>Nj.list(e,t),enabled:e>0})}function Aj(e,t){return xe({queryKey:q.files(e,t),queryFn:()=>ll.list(e,t),enabled:e>0})}function Dj(e){const t=ue();return de({mutationFn:({file:n,data:s})=>ll.upload(e,n,s),onSuccess:()=>{t.invalidateQueries({queryKey:q.files(e)}),t.invalidateQueries({queryKey:q.dashboard})}})}function Qj(){const e=ue();return de({mutationFn:({id:t,data:n})=>ll.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:q.files(t.project_id)}),e.setQueryData(q.file(t.id),t)}})}function Lj(){const e=ue();return de({mutationFn:({id:t,projectId:n})=>ll.delete(t).then(s=>({...s,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.files(n.projectId)}),e.invalidateQueries({queryKey:q.dashboard})}})}function cv(){return{download:e=>{const t=ll.download(e);window.open(t,"_blank")}}}function Rj(e,t){return xe({queryKey:q.notes(e,t),queryFn:()=>ol.list(e,t),enabled:e>0})}function Ij(e){const t=ue();return de({mutationFn:n=>ol.create(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:q.notes(e)}),t.invalidateQueries({queryKey:q.activity(e)})}})}function Oj(){const e=ue();return de({mutationFn:({id:t,data:n})=>ol.update(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:q.notes(t.project_id)}),e.setQueryData(q.note(t.id),t)}})}function zj(){const e=ue();return de({mutationFn:({id:t,projectId:n})=>ol.delete(t).then(s=>({...s,projectId:n})),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.notes(n.projectId)})}})}function $j(){const e=ue();return de({mutationFn:t=>ol.togglePin(t),onSuccess:t=>{e.invalidateQueries({queryKey:q.notes(t.project_id)}),e.setQueryData(q.note(t.id),t)}})}function Uc(){return xe({queryKey:q.profile,queryFn:Ah.get,staleTime:6e4*5})}function Ta(){const e=ue();return de({mutationFn:t=>Ah.update(t),onSuccess:t=>{e.setQueryData(q.profile,t),e.invalidateQueries({queryKey:q.profileCompletion})}})}function uv(){return xe({queryKey:q.profileCompletion,queryFn:Ah.getCompletion,staleTime:6e4})}function qj(e){return xe({queryKey:q.checklists(e),queryFn:()=>Pa.list(e)})}function Uj(){const e=ue();return de({mutationFn:({checklistType:t,itemId:n,data:s})=>Pa.updateItem(t,n,s),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.checklist(n.checklistType)}),e.invalidateQueries({queryKey:q.checklists()})}})}function Bj(e){return xe({queryKey:q.taskChecklist(e),queryFn:()=>Pa.getTaskChecklist(e),enabled:e>0})}function Vj(e){const t=ue();return de({mutationFn:({itemId:n,completed:s})=>Pa.updateTaskChecklistItem(e,n,s),onSuccess:()=>{t.invalidateQueries({queryKey:q.taskChecklist(e)})}})}function Zj(e){const t=ue();return de({mutationFn:n=>Pa.addTaskChecklistItem(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:q.taskChecklist(e)})}})}function Hj(e){const t=ue();return de({mutationFn:n=>Pa.deleteTaskChecklistItem(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:q.taskChecklist(e)})}})}function Gj(){return xe({queryKey:q.glossary,queryFn:wj.getAll,staleTime:6e4*60})}function Wj(e){const t=ue();return de({mutationFn:({file:n,verificationType:s})=>iv.verifyFile(e,n,s),onSuccess:()=>{t.invalidateQueries({queryKey:q.verificationHistory(e)})}})}function Kj(e){return xe({queryKey:q.verificationHistory(e),queryFn:()=>iv.getHistory(e),enabled:e>0})}function Yj(){return xe({queryKey:q.guides,queryFn:Dh.list,staleTime:6e4*5})}function Xj(e){return xe({queryKey:q.personalizedGuide(e),queryFn:()=>Dh.getPersonalized(e),enabled:!!e})}function Jj(){const e=ue();return de({mutationFn:t=>Dh.generateAI(t),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.personalizedGuide(n)})}})}function eN(){return xe({queryKey:q.chatCategories,queryFn:Qh.getCategories,staleTime:6e4*60})}function dv(){return de({mutationFn:e=>Qh.send(e)})}function tN(e){return xe({queryKey:["chatSearch",e],queryFn:()=>Qh.searchTopics(e),enabled:e.length>=2})}function nN(){return xe({queryKey:q.membership,queryFn:js.getInfo,staleTime:6e4*5})}function rN(){return xe({queryKey:q.subscriptions,queryFn:js.getSubscriptions})}function sN(){return xe({queryKey:q.payments,queryFn:js.getPayments})}function aN(){const e=ue();return de({mutationFn:t=>js.cancelSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:q.subscriptions}),e.invalidateQueries({queryKey:q.membership})}})}function iN(){const e=ue();return de({mutationFn:t=>js.suspendSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:q.subscriptions}),e.invalidateQueries({queryKey:q.membership})}})}function lN(){const e=ue();return de({mutationFn:t=>js.resumeSubscription(t),onSuccess:()=>{e.invalidateQueries({queryKey:q.subscriptions}),e.invalidateQueries({queryKey:q.membership})}})}function oN(){return xe({queryKey:q.upgradeOptions,queryFn:js.getUpgradeOptions,staleTime:6e4*60})}function cN(){return xe({queryKey:q.supportTickets,queryFn:Ma.getTickets,staleTime:3e4})}function uN(e){return xe({queryKey:q.supportTicket(e||0),queryFn:()=>Ma.getTicket(e),enabled:!!e,staleTime:1e4})}function dN(){return xe({queryKey:q.supportUnreadCount,queryFn:Ma.getUnreadCount,staleTime:3e4,refetchInterval:6e4})}function mN(){const e=ue();return de({mutationFn:Ma.createTicket,onSuccess:()=>{e.invalidateQueries({queryKey:q.supportTickets}),e.invalidateQueries({queryKey:q.supportUnreadCount})}})}function hN(){const e=ue();return de({mutationFn:({ticketId:t,content:n})=>Ma.replyToTicket(t,{content:n}),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:q.supportTickets}),e.invalidateQueries({queryKey:q.supportTicket(n.ticketId)})}})}function pN(){const e=ue();return de({mutationFn:Ma.deleteTicket,onSuccess:()=>{e.invalidateQueries({queryKey:q.supportTickets}),e.invalidateQueries({queryKey:q.supportUnreadCount})}})}function fN(){return xe({queryKey:q.savedReports,queryFn:Ho.getSavedReports,staleTime:6e4})}function gN(){return xe({queryKey:q.familyMembers,queryFn:qc.getAll,staleTime:3e4})}function xN(){const e=ue();return de({mutationFn:qc.create,onSuccess:()=>{e.invalidateQueries({queryKey:q.familyMembers})}})}function yN(){const e=ue();return de({mutationFn:({memberId:t,data:n})=>qc.update(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:q.familyMembers})}})}function vN(){const e=ue();return de({mutationFn:qc.delete,onSuccess:()=>{e.invalidateQueries({queryKey:q.familyMembers})}})}const bN={},Wp=e=>{let t;const n=new Set,s=(u,m)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const p=t;t=m??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,p))}},a=()=>t,c={setState:s,getState:a,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(bN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(s,a,c);return c},jN=e=>e?Wp(e):Wp;var mv={exports:{}},hv={},pv={exports:{}},fv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xa=N;function NN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wN=typeof Object.is=="function"?Object.is:NN,kN=xa.useState,_N=xa.useEffect,SN=xa.useLayoutEffect,CN=xa.useDebugValue;function EN(e,t){var n=t(),s=kN({inst:{value:n,getSnapshot:t}}),a=s[0].inst,i=s[1];return SN(function(){a.value=n,a.getSnapshot=t,Fu(a)&&i({inst:a})},[e,n,t]),_N(function(){return Fu(a)&&i({inst:a}),e(function(){Fu(a)&&i({inst:a})})},[e]),CN(n),n}function Fu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wN(e,n)}catch{return!0}}function PN(e,t){return t()}var MN=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?PN:EN;fv.useSyncExternalStore=xa.useSyncExternalStore!==void 0?xa.useSyncExternalStore:MN;pv.exports=fv;var TN=pv.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=N,FN=TN;function AN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var DN=typeof Object.is=="function"?Object.is:AN,QN=FN.useSyncExternalStore,LN=Bc.useRef,RN=Bc.useEffect,IN=Bc.useMemo,ON=Bc.useDebugValue;hv.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var i=LN(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=IN(function(){function c(p){if(!d){if(d=!0,u=p,p=s(p),a!==void 0&&l.hasValue){var y=l.value;if(a(y,p))return m=y}return m=p}if(y=m,DN(u,p))return y;var b=s(p);return a!==void 0&&a(y,b)?(u=p,y):(u=p,m=b)}var d=!1,u,m,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,s,a]);var o=QN(e,i[0],i[1]);return RN(function(){l.hasValue=!0,l.value=o},[o]),ON(o),o};mv.exports=hv;var zN=mv.exports;const $N=Dm(zN),gv={},{useDebugValue:qN}=Te,{useSyncExternalStoreWithSelector:UN}=$N;let Kp=!1;const BN=e=>e;function VN(e,t=BN,n){(gv?"production":void 0)!=="production"&&n&&!Kp&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Kp=!0);const s=UN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qN(s),s}const Yp=e=>{(gv?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?jN(e):e,n=(s,a)=>VN(t,s,a);return Object.assign(n,t),n},ZN=e=>e?Yp(e):Yp,HN={colors:{primary:"#22c55e",secondary:"#3b82f6",accent:"#f59e0b",sidebarBg:"#1f2937",sidebarText:"#ffffff",headerBg:"#ffffff"},layout:{showWpHeader:!1,showWpFooter:!1,showPromoBanner:!1,sidebarPosition:"left",sidebarCollapsed:!1},branding:{title:"Members Portal",logoUrl:""},features:{notifications:!0,fileUpload:!0},menu:[{id:"dashboard",label:"Dashboard",icon:"LayoutDashboard",path:"/dashboard"},{id:"tasks",label:"Tasks",icon:"CheckSquare",path:"/tasks"},{id:"checklists",label:"Checklists",icon:"ClipboardList",path:"/checklists"},{id:"timeline",label:"Timeline",icon:"Calendar",path:"/timeline"},{id:"messages",label:"Messages",icon:"MessageSquare",path:"/messages"},{id:"research",label:"Explore France",icon:"MapPin",path:"/research"},{id:"chat",label:"Ask AI",icon:"Bot",path:"/chat"},{id:"documents",label:"Documents",icon:"FileText",path:"/documents"},{id:"guides",label:"Guides",icon:"BookOpen",path:"/guides"},{id:"glossary",label:"Glossary",icon:"BookMarked",path:"/glossary"},{id:"files",label:"Files",icon:"FolderOpen",path:"/files"},{id:"profile",label:"My Profile",icon:"User",path:"/profile"},{id:"family",label:"Family Members",icon:"Users",path:"/family"},{id:"membership",label:"Membership",icon:"CreditCard",path:"/membership"},{id:"settings",label:"Settings",icon:"Settings",path:"/settings"},{id:"help",label:"Help",icon:"HelpCircle",path:"/help"}],customCss:""},GN=()=>typeof window<"u"&&window.PORTAL_SETTINGS?window.PORTAL_SETTINGS:HN,En=ZN((e,t)=>{const n=GN();return{user:null,setUser:s=>e({user:s}),currentProject:null,setCurrentProject:s=>e({currentProject:s}),settings:n,updateSettings:s=>e(a=>({settings:{...a.settings,...s}})),sidebarCollapsed:n.layout.sidebarCollapsed,toggleSidebar:()=>e(s=>({sidebarCollapsed:!s.sidebarCollapsed})),setSidebarCollapsed:s=>e({sidebarCollapsed:s}),activeView:"dashboard",setActiveView:s=>e({activeView:s}),settingsTab:null,setSettingsTab:s=>e({settingsTab:s}),taskFilters:{stage:null,status:null,taskType:null},setTaskFilters:s=>e(a=>({taskFilters:{...a.taskFilters,...s}})),resetTaskFilters:()=>e({taskFilters:{stage:null,status:null,taskType:null}}),activeModal:null,modalData:null,openModal:(s,a=null)=>e({activeModal:s,modalData:a}),closeModal:()=>e({activeModal:null,modalData:null}),getMenuItems:()=>t().settings.menu,isMenuItemVisible:s=>t().settings.menu.some(a=>a.id===s)}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),R=(e,t)=>{const n=N.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...d},u)=>N.createElement("svg",{ref:u,...WN,width:a,height:a,stroke:s,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${KN(e)}`,o].join(" "),...d},[...t.map(([m,h])=>N.createElement(m,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=R("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=R("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=R("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=R("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=R("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=R("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=R("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=R("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=R("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=R("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=R("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=R("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=R("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=R("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=R("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=R("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=R("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=R("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=R("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=R("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=R("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=R("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=R("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=R("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=R("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=R("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=R("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=R("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=R("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=R("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=R("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=R("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=R("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=R("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=R("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=R("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=R("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=R("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=R("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=R("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=R("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=R("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=R("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=R("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=R("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=R("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=R("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=R("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=R("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=R("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=R("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=R("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=R("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=R("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=R("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=R("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=R("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=R("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=R("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=R("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=R("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=R("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=R("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=R("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=R("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=R("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=R("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=R("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=R("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=R("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=R("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=R("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=R("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=R("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=R("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=R("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=R("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=R("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=R("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=R("ShieldX",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m14.5 9-5 5",key:"1m49dw"}],["path",{d:"m9.5 9 5 5",key:"wyx7zg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=R("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=R("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=R("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=R("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=R("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=R("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=R("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=R("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=R("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=R("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=R("TreeDeciduous",[["path",{d:"M8 19a4 4 0 0 1-2.24-7.32A3.5 3.5 0 0 1 9 6.03V6a3 3 0 1 1 6 0v.04a3.5 3.5 0 0 1 3.24 5.65A4 4 0 0 1 16 19Z",key:"oadzkq"}],["path",{d:"M12 19v3",key:"npa21l"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=R("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=R("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=R("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=R("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=R("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=R("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class pw extends N.Component{constructor(n){super(n);su(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});su(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null}),window.location.hash="#dashboard",window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("ErrorBoundary caught an error:",n,s),this.props.onError&&this.props.onError(n,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx(fw,{error:this.state.error,onRetry:this.handleRetry,onGoHome:this.handleGoHome}):this.props.children}}function fw({error:e,onRetry:t,onGoHome:n}){return r.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-8",role:"alert","aria-live":"assertive",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Nn,{className:"w-8 h-8 text-red-600","aria-hidden":"true"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try again or return to the dashboard."}),e&&!1,r.jsxs("div",{className:"flex items-center justify-center gap-3",children:[r.jsxs("button",{onClick:t,className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Qv,{className:"w-4 h-4","aria-hidden":"true"}),"Try Again"]}),r.jsxs("button",{onClick:n,className:"btn btn-secondary flex items-center gap-2",children:[r.jsx(ws,{className:"w-4 h-4","aria-hidden":"true"}),"Go to Dashboard"]})]})]})})}const gw={LayoutDashboard:Gc,CheckSquare:zh,FileText:me,MessageSquare:rt,Users:Qr,Settings:Gh,HelpCircle:Vh,FolderOpen:Ko,FolderKanban:Ko,BookOpen:Li,Calendar:Qt,ClipboardList:jv,BookMarked:xv,Bot:Ws,User:st,CreditCard:Ri,MapPin:_n,Headphones:Ev},Ol={project:["dashboard","tasks","checklists","timeline","messages"],resources:["research","chat","documents","guides","glossary","files"],account:["profile","family","membership","support","settings","help"]},xw=e=>e?{project:[...e.project,...Ol.project.filter(t=>!e.project.includes(t))],resources:[...e.resources,...Ol.resources.filter(t=>!e.resources.includes(t))],account:[...e.account,...Ol.account.filter(t=>!e.account.includes(t))]}:Ol,yw=(e,t)=>{const n=xw(t),s=[{id:"project",label:"PROJECT",itemIds:n.project},{id:"resources",label:"RESOURCES",itemIds:n.resources},{id:"account",label:"ACCOUNT",itemIds:n.account}],a=e.reduce((i,l)=>(i[l.id]=l,i),{});return s.map(i=>({...i,items:i.itemIds.map(l=>a[l]).filter(l=>l!==void 0)})).filter(i=>i.items.length>0)};function vw(){const{sidebarCollapsed:e,toggleSidebar:t,activeView:n,setActiveView:s,settings:a}=En(),{data:i}=Rh(),l=a.menu,o=yw(l,i==null?void 0:i.menu_order),c={"--sidebar-bg":a.colors.sidebarBg,"--sidebar-text":a.colors.sidebarText};return r.jsxs("aside",{className:Q("sidebar flex flex-col",e?"sidebar-collapsed":"sidebar-expanded"),style:c,children:[r.jsxs("div",{className:"flex items-center h-16 px-4 border-b border-gray-700/50",children:[!e&&r.jsxs("div",{className:"flex items-center gap-3",children:[a.branding.logoUrl?r.jsx("img",{src:a.branding.logoUrl,alt:a.branding.title,className:"h-8 w-auto"}):r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:a.colors.primary},children:r.jsx("span",{className:"text-white font-bold text-sm",children:"R2F"})}),r.jsx("span",{className:"font-semibold text-sidebar-textActive",children:a.branding.title})]}),e&&r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center mx-auto",style:{backgroundColor:a.colors.primary},children:r.jsx("span",{className:"text-white font-bold text-sm",children:"R"})})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto py-4 scrollbar-thin",children:o.map(d=>r.jsxs("div",{className:"mb-6",children:[!e&&r.jsx("h3",{className:"px-4 mb-2 text-xs font-semibold text-sidebar-text/60 uppercase tracking-wider",children:d.label}),r.jsx("ul",{className:"space-y-1 px-2",children:d.items.map(u=>{const m=gw[u.icon]||Gc,h=n===u.id,p=()=>{u.id==="dashboard"?window.location.reload():s(u.id)};return r.jsx("li",{children:r.jsxs("button",{onClick:p,className:Q("nav-item w-full",h&&"nav-item-active",e&&"justify-center px-2"),title:e?u.label:void 0,children:[r.jsx(m,{className:"w-5 h-5 flex-shrink-0"}),!e&&r.jsx("span",{children:u.label})]})},u.id)})})]},d.id))}),r.jsx("button",{onClick:t,className:"flex items-center justify-center h-12 border-t border-gray-700/50 text-sidebar-text hover:text-sidebar-textActive transition-colors",title:e?"Expand sidebar":"Collapse sidebar",children:e?r.jsx(wt,{className:"w-5 h-5"}):r.jsxs(r.Fragment,{children:[r.jsx($h,{className:"w-5 h-5"}),r.jsx("span",{className:"ml-2 text-sm",children:"Collapse"})]})})]})}const bw={dashboard:"Dashboard",tasks:"Tasks",timeline:"Timeline",messages:"Messages",documents:"Documents",guides:"Guides",files:"Files",family:"Family Members",settings:"Settings",help:"Help & Support",profile:"My Profile",checklists:"Checklists",glossary:"Glossary",chat:"Ask AI",membership:"Membership"};function jw(){var d,u;const{activeView:e}=En(),{data:t}=Lh(),{data:n}=Ns(),[s,a]=N.useState(!1),i=N.useRef(null),l=bw[e]||"Dashboard";N.useEffect(()=>{const m=h=>{i.current&&!i.current.contains(h.target)&&a(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const o=[];(d=n==null?void 0:n.task_stats)!=null&&d.overdue&&n.task_stats.overdue>0&&o.push({id:"overdue",type:"warning",title:`${n.task_stats.overdue} Overdue Task${n.task_stats.overdue>1?"s":""}`,message:"You have tasks that need immediate attention",time:"Now"}),n!=null&&n.upcoming_tasks&&n.upcoming_tasks.length>0&&o.push({id:"upcoming",type:"info",title:"Upcoming Deadlines",message:`${n.upcoming_tasks.length} tasks due soon`,time:"Today"}),(u=n==null?void 0:n.project)!=null&&u.days_until_move&&n.project.days_until_move<=30&&o.push({id:"move-date",type:"info",title:"Move Date Approaching",message:`${n.project.days_until_move} days until your move`,time:"Reminder"});const c=o.length;return r.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:l})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative hidden md:block",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search...",className:"w-64 pl-10 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("button",{onClick:()=>a(!s),className:"relative p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors","aria-label":`Notifications${c>0?` (${c} new)`:""}`,children:[r.jsx(Ih,{className:"w-5 h-5"}),c>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),s&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 bg-gray-50",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),r.jsx("button",{onClick:()=>a(!1),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:r.jsx(Ve,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.length>0?r.jsx("div",{className:"divide-y divide-gray-100",children:o.map(m=>r.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:m.type==="warning"?r.jsx(Nn,{className:"w-5 h-5 text-yellow-500"}):m.type==="success"?r.jsx(Ae,{className:"w-5 h-5 text-green-500"}):r.jsx(Mv,{className:"w-5 h-5 text-blue-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.title}),r.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:m.message}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:m.time})]})]})},m.id))}):r.jsxs("div",{className:"px-4 py-8 text-center",children:[r.jsx(Ae,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up!"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"No new notifications"})]})})]})]}),r.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200",children:[t!=null&&t.avatar_url?r.jsx("img",{src:t.avatar_url,alt:t.display_name,className:"w-8 h-8 rounded-full"}):r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:r.jsx(st,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{className:"hidden sm:block",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:(t==null?void 0:t.display_name)||"Loading..."}),r.jsx("p",{className:"text-xs text-gray-500",children:t!=null&&t.is_member?"Member":"Free"})]})]})]})]})}function Nw({stages:e,className:t}){return r.jsxs("div",{className:Q("card",t),children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Progress Tracker"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${ww(e)}%`}})}),r.jsx("div",{className:"relative flex justify-between",children:e.map((n,s)=>r.jsxs("div",{className:"flex flex-col items-center",style:{width:`${100/e.length}%`},children:[r.jsx("div",{className:Q("w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all z-10",n.status==="completed"&&"bg-primary-500 border-primary-500",n.status==="current"&&"bg-white border-primary-500",n.status==="upcoming"&&"bg-white border-gray-300"),children:n.status==="completed"?r.jsx(Or,{className:"w-5 h-5 text-white"}):r.jsx("span",{className:Q("text-sm font-medium",n.status==="current"?"text-primary-500":"text-gray-400"),children:s+1})}),r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx("p",{className:Q("text-sm font-medium",n.status==="completed"&&"text-primary-600",n.status==="current"&&"text-gray-900",n.status==="upcoming"&&"text-gray-400"),children:n.title}),n.total>0&&r.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[n.completed,"/",n.total," tasks"]})]}),n.status==="current"&&n.total>0&&r.jsxs("div",{className:"mt-2 w-full max-w-[80px]",children:[r.jsx("div",{className:"progress-bar h-1",children:r.jsx("div",{className:"progress-bar-fill",style:{width:`${n.percentage}%`}})}),r.jsxs("p",{className:"text-xs text-gray-500 text-center mt-1",children:[n.percentage,"%"]})]})]},n.slug))})]})})]})}function ww(e){const t=e.filter(i=>i.status==="completed").length,n=e.find(i=>i.status==="current"),s=e.findIndex(i=>i.status==="current");if(e.length===0)return 0;const a=t/e.length*100;if(n&&s>=0){const i=100/e.length,l=n.percentage/100*i;return a+l}return a}function rf({task:e,onClick:t}){const n={todo:"status-todo",in_progress:"status-in-progress",waiting:"status-waiting",done:"status-done"},s={low:"priority-low",medium:"priority-medium",high:"priority-high",urgent:"priority-urgent"};return r.jsxs("div",{onClick:t,className:Q("flex items-center justify-between p-3 rounded-lg border transition-colors",e.is_overdue?"border-red-200 bg-red-50":"border-gray-200 bg-white hover:bg-gray-50",t&&"cursor-pointer"),children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.title}),e.is_overdue&&r.jsx(Nn,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("span",{className:Q("badge text-xs",n[e.status]),children:e.status_label}),r.jsx("span",{className:Q("badge text-xs",s[e.priority]),children:e.priority_label}),e.due_date&&r.jsxs("span",{className:Q("flex items-center gap-1 text-xs",e.is_overdue?"text-red-600":"text-gray-500"),children:[r.jsx(Qt,{className:"w-3 h-3"}),kw(e.due_date,e.days_until_due)]})]})]}),e.task_type==="team"&&r.jsx("span",{className:"badge badge-blue text-xs ml-2",children:"Team"})]})}function kw(e,t){return t===null?new Date(e).toLocaleDateString():t===0?"Today":t===1?"Tomorrow":t===-1?"Yesterday":t<0?`${Math.abs(t)} days ago`:t<=7?`In ${t} days`:new Date(e).toLocaleDateString()}const _w={"check-circle":Ae,"plus-circle":Yn,pencil:iw,trash:mw,"arrows-right-left":YN,"arrow-up-tray":Wc,"document-text":me,"chat-bubble-bottom-center-text":rt,"user-plus":st,user:st,envelope:rt,"arrow-right":Zc,"folder-plus":Yn};function Sw({activities:e}){return r.jsxs("div",{className:"card h-full",children:[r.jsx("div",{className:"card-header",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),r.jsx("div",{className:"card-body overflow-y-auto max-h-[500px] scrollbar-thin",children:e.length>0?r.jsx("div",{className:"space-y-4",children:e.map(t=>r.jsx(Cw,{activity:t},t.id))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(rt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No recent activity"})]})})]})}function Cw({activity:e}){const t=_w[e.action_icon]||Ae;return r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:e.user_avatar?r.jsx("img",{src:e.user_avatar,alt:e.user_name,className:"w-8 h-8 rounded-full"}):r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:r.jsx(st,{className:"w-4 h-4 text-gray-500"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(t,{className:"w-4 h-4 text-gray-400"}),r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("span",{className:"font-medium",children:e.user_name})," ",r.jsx("span",{className:"text-gray-600",children:e.action_label.toLowerCase()})]})]}),e.description&&e.description!==e.action_label&&r.jsx("p",{className:"text-sm text-gray-600 mt-0.5 truncate",children:e.description}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.relative_time})]})]})}function Ew({banner:e}){const[t,n]=N.useState(!0),s=kj(),a=async()=>{n(!1);try{await s.mutateAsync()}catch(i){console.error("Failed to dismiss banner:",i)}};return t?r.jsx("div",{className:"rounded-lg border-2 p-4 md:p-5 mb-6",style:{backgroundColor:e.bg_color,borderColor:e.border_color},role:"region","aria-label":"Welcome message",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:e.border_color},children:r.jsx(jr,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.message})]})]}),r.jsx("button",{onClick:a,className:"flex-shrink-0 p-1.5 rounded-full hover:bg-black/10 transition-colors","aria-label":"Dismiss welcome message",disabled:s.isPending,children:r.jsx(Ve,{className:"w-5 h-5 text-gray-600"})})]})}):null}const Pw={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};function fs({isOpen:e,onClose:t,title:n,size:s="md",children:a,footer:i,showHeader:l=!0}){const o=N.useRef(null);N.useEffect(()=>{const d=u=>{u.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[e,t]);const c=d=>{d.target===o.current&&t()};return e?r.jsx("div",{ref:o,onClick:c,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-in fade-in duration-200",children:r.jsxs("div",{className:Q("w-full bg-white rounded-xl shadow-xl animate-in zoom-in-95 duration-200",Pw[s]),children:[l&&n&&r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),r.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(Ve,{className:"w-5 h-5"})})]}),r.jsx("div",{className:Q(l&&n?"px-6 py-4":"",!l&&"relative"),children:a}),i&&r.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:i})]})}):null}const Mw={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};function Tw({isOpen:e,onClose:t,title:n,children:s,footer:a,side:i="right",width:l="md"}){const o=N.useRef(null);N.useEffect(()=>{const d=u=>{u.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}},[e,t]);const c=d=>{d.target===o.current&&t()};return e?r.jsx("div",{ref:o,onClick:c,className:"fixed inset-0 z-50 bg-black/50 animate-in fade-in duration-200",children:r.jsxs("div",{className:Q("fixed inset-y-0 w-full bg-white shadow-xl flex flex-col",Mw[l],i==="right"?"right-0 animate-in slide-in-from-right":"left-0 animate-in slide-in-from-left","duration-300"),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n||"Details"}),r.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(Ve,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:s}),a&&r.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50",children:a})]})}):null}function sf(){const{data:e,isLoading:t,error:n}=Ns(),{setActiveView:s,setSettingsTab:a}=En(),[i,l]=N.useState(!1),[o,c]=N.useState(""),d=Cj();if(t)return r.jsx(Fw,{});if(n)return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx(Nn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Dashboard"}),r.jsx("p",{className:"text-gray-600",children:n.message})]})});if(!e)return null;const{project:u,stages:m,task_stats:h,profile_visa_label:p,welcome_banner:y,upcoming_tasks:b,overdue_tasks:j,recent_activity:g}=e;return r.jsxs("div",{className:"p-6 space-y-6",children:[y&&r.jsx(Ew,{banner:y}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u.title}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[p?r.jsx("span",{children:p}):r.jsxs("button",{onClick:()=>{a("visa-profile"),s("settings")},className:"inline-flex items-center gap-1 text-primary-600 hover:text-primary-700 hover:underline",children:[r.jsx(me,{className:"w-4 h-4"}),r.jsx("span",{children:"Set your visa type in your profile"})]}),u.target_move_date&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mx-2",children:""}),r.jsx(Qt,{className:"w-4 h-4 inline-block mr-1"}),u.days_until_move!==null&&u.days_until_move>0?r.jsxs("span",{children:[u.days_until_move," days until move"]}):r.jsxs("span",{children:["Move date: ",new Date(u.target_move_date).toLocaleDateString()]})]})]})]}),r.jsxs("button",{className:"btn btn-primary",onClick:()=>{c(u.target_move_date||""),l(!0)},children:[r.jsx(Qt,{className:"w-4 h-4"}),"Update Move Date"]})]}),r.jsx(fs,{isOpen:i,onClose:()=>l(!1),title:"Update Move Date",size:"sm",footer:r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:()=>{o&&u.id&&d.mutate({id:u.id,data:{target_move_date:o}},{onSuccess:()=>{l(!1)}})},disabled:d.isPending,children:d.isPending?"Saving...":"Save"})]}),children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"When are you planning to move to France? This helps us prioritize your tasks and deadlines."}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"move-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Move Date"}),r.jsx("input",{id:"move-date",type:"date",value:o,onChange:f=>c(f.target.value),className:"input",min:new Date().toISOString().split("T")[0]})]})]})}),r.jsx(Nw,{stages:m}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(zl,{label:"Tasks Completed",value:`${h.completed}/${h.total}`,subtext:`${h.percentage}% complete`,icon:Ae,color:"green",onClick:()=>s("tasks")}),r.jsx(zl,{label:"In Progress",value:h.in_progress,subtext:"Tasks being worked on",icon:Le,color:"blue",onClick:()=>s("tasks")}),r.jsx(zl,{label:"To Do",value:h.todo,subtext:"Tasks remaining",icon:Le,color:"gray",onClick:()=>s("tasks")}),r.jsx(zl,{label:"Overdue",value:h.overdue,subtext:h.overdue>0?"Need attention!":"All on track",icon:Nn,color:h.overdue>0?"red":"green",onClick:()=>s("tasks")})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[j.length>0&&r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsxs("h2",{className:"text-lg font-semibold text-red-600 flex items-center gap-2",children:[r.jsx(Nn,{className:"w-5 h-5"}),"Overdue Tasks"]}),r.jsx("span",{className:"badge badge-red",children:j.length})]}),r.jsx("div",{className:"card-body space-y-3",children:j.slice(0,5).map(f=>r.jsx(rf,{task:f},f.id))})]}),r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Tasks"}),r.jsxs("button",{onClick:()=>s("tasks"),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:["View all",r.jsx(Zc,{className:"w-4 h-4"})]})]}),r.jsx("div",{className:"card-body",children:b.length>0?r.jsx("div",{className:"space-y-3",children:b.map(f=>r.jsx(rf,{task:f},f.id))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Ae,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No upcoming tasks due soon!"})]})})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(Sw,{activities:g})})]})]})}function zl({label:e,value:t,subtext:n,icon:s,color:a,onClick:i}){const l={green:"bg-green-50 text-green-600",blue:"bg-blue-50 text-blue-600",gray:"bg-gray-50 text-gray-600",red:"bg-red-50 text-red-600",yellow:"bg-yellow-50 text-yellow-600"};return r.jsx("button",{type:"button",onClick:i,className:"card p-5 w-full text-left hover:shadow-md transition-shadow cursor-pointer","aria-label":`${e}: ${t}. ${n}. Click to view tasks.`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n})]}),r.jsx("div",{className:Q("p-2 rounded-lg",l[a]),children:r.jsx(s,{className:"w-5 h-5"})})]})})}function Fw(){return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"h-20 bg-gray-200 rounded-lg animate-pulse"}),r.jsx("div",{className:"h-40 bg-gray-200 rounded-lg animate-pulse"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsx("div",{className:"h-28 bg-gray-200 rounded-lg animate-pulse"},e))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 h-96 bg-gray-200 rounded-lg animate-pulse"}),r.jsx("div",{className:"h-96 bg-gray-200 rounded-lg animate-pulse"})]})]})}function Aw({view:e,onViewChange:t,searchQuery:n,onSearchChange:s,filters:a,onFilterChange:i,onClearFilters:l,stages:o,onAddTask:c,totalTasks:d,filteredTasks:u}){const m=a.stage||a.status||a.taskType||n;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsxs("button",{onClick:()=>t("list"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5",e==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[r.jsx(Fv,{className:"w-4 h-4"}),"List"]}),r.jsxs("button",{onClick:()=>t("board"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5",e==="board"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[r.jsx(Tv,{className:"w-4 h-4"}),"Board"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:n,onChange:h=>s(h.target.value),placeholder:"Search tasks...",className:"pl-9 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 w-64"}),n&&r.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Ve,{className:"w-4 h-4"})})]})]}),r.jsxs("button",{onClick:c,className:"btn btn-primary",children:[r.jsx(Yn,{className:"w-4 h-4"}),"Add Task"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Uh,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:a.stage||"",onChange:h=>i({stage:h.target.value||null}),className:"select w-auto text-sm py-1.5",children:[r.jsx("option",{value:"",children:"All Stages"}),o.map(h=>r.jsx("option",{value:h.slug,children:h.title},h.slug))]}),r.jsxs("select",{value:a.status||"",onChange:h=>i({status:h.target.value||null}),className:"select w-auto text-sm py-1.5",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"todo",children:"To Do"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"waiting",children:"Waiting"}),r.jsx("option",{value:"done",children:"Done"})]}),r.jsxs("select",{value:a.taskType||"",onChange:h=>i({taskType:h.target.value||null}),className:"select w-auto text-sm py-1.5",children:[r.jsx("option",{value:"",children:"All Types"}),r.jsx("option",{value:"client",children:"Client"}),r.jsx("option",{value:"team",children:"Team"})]}),m&&r.jsxs("button",{onClick:l,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[r.jsx(Ve,{className:"w-3 h-3"}),"Clear filters"]}),r.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:u===d?`${d} tasks`:`${u} of ${d} tasks`})]})]})}const Dw={todo:{icon:Ar,color:"text-gray-400",bgColor:"bg-gray-100"},in_progress:{icon:Le,color:"text-blue-500",bgColor:"bg-blue-100"},waiting:{icon:Le,color:"text-yellow-500",bgColor:"bg-yellow-100"},done:{icon:Ae,color:"text-green-500",bgColor:"bg-green-100"}};function Qw({tasks:e,groupBy:t="none",onTaskClick:n,onStatusChange:s,onAddTask:a}){if(t==="none")return r.jsxs("div",{className:"space-y-2",children:[e.map(l=>r.jsx(Ov,{task:l,onClick:()=>n==null?void 0:n(l),onStatusChange:s},l.id)),e.length===0&&r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(Ae,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No tasks found"})]})]});const i=Iw(e,t);return r.jsx("div",{className:"space-y-6",children:Object.entries(i).map(([l,o])=>r.jsx(Lw,{title:Ow(l,t),tasks:o,groupKey:l,onTaskClick:n,onStatusChange:s,onAddTask:a},l))})}function Lw({title:e,tasks:t,groupKey:n,onTaskClick:s,onStatusChange:a,onAddTask:i}){const l=t.filter(o=>o.status==="done").length;return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"card-header flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e}),r.jsxs("span",{className:"text-sm text-gray-500",children:[l,"/",t.length," completed"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"badge badge-gray",children:t.length}),i&&r.jsxs("button",{onClick:()=>i(n),className:"btn btn-ghost btn-sm",children:[r.jsx(Yn,{className:"w-4 h-4"}),"Add Task"]})]})]}),r.jsxs("div",{className:"divide-y divide-gray-100",children:[t.map(o=>r.jsx(Ov,{task:o,onClick:()=>s==null?void 0:s(o),onStatusChange:a,compact:!0},o.id)),t.length===0&&r.jsx("div",{className:"p-6 text-center text-gray-500",children:r.jsx("p",{children:"No tasks in this section"})})]})]})}function Ov({task:e,onClick:t,onStatusChange:n,compact:s}){const a=Dw[e.status],i=a.icon,l=o=>{if(o.stopPropagation(),!n)return;const c=["todo","in_progress","waiting","done"],d=c.indexOf(e.status),u=c[(d+1)%c.length];n(e.id,u)};return r.jsxs("div",{onClick:t,className:Q("flex items-center gap-4 transition-colors",s?"px-6 py-3":"p-4 rounded-lg border border-gray-200",e.is_overdue&&!s&&"border-red-200 bg-red-50",t&&"cursor-pointer hover:bg-gray-50"),children:[r.jsx("button",{onClick:l,className:Q("flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center transition-colors",a.bgColor,"hover:opacity-80"),title:`Status: ${e.status_label}`,children:r.jsx(i,{className:Q("w-4 h-4",a.color)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:Q("font-medium truncate",e.status==="done"?"text-gray-400 line-through":"text-gray-900"),children:e.title}),e.is_overdue&&r.jsx(Nn,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),e.description&&!s&&r.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:e.description})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[r.jsx(Rw,{priority:e.priority}),e.task_type==="team"&&r.jsx("span",{className:"badge badge-blue text-xs",children:"Team"}),e.due_date&&r.jsxs("span",{className:Q("flex items-center gap-1 text-xs",e.is_overdue?"text-red-600":"text-gray-500"),children:[r.jsx(Qt,{className:"w-3 h-3"}),zw(e.due_date)]}),r.jsx("button",{onClick:o=>o.stopPropagation(),className:"p-1 text-gray-400 hover:text-gray-600 rounded",children:r.jsx(Zh,{className:"w-4 h-4"})})]})]})}function Rw({priority:e}){const t={low:"bg-gray-100 text-gray-600",medium:"bg-blue-100 text-blue-700",high:"bg-yellow-100 text-yellow-700",urgent:"bg-red-100 text-red-700"};return r.jsx("span",{className:Q("badge text-xs",t[e]||t.medium),children:e})}function Iw(e,t){return e.reduce((n,s)=>{const a=t==="stage"?s.stage||"unassigned":s.status;return n[a]||(n[a]=[]),n[a].push(s),n},{})}function Ow(e,t){return t==="status"?{todo:"To Do",in_progress:"In Progress",waiting:"Waiting",done:"Done"}[e]||e:e==="unassigned"?"Unassigned":e.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}function zw(e){const t=new Date(e),n=new Date,s=new Date(n);return s.setDate(s.getDate()+1),t.toDateString()===n.toDateString()?"Today":t.toDateString()===s.toDateString()?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}const zr=[{id:"todo",title:"To Do",icon:Ar,color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"},{id:"in_progress",title:"In Progress",icon:Le,color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{id:"waiting",title:"Waiting",icon:Le,color:"text-yellow-500",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"},{id:"done",title:"Done",icon:Ae,color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200"}];function $w({tasks:e,onTaskClick:t,onStatusChange:n,onAddTask:s}){const[a,i]=N.useState(null),[l,o]=N.useState(null),[c,d]=N.useState(null),[u,m]=N.useState(""),h=N.useRef(null),p=zr.reduce((k,C)=>(k[C.id]=e.filter(E=>E.status===C.id),k),{}),y=N.useCallback(k=>{m(k),setTimeout(()=>m(""),100)},[]),b=k=>{i(k),y(`Picked up task: ${k.title}`)},j=()=>{a&&y(`Dropped task: ${a.title}`),i(null),o(null)},g=(k,C)=>{k.preventDefault(),o(C)},f=k=>{var C;if(a&&a.status!==k){const E=((C=zr.find(M=>M.id===k))==null?void 0:C.title)||k;y(`Moved ${a.title} to ${E}`),n==null||n(a.id,k)}i(null),o(null)},x=k=>{d(k),y(`Picked up task: ${k.title}. Use left and right arrow keys to move between columns, then press Space or Enter to drop.`)},v=k=>{var C;if(c&&c.status!==k){const E=((C=zr.find(M=>M.id===k))==null?void 0:C.title)||k;y(`Moved ${c.title} to ${E}`),n==null||n(c.id,k)}else c&&y(`Cancelled. ${c.title} stays in current column.`);d(null)},w=()=>{c&&(y(`Cancelled moving ${c.title}`),d(null))},_=k=>{if(!c)return;const C=zr.findIndex(M=>M.id===c.status),E=k==="left"?Math.max(0,C-1):Math.min(zr.length-1,C+1);if(E!==C){const M=zr[E];y(`Over ${M.title} column. Press Space or Enter to drop here.`),o(M.id)}};return r.jsxs("div",{children:[r.jsx("div",{ref:h,className:"sr-only",role:"status","aria-live":"assertive","aria-atomic":"true",children:u}),c&&r.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-800",role:"status",children:[r.jsxs("strong",{children:["Moving: ",c.title]}),r.jsx("span",{className:"ml-2",children:"Use   to select column, Space/Enter to drop, Escape to cancel"})]}),r.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4",role:"region","aria-label":"Task board",children:zr.map(k=>r.jsx(qw,{column:k,tasks:p[k.id],isDragOver:l===k.id,isKeyboardDragging:!!c,keyboardDragTask:c,onTaskClick:t,onDragStart:b,onDragEnd:j,onDragOver:C=>g(C,k.id),onDrop:()=>f(k.id),onAddTask:()=>s==null?void 0:s(k.id),onKeyboardPickUp:x,onKeyboardDrop:()=>v(k.id),onKeyboardCancel:w,onKeyboardMoveColumn:_},k.id))})]})}function qw({column:e,tasks:t,isDragOver:n,isKeyboardDragging:s,keyboardDragTask:a,onTaskClick:i,onDragStart:l,onDragEnd:o,onDragOver:c,onDrop:d,onAddTask:u,onKeyboardPickUp:m,onKeyboardDrop:h,onKeyboardCancel:p,onKeyboardMoveColumn:y}){const b=e.icon,j=n&&(a==null?void 0:a.status)!==e.id,g=f=>{if(s)switch(f.key){case"ArrowLeft":f.preventDefault(),y("left");break;case"ArrowRight":f.preventDefault(),y("right");break;case" ":case"Enter":f.preventDefault(),n&&h();break;case"Escape":f.preventDefault(),p();break}};return r.jsxs("div",{className:Q("flex-shrink-0 w-80 rounded-xl transition-colors",e.bgColor,j&&"ring-2 ring-primary-500"),onDragOver:c,onDrop:d,onKeyDown:g,role:"listbox","aria-label":`${e.title} column, ${t.length} tasks`,"aria-dropeffect":s?"move":void 0,children:[r.jsx("div",{className:Q("p-4 border-b",e.borderColor),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(b,{className:Q("w-5 h-5",e.color),"aria-hidden":"true"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),r.jsx("span",{className:"text-sm text-gray-500 bg-white px-2 py-0.5 rounded-full",children:t.length})]}),r.jsx("button",{onClick:u,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-white rounded transition-colors","aria-label":`Add task to ${e.title}`,children:r.jsx(Yn,{className:"w-5 h-5","aria-hidden":"true"})})]})}),r.jsxs("div",{className:"p-3 space-y-3 min-h-[200px]",children:[t.map((f,x)=>r.jsx(Uw,{task:f,index:x,totalTasks:t.length,columnTitle:e.title,isBeingDragged:(a==null?void 0:a.id)===f.id,onClick:()=>i==null?void 0:i(f),onDragStart:()=>l(f),onDragEnd:o,onKeyboardPickUp:()=>m(f),onKeyboardDrop:h,onKeyboardCancel:p,onKeyboardMoveColumn:y},f.id)),t.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-400 text-sm",children:[r.jsx("p",{children:"No tasks"}),r.jsx("button",{onClick:u,className:"mt-2 text-primary-600 hover:text-primary-700",children:"+ Add a task"})]})]})]})}function Uw({task:e,index:t,totalTasks:n,columnTitle:s,isBeingDragged:a,onClick:i,onDragStart:l,onDragEnd:o,onKeyboardPickUp:c,onKeyboardDrop:d,onKeyboardCancel:u,onKeyboardMoveColumn:m}){const h=p=>{switch(p.key){case" ":p.preventDefault(),a?d():c();break;case"Enter":p.preventDefault(),a?d():i==null||i();break;case"Escape":a&&(p.preventDefault(),u());break;case"ArrowLeft":a&&(p.preventDefault(),m("left"));break;case"ArrowRight":a&&(p.preventDefault(),m("right"));break}};return r.jsxs("div",{draggable:!0,tabIndex:0,role:"option","aria-selected":a,"aria-grabbed":a,"aria-label":`${e.title}${e.is_overdue?", overdue":""}, priority ${e.priority}${e.due_date?`, due ${af(e.due_date)}`:""}`,"aria-describedby":"drag-instructions","aria-setsize":n,"aria-posinset":t+1,onDragStart:l,onDragEnd:o,onClick:i,onKeyDown:h,className:Q("bg-white rounded-lg border p-3 cursor-pointer transition-all focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",e.is_overdue?"border-red-200":"border-gray-200",a&&"opacity-50 ring-2 ring-primary-500",!a&&"hover:shadow-md"),children:[r.jsx("span",{id:"drag-instructions",className:"sr-only",children:"Press Space to pick up and move this task, or Enter to open task details"}),r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Cv,{className:"w-4 h-4 text-gray-300 flex-shrink-0 mt-0.5 cursor-grab","aria-hidden":"true"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:Q("font-medium text-sm",e.status==="done"?"text-gray-400 line-through":"text-gray-900"),children:e.title}),e.is_overdue&&r.jsx(Nn,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0","aria-hidden":"true"})]}),e.description&&r.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[r.jsx(Bw,{priority:e.priority}),e.task_type==="team"&&r.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Team"}),e.due_date&&r.jsxs("span",{className:Q("flex items-center gap-1 text-xs",e.is_overdue?"text-red-600":"text-gray-500"),children:[r.jsx(Qt,{className:"w-3 h-3","aria-hidden":"true"}),af(e.due_date)]}),e.stage&&r.jsx("span",{className:"text-xs text-gray-400 capitalize",children:e.stage.replace("_"," ")})]})]})]})]})}function Bw({priority:e}){const t={low:"bg-gray-400",medium:"bg-blue-500",high:"bg-yellow-500",urgent:"bg-red-500"};return r.jsx("span",{className:Q("w-2 h-2 rounded-full",t[e]||t.medium),title:`Priority: ${e}`,"aria-label":`Priority: ${e}`})}function af(e){const t=new Date(e),n=new Date,s=Math.ceil((t.getTime()-n.getTime())/(1e3*60*60*24));return s===0?"Today":s===1?"Tomorrow":s===-1?"Yesterday":s<-1?`${Math.abs(s)}d ago`:s<=7?`${s}d`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Vw({taskId:e,editable:t=!0}){const[n,s]=N.useState(""),[a,i]=N.useState(!1),[l,o]=N.useState(null),{data:c,isLoading:d}=Bj(e),u=Vj(e),m=Zj(e),h=Hj(e),p=(c==null?void 0:c.items)||[],y=p.filter(v=>v.completed).length,b=p.length,j=(v,w)=>{t&&u.mutate({itemId:v,completed:!w})},g=async()=>{if(!(!n.trim()||!t))try{await m.mutateAsync(n.trim()),s(""),i(!1)}catch(v){console.error("Failed to add checklist item:",v)}},f=v=>{t&&h.mutate(v)},x=v=>{v.key==="Enter"?g():v.key==="Escape"&&(s(""),i(!1))};return d?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(_e,{className:"w-5 h-5 animate-spin text-gray-400"})}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Task Checklist",b>0&&r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",y,"/",b,")"]})]}),b>0&&r.jsx("div",{className:"flex-1 max-w-xs mx-3",children:r.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:`${b>0?y/b*100:0}%`}})})})]}),r.jsxs("div",{className:"space-y-1.5",children:[p.length===0&&!a?r.jsx("p",{className:"text-sm text-gray-400 italic py-2",children:"No checklist items"}):p.map(v=>r.jsxs("div",{className:"group flex items-start gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",onMouseEnter:()=>o(v.id),onMouseLeave:()=>o(null),children:[r.jsx("button",{onClick:()=>j(v.id,v.completed),disabled:!t||u.isPending,className:Q("flex-shrink-0 mt-0.5 transition-colors",!t&&"cursor-default"),children:v.completed?r.jsx(zh,{className:"w-4 h-4 text-primary-600"}):r.jsx(tf,{className:"w-4 h-4 text-gray-400 hover:text-gray-600"})}),r.jsx("span",{className:Q("flex-1 text-sm transition-all",v.completed?"text-gray-400 line-through":"text-gray-700"),children:v.title}),t&&l===v.id&&r.jsx("button",{onClick:()=>f(v.id),disabled:h.isPending,className:"flex-shrink-0 p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete item",children:r.jsx(Ve,{className:"w-3.5 h-3.5"})})]},v.id)),a?r.jsxs("div",{className:"flex items-center gap-2 p-2",children:[r.jsx(tf,{className:"w-4 h-4 text-gray-300 flex-shrink-0 mt-0.5"}),r.jsx("input",{type:"text",value:n,onChange:v=>s(v.target.value),onKeyDown:x,onBlur:()=>{n.trim()||i(!1)},placeholder:"Add item...",className:"flex-1 text-sm bg-transparent border-none focus:outline-none focus:ring-0 p-0",autoFocus:!0,disabled:m.isPending}),m.isPending&&r.jsx(_e,{className:"w-4 h-4 animate-spin text-gray-400"})]}):t&&r.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 p-2 text-sm text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors w-full",children:[r.jsx(Yn,{className:"w-4 h-4"}),r.jsx("span",{children:"Add item..."})]})]})]})}const Zw=[{value:"todo",label:"To Do",icon:Ar,color:"text-gray-500"},{value:"in_progress",label:"In Progress",icon:Le,color:"text-blue-500"},{value:"waiting",label:"Waiting",icon:Le,color:"text-yellow-500"},{value:"done",label:"Done",icon:Ae,color:"text-green-500"}],Hw=[{value:"low",label:"Low",color:"bg-gray-100 text-gray-600"},{value:"medium",label:"Medium",color:"bg-blue-100 text-blue-700"},{value:"high",label:"High",color:"bg-yellow-100 text-yellow-700"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-700"}];function Gw({task:e,isOpen:t,onClose:n}){const[s,a]=N.useState(!1),[i,l]=N.useState(""),[o,c]=N.useState(""),[d,u]=N.useState(!1),m=Mj(),h=ov(),p=Tj();if(!e)return null;const y=v=>{h.mutate({id:e.id,status:v})},b=v=>{m.mutate({id:e.id,data:{priority:v}})},j=v=>{m.mutate({id:e.id,data:{due_date:v||null}})},g=()=>{i.trim()&&m.mutate({id:e.id,data:{title:i.trim(),description:o.trim()}}),a(!1)},f=()=>{l(e.title),c(e.description||""),a(!0)},x=()=>{p.mutate({id:e.id,projectId:e.project_id}),n()};return r.jsxs(Tw,{isOpen:t,onClose:n,title:"Task Details",width:"lg",footer:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("button",{onClick:()=>u(!0),className:"btn btn-ghost text-red-600 hover:bg-red-50",children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete"]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:n,className:"btn btn-secondary",children:"Close"})})]}),children:[e.is_overdue&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[r.jsx(Nn,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"This task is overdue"})]}),r.jsx("div",{className:"mb-6",children:s?r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",value:i,onChange:v=>l(v.target.value),className:"input text-lg font-semibold",placeholder:"Task title",autoFocus:!0}),r.jsx("textarea",{value:o,onChange:v=>c(v.target.value),className:"textarea h-24",placeholder:"Add a description..."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:g,className:"btn btn-primary btn-sm",children:"Save"}),r.jsx("button",{onClick:()=>a(!1),className:"btn btn-secondary btn-sm",children:"Cancel"})]})]}):r.jsxs("div",{onClick:f,className:"cursor-pointer group",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 group-hover:text-primary-600",children:e.title}),e.description?r.jsx("p",{className:"mt-2 text-gray-600",children:e.description}):r.jsx("p",{className:"mt-2 text-gray-400 italic",children:"Click to add description..."})]})}),r.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:r.jsx(Vw,{taskId:e.id,editable:!0})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(_s,{icon:Ar,label:"Status",children:r.jsx("div",{className:"flex gap-2",children:Zw.map(v=>{const w=v.icon;return r.jsxs("button",{onClick:()=>y(v.value),className:Q("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5",e.status===v.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[r.jsx(w,{className:Q("w-4 h-4",e.status===v.value?"text-white":v.color)}),v.label]},v.value)})})}),r.jsx(_s,{icon:Bh,label:"Priority",children:r.jsx("div",{className:"flex gap-2",children:Hw.map(v=>r.jsx("button",{onClick:()=>b(v.value),className:Q("px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",e.priority===v.value?v.color+" ring-2 ring-offset-1 ring-gray-400":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:v.label},v.value))})}),r.jsxs(_s,{icon:Qt,label:"Due Date",children:[r.jsx("input",{type:"date",value:e.due_date||"",onChange:v=>j(v.target.value),className:"input w-auto"}),e.due_date&&e.days_until_due!==null&&r.jsx("span",{className:Q("ml-2 text-sm",e.is_overdue?"text-red-600":"text-gray-500"),children:Ww(e.days_until_due)})]}),e.stage&&r.jsx(_s,{icon:Iv,label:"Stage",children:r.jsx("span",{className:"badge badge-primary capitalize",children:e.stage.replace("_"," ")})}),r.jsx(_s,{icon:st,label:"Type",children:r.jsx("span",{className:Q("badge",e.task_type==="team"?"badge-blue":"badge-gray"),children:e.task_type_label})}),e.assignee_name&&r.jsx(_s,{icon:st,label:"Assignee",children:r.jsx("span",{className:"text-gray-900",children:e.assignee_name})})]}),r.jsx("hr",{className:"my-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Related"}),r.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left",children:[r.jsx(me,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Attachments"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Add files to this task"})]})]}),r.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors text-left",children:[r.jsx(rt,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Comments"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Add notes or comments"})]})]})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"text-xs text-gray-400",children:["Created ",new Date(e.created_at).toLocaleDateString(),e.completed_at&&r.jsxs(r.Fragment,{children:["  Completed ",new Date(e.completed_at).toLocaleDateString()]})]})}),d&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Task?"}),r.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete "',e.title,'"? This action cannot be undone.']}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>u(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:x,className:"btn bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})})]})}function _s({icon:e,label:t,children:n}){return r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2 w-24 flex-shrink-0 text-gray-500",children:[r.jsx(e,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:t})]}),r.jsx("div",{className:"flex-1 flex items-center flex-wrap gap-2",children:n})]})}function Ww(e){return e===0?"(Today)":e===1?"(Tomorrow)":e===-1?"(Yesterday)":e<0?`(${Math.abs(e)} days overdue)`:`(in ${e} days)`}function Kw({isOpen:e,onClose:t,projectId:n,defaultStatus:s="todo",defaultStage:a,stages:i=[]}){const[l,o]=N.useState(""),[c,d]=N.useState(""),[u,m]=N.useState(s),[h,p]=N.useState("medium"),[y,b]=N.useState(a||""),[j,g]=N.useState(""),[f,x]=N.useState("client"),v=Pj(n),w=k=>{k.preventDefault(),l.trim()&&v.mutate({title:l.trim(),description:c.trim()||void 0,status:u,priority:h,stage:y||void 0,due_date:j||void 0,task_type:f},{onSuccess:()=>{o(""),d(""),m(s),p("medium"),b(a||""),g(""),x("client"),t()}})},_=()=>{o(""),d(""),m(s),p("medium"),b(a||""),g(""),x("client"),t()};return r.jsx(fs,{isOpen:e,onClose:_,title:"Add New Task",size:"lg",footer:r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:_,className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:w,disabled:!l.trim()||v.isPending,className:"btn btn-primary",children:v.isPending?"Creating...":"Create Task"})]}),children:r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Task Title ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{id:"title",type:"text",value:l,onChange:k=>o(k.target.value),className:"input",placeholder:"What needs to be done?",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{id:"description",value:c,onChange:k=>d(k.target.value),className:"textarea h-24",placeholder:"Add more details..."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{id:"status",value:u,onChange:k=>m(k.target.value),className:"select",children:[r.jsx("option",{value:"todo",children:"To Do"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"waiting",children:"Waiting"}),r.jsx("option",{value:"done",children:"Done"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsxs("select",{id:"priority",value:h,onChange:k=>p(k.target.value),className:"select",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"urgent",children:"Urgent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"stage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Stage"}),r.jsxs("select",{id:"stage",value:y,onChange:k=>b(k.target.value),className:"select",children:[r.jsx("option",{value:"",children:"Select stage..."}),i.map(k=>r.jsx("option",{value:k.slug,children:k.title},k.slug))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),r.jsx("input",{id:"dueDate",type:"date",value:j,onChange:k=>g(k.target.value),className:"input"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"taskType",value:"client",checked:f==="client",onChange:k=>x(k.target.value),className:"w-4 h-4 text-primary-600"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Client Task"}),r.jsx("span",{className:"text-xs text-gray-500",children:"(visible to you)"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"taskType",value:"team",checked:f==="team",onChange:k=>x(k.target.value),className:"w-4 h-4 text-primary-600"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Team Task"}),r.jsx("span",{className:"text-xs text-gray-500",children:"(for support team)"})]})]})]})]})})}function Yw(){var A;const[e,t]=N.useState("board"),[n,s]=N.useState(""),{taskFilters:a,setTaskFilters:i,resetTaskFilters:l}=En(),[o,c]=N.useState(null),[d,u]=N.useState(!1),[m,h]=N.useState(!1),[p,y]=N.useState({}),{data:b,isLoading:j}=Ns(),{data:g=[],isLoading:f}=Ej(((A=b==null?void 0:b.project)==null?void 0:A.id)||0),x=ov(),v=N.useMemo(()=>{let $=[...g];if(n){const K=n.toLowerCase();$=$.filter(P=>{var T;return P.title.toLowerCase().includes(K)||((T=P.description)==null?void 0:T.toLowerCase().includes(K))})}return a.stage&&($=$.filter(K=>K.stage===a.stage)),a.status&&($=$.filter(K=>K.status===a.status)),a.taskType&&($=$.filter(K=>K.task_type===a.taskType)),$},[g,n,a]),w=$=>{c($),u(!0)},_=($,K)=>{x.mutate({id:$,status:K})},k=($,K)=>{y({status:$,stage:K}),h(!0)},C=()=>{u(!1),c(null)};if(j||f)return r.jsx(Xw,{});if(!(b!=null&&b.project))return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),r.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})});const{project:E,stages:M}=b;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tasks"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your relocation tasks across all stages"})]}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx(Aw,{view:e,onViewChange:t,searchQuery:n,onSearchChange:s,filters:a,onFilterChange:i,onClearFilters:l,stages:M,onAddTask:()=>k(),totalTasks:g.length,filteredTasks:v.length})})}),e==="board"?r.jsx($w,{tasks:v,onTaskClick:w,onStatusChange:_,onAddTask:$=>k($)}):r.jsx(Qw,{tasks:v,groupBy:"stage",onTaskClick:w,onStatusChange:_,onAddTask:$=>k(void 0,$)}),v.length===0&&g.length>0&&r.jsxs("div",{className:"card p-8 text-center mt-6",children:[r.jsx("p",{className:"text-gray-500",children:"No tasks match your filters"}),r.jsx("button",{onClick:l,className:"mt-2 text-primary-600 hover:text-primary-700",children:"Clear filters"})]}),g.length===0&&r.jsxs("div",{className:"card p-12 text-center mt-6",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tasks yet"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first task to start tracking your relocation progress"}),r.jsx("button",{onClick:()=>k(),className:"btn btn-primary",children:"Create Your First Task"})]}),r.jsx(Gw,{task:o,isOpen:d,onClose:C}),r.jsx(Kw,{isOpen:m,onClose:()=>h(!1),projectId:E.id,defaultStatus:p.status,defaultStage:p.stage,stages:M})]})}function Xw(){return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})})}),r.jsx("div",{className:"flex gap-4",children:[1,2,3,4].map(e=>r.jsxs("div",{className:"w-80 flex-shrink-0",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded-t-xl animate-pulse"}),r.jsx("div",{className:"bg-gray-100 rounded-b-xl p-4 space-y-3",children:[1,2,3].map(t=>r.jsx("div",{className:"h-24 bg-gray-200 rounded-lg animate-pulse"},t))})]},e))})]})}const lf=["application/pdf","image/jpeg","image/png","image/gif","image/webp","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv"],Jw=10*1024*1024;function e4({projectId:e,onUploadComplete:t,className:n}){const[s,a]=N.useState(!1),[i,l]=N.useState([]),o=N.useRef(null),c=Dj(e),d=f=>lf.includes(f.type)?f.size>Jw?"File size exceeds 10MB limit":null:"File type not allowed",u=N.useCallback(f=>{const v=Array.from(f).map(w=>{const _=d(w);return{id:`${w.name}-${Date.now()}`,file:w,progress:0,status:_?"error":"pending",error:_||void 0}});l(w=>[...w,...v]),v.filter(w=>w.status==="pending").forEach(w=>{m(w)})},[]),m=async f=>{l(x=>x.map(v=>v.id===f.id?{...v,status:"uploading",progress:10}:v));try{await c.mutateAsync({file:f.file,data:{category:f.category}}),l(x=>x.map(v=>v.id===f.id?{...v,status:"success",progress:100}:v)),setTimeout(()=>{l(x=>x.filter(v=>v.id!==f.id))},2e3),t==null||t()}catch(x){l(v=>v.map(w=>w.id===f.id?{...w,status:"error",error:x instanceof Error?x.message:"Upload failed"}:w))}},h=N.useCallback(f=>{f.preventDefault(),a(!0)},[]),p=N.useCallback(f=>{f.preventDefault(),a(!1)},[]),y=N.useCallback(f=>{f.preventDefault(),a(!1),f.dataTransfer.files&&u(f.dataTransfer.files)},[u]),b=()=>{var f;(f=o.current)==null||f.click()},j=f=>{f.target.files&&u(f.target.files),f.target.value=""},g=f=>{l(x=>x.filter(v=>v.id!==f))};return r.jsxs("div",{className:n,children:[r.jsxs("div",{onClick:b,onDragOver:h,onDragLeave:p,onDrop:y,className:Q("border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-colors",s?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-400 hover:bg-gray-50"),children:[r.jsx("input",{ref:o,type:"file",multiple:!0,accept:lf.join(","),onChange:j,className:"hidden"}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:Q("w-12 h-12 rounded-full flex items-center justify-center mb-4",s?"bg-primary-100":"bg-gray-100"),children:r.jsx(Wc,{className:Q("w-6 h-6",s?"text-primary-600":"text-gray-500")})}),r.jsx("p",{className:"text-gray-700 font-medium mb-1",children:s?"Drop files here":"Drag and drop files here"}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"or click to browse"}),r.jsx("p",{className:"text-xs text-gray-400",children:"PDF, Images, Word, Excel up to 10MB"})]})]}),i.length>0&&r.jsx("div",{className:"mt-4 space-y-2",children:i.map(f=>r.jsxs("div",{className:Q("flex items-center gap-3 p-3 rounded-lg border",f.status==="error"?"border-red-200 bg-red-50":f.status==="success"?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"),children:[f.status==="success"?r.jsx(Ae,{className:"w-5 h-5 text-green-500 flex-shrink-0"}):f.status==="error"?r.jsx(Ye,{className:"w-5 h-5 text-red-500 flex-shrink-0"}):r.jsx(Dr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:f.file.name}),f.status==="error"?r.jsx("p",{className:"text-xs text-red-600",children:f.error}):f.status==="uploading"?r.jsx("div",{className:"mt-1 h-1 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all",style:{width:`${f.progress}%`}})}):f.status==="success"?r.jsx("p",{className:"text-xs text-green-600",children:"Uploaded successfully"}):null]}),(f.status==="error"||f.status==="pending")&&r.jsx("button",{onClick:()=>g(f.id),className:"p-1 text-gray-400 hover:text-gray-600",children:r.jsx(Ve,{className:"w-4 h-4"})})]},f.id))})]})}const zv={document:me,image:Pv,pdf:me,spreadsheet:_v,archive:Dr,other:Dr},Yo={document:"text-blue-500 bg-blue-50",image:"text-purple-500 bg-purple-50",pdf:"text-red-500 bg-red-50",spreadsheet:"text-green-500 bg-green-50",archive:"text-yellow-500 bg-yellow-50",other:"text-gray-500 bg-gray-50"};function t4({files:e,view:t,onFileClick:n,onDownload:s,onDelete:a,onVerify:i,isLoading:l}){return l?t==="grid"?r.jsx(s4,{}):r.jsx(a4,{}):e.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(Ko,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No documents yet"}),r.jsx("p",{className:"text-gray-600",children:"Upload your first document to get started"})]}):t==="grid"?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:e.map(o=>r.jsx(n4,{file:o,onClick:()=>n(o),onDownload:()=>s(o),onDelete:()=>a(o),onVerify:i?()=>i(o):void 0},o.id))}):r.jsx("div",{className:"card overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Size"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(o=>r.jsx(r4,{file:o,onClick:()=>n(o),onDownload:()=>s(o),onDelete:()=>a(o),onVerify:i?()=>i(o):void 0},o.id))})]})})}function n4({file:e,onClick:t,onDownload:n,onDelete:s,onVerify:a}){const[i,l]=N.useState(!1),o=N.useRef(null),c=zv[e.file_type]||Dr,d=Yo[e.file_type]||Yo.other;return N.useEffect(()=>{function u(m){o.current&&!o.current.contains(m.target)&&l(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),r.jsxs("div",{className:"card group hover:shadow-md transition-shadow",children:[r.jsx("div",{onClick:t,className:"aspect-square p-4 flex items-center justify-center cursor-pointer bg-gray-50 border-b border-gray-100",children:e.thumbnail_url?r.jsx("img",{src:e.thumbnail_url,alt:e.original_name,className:"max-w-full max-h-full object-contain rounded"}):r.jsx("div",{className:Q("w-16 h-16 rounded-xl flex items-center justify-center",d),children:r.jsx(c,{className:"w-8 h-8"})})}),r.jsx("div",{className:"p-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",title:e.original_name,children:e.original_name}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.file_size_formatted})]}),r.jsxs("div",{className:"relative",ref:o,children:[r.jsx("button",{onClick:()=>l(!i),className:"p-1 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Zh,{className:"w-4 h-4"})}),i&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-36 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[r.jsxs("button",{onClick:()=>{t(),l(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(kv,{className:"w-4 h-4"}),"Preview"]}),r.jsxs("button",{onClick:()=>{n(),l(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ii,{className:"w-4 h-4"}),"Download"]}),a&&r.jsxs("button",{onClick:()=>{a(),l(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(dl,{className:"w-4 h-4"}),"Verify"]}),r.jsx("hr",{className:"my-1 border-gray-100"}),r.jsxs("button",{onClick:()=>{s(),l(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete"]})]})]})]})})]})}function r4({file:e,onClick:t,onDownload:n,onDelete:s,onVerify:a}){const i=zv[e.file_type]||Dr,l=Yo[e.file_type]||Yo.other,o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return r.jsxs("tr",{className:"hover:bg-gray-50 group",children:[r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:Q("w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",l),children:r.jsx(i,{className:"w-5 h-5"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("button",{onClick:t,className:"text-sm font-medium text-gray-900 hover:text-primary-600 truncate block max-w-xs",title:e.original_name,children:e.original_name}),r.jsx("p",{className:"text-xs text-gray-500",children:e.file_type_label})]})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:e.category_label})}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.file_size_formatted}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:o(e.created_at)}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Preview",children:r.jsx(kv,{className:"w-4 h-4"})}),r.jsx("button",{onClick:n,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",title:"Download",children:r.jsx(Ii,{className:"w-4 h-4"})}),a&&r.jsx("button",{onClick:a,className:"p-1.5 text-gray-400 hover:text-primary-600 rounded-lg hover:bg-primary-50",title:"Verify Document",children:r.jsx(dl,{className:"w-4 h-4"})}),r.jsx("button",{onClick:s,className:"p-1.5 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50",title:"Delete",children:r.jsx(cn,{className:"w-4 h-4"})})]})})]})}function s4(){return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"aspect-square bg-gray-100 animate-pulse"}),r.jsxs("div",{className:"p-3 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded animate-pulse w-1/2"})]})]},e))})}function a4(){return r.jsxs("div",{className:"card overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 h-12 animate-pulse"}),r.jsx("div",{className:"divide-y divide-gray-200",children:[1,2,3,4,5].map(e=>r.jsxs("div",{className:"px-4 py-3 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg animate-pulse"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/3"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded animate-pulse w-1/4"})]})]},e))})]})}const i4={document:me,image:Pv,pdf:me,spreadsheet:_v,archive:Dr,other:Dr},of={document:"text-blue-500 bg-blue-100",image:"text-purple-500 bg-purple-100",pdf:"text-red-500 bg-red-100",spreadsheet:"text-green-500 bg-green-100",archive:"text-yellow-500 bg-yellow-100",other:"text-gray-500 bg-gray-100"},l4=[{value:"identity",label:"Identity Documents"},{value:"financial",label:"Financial"},{value:"housing",label:"Housing"},{value:"employment",label:"Employment"},{value:"visa",label:"Visa & Immigration"},{value:"medical",label:"Medical"},{value:"education",label:"Education"},{value:"other",label:"Other"}];function o4({file:e,isOpen:t,onClose:n,projectId:s}){const[a,i]=N.useState(!1),[l,o]=N.useState(!1),[c,d]=N.useState(null),[u,m]=N.useState(""),h=Lj(),p=Qj(),{download:y}=cv();if(!e)return null;const b=i4[e.file_type]||Dr,j=of[e.file_type]||of.other,g=k=>new Date(k).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=()=>{y(e.id)},x=()=>{h.mutate({id:e.id,projectId:s},{onSuccess:()=>{i(!1),n()}})},v=()=>{d(e.category),m(e.description||""),o(!0)},w=()=>{p.mutate({id:e.id,data:{category:c||void 0,description:u||void 0}},{onSuccess:()=>{o(!1)}})},_=e.file_type==="image"||e.file_type==="pdf";return r.jsxs(r.Fragment,{children:[r.jsx(fs,{isOpen:t,onClose:n,title:"",size:"xl",showHeader:!1,children:r.jsxs("div",{className:"flex flex-col lg:flex-row h-[80vh] max-h-[700px]",children:[r.jsx("div",{className:"flex-1 bg-gray-100 flex items-center justify-center p-4 min-h-[300px]",children:e.file_type==="image"&&e.preview_url?r.jsx("img",{src:e.preview_url,alt:e.original_name,className:"max-w-full max-h-full object-contain rounded-lg shadow-sm"}):e.file_type==="pdf"&&e.preview_url?r.jsx("iframe",{src:e.preview_url,className:"w-full h-full rounded-lg border-0",title:e.original_name}):r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:Q("w-24 h-24 rounded-2xl flex items-center justify-center mx-auto mb-4",j),children:r.jsx(b,{className:"w-12 h-12"})}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Preview not available"}),r.jsxs("button",{onClick:f,className:"btn btn-primary",children:[r.jsx(Ii,{className:"w-4 h-4"}),"Download to View"]})]})}),r.jsxs("div",{className:"w-full lg:w-80 border-t lg:border-t-0 lg:border-l border-gray-200 flex flex-col",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 truncate",title:e.original_name,children:e.original_name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.file_type_label})]}),r.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:r.jsx(Ve,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:f,className:"btn btn-secondary flex-1",children:[r.jsx(Ii,{className:"w-4 h-4"}),"Download"]}),_&&e.preview_url&&r.jsx("a",{href:e.preview_url,target:"_blank",rel:"noopener noreferrer",className:"btn btn-secondary",children:r.jsx(Wo,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(tw,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Size:"}),r.jsx("span",{className:"text-gray-900",children:e.file_size_formatted})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(Qt,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Uploaded:"}),r.jsx("span",{className:"text-gray-900",children:g(e.created_at)})]}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsx(st,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"By:"}),r.jsx("span",{className:"text-gray-900",children:e.uploaded_by_name})]}),r.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[r.jsx(Iv,{className:"w-4 h-4 text-gray-400 mt-0.5"}),r.jsx("span",{className:"text-gray-600",children:"Category:"}),l?r.jsx("select",{value:c||"",onChange:k=>d(k.target.value),className:"select text-sm py-1",children:l4.map(k=>r.jsx("option",{value:k.value,children:k.label},k.value))}):r.jsx("span",{className:"text-gray-900",children:e.category_label})]}),r.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l?r.jsx("textarea",{value:u,onChange:k=>m(k.target.value),className:"textarea text-sm",rows:3,placeholder:"Add a description..."}):r.jsx("p",{className:"text-sm text-gray-600",children:e.description||"No description"})]}),l?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:w,disabled:p.isPending,className:"btn btn-primary btn-sm flex-1",children:p.isPending?"Saving...":"Save"}),r.jsx("button",{onClick:()=>o(!1),className:"btn btn-secondary btn-sm",children:"Cancel"})]}):r.jsx("button",{onClick:v,className:"text-sm text-primary-600 hover:text-primary-700",children:"Edit details"}),e.is_generated&&r.jsx("div",{className:"flex items-center gap-2 p-2 bg-primary-50 rounded-lg text-sm",children:r.jsx("span",{className:"text-primary-700",children:"Auto-generated document"})})]})]}),r.jsx("div",{className:"p-4 border-t border-gray-200",children:r.jsxs("button",{onClick:()=>i(!0),className:"w-full btn btn-secondary text-red-600 hover:bg-red-50 hover:border-red-200",children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete File"]})})]})]})}),r.jsx(fs,{isOpen:a,onClose:()=>i(!1),title:"Delete File",size:"sm",footer:r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>i(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:x,disabled:h.isPending,className:"btn bg-red-600 text-white hover:bg-red-700",children:h.isPending?"Deleting...":"Delete"})]}),children:r.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",r.jsx("strong",{children:e.original_name}),"? This action cannot be undone."]})})]})}const c4=[{value:"health-insurance",label:"Health Insurance",description:"Verify coverage meets French visa requirements"},{value:"financial",label:"Financial Documents",description:"Verify bank statements and proof of funds (Coming Soon)"},{value:"accommodation",label:"Accommodation Proof",description:"Verify housing documents (Coming Soon)"}],Vr={passed:{color:"text-green-600",bgColor:"bg-green-50 border-green-200",icon:ow,label:"Passed"},failed:{color:"text-red-600",bgColor:"bg-red-50 border-red-200",icon:cw,label:"Failed"},needs_review:{color:"text-yellow-600",bgColor:"bg-yellow-50 border-yellow-200",icon:lw,label:"Needs Review"},error:{color:"text-gray-600",bgColor:"bg-gray-50 border-gray-200",icon:Ye,label:"Error"}};function u4({projectId:e,existingFileId:t,onClose:n}){var E,M;const[s,a]=N.useState(null),[i,l]=N.useState("health-insurance"),[o,c]=N.useState(!1),[d,u]=N.useState(!1),[m,h]=N.useState(!1),{mutate:p,isPending:y,data:b,reset:j}=Wj(e),{data:g=[],isLoading:f}=Kj(e),x=N.useCallback(A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?c(!0):A.type==="dragleave"&&c(!1)},[]),v=N.useCallback(A=>{A.preventDefault(),A.stopPropagation(),c(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&(a(A.dataTransfer.files[0]),j())},[j]),w=N.useCallback(A=>{A.target.files&&A.target.files[0]&&(a(A.target.files[0]),j())},[j]),_=N.useCallback(()=>{s&&p({file:s,verificationType:i})},[s,i,p]),k=N.useCallback(()=>{a(null),j(),h(!1)},[j]),C=i!=="health-insurance";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Type"}),r.jsx("div",{className:"grid grid-cols-1 gap-3",children:c4.map(A=>r.jsx("button",{onClick:()=>l(A.value),disabled:A.value!=="health-insurance",className:Q("text-left p-4 rounded-lg border-2 transition-all",i===A.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300 bg-white",A.value!=="health-insurance"&&"opacity-50 cursor-not-allowed"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:Q("w-5 h-5 rounded-full border-2 mt-0.5 flex items-center justify-center",i===A.value?"border-primary-500 bg-primary-500":"border-gray-300 bg-white"),children:i===A.value&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:A.label}),r.jsx("div",{className:"text-sm text-gray-500 mt-0.5",children:A.description})]})]})},A.value))})]}),!s&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Document"}),r.jsxs("div",{onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:v,className:Q("relative border-2 border-dashed rounded-lg p-8 text-center transition-colors",o?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-gray-400 bg-gray-50"),children:[r.jsx("input",{type:"file",onChange:w,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:C}),r.jsx(Wc,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:C?"This verification type is not available yet":"Drop file here or click to upload"}),r.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG, DOC, DOCX up to 10MB"})]})]}),s&&!b&&r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:r.jsx(me,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]}),r.jsx("button",{onClick:k,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:r.jsx(Ve,{className:"w-4 h-4"})})]})}),s&&!b&&r.jsx("button",{onClick:_,disabled:y||C,className:"btn btn-primary w-full",children:y?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Analyzing Document..."]}):r.jsxs(r.Fragment,{children:[r.jsx(dl,{className:"w-4 h-4"}),"Verify Document"]})}),b&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:Q("card border-2 p-6",Vr[b.status].bgColor),children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("div",{className:Q("p-3 rounded-full",Vr[b.status].bgColor),children:(()=>{const A=Vr[b.status].icon;return r.jsx(A,{className:Q("w-6 h-6",Vr[b.status].color)})})()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("h3",{className:Q("text-lg font-semibold",Vr[b.status].color),children:Vr[b.status].label})}),r.jsx("p",{className:"text-gray-700",children:b.message})]})]}),b.details&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("button",{onClick:()=>h(!m),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900 mb-3",children:[m?r.jsx(ya,{className:"w-4 h-4"}):r.jsx(kn,{className:"w-4 h-4"}),"View Details"]}),m&&r.jsxs("div",{className:"space-y-3 pl-6 border-l-2 border-gray-200",children:[b.details.coverage_type&&r.jsx(Ss,{label:"Coverage Type",value:b.details.coverage_type}),b.details.coverage_territory&&r.jsx(Ss,{label:"Coverage Territory",value:b.details.coverage_territory}),b.details.coverage_duration&&r.jsx(Ss,{label:"Coverage Duration",value:b.details.coverage_duration}),b.details.provider&&r.jsx(Ss,{label:"Provider",value:b.details.provider}),b.details.start_date&&r.jsx(Ss,{label:"Start Date",value:b.details.start_date}),b.details.end_date&&r.jsx(Ss,{label:"End Date",value:b.details.end_date})]})]}),((E=b.details)==null?void 0:E.issues)&&b.details.issues.length>0&&r.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ye,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Issues Found"}),r.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:b.details.issues.map((A,$)=>r.jsxs("li",{className:"flex items-start gap-1",children:[r.jsx("span",{className:"text-red-600",children:""}),r.jsx("span",{children:A})]},$))})]})]})}),((M=b.details)==null?void 0:M.recommendations)&&b.details.recommendations.length>0&&r.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ae,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Recommendations"}),r.jsx("ul",{className:"text-sm text-blue-700 space-y-1",children:b.details.recommendations.map((A,$)=>r.jsxs("li",{className:"flex items-start gap-1",children:[r.jsx("span",{className:"text-blue-600",children:""}),r.jsx("span",{children:A})]},$))})]})]})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:k,className:"btn btn-secondary flex-1",children:"Verify Another Document"}),n&&r.jsx("button",{onClick:n,className:"btn btn-primary flex-1",children:"Done"})]})]}),r.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>u(!d),className:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-gray-900 mb-3",children:[r.jsx(Le,{className:"w-4 h-4"}),"Verification History",d?r.jsx(ya,{className:"w-4 h-4"}):r.jsx(kn,{className:"w-4 h-4"})]}),d&&r.jsx("div",{className:"space-y-3",children:f?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-primary-500 rounded-full animate-spin mx-auto mb-2"}),"Loading history..."]}):g.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No verification history yet"}):g.map((A,$)=>r.jsx(d4,{result:A},$))})]})]})}function Ss({label:e,value:t}){return r.jsxs("div",{children:[r.jsx("dt",{className:"text-xs font-medium text-gray-500 mb-0.5",children:e}),r.jsx("dd",{className:"text-sm text-gray-900",children:t})]})}function d4({result:e}){const t=Vr[e.status],n=t.icon;return r.jsx("div",{className:Q("card p-4 border",t.bgColor),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:Q("p-2 rounded-lg",t.bgColor),children:r.jsx(n,{className:Q("w-4 h-4",t.color)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-center gap-2 mb-1",children:r.jsx("span",{className:Q("text-sm font-medium",t.color),children:t.label})}),r.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.message})]})]})})}function m4({isOpen:e,onClose:t,projectId:n,existingFileId:s}){return r.jsx(fs,{isOpen:e,onClose:t,title:"AI Document Verification",size:"lg",children:r.jsx(u4,{projectId:n,existingFileId:s,onClose:t})})}const cf=[{value:"",label:"All Categories"},{value:"identity",label:"Identity Documents"},{value:"financial",label:"Financial"},{value:"housing",label:"Housing"},{value:"employment",label:"Employment"},{value:"visa",label:"Visa & Immigration"},{value:"medical",label:"Medical"},{value:"education",label:"Education"},{value:"other",label:"Other"}],h4=[{value:"",label:"All Types"},{value:"document",label:"Documents"},{value:"pdf",label:"PDFs"},{value:"image",label:"Images"},{value:"spreadsheet",label:"Spreadsheets"},{value:"other",label:"Other"}];function uf(){var le;const[e,t]=N.useState("grid"),[n,s]=N.useState(""),[a,i]=N.useState(""),[l,o]=N.useState(""),[c,d]=N.useState(!1),[u,m]=N.useState(null),[h,p]=N.useState(!1),[y,b]=N.useState(!1),[j,g]=N.useState(null),[f,x]=N.useState(!0),{data:v,isLoading:w}=Ns(),_=((le=v==null?void 0:v.project)==null?void 0:le.id)||0,{data:k}=fN(),C=(k==null?void 0:k.reports)||[],{data:E=[],isLoading:M,refetch:A}=Aj(_,{category:a||void 0,file_type:l||void 0}),{download:$}=cv(),K=N.useMemo(()=>{if(!n)return E;const B=n.toLowerCase();return E.filter(oe=>{var be;return oe.original_name.toLowerCase().includes(B)||((be=oe.description)==null?void 0:be.toLowerCase().includes(B))})},[E,n]),P=N.useMemo(()=>{const B={};return E.forEach(oe=>{B[oe.category]=(B[oe.category]||0)+1}),B},[E]),T=a||l||n,F=B=>{m(B),p(!0)},U=B=>{$(B.id)},D=B=>{m(B),p(!0)},L=B=>{g(B),b(!0)},O=()=>{p(!1),m(null)},W=()=>{b(!1),g(null)},J=()=>{s(""),i(""),o("")};return w||M?r.jsx(p4,{}):v!=null&&v.project?r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and organize your relocation documents"})]}),C.length>0&&r.jsxs("div",{className:"card mb-6",children:[r.jsxs("button",{onClick:()=>x(!f),className:"w-full px-4 py-3 flex items-center justify-between text-left hover:bg-gray-50 transition-colors rounded-t-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:r.jsx(_n,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:"Saved Relocation Reports"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[C.length," report",C.length!==1?"s":""," saved"]})]})]}),f?r.jsx(ya,{className:"w-5 h-5 text-gray-400"}):r.jsx(kn,{className:"w-5 h-5 text-gray-400"})]}),f&&r.jsx("div",{className:"border-t border-gray-100",children:r.jsx("div",{className:"p-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:C.map(B=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center shadow-sm",children:r.jsx(me,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:B.location_name}),r.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:[B.location_type," Report  ",new Date(B.updated_at).toLocaleDateString()]})]}),r.jsx("a",{href:B.download_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",title:"Download report",children:r.jsx(Ii,{className:"w-5 h-5"})})]},B.id))})})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3 mb-6",children:cf.slice(1).map(B=>r.jsxs("button",{onClick:()=>i(a===B.value?"":B.value),className:Q("card p-3 text-center transition-all hover:shadow-md",a===B.value?"ring-2 ring-primary-500 bg-primary-50":"hover:bg-gray-50"),children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:P[B.value]||0}),r.jsx("div",{className:"text-xs text-gray-600 truncate",children:B.label})]},B.value))}),r.jsx("div",{className:"card mb-6",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[r.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsxs("button",{onClick:()=>t("grid"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5",e==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[r.jsx(Tv,{className:"w-4 h-4"}),"Grid"]}),r.jsxs("button",{onClick:()=>t("list"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5",e==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[r.jsx(Fv,{className:"w-4 h-4"}),"List"]})]}),r.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:n,onChange:B=>s(B.target.value),placeholder:"Search files...",className:"pl-9 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 w-full sm:w-64"}),n&&r.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Ve,{className:"w-4 h-4"})})]})]}),r.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary w-full sm:w-auto",children:[r.jsx(Yn,{className:"w-4 h-4"}),"Upload Files"]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-100",children:[r.jsx(Uh,{className:"w-4 h-4 text-gray-400"}),r.jsx("select",{value:a,onChange:B=>i(B.target.value),className:"select w-auto text-sm py-1.5",children:cf.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))}),r.jsx("select",{value:l,onChange:B=>o(B.target.value),className:"select w-auto text-sm py-1.5",children:h4.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))}),T&&r.jsxs("button",{onClick:J,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[r.jsx(Ve,{className:"w-3 h-3"}),"Clear filters"]}),r.jsx("span",{className:"text-sm text-gray-500 ml-auto",children:K.length===E.length?`${E.length} files`:`${K.length} of ${E.length} files`})]})]})}),r.jsx(t4,{files:K,view:e,onFileClick:F,onDownload:U,onDelete:D,onVerify:L,isLoading:M}),K.length===0&&E.length>0&&r.jsxs("div",{className:"card p-8 text-center mt-6",children:[r.jsx("p",{className:"text-gray-500",children:"No files match your filters"}),r.jsx("button",{onClick:J,className:"mt-2 text-primary-600 hover:text-primary-700",children:"Clear filters"})]}),r.jsxs(fs,{isOpen:c,onClose:()=>d(!1),title:"Upload Documents",size:"lg",children:[r.jsx(e4,{projectId:_,onUploadComplete:()=>{A()}}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Tips for organizing documents:"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" Keep passport and ID scans in Identity Documents"}),r.jsx("li",{children:" Bank statements and tax returns go in Financial"}),r.jsx("li",{children:" Rental agreements and utility bills in Housing"}),r.jsx("li",{children:" Work contracts and pay stubs in Employment"})]})]})]}),r.jsx(o4,{file:u,isOpen:h,onClose:O,projectId:_}),r.jsx(m4,{isOpen:y,onClose:W,projectId:_,existingFileId:j==null?void 0:j.id})]}):r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),r.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})})}function p4(){return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3 mb-6",children:[1,2,3,4,5,6,7,8].map(e=>r.jsxs("div",{className:"card p-3",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse mb-1"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded animate-pulse w-2/3 mx-auto"})]},e))}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})})}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[1,2,3,4,5,6].map(e=>r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"aspect-square bg-gray-100 animate-pulse"}),r.jsxs("div",{className:"p-3 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded animate-pulse w-1/2"})]})]},e))})]})}function Au({note:e,projectId:t}){const[n,s]=N.useState(!1),[a,i]=N.useState(!1),[l,o]=N.useState(e.content),[c,d]=N.useState(!1),u=$j(),m=zj(),h=Oj(),p=()=>{u.mutate(e.id),s(!1)},y=()=>{m.mutate({id:e.id,projectId:t}),d(!1)},b=()=>{l.trim()&&l!==e.content&&h.mutate({id:e.id,data:{content:l}}),i(!1)},j=()=>{o(e.content),i(!1)};return r.jsxs("div",{className:Q("card p-4 transition-all",e.is_pinned&&"ring-2 ring-yellow-400 bg-yellow-50"),children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:e.user_avatar,alt:e.user_name,className:"w-10 h-10 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.user_name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsx(Le,{className:"w-3 h-3"}),r.jsx("span",{children:e.relative_time}),e.is_pinned&&r.jsxs("span",{className:"flex items-center gap-1 text-yellow-600",children:[r.jsx(mi,{className:"w-3 h-3"}),"Pinned"]})]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>s(!n),className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:r.jsx(Zh,{className:"w-4 h-4"})}),n&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[r.jsxs("button",{onClick:p,className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(mi,{className:"w-4 h-4"}),e.is_pinned?"Unpin":"Pin to top"]}),r.jsxs("button",{onClick:()=>{i(!0),s(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Hh,{className:"w-4 h-4"}),"Edit"]}),r.jsx("hr",{className:"my-1 border-gray-100"}),r.jsxs("button",{onClick:()=>{d(!0),s(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete"]})]})]})]}),a?r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{value:l,onChange:g=>o(g.target.value),className:"textarea w-full",rows:4,autoFocus:!0}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:j,className:"btn btn-secondary btn-sm",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:h.isPending,className:"btn btn-primary btn-sm",children:h.isPending?"Saving...":"Save"})]})]}):r.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:e.content}}),c&&r.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("p",{className:"text-sm text-red-800 mb-3",children:"Are you sure you want to delete this note? This action cannot be undone."}),r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>d(!1),className:"btn btn-secondary btn-sm",children:"Cancel"}),r.jsx("button",{onClick:y,disabled:m.isPending,className:"btn bg-red-600 text-white hover:bg-red-700 btn-sm",children:m.isPending?"Deleting...":"Delete"})]})]})]})}function f4({projectId:e,taskId:t,onSuccess:n,placeholder:s="Add a note...",className:a}){const[i,l]=N.useState(""),[o,c]=N.useState(!1),{user:d}=En(),u=Ij(e),m=p=>{p.preventDefault(),i.trim()&&u.mutate({content:i.trim(),task_id:t,visibility:"private"},{onSuccess:()=>{l(""),c(!1),n==null||n()}})},h=()=>{l(""),c(!1)};return r.jsx("form",{onSubmit:m,className:Q("card",a),children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex gap-3",children:[d&&r.jsx("img",{src:d.avatar_url,alt:d.display_name,className:"w-10 h-10 rounded-full flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[o?r.jsx("textarea",{value:i,onChange:p=>l(p.target.value),placeholder:s,className:"textarea w-full resize-none",rows:4,autoFocus:!0}):r.jsx("button",{type:"button",onClick:()=>c(!0),className:"w-full text-left px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-lg text-gray-500 transition-colors",children:s}),o&&r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Notes are visible only to you"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{type:"button",onClick:h,className:"btn btn-secondary btn-sm",children:[r.jsx(Ve,{className:"w-4 h-4"}),"Cancel"]}),r.jsxs("button",{type:"submit",disabled:!i.trim()||u.isPending,className:"btn btn-primary btn-sm",children:[r.jsx(ul,{className:"w-4 h-4"}),u.isPending?"Posting...":"Post Note"]})]})]})]})]})})})}function g4(){const[e,t]=N.useState("support"),{data:n}=dN(),s=(n==null?void 0:n.count)||0;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Support conversations and personal notes"})]}),r.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[r.jsxs("button",{onClick:()=>t("support"),className:Q("px-4 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2",e==="support"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),"aria-selected":e==="support",role:"tab",children:[r.jsx(Ev,{className:"w-4 h-4"}),"Support",s>0&&r.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-medium bg-primary-500 text-white rounded-full",children:s})]}),r.jsxs("button",{onClick:()=>t("notes"),className:Q("px-4 py-3 text-sm font-medium border-b-2 transition-colors flex items-center gap-2",e==="notes"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),"aria-selected":e==="notes",role:"tab",children:[r.jsx(Rv,{className:"w-4 h-4"}),"My Notes"]})]}),e==="support"?r.jsx(x4,{}):r.jsx(_4,{})]})}function x4(){const[e,t]=N.useState("list"),[n,s]=N.useState(null),a=l=>{s(l),t("detail")},i=()=>{s(null),t("list")};return r.jsxs(r.Fragment,{children:[e==="list"&&r.jsx(y4,{onCompose:()=>t("compose"),onViewTicket:a}),e==="compose"&&r.jsx(j4,{onBack:i,onSuccess:l=>{s(l),t("detail")}}),e==="detail"&&n&&r.jsx(N4,{ticketId:n,onBack:i})]})}function y4({onCompose:e,onViewTicket:t}){const{data:n,isLoading:s}=cN(),a=(n==null?void 0:n.tickets)||[];return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Customer Support"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Contact us for help with your membership or site issues"})]}),r.jsxs("button",{onClick:e,className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Yn,{className:"w-4 h-4"}),"New Message"]})]}),r.jsx("div",{className:"card mb-6 border-l-4 border-l-blue-500 bg-blue-50",children:r.jsxs("div",{className:"p-4 flex gap-3",children:[r.jsx(Mv,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"What we can help with:"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Membership questions, site errors, or content that needs correction."}),r.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"We do not provide visa assistance, as this is a legal question that should be directed to a qualified immigration professional. This site is provided as a convenience to assist with the visa application process only."})]})]})}),s?r.jsx(w4,{}):a.length===0?r.jsx(b4,{onCompose:e}):r.jsx("div",{className:"space-y-3",children:a.map(i=>r.jsx(v4,{ticket:i,onClick:()=>t(i.id)},i.id))})]})}function v4({ticket:e,onClick:t}){return r.jsx("button",{onClick:t,className:Q("card w-full text-left p-4 hover:bg-gray-50 transition-colors",e.has_unread_user&&"ring-2 ring-primary-500 bg-primary-50"),children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.subject}),e.has_unread_user&&r.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-primary-500 text-white rounded-full",children:"New Reply"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",children:e.initial_message||"No message content"}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"w-3 h-3"}),e.relative_time]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(rt,{className:"w-3 h-3"}),e.reply_count," ",e.reply_count===1?"reply":"replies"]})]})]}),r.jsx($v,{status:e.status})]})})}function $v({status:e}){return e==="closed"?r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:[r.jsx(bv,{className:"w-3 h-3"}),"Closed"]}):r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full",children:[r.jsx(Ye,{className:"w-3 h-3"}),"Open"]})}function b4({onCompose:e}){return r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(rt,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No support messages"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Have a question or found an issue? Send us a message and we'll get back to you."}),r.jsxs("button",{onClick:e,className:"btn btn-primary inline-flex items-center gap-2",children:[r.jsx(Yn,{className:"w-4 h-4"}),"Send Your First Message"]})]})}function j4({onBack:e,onSuccess:t}){const[n,s]=N.useState(""),[a,i]=N.useState(""),l=mN(),o=c=>{c.preventDefault(),!(!n.trim()||!a.trim())&&l.mutate({subject:n.trim(),content:a.trim()},{onSuccess:d=>{t(d.ticket_id)}})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(Vc,{className:"w-4 h-4"}),"Back to Messages"]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"New Support Message"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Describe your question or issue and we'll respond as soon as possible"})]}),r.jsx("form",{onSubmit:o,className:"card max-w-2xl",children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),r.jsx("input",{id:"subject",type:"text",value:n,onChange:c=>s(c.target.value),placeholder:"What do you need help with?",className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),r.jsx("textarea",{id:"content",value:a,onChange:c=>i(c.target.value),placeholder:"Describe your question or issue in detail...",rows:6,className:"textarea w-full",required:!0})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",disabled:l.isPending,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:!n.trim()||!a.trim()||l.isPending,className:"btn btn-primary flex items-center gap-2",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ul,{className:"w-4 h-4"}),"Send Message"]})})]})]})})]})}function N4({ticketId:e,onBack:t}){const[n,s]=N.useState(""),[a,i]=N.useState(!1),{data:l,isLoading:o,refetch:c}=uN(e),d=hN(),u=pN(),m=b=>{b.preventDefault(),n.trim()&&d.mutate({ticketId:e,content:n.trim()},{onSuccess:()=>{s(""),c()}})},h=()=>{u.mutate(e,{onSuccess:t})};if(o)return r.jsx(k4,{});if(!l)return r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Ticket not found."}),r.jsx("button",{onClick:t,className:"btn btn-secondary mt-4",children:"Back to Messages"})]});const{ticket:p,replies:y}=l;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(Vc,{className:"w-4 h-4"}),"Back to Messages"]}),r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p.subject}),r.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[r.jsx($v,{status:p.status}),r.jsxs("span",{className:"text-sm text-gray-500",children:["Created ",p.relative_time]})]})]}),r.jsx("button",{onClick:()=>i(!0),className:"btn btn-secondary text-red-600 hover:bg-red-50","aria-label":"Delete ticket",children:r.jsx(cn,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-6 space-y-6",children:y.map(b=>r.jsxs("div",{className:Q("p-4 rounded-lg",b.is_admin?"bg-primary-50 ml-8":"bg-gray-50 mr-8"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:Q("text-sm font-medium",b.is_admin?"text-primary-700":"text-gray-700"),children:b.author_name}),r.jsx("span",{className:"text-xs text-gray-500",children:b.relative_time})]}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:b.content})]},b.id))})}),p.status!=="closed"&&r.jsx("form",{onSubmit:m,className:"card",children:r.jsxs("div",{className:"p-4",children:[r.jsx("label",{htmlFor:"reply",className:"sr-only",children:"Your reply"}),r.jsx("textarea",{id:"reply",value:n,onChange:b=>s(b.target.value),placeholder:"Type your reply...",rows:4,className:"textarea w-full",required:!0}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx("button",{type:"submit",disabled:!n.trim()||d.isPending,className:"btn btn-primary flex items-center gap-2",children:d.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ul,{className:"w-4 h-4"}),"Send Reply"]})})})]})}),p.status==="closed"&&r.jsx("div",{className:"card bg-gray-50 p-4 text-center",children:r.jsx("p",{className:"text-gray-600",children:"This conversation is closed. Start a new message if you need further assistance."})}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete this conversation?"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"This action cannot be undone. All messages in this conversation will be permanently deleted."}),r.jsxs("div",{className:"flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:()=>i(!1),className:"btn btn-secondary",disabled:u.isPending,children:"Cancel"}),r.jsx("button",{onClick:h,disabled:u.isPending,className:"btn bg-red-600 text-white hover:bg-red-700 flex items-center gap-2",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})}function w4(){return r.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-5 w-48 bg-gray-200 rounded animate-pulse mb-2"}),r.jsx("div",{className:"h-4 w-full bg-gray-100 rounded animate-pulse mb-3"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"h-3 w-20 bg-gray-100 rounded animate-pulse"}),r.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]})]}),r.jsx("div",{className:"h-6 w-16 bg-gray-200 rounded-full animate-pulse"})]})},e))})}function k4(){return r.jsxs("div",{children:[r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse mb-4"}),r.jsx("div",{className:"h-8 w-64 bg-gray-200 rounded animate-pulse mb-6"}),r.jsx("div",{className:"card p-6 space-y-6",children:[1,2].map(e=>r.jsxs("div",{className:Q("p-4 rounded-lg",e===1?"bg-gray-50 mr-8":"bg-primary-50 ml-8"),children:[r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse mb-3"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]})]},e))})]})}function _4(){var h;const[e,t]=N.useState("all"),[n,s]=N.useState(""),{data:a,isLoading:i}=Ns(),l=((h=a==null?void 0:a.project)==null?void 0:h.id)||0,{data:o=[],isLoading:c}=Rj(l,e==="pinned"?{pinned:!0}:void 0),d=n?o.filter(p=>p.content.toLowerCase().includes(n.toLowerCase())):o,u=d.filter(p=>p.is_pinned),m=d.filter(p=>!p.is_pinned);return i||c?r.jsx(S4,{}):a!=null&&a.project?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:r.jsx(Rv,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Notes"})]})]})}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center",children:r.jsx(mi,{className:"w-5 h-5 text-yellow-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Pinned"})]})]})})]}),r.jsx(f4,{projectId:l,className:"mb-6",placeholder:"Write a new note..."}),r.jsx("div",{className:"card mb-6",children:r.jsxs("div",{className:"p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsx("button",{onClick:()=>t("all"),className:Q("px-4 py-1.5 rounded-md text-sm font-medium transition-colors",e==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"All Notes"}),r.jsxs("button",{onClick:()=>t("pinned"),className:Q("px-4 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5",e==="pinned"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[r.jsx(mi,{className:"w-3.5 h-3.5"}),"Pinned"]})]}),r.jsxs("div",{className:"relative w-full sm:w-64",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:n,onChange:p=>s(p.target.value),placeholder:"Search notes...",className:"w-full pl-9 pr-4 py-2 bg-gray-100 border-0 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})}),d.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(rt,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n?"No notes found":"No notes yet"}),r.jsx("p",{className:"text-gray-600",children:n?"Try a different search term":"Start by adding a note above to keep track of important information"})]}):r.jsxs("div",{className:"space-y-4",children:[e==="all"&&u.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3 flex items-center gap-2",children:[r.jsx(mi,{className:"w-4 h-4"}),"Pinned Notes"]}),r.jsx("div",{className:"space-y-4",children:u.map(p=>r.jsx(Au,{note:p,projectId:l},p.id))})]}),e==="all"&&m.length>0&&r.jsxs("div",{children:[u.length>0&&r.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3 mt-6",children:"Other Notes"}),r.jsx("div",{className:"space-y-4",children:m.map(p=>r.jsx(Au,{note:p,projectId:l},p.id))})]}),e==="pinned"&&r.jsx("div",{className:"space-y-4",children:d.map(p=>r.jsx(Au,{note:p,projectId:l},p.id))})]})]}):r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),r.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})}function S4(){return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[1,2].map(e=>r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg animate-pulse"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-6 w-8 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-16 bg-gray-100 rounded animate-pulse"})]})]})},e))}),r.jsx("div",{className:"card p-4 mb-6",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),r.jsx("div",{className:"flex-1 h-12 bg-gray-100 rounded-lg animate-pulse"})]})}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-3 w-24 bg-gray-100 rounded animate-pulse"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-100 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded animate-pulse w-3/4"})]})]},e))})]})}const df={task_created:Ar,task_completed:Ae,task_updated:Gh,file_uploaded:Wc,note_created:rt,stage_changed:Bh,project_created:Jd,default:Le},mf={task_created:"bg-blue-100 text-blue-600",task_completed:"bg-green-100 text-green-600",task_updated:"bg-gray-100 text-gray-600",file_uploaded:"bg-purple-100 text-purple-600",note_created:"bg-yellow-100 text-yellow-600",stage_changed:"bg-indigo-100 text-indigo-600",project_created:"bg-primary-100 text-primary-600",default:"bg-gray-100 text-gray-600"};function C4(){var l;const{data:e,isLoading:t}=Ns(),n=((l=e==null?void 0:e.project)==null?void 0:l.id)||0,{data:s=[],isLoading:a}=Fj(n,{limit:100}),i=N.useMemo(()=>{const o={};return s.forEach(c=>{const d=new Date(c.created_at),u=d.toISOString().split("T")[0];if(!o[u]){const m=new Date,h=new Date(m);h.setDate(h.getDate()-1);let p;u===m.toISOString().split("T")[0]?p="Today":u===h.toISOString().split("T")[0]?p="Yesterday":p=d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),o[u]={date:u,label:p,activities:[]}}o[u].activities.push(c)}),Object.values(o).sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime())},[s]);return t||a?r.jsx(P4,{}):e!=null&&e.project?r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Timeline"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track your relocation journey progress"})]}),s.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(Le,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No activity yet"}),r.jsx("p",{className:"text-gray-600",children:"Your activity timeline will appear here as you progress through your relocation"})]}):r.jsx("div",{className:"space-y-8",children:i.map(o=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:o.label}),r.jsx("div",{className:"flex-1 h-px bg-gray-200"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[o.activities.length," ",o.activities.length===1?"event":"events"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200"}),r.jsx("div",{className:"space-y-4",children:o.activities.map(c=>r.jsx(E4,{activity:c},c.id))})]})]},o.date))})]}):r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),r.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})})}function E4({activity:e}){const t=df[e.action]||df.default,n=mf[e.action]||mf.default,s=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return r.jsxs("div",{className:"relative flex gap-4 pl-0",children:[r.jsx("div",{className:Q("relative z-10 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",n),children:r.jsx(t,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 card p-4 -mt-1",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:e.user_avatar,alt:e.user_name,className:"w-8 h-8 rounded-full"}),r.jsx("div",{children:r.jsxs("p",{className:"text-sm",children:[r.jsx("span",{className:"font-medium text-gray-900",children:e.user_name})," ",r.jsx("span",{className:"text-gray-600",children:e.description})]})})]}),r.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:s(e.created_at)})]})})]})}function P4(){return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),r.jsx("div",{className:"space-y-8",children:[1,2].map(e=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-0.5 bg-gray-200"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),r.jsx("div",{className:"flex-1 card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),r.jsx("div",{className:"flex-1 space-y-2",children:r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})})]})})]},t))})]})]},e))})]})}const M4={LayoutDashboard:Gc,CheckSquare:zh,MessageSquare:rt,Calendar:Qt,BookOpen:Li,HelpCircle:Vh,FolderOpen:Ko,ClipboardList:jv,BookMarked:xv,Bot:Ws,CreditCard:Ri,Users:Qr,Settings:Gh,FileText:me,User:st,Bell:Ih};function T4(){const{settingsTab:e,setSettingsTab:t}=En(),[n,s]=N.useState("portal-account");N.useEffect(()=>{e&&["portal-account","visa-profile","notifications","menu"].includes(e)&&(s(e),t(null))},[e,t]);const a=[{id:"portal-account",label:"Portal Account",icon:st},{id:"visa-profile",label:"Visa Profile",icon:me},{id:"notifications",label:"Notifications",icon:Ih},{id:"menu",label:"Menu",icon:Av}];return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your profile and preferences"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"lg:w-64 flex-shrink-0",children:r.jsx("nav",{className:"card p-2",children:a.map(i=>{const l=i.icon;return r.jsxs("button",{onClick:()=>s(i.id),className:Q("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors",n===i.id?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50"),children:[r.jsx(l,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:i.label})]},i.id)})})}),r.jsxs("div",{className:"flex-1",children:[n==="portal-account"&&r.jsx(F4,{}),n==="visa-profile"&&r.jsx(A4,{}),n==="notifications"&&r.jsx(D4,{}),n==="menu"&&r.jsx(Q4,{})]})]})]})}function F4(){var b;const{data:e,isLoading:t}=Lh(),n=_j(),s=Sj(),[a,i]=N.useState({first_name:"",last_name:"",display_name:""}),[l,o]=N.useState(!1),[c,d]=N.useState(!1),[u,m]=N.useState("");e&&!l&&(i({first_name:e.first_name||"",last_name:e.last_name||"",display_name:e.display_name||""}),o(!0));const h=j=>{j.preventDefault(),n.mutate(a)},p=()=>{s.mutate(u,{onSuccess:()=>{var j;window.location.href=((j=window.fraPortalData)==null?void 0:j.siteUrl)||"/"}})},y=u==="DELETE MY ACCOUNT";return t?r.jsx(Kc,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:e==null?void 0:e.avatar_url,alt:e==null?void 0:e.display_name,className:"w-20 h-20 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Profile photo is managed through your Gravatar account"}),r.jsx("a",{href:"https://gravatar.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-600 hover:text-primary-700",children:"Change on Gravatar"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),r.jsx("input",{type:"text",id:"first_name",value:a.first_name,onChange:j=>i({...a,first_name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",id:"last_name",value:a.last_name,onChange:j=>i({...a,last_name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"display_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Name"}),r.jsx("input",{type:"text",id:"display_name",value:a.display_name,onChange:j=>i({...a,display_name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This is how your name will appear throughout the portal"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{type:"submit",disabled:n.isPending,className:"btn btn-primary flex items-center gap-2",children:[n.isPending?r.jsx(_e,{className:"w-4 h-4 animate-spin"}):n.isSuccess?r.jsx(Or,{className:"w-4 h-4"}):r.jsx(cl,{className:"w-4 h-4"}),n.isPending?"Saving...":n.isSuccess?"Saved!":"Save Changes"]}),n.isError&&r.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]})]}),r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Account Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-600",children:"Username"}),r.jsx("span",{className:"font-medium text-gray-900",children:e==null?void 0:e.username})]}),r.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-600",children:"Email"}),r.jsx("span",{className:"font-medium text-gray-900",children:e==null?void 0:e.email})]}),r.jsxs("div",{className:"flex justify-between py-3 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-600",children:"Account Type"}),r.jsx("span",{className:"font-medium text-gray-900",children:e!=null&&e.is_admin?"Administrator":"Member"})]}),r.jsxs("div",{className:"flex justify-between py-3",children:[r.jsx("span",{className:"text-gray-600",children:"Membership Status"}),r.jsx("span",{className:Q("px-2 py-1 rounded-full text-xs font-medium",e!=null&&e.is_member?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e!=null&&e.is_member?"Active":"Inactive"})]})]})]}),r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security"}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Password"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Last changed: Unknown"})]}),r.jsx("a",{href:`${((b=window.fraPortalData)==null?void 0:b.siteUrl)||""}/wp-admin/profile.php`,className:"btn btn-secondary text-sm",children:"Change Password"})]})})]}),r.jsxs("div",{className:"card p-6 border-red-200",children:[r.jsx("h2",{className:"text-lg font-semibold text-red-600 mb-4",children:"Danger Zone"}),r.jsx("div",{className:"p-4 bg-red-50 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Nn,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Delete Account"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Once you delete your account, there is no going back. All your data, documents, tasks, and profile information will be permanently removed."}),c?r.jsxs("div",{className:"mt-4 space-y-4",children:[r.jsx("div",{className:"p-3 bg-red-100 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:"This action cannot be undone. This will permanently delete your account and remove all associated data."})}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"delete-confirm",className:"block text-sm font-medium text-gray-700 mb-1",children:["Type ",r.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"DELETE MY ACCOUNT"})," to confirm:"]}),r.jsx("input",{type:"text",id:"delete-confirm",value:u,onChange:j=>m(j.target.value),placeholder:"DELETE MY ACCOUNT",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",autoComplete:"off"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",onClick:p,disabled:!y||s.isPending,className:Q("px-4 py-2 text-sm font-medium rounded-lg flex items-center gap-2 transition-colors",y&&!s.isPending?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:s.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(cn,{className:"w-4 h-4"}),"Permanently Delete Account"]})}),r.jsx("button",{type:"button",onClick:()=>{d(!1),m("")},className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})]}),s.isError&&r.jsx("p",{className:"text-sm text-red-600",children:s.error instanceof Error?s.error.message:"Failed to delete account. Please try again or contact support."})]}):r.jsxs("button",{type:"button",onClick:()=>d(!0),className:"mt-4 px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[r.jsx(cn,{className:"w-4 h-4"}),"Delete My Account"]})]})]})})]})]})}function A4(){const{data:e,isLoading:t}=Uc(),{data:n}=uv(),s=Ta(),[a,i]=N.useState({}),[l,o]=N.useState({personal:!0,applicants:!1,visa:!1,location:!1,timeline:!1,financial:!1,documents:!1});N.useEffect(()=>{e&&i(e)},[e]);const c=p=>{o(y=>({...y,[p]:!y[p]}))},d=(p,y)=>{i(b=>({...b,[p]:y}))},u=p=>{p.preventDefault(),s.mutate(a)};if(t)return r.jsx(Kc,{});const m=[{id:"personal",title:" Personal Information",description:"Legal names as they appear on your passport",fields:[{key:"legal_first_name",label:"Legal First Name",type:"text",placeholder:"As shown on passport"},{key:"legal_middle_name",label:"Legal Middle Name(s)",type:"text",placeholder:"Optional"},{key:"legal_last_name",label:"Legal Last Name",type:"text",placeholder:"As shown on passport"},{key:"date_of_birth",label:"Date of Birth",type:"date"},{key:"nationality",label:"Nationality",type:"text",placeholder:"e.g., American"},{key:"passport_number",label:"Passport Number",type:"text",placeholder:"Optional - for document pre-fill"},{key:"passport_expiry",label:"Passport Expiry Date",type:"date"}]},{id:"applicants",title:" Who's Moving?",description:"Information about family members relocating with you",fields:[{key:"applicants",label:"Applicants",type:"select",options:[{value:"alone",label:"Applying alone"},{value:"spouse",label:"With spouse/partner"},{value:"spouse_kids",label:"With spouse and children"},{value:"kids_only",label:"With children (no spouse)"}]},{key:"spouse_legal_first_name",label:"Spouse Legal First Name",type:"text",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"spouse_legal_last_name",label:"Spouse Legal Last Name",type:"text",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"spouse_date_of_birth",label:"Spouse Date of Birth",type:"date",conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"num_children",label:"Number of Children",type:"number",conditional:{field:"applicants",values:["spouse_kids","kids_only"]}},{key:"children_ages",label:"Children Ages",type:"text",placeholder:"e.g., 5, 8, 12",conditional:{field:"applicants",values:["spouse_kids","kids_only"]}},{key:"has_pets",label:"Do you have pets?",type:"select",options:[{value:"no",label:"No"},{value:"dogs",label:"Dog(s)"},{value:"cats",label:"Cat(s)"},{value:"both",label:"Dogs and cats"},{value:"other",label:"Other pets"}]},{key:"pet_details",label:"Pet Details",type:"text",placeholder:"Number and type of pets",conditional:{field:"has_pets",values:["dogs","cats","both","other"]}}]},{id:"visa",title:" Visa & Employment",description:"Your visa type and work situation",fields:[{key:"visa_type",label:"Visa Type",type:"select",options:[{value:"undecided",label:"Undecided / Need help choosing"},{value:"visitor",label:"Visitor Visa (VLS-TS Visiteur)"},{value:"talent_passport",label:"Talent Passport"},{value:"employee",label:"Employee Visa"},{value:"entrepreneur",label:"Entrepreneur Visa"},{value:"student",label:"Student Visa"},{value:"family",label:"Family Reunification"},{value:"spouse_french",label:"Spouse of French National"},{value:"retiree",label:"Retiree Visa"}]},{key:"employment_status",label:"Your Employment Status",type:"select",options:[{value:"employed",label:"Employed"},{value:"self_employed",label:"Self-employed"},{value:"retired",label:"Retired"},{value:"not_working",label:"Not currently working"}]},{key:"work_in_france",label:"Planning to work in France?",type:"select",options:[{value:"no",label:"No"},{value:"yes_local",label:"Yes, for a French employer"},{value:"yes_remote",label:"Yes, remotely for a US company"},{value:"yes_self",label:"Yes, self-employed"},{value:"undecided",label:"Undecided"}]},{key:"industry",label:"Industry/Field",type:"text"},{key:"employer_name",label:"Employer Name",type:"text",conditional:{field:"employment_status",values:["employed"]}},{key:"job_title",label:"Job Title",type:"text"}]},{id:"location",title:" Locations",description:"Current location and destination in France",fields:[{key:"current_state",label:"Current US State",type:"select",options:hf},{key:"birth_state",label:"Your Birth State",type:"select",options:[...hf,{value:"other",label:"Other (not US)"}]},{key:"birth_state_other",label:"Birth Country/Location",type:"text",conditional:{field:"birth_state",values:["other"]}},{key:"target_location",label:"Target Location in France",type:"text",placeholder:"e.g., Paris, Dordogne, undecided"},{key:"housing_plan",label:"Housing Plans",type:"select",options:[{value:"buying",label:"Buying property"},{value:"renting",label:"Renting"},{value:"undecided",label:"Undecided"},{value:"already_own",label:"Already own property"}]}]},{id:"timeline",title:" Timeline & Plans",description:"When are you planning to move?",fields:[{key:"timeline",label:"Move Timeline",type:"select",options:[{value:"asap",label:"As soon as possible"},{value:"3_months",label:"Within 3 months"},{value:"6_months",label:"3-6 months"},{value:"12_months",label:"6-12 months"},{value:"over_12",label:"More than 12 months"},{value:"undecided",label:"Undecided"}]},{key:"target_move_date",label:"Target Move Date",type:"date"},{key:"application_location",label:"Where are you applying from?",type:"select",options:[{value:"us",label:"United States (initial application)"},{value:"france",label:"France (renewal/reapplication)"}]}]},{id:"financial",title:" Financial",description:"Income and financial planning",fields:[{key:"french_proficiency",label:"French Language Proficiency",type:"select",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"conversational",label:"Conversational"},{value:"fluent",label:"Fluent"},{value:"native",label:"Native"}]},{key:"french_mortgage",label:"Planning to get a French mortgage?",type:"select",options:[{value:"no",label:"No"},{value:"yes",label:"Yes"},{value:"maybe",label:"Maybe/Undecided"}]}]},{id:"documents",title:" Document Status",description:"Track your vital documents",fields:[{key:"has_birth_cert",label:"Have certified birth certificate?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No, need to order"},{value:"unsure",label:"Not sure if it's certified"}]},{key:"birth_cert_apostilled",label:"Is it apostilled?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],conditional:{field:"has_birth_cert",values:["yes"]}},{key:"has_marriage_cert",label:"Have certified marriage certificate?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No, need to order"},{value:"unsure",label:"Not sure if it's certified"},{value:"na",label:"Not applicable"}],conditional:{field:"applicants",values:["spouse","spouse_kids"]}},{key:"marriage_cert_apostilled",label:"Is marriage certificate apostilled?",type:"select",options:[{value:"yes",label:"Yes"},{value:"no",label:"No"}],conditional:{field:"has_marriage_cert",values:["yes"]}}]}],h=p=>{if(!p.conditional)return!0;const y=a[p.conditional.field];return p.conditional.values.includes(y)};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Profile Completion"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[(n==null?void 0:n.percentage)||0,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-primary-500 h-2 rounded-full transition-all duration-300",style:{width:`${(n==null?void 0:n.percentage)||0}%`}})}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Complete your profile to enable document generation and personalized recommendations."})]}),r.jsxs("form",{onSubmit:u,children:[m.map(p=>r.jsxs("div",{className:"card mb-4 overflow-hidden",children:[r.jsxs("button",{type:"button",onClick:()=>c(p.id),className:"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.title}),r.jsx("p",{className:"text-sm text-gray-500",children:p.description})]}),l[p.id]?r.jsx(ya,{className:"w-5 h-5 text-gray-400"}):r.jsx(kn,{className:"w-5 h-5 text-gray-400"})]}),l[p.id]&&r.jsx("div",{className:"p-4 pt-0 border-t border-gray-100",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:p.fields.filter(h).map(y=>{var b;return r.jsxs("div",{className:y.type==="textarea"?"md:col-span-2":"",children:[r.jsx("label",{htmlFor:y.key,className:"block text-sm font-medium text-gray-700 mb-1",children:y.label}),y.type==="select"?r.jsxs("select",{id:y.key,value:a[y.key]||"",onChange:j=>d(y.key,j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"-- Select --"}),(b=y.options)==null?void 0:b.map(j=>r.jsx("option",{value:j.value,children:j.label},j.value))]}):y.type==="number"?r.jsx("input",{type:"number",id:y.key,value:a[y.key]||"",onChange:j=>d(y.key,parseInt(j.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}):r.jsx("input",{type:y.type,id:y.key,value:a[y.key]||"",onChange:j=>d(y.key,j.target.value),placeholder:y.placeholder,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]},y.key)})})})]},p.id)),r.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[r.jsxs("button",{type:"submit",disabled:s.isPending,className:"btn btn-primary flex items-center gap-2",children:[s.isPending?r.jsx(_e,{className:"w-4 h-4 animate-spin"}):s.isSuccess?r.jsx(Or,{className:"w-4 h-4"}):r.jsx(cl,{className:"w-4 h-4"}),s.isPending?"Saving...":s.isSuccess?"Saved!":"Save Visa Profile"]}),s.isError&&r.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]})]})}const hf=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"DC",label:"District of Columbia"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}];function D4(){const{data:e,isLoading:t}=Rh(),n=lv(),s=(i,l)=>{n.mutate({[i]:l})};if(t)return r.jsx(Kc,{});const a=[{key:"email_notifications",label:"Email Notifications",description:"Receive email updates about your relocation progress"},{key:"task_reminders",label:"Task Reminders",description:"Get reminded about upcoming and overdue tasks"},{key:"weekly_digest",label:"Weekly Digest",description:"Receive a weekly summary of your progress"}];return r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Notification Preferences"}),r.jsx("div",{className:"space-y-6",children:a.map(i=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:i.label}),r.jsx("p",{className:"text-sm text-gray-500",children:i.description})]}),r.jsx("button",{type:"button",onClick:()=>s(i.key,!(e!=null&&e[i.key])),className:Q("relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",e!=null&&e[i.key]?"bg-primary-600":"bg-gray-200"),children:r.jsx("span",{className:Q("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",e!=null&&e[i.key]?"translate-x-5":"translate-x-0")})})]},i.key))}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Regional Settings"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),r.jsxs("select",{id:"language",value:(e==null?void 0:e.language)||"en",onChange:i=>n.mutate({language:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"fr",children:"Franais"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),r.jsxs("select",{id:"timezone",value:(e==null?void 0:e.timezone)||"Europe/Paris",onChange:i=>n.mutate({timezone:i.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"Europe/Paris",children:"Paris (CET)"}),r.jsx("option",{value:"Europe/London",children:"London (GMT)"}),r.jsx("option",{value:"America/New_York",children:"New York (EST)"}),r.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (PST)"}),r.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]})]})]})]})}function Q4(){const{settings:e}=En(),{data:t,isLoading:n}=Rh(),s=lv(),a={project:{itemIds:["dashboard","tasks","checklists","timeline","messages"]},resources:{itemIds:["chat","documents","guides","glossary","files"]},account:{itemIds:["profile","family","membership","settings","help"]}},i=e.menu.reduce((f,x)=>(f[x.id]=x,f),{}),[l,o]=N.useState(()=>t!=null&&t.menu_order?t.menu_order:{project:a.project.itemIds,resources:a.resources.itemIds,account:a.account.itemIds});N.useEffect(()=>{t!=null&&t.menu_order&&o(t.menu_order)},[t]);const[c,d]=N.useState(null),[u,m]=N.useState(null),h=(f,x)=>{d({sectionId:f,itemId:x})},p=(f,x,v)=>{f.preventDefault(),c&&c.sectionId===x&&m({sectionId:x,index:v})},y=()=>{if(c&&u&&c.sectionId===u.sectionId){const f=c.sectionId,x=[...l[f]],v=x.indexOf(c.itemId),w=u.index;if(v!==-1&&v!==w){x.splice(v,1),x.splice(w,0,c.itemId);const _={...l,[f]:x};o(_)}}d(null),m(null)},b=()=>{s.mutate({menu_order:l})},j=()=>{const f={project:a.project.itemIds,resources:a.resources.itemIds,account:a.account.itemIds};o(f),s.mutate({menu_order:f})};if(n)return r.jsx(Kc,{});const g=[{id:"project",label:"PROJECT"},{id:"resources",label:"RESOURCES"},{id:"account",label:"ACCOUNT"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu Order"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Drag and drop menu items to reorder them within each section"})]})}),r.jsx("div",{className:"space-y-6",children:g.map(f=>r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:r.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wider",children:f.label})}),r.jsx("div",{className:"p-2",children:l[f.id].map((x,v)=>{const w=i[x];if(!w)return null;const _=M4[w.icon]||Gc,k=(c==null?void 0:c.itemId)===x,C=(u==null?void 0:u.sectionId)===f.id&&(u==null?void 0:u.index)===v;return r.jsxs("div",{draggable:!0,onDragStart:()=>h(f.id,x),onDragOver:E=>p(E,f.id,v),onDragEnd:y,className:Q("flex items-center gap-3 px-3 py-2 rounded-lg cursor-move transition-all",k&&"opacity-50 bg-primary-50",C&&"border-t-2 border-primary-500",!k&&!C&&"hover:bg-gray-50"),children:[r.jsx(Cv,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx(_,{className:"w-5 h-5 text-gray-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:w.label})]},x)})})]},f.id))}),r.jsxs("div",{className:"flex items-center gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsxs("button",{type:"button",onClick:b,disabled:s.isPending,className:"btn btn-primary flex items-center gap-2",children:[s.isPending?r.jsx(_e,{className:"w-4 h-4 animate-spin"}):s.isSuccess?r.jsx(Or,{className:"w-4 h-4"}):r.jsx(cl,{className:"w-4 h-4"}),s.isPending?"Saving...":s.isSuccess?"Saved!":"Save Order"]}),r.jsx("button",{type:"button",onClick:j,className:"btn btn-secondary",children:"Reset to Default"}),s.isError&&r.jsx("span",{className:"text-sm text-red-600",children:"Failed to save. Please try again."})]})]}),r.jsx("div",{className:"card p-4 bg-blue-50 border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Av,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"How it works"}),r.jsx("p",{className:"text-sm text-blue-700",children:'Drag items up or down within each section to change their order in the sidebar. Items can only be reordered within their own section (Project, Resources, or Account). Your changes will be saved and applied immediately when you click "Save Order".'})]})]})})]})}function Kc(){return r.jsxs("div",{className:"card p-6",children:[r.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>r.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"},e))})]})}const $l=[{category:"Getting Started",question:"How do I start my relocation journey?",answer:"Begin by completing your profile with accurate information about your situation, including your visa type, target move date, and family details. Our system will then generate a personalized task list and timeline based on your specific circumstances."},{category:"Getting Started",question:"What visa type should I choose?",answer:"The visa type depends on your purpose for moving to France. Common options include: VLS-TS Visiteur (for retirees/passive income), Passeport Talent (for entrepreneurs/skilled workers), Student Visa (for education), and Family Visa (for joining French citizens/residents). Use our AI assistant for personalized guidance."},{category:"Getting Started",question:"How long does the relocation process typically take?",answer:"The timeline varies based on your visa type and personal situation. Generally, expect 3-6 months from initial application to arrival in France. Long-stay visa processing typically takes 2-8 weeks. Our timeline feature helps you track each step."},{category:"Documents",question:"What documents do I need for my visa application?",answer:"Required documents vary by visa type but typically include: valid passport, passport photos, proof of accommodation, proof of income/financial resources, health insurance, and a completed application form. Check your personalized task list for specific requirements."},{category:"Documents",question:"Do my documents need to be translated?",answer:"Yes, most documents must be translated into French by a certified/sworn translator (traducteur asserment). Some documents may also require apostille certification. We can help generate cover letters and provide translator recommendations."},{category:"Documents",question:"How do I get an apostille for my documents?",answer:"Apostilles authenticate documents for international use. In the US, contact your state's Secretary of State office. In the UK, use the Foreign, Commonwealth & Development Office. Processing typically takes 1-4 weeks."},{category:"Tasks & Progress",question:"How do I mark a task as complete?",answer:'Click on any task to open its details, then use the status dropdown to change it to "Done". You can also drag and drop tasks between columns in the Kanban view. Completed tasks are automatically logged in your timeline.'},{category:"Tasks & Progress",question:"Can I add my own custom tasks?",answer:'Yes! Click the "Add Task" button in the Tasks view to create custom tasks. You can set due dates, priorities, and assign them to specific stages of your relocation journey.'},{category:"Tasks & Progress",question:"What happens if I miss a deadline?",answer:"Overdue tasks are highlighted in red on your dashboard and task list. While missing internal deadlines won't directly affect your application, we recommend staying on schedule. Official government deadlines (like visa appointments) should never be missed."},{category:"Account",question:"How do I upgrade my membership?",answer:"Visit the Membership page from the main menu or your account settings. Choose from our available plans and complete the checkout process. Upgrades take effect immediately."},{category:"Account",question:"Can I share my account with family members?",answer:"Each account is for individual use, but our Family plan allows you to add family members to your relocation project. This lets everyone track their own tasks while staying coordinated."},{category:"Account",question:"How do I export my data?",answer:"You can download your documents from the Documents section. For a complete data export including tasks and notes, please contact our support team."}],L4=[{title:"France-Visas Official Portal",description:"Official French government visa application website",url:"https://france-visas.gouv.fr",icon:Dv},{title:"Service-Public.fr",description:"Official guide to French administrative procedures",url:"https://www.service-public.fr",icon:me},{title:"CAF (Family Allowances)",description:"Information about French family benefits",url:"https://www.caf.fr",icon:ws},{title:"URSSAF (Social Security)",description:"French social security contributions for workers",url:"https://www.urssaf.fr",icon:Oh},{title:"Campus France",description:"Resource for students planning to study in France",url:"https://www.campusfrance.org",icon:Sv}],R4=[{title:"Visa Application Checklist",description:"Step-by-step guide for preparing your visa documents",time:"10 min read"},{title:"Opening a French Bank Account",description:"Options and requirements for banking in France",time:"8 min read"},{title:"Finding Housing in France",description:"Tips for apartment hunting and rental requirements",time:"12 min read"},{title:"French Healthcare System",description:"Understanding CPAM, mutuelle, and medical care",time:"15 min read"}];function I4(){const[e,t]=N.useState(""),[n,s]=N.useState(["Getting Started"]),[a,i]=N.useState([]),l=[...new Set($l.map(u=>u.category))],o=e?$l.filter(u=>u.question.toLowerCase().includes(e.toLowerCase())||u.answer.toLowerCase().includes(e.toLowerCase())):$l,c=u=>{s(m=>m.includes(u)?m.filter(h=>h!==u):[...m,u])},d=u=>{i(m=>m.includes(u)?m.filter(h=>h!==u):[...m,u])};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Help & Support"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Find answers, guides, and resources for your relocation journey"})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"relative max-w-xl",children:[r.jsx(Vh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search for help...",value:e,onChange:u=>t(u.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(sw,{className:"w-5 h-5 text-primary-600"}),"Frequently Asked Questions"]}),e?r.jsx("div",{className:"space-y-3",children:o.length===0?r.jsxs("p",{className:"text-gray-500 text-center py-8",children:['No results found for "',e,'"']}):o.map(u=>r.jsx(pf,{item:u,isExpanded:a.includes(u.question),onToggle:()=>d(u.question),showCategory:!0},u.question))}):r.jsx("div",{className:"space-y-4",children:l.map(u=>{const m=$l.filter(p=>p.category===u),h=n.includes(u);return r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>c(u),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors",children:[r.jsx("span",{className:"font-medium text-gray-900",children:u}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[m.length," questions"]}),h?r.jsx(kn,{className:"w-5 h-5 text-gray-400"}):r.jsx(wt,{className:"w-5 h-5 text-gray-400"})]})]}),h&&r.jsx("div",{className:"p-3 space-y-2",children:m.map(p=>r.jsx(pf,{item:p,isExpanded:a.includes(p.question),onToggle:()=>d(p.question)},p.question))})]},u)})})]}),r.jsxs("div",{className:"card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Xd,{className:"w-5 h-5 text-primary-600"}),"Quick Guides"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R4.map(u=>r.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50/50 transition-colors cursor-pointer",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:u.title}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(Le,{className:"w-3 h-3"}),u.time]})]},u.title))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(ef,{className:"w-5 h-5 text-primary-600"}),"Contact Support"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Can't find what you're looking for? Our support team is here to help."}),r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[r.jsx(Ae,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium text-sm",children:"AI Assistant Available"})]}),r.jsx("p",{className:"text-sm text-green-600",children:"Use our AI chat for instant answers about French visas and relocation."})]}),r.jsxs("a",{href:"mailto:support@relo2france.com",className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[r.jsx(ef,{className:"w-4 h-4"}),"Email Support"]}),r.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-500",children:[r.jsx(Ye,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:"Response time: Usually within 24 hours"})]})]})]}),r.jsxs("div",{className:"card p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Wo,{className:"w-5 h-5 text-primary-600"}),"Official Resources"]}),r.jsx("div",{className:"space-y-3",children:L4.map(u=>{const m=u.icon;return r.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg group-hover:bg-primary-100 transition-colors",children:r.jsx(m,{className:"w-4 h-4 text-gray-600 group-hover:text-primary-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"font-medium text-gray-900 text-sm",children:u.title}),r.jsx(Wo,{className:"w-3 h-3 text-gray-400"})]}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:u.description})]})]},u.title)})})]}),r.jsxs("div",{className:"card p-6 bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200",children:[r.jsx("h3",{className:"font-semibold text-primary-900 mb-2",children:"System Status"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm text-primary-700",children:"All systems operational"})]})]})]})]})]})}function pf({item:e,isExpanded:t,onToggle:n,showCategory:s}){return r.jsxs("div",{className:Q("border rounded-lg overflow-hidden",t?"border-primary-200 bg-primary-50/30":"border-gray-200"),children:[r.jsxs("button",{onClick:n,className:"w-full flex items-start gap-3 px-4 py-3 text-left hover:bg-gray-50 transition-colors",children:[t?r.jsx(kn,{className:"w-5 h-5 text-primary-600 flex-shrink-0 mt-0.5"}):r.jsx(wt,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[s&&r.jsx("span",{className:"text-xs text-primary-600 font-medium",children:e.category}),r.jsx("span",{className:Q("block font-medium",t?"text-primary-900":"text-gray-900"),children:e.question})]})]}),t&&r.jsx("div",{className:"px-4 pb-4 pl-12",children:r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.answer})})]})}const ff=[{id:"visa-application",title:"Complete Visa Application Guide",description:"Step-by-step walkthrough of the French visa application process, from choosing the right visa type to attending your appointment.",category:"Visa & Immigration",readTime:"25 min",difficulty:"beginner",featured:!0,icon:me,sections:["Choosing the right visa type","Required documents checklist","Filling out the application form","Booking your appointment","What to expect at the consulate","After approval: next steps"]},{id:"housing-france",title:"Finding Housing in France",description:"Navigate the French rental market with confidence. Learn about dossier requirements, guarantor options, and tenant rights.",category:"Housing",readTime:"20 min",difficulty:"intermediate",featured:!0,icon:ws,sections:["Understanding the rental market","Building your dossier locatif","Guarantor options (Visale, GLI)","Viewing apartments","Signing your lease","Tenant rights and responsibilities"]},{id:"banking-finance",title:"Banking & Finance Setup",description:"Open a French bank account, understand the banking system, and manage your finances as an expat.",category:"Finance",readTime:"15 min",difficulty:"beginner",icon:Ri,sections:["Choosing a bank (traditional vs online)","Documents needed to open an account","Understanding French banking fees","Setting up automatic payments","International transfers","Tax considerations"]},{id:"healthcare-system",title:"French Healthcare System",description:"Understand how French healthcare works, register with CPAM, and choose complementary health insurance (mutuelle).",category:"Healthcare",readTime:"18 min",difficulty:"intermediate",featured:!0,icon:Hc,sections:["How French healthcare works","Registering with CPAM","Getting your Carte Vitale","Choosing a mutuelle","Finding doctors and specialists","Pharmacy system"]},{id:"working-france",title:"Working in France",description:"Employment contracts, workplace culture, employee rights, and setting up as a freelancer or entrepreneur.",category:"Employment",readTime:"22 min",difficulty:"intermediate",icon:Oh,sections:["Types of employment contracts","Understanding your payslip","Employee rights and benefits","Setting up as auto-entrepreneur","Workplace culture tips","Networking and job hunting"]},{id:"education-schools",title:"Education & Schools",description:"Navigate the French education system for your children, from maternelle to university options.",category:"Education",readTime:"16 min",difficulty:"beginner",icon:Sv,sections:["French education system overview","Public vs private schools","International schools","Enrolling your child","After-school activities","Higher education options"]},{id:"driving-transport",title:"Driving & Transportation",description:"Exchange your driving license, understand French driving rules, and navigate public transportation.",category:"Transportation",readTime:"14 min",difficulty:"beginner",icon:vv,sections:["Exchanging your driving license","Buying or leasing a car","Car insurance requirements","Public transportation options","Getting a Navigo pass","French driving rules"]},{id:"social-security",title:"Social Security & Benefits",description:"Register for French social security, understand your contributions, and access family benefits.",category:"Administration",readTime:"20 min",difficulty:"advanced",icon:dl,sections:["Social security system overview","Registration process","Understanding contributions","Family benefits (CAF)","Retirement system","Unemployment benefits"]},{id:"family-relocation",title:"Relocating with Family",description:"Special considerations when moving to France with spouse and children, including visa requirements and settling in.",category:"Family",readTime:"18 min",difficulty:"intermediate",icon:Qr,sections:["Family visa requirements","Spouse work authorization","Childcare options","Family healthcare coverage","Activities and integration","Support networks"]}],O4=[{id:"all",label:"All Guides"},{id:"Visa & Immigration",label:"Visa & Immigration"},{id:"Housing",label:"Housing"},{id:"Finance",label:"Finance"},{id:"Healthcare",label:"Healthcare"},{id:"Employment",label:"Employment"},{id:"Education",label:"Education"},{id:"Transportation",label:"Transportation"},{id:"Administration",label:"Administration"},{id:"Family",label:"Family"}],qv={beginner:"bg-green-100 text-green-700",intermediate:"bg-yellow-100 text-yellow-700",advanced:"bg-red-100 text-red-700"};function z4(){const[e,t]=N.useState(""),[n,s]=N.useState("all"),[a,i]=N.useState(null),[l,o]=N.useState(null),{setActiveView:c}=En(),{data:d,isLoading:u}=Yj(),{data:m}=Uc(),{data:h}=uv(),p=ff.filter(g=>{const f=e===""||g.title.toLowerCase().includes(e.toLowerCase())||g.description.toLowerCase().includes(e.toLowerCase()),x=n==="all"||g.category===n;return f&&x}),y=ff.filter(g=>g.featured),j=(()=>{if(!m)return[];const g=[];return m.visa_type&&m.visa_type!=="undecided"&&g.push({type:"visa-application",title:"Your Visa Application Guide",description:`Personalized guide for your ${m.visa_type} visa application`,icon:me}),(m.birth_state||m.spouse_birth_state||m.marriage_state)&&g.push({type:"apostille",title:"Your Apostille Guide",description:"State-specific apostille information for your documents",icon:dl}),m.has_pets&&m.has_pets!=="no"&&g.push({type:"pet-relocation",title:"Your Pet Relocation Guide",description:`Personalized guide for relocating with ${m.has_pets}`,icon:aw}),g})();return l?r.jsx(Z4,{guideType:l,onBack:()=>o(null)}):a?r.jsx(B4,{guide:a,onBack:()=>i(null)}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Relocation Guides"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive guides to help you navigate every aspect of moving to France"})]}),j.length>0&&e===""&&n==="all"&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(jr,{className:"w-5 h-5 text-purple-600"}),"Personalized for You"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:j.map(g=>r.jsx($4,{guide:g,onClick:()=>o(g.type)},g.type))})]}),h&&h.percentage<50&&e===""&&n==="all"&&r.jsx("div",{className:"mb-8 card p-4 bg-blue-50 border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ye,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-1",children:"Complete your profile for personalized guides"}),r.jsxs("p",{className:"text-sm text-blue-700 mb-3",children:["Fill out your profile to get customized guides based on your visa type, location, and personal circumstances. Your profile is currently ",h.percentage,"% complete."]}),r.jsx("button",{onClick:()=>c("settings"),className:"text-sm font-medium text-blue-600 hover:text-blue-700 underline",children:"Complete your profile"})]})]})}),r.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search guides...",value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsx("div",{className:"mb-8 flex flex-wrap gap-2",children:O4.map(g=>r.jsx("button",{onClick:()=>s(g.id),className:Q("px-4 py-2 rounded-full text-sm font-medium transition-colors",n===g.id?"bg-primary-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:g.label},g.id))}),e===""&&n==="all"&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Lv,{className:"w-5 h-5 text-yellow-500"}),"Featured Guides"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:y.map(g=>r.jsx(U4,{guide:g,onClick:()=>i(g)},g.id))})]}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(Li,{className:"w-5 h-5 text-primary-600"}),n==="all"?"All Guides":n,r.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",p.length,")"]})]}),p.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Li,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No guides found"}),r.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(g=>r.jsx(q4,{guide:g,onClick:()=>i(g)},g.id))})]})]})}function $4({guide:e,onClick:t}){const n=e.icon;return r.jsxs("button",{onClick:t,className:"card p-6 text-left bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 hover:shadow-md transition-shadow group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:r.jsx(n,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs font-medium rounded-full flex items-center gap-1",children:[r.jsx(jr,{className:"w-3 h-3"}),"Personalized"]})]}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-purple-700 transition-colors",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-purple-600 font-medium",children:"Based on your profile"}),r.jsxs("span",{className:"flex items-center gap-1 text-sm font-medium text-purple-600 group-hover:gap-2 transition-all",children:["View guide",r.jsx(Zc,{className:"w-4 h-4"})]})]})]})}function q4({guide:e,onClick:t}){const n=e.icon;return r.jsx("button",{onClick:t,className:"card p-5 text-left hover:shadow-md transition-shadow group",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-primary-50 rounded-lg group-hover:bg-primary-100 transition-colors",children:r.jsx(n,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:e.description}),r.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[r.jsxs("span",{className:"flex items-center gap-1 text-gray-500",children:[r.jsx(Le,{className:"w-3 h-3"}),e.readTime]}),r.jsx("span",{className:Q("px-2 py-0.5 rounded-full",qv[e.difficulty]),children:e.difficulty})]})]}),r.jsx(wt,{className:"w-5 h-5 text-gray-400 group-hover:text-primary-600 transition-colors"})]})})}function U4({guide:e,onClick:t}){const n=e.icon;return r.jsxs("button",{onClick:t,className:"card p-6 text-left bg-gradient-to-br from-primary-50 to-primary-100 border-primary-200 hover:shadow-md transition-shadow group",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:r.jsx(n,{className:"w-5 h-5 text-primary-600"})}),r.jsx("span",{className:"text-xs font-medium text-primary-600",children:e.category})]}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2 group-hover:text-primary-700 transition-colors",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:e.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(Le,{className:"w-3 h-3"}),e.readTime]}),r.jsxs("span",{className:"flex items-center gap-1 text-sm font-medium text-primary-600 group-hover:gap-2 transition-all",children:["Read guide",r.jsx(Zc,{className:"w-4 h-4"})]})]})]})}function B4({guide:e,onBack:t}){const n=e.icon,[s,a]=N.useState([]),[i,l]=N.useState(""),[o,c]=N.useState(null),[d,u]=N.useState(!1),m=N.useRef(null),h=N.useRef(null),p=dv();N.useEffect(()=>{s.length>0&&!d&&m.current&&setTimeout(()=>{var g;(g=m.current)==null||g.scrollIntoView({behavior:"smooth",block:"start"})},100)},[s,d]);const y=V4(e.id),b=async g=>{const f=g||i.trim();if(!f||p.isPending)return;const x={id:Date.now().toString(),role:"user",content:f,timestamp:new Date().toISOString()};a(v=>[...v,x]),l(""),u(!0);try{const v=await p.mutateAsync({message:f,context:e.id,include_practice:!0});if(v.success&&v.message){const w={id:(Date.now()+1).toString(),role:"assistant",content:v.message,timestamp:new Date().toISOString(),sources:v.sources};a(_=>[..._,w])}}catch{const w={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date().toISOString()};a(_=>[..._,w])}finally{u(!1)}},j=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),b())};return r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(wt,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-12rem)]",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6 overflow-y-auto",children:[r.jsx("div",{className:"card p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-primary-50 rounded-xl",children:r.jsx(n,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"text-xs font-medium text-primary-600",children:e.category}),r.jsx("span",{className:Q("px-2 py-0.5 rounded-full text-xs",qv[e.difficulty]),children:e.difficulty})]}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]})}),r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Guide Sections"}),r.jsx("div",{className:"space-y-1",children:e.sections.map((g,f)=>r.jsxs("button",{onClick:()=>{c(f),b(`Tell me about "${g}" for ${e.title.toLowerCase()}`)},className:Q("w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors",o===f?"bg-primary-50 text-primary-700":"hover:bg-gray-50 text-gray-700"),children:[r.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center text-xs font-medium flex-shrink-0",children:f+1}),r.jsx("span",{className:"text-sm",children:g})]},f))})]}),r.jsxs("div",{className:"card p-6",children:[r.jsxs("h2",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[r.jsx(jr,{className:"w-4 h-4 text-yellow-500"}),"Quick Questions"]}),r.jsx("div",{className:"space-y-2",children:y.map((g,f)=>r.jsx("button",{onClick:()=>b(g),className:"w-full text-left text-sm text-gray-600 hover:text-primary-600 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:g},f))})]})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"card h-full flex flex-col",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:r.jsx(Ws,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Guide Assistant"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Ask questions about ",e.title.toLowerCase()]})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:s.length===0?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-50 flex items-center justify-center mb-4",children:r.jsx(rt,{className:"w-8 h-8 text-primary-600"})}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Start a conversation"}),r.jsx("p",{className:"text-sm text-gray-600 max-w-sm mb-4",children:"Click on a section from the guide, ask a quick question, or type your own question below."}),r.jsx("p",{className:"text-xs text-gray-500",children:"I can help you understand requirements, timelines, and next steps."})]}):r.jsxs("div",{className:"space-y-4",children:[s.map((g,f)=>{const x=g.role==="assistant"&&f===s.length-1;return r.jsxs("div",{ref:x?m:void 0,className:Q("flex gap-3",g.role==="user"?"justify-end":"justify-start"),children:[g.role==="assistant"&&r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0",children:r.jsx(Ws,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:Q("max-w-[80%] rounded-2xl px-4 py-3",g.role==="user"?"bg-primary-600 text-white rounded-tr-sm":"bg-gray-100 text-gray-900 rounded-tl-sm"),children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:g.content})}),g.role==="user"&&r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center flex-shrink-0",children:r.jsx(st,{className:"w-4 h-4 text-white"})})]},g.id)}),d&&r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0",children:r.jsx(Ws,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-tl-sm px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{className:"w-4 h-4 animate-spin text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Thinking..."})]})})]})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex gap-3",children:[r.jsx("textarea",{ref:h,value:i,onChange:g=>l(g.target.value),onKeyPress:j,placeholder:"Ask a question about this guide...",rows:1,className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm",disabled:p.isPending}),r.jsx("button",{onClick:()=>b(),disabled:!i.trim()||p.isPending,className:Q("px-4 py-3 rounded-xl transition-colors flex items-center justify-center",i.trim()&&!p.isPending?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:r.jsx(ul,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send  Shift+Enter for new line"})]})]})})]})]})}function V4(e){return{"visa-application":["What documents do I need for my visa application?","How long does the visa process take?","What are the financial requirements?","Can I work while my visa is being processed?"],housing:["What documents do renters need in France?","How do I find a guarantor (garant)?","What is a dossier de location?","Should I buy or rent when first arriving?"],healthcare:["How do I register for the French healthcare system?","What is a Carte Vitale and how do I get one?","Do I need private health insurance?","How do I find an English-speaking doctor?"],banking:["Which French bank should I choose?","What documents do I need to open an account?","Can I open an account before moving?","How do transfers from the US work?"],taxes:["When do I become a French tax resident?","How does the US-France tax treaty work?","Do I need to file taxes in both countries?","What deductions can I claim?"],driving:["Can I drive with my US license in France?","How do I exchange my license?","Do I need an international driving permit?","What are the rules for buying a car?"]}[e]||["What are the first steps I should take?","What documents will I need?","How long does this process typically take?","What are common mistakes to avoid?"]}function Z4({guideType:e,onBack:t}){var c,d;const{data:n,isLoading:s,error:a}=Xj(e),{data:i}=Uc(),l=Jj(),o=()=>{l.mutate(e)};return s?r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(wt,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(_e,{className:"w-8 h-8 text-primary-600 animate-spin"})})]}):a?r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(wt,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Ye,{className:"w-12 h-12 text-red-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load guide"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"We could not load your personalized guide. Please try again."}),r.jsx("button",{onClick:o,disabled:l.isPending,className:"btn-primary",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4"}),"Generate AI Guide"]})})]})]}):n?r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(wt,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),r.jsxs("div",{className:"max-w-3xl",children:[r.jsx("div",{className:"card p-6 mb-6 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsx("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:r.jsx(jr,{className:"w-8 h-8 text-purple-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs font-medium rounded-full",children:"Personalized"}),((c=n.metadata)==null?void 0:c.last_updated)&&r.jsxs("span",{className:"text-xs text-purple-600",children:["Updated ",new Date(n.metadata.last_updated).toLocaleDateString()]})]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-700",children:n.description})]})]}),!n.is_personalized&&r.jsx("button",{onClick:o,disabled:l.isPending,className:"btn-primary whitespace-nowrap",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4"}),"Regenerate"]})})]})}),e==="apostille"&&((d=n.metadata)==null?void 0:d.states)&&n.metadata.states.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your State-Specific Information"}),r.jsx("div",{className:"space-y-4",children:n.metadata.states.map(u=>r.jsxs("div",{className:"card p-5",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(_n,{className:"w-4 h-4 text-primary-600"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:u.state_name})]}),r.jsx("p",{className:"text-sm text-gray-600",children:u.document})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Agency"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.agency})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Method"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.method})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Cost"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(qh,{className:"w-3 h-3 text-green-600"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.cost})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase mb-1",children:"Processing Time"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Le,{className:"w-3 h-3 text-blue-600"}),r.jsx("p",{className:"text-sm text-gray-900",children:u.processing_time})]})]})]}),u.website&&r.jsxs("a",{href:u.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700 font-medium",children:["Visit agency website",r.jsx(Wo,{className:"w-3 h-3"})]}),u.notes&&r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsx("p",{className:"text-xs text-yellow-800",children:u.notes})})]},u.state))})]}),n.sections&&n.sections.length>0&&r.jsx("div",{className:"space-y-6",children:n.sections.map((u,m)=>r.jsx("div",{className:"card p-6",children:r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("span",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-sm font-semibold flex-shrink-0",children:m+1}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:u.title}),r.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:u.content}}),u.tips&&u.tips.length>0&&r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-2 flex items-center gap-2",children:[r.jsx(Lv,{className:"w-4 h-4"}),"Tips"]}),r.jsx("ul",{className:"space-y-1",children:u.tips.map((h,p)=>r.jsx("li",{className:"text-sm text-blue-800",children:h},p))})]}),u.warnings&&u.warnings.length>0&&r.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsxs("h4",{className:"text-sm font-medium text-yellow-900 mb-2 flex items-center gap-2",children:[r.jsx(Ye,{className:"w-4 h-4"}),"Important Notes"]}),r.jsx("ul",{className:"space-y-1",children:u.warnings.map((h,p)=>r.jsx("li",{className:"text-sm text-yellow-800",children:h},p))})]})]})]})},u.id))})]})]}):r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[r.jsx(wt,{className:"w-4 h-4 rotate-180"}),"Back to guides"]}),r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Li,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Guide not available"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"This personalized guide has not been generated yet."}),r.jsx("button",{onClick:o,disabled:l.isPending,className:"btn-primary",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jr,{className:"w-4 h-4"}),"Generate AI Guide"]})})]})]})}const H4={spouse:"Spouse",child:"Child",parent:"Parent",other:"Other"},G4={spouse:Hc,child:JN,parent:st,other:st},gf={pending:{label:"Pending",color:"bg-gray-100 text-gray-600",icon:Ye},applied:{label:"Applied",color:"bg-blue-100 text-blue-600",icon:me},approved:{label:"Approved",color:"bg-green-100 text-green-600",icon:Ae},not_required:{label:"Not Required",color:"bg-gray-100 text-gray-500",icon:Ae}};function W4(){const{data:e,isLoading:t,error:n}=gN(),[s,a]=N.useState(!1),[i,l]=N.useState(null),[o,c]=N.useState(null),d=(e==null?void 0:e.members)||[],u=(e==null?void 0:e.can_edit)??!1,m=(e==null?void 0:e.feature_enabled)??!1;if(t)return r.jsx(J4,{});if(n)return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx(Ye,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Family Members"}),r.jsx("p",{className:"text-gray-600",children:"Please try refreshing the page."})]})});const h=d.filter(y=>{const b=y.documents;return b.passport&&b.birthCertificate&&b.photos&&(y.relationship!=="spouse"||b.marriageCertificate)}).length,p=d.filter(y=>y.visaStatus==="approved"||y.visaStatus==="not_required").length;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Family Members"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your family's relocation details and documents"})]}),u?r.jsxs("button",{onClick:()=>a(!0),className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Jd,{className:"w-4 h-4"}),"Add Member"]}):r.jsx(xf,{})]}),!m&&r.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:r.jsx(wv,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-amber-900",children:"Premium Feature"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Family member management is available with our Premium plan. Upgrade to add, edit, and track visa applications for your family members."}),r.jsx("a",{href:"/membership/",className:"inline-flex items-center gap-1 mt-2 text-sm font-medium text-amber-700 hover:text-amber-800",children:"Learn about Premium "})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:r.jsx(Qr,{className:"w-5 h-5 text-primary-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.length}),r.jsx("p",{className:"text-sm text-gray-500",children:"Family Members"})]})]})}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(me,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h,"/",d.length]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Documents Complete"})]})]})}),r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(Ae,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[p,"/",d.length]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Visas Ready"})]})]})})]}),d.length===0?r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(Qr,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No family members added"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Add family members to track their visa applications and documents"}),u?r.jsxs("button",{onClick:()=>a(!0),className:"btn btn-primary inline-flex items-center gap-2",children:[r.jsx(Jd,{className:"w-4 h-4"}),"Add First Member"]}):r.jsx(xf,{})]}):r.jsx("div",{className:"space-y-4",children:d.map(y=>r.jsx(K4,{member:y,canEdit:u,onEdit:()=>l(y),onDelete:()=>c(y)},y.id))}),(s||i)&&u&&r.jsx(Y4,{member:i,onClose:()=>{a(!1),l(null)}}),o&&u&&r.jsx(X4,{member:o,onClose:()=>c(null)})]})}function xf(){return r.jsxs("a",{href:"/membership/",className:"btn bg-gradient-to-r from-amber-500 to-orange-500 text-white hover:from-amber-600 hover:to-orange-600 flex items-center gap-2",children:[r.jsx(wv,{className:"w-4 h-4"}),"Upgrade to Add Members"]})}function K4({member:e,canEdit:t,onEdit:n,onDelete:s}){const a=G4[e.relationship]||st,i=gf[e.visaStatus]||gf.pending,l=i.icon,o=m=>{if(!m)return null;const h=new Date(m),p=new Date;let y=p.getFullYear()-h.getFullYear();const b=p.getMonth()-h.getMonth();return(b<0||b===0&&p.getDate()<h.getDate())&&y--,y},c=[{key:"passport",label:"Passport"},{key:"birthCertificate",label:"Birth Certificate"},...e.relationship==="spouse"?[{key:"marriageCertificate",label:"Marriage Certificate"}]:[],{key:"photos",label:"Photos"}],d=c.filter(m=>e.documents[m.key]).length,u=o(e.birthDate);return r.jsx("div",{className:"card p-5",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-primary-50 rounded-full",children:r.jsx(a,{className:"w-6 h-6 text-primary-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[H4[e.relationship]||e.relationship,u!==null&&`  ${u} years old`]})]}),t&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:r.jsx(Hh,{className:"w-4 h-4"})}),r.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(cn,{className:"w-4 h-4"})})]}),!t&&r.jsx("div",{className:"p-2 text-gray-300",title:"Upgrade to edit",children:r.jsx(rw,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-sm",children:[e.nationality&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[r.jsx(Bh,{className:"w-4 h-4"}),e.nationality]}),e.birthDate&&r.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[r.jsx(Qt,{className:"w-4 h-4"}),new Date(e.birthDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),r.jsxs("div",{className:Q("flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium",i.color),children:[r.jsx(l,{className:"w-3 h-3"}),i.label]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Documents"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[d,"/",c.length," complete"]})]}),r.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:Q("h-full rounded-full transition-all",d===c.length?"bg-green-500":"bg-primary-500"),style:{width:`${d/c.length*100}%`}})}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(m=>{const h=e.documents[m.key];return r.jsxs("span",{className:Q("text-xs px-2 py-1 rounded-full",h?"bg-green-100 text-green-700":"bg-red-100 text-red-600"),children:[h?"":"!"," ",m.label]},m.key)})})]}),e.notes&&r.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:r.jsx("p",{className:"text-sm text-yellow-800",children:e.notes})})]})]})})}function Y4({member:e,onClose:t}){const n=xN(),s=yN(),a=n.isPending||s.isPending,[i,l]=N.useState({name:(e==null?void 0:e.name)||"",relationship:(e==null?void 0:e.relationship)||"spouse",birthDate:(e==null?void 0:e.birthDate)||"",nationality:(e==null?void 0:e.nationality)||"",visaStatus:(e==null?void 0:e.visaStatus)||"pending",notes:(e==null?void 0:e.notes)||"",documents:(e==null?void 0:e.documents)||{passport:!1,birthCertificate:!1,marriageCertificate:!1,photos:!1}}),o=async d=>{d.preventDefault();try{e?await s.mutateAsync({memberId:e.id,data:i}):await n.mutateAsync(i),t()}catch(u){console.error("Failed to save family member:",u)}},c=d=>{l({...i,documents:{...i.documents,[d]:!i.documents[d]}})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e?"Edit Family Member":"Add Family Member"}),r.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg",children:r.jsx(Ve,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:o,className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),r.jsx("input",{type:"text",value:i.name,onChange:d=>l({...i,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relationship"}),r.jsxs("select",{value:i.relationship,onChange:d=>l({...i,relationship:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"spouse",children:"Spouse"}),r.jsx("option",{value:"child",children:"Child"}),r.jsx("option",{value:"parent",children:"Parent"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),r.jsx("input",{type:"date",value:i.birthDate,onChange:d=>l({...i,birthDate:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),r.jsx("input",{type:"text",value:i.nationality,onChange:d=>l({...i,nationality:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visa Status"}),r.jsxs("select",{value:i.visaStatus,onChange:d=>l({...i,visaStatus:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"applied",children:"Applied"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"not_required",children:"Not Required"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documents"}),r.jsx("div",{className:"space-y-2",children:[{key:"passport",label:"Passport"},{key:"birthCertificate",label:"Birth Certificate"},{key:"marriageCertificate",label:"Marriage Certificate"},{key:"photos",label:"Visa Photos"}].map(d=>r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.documents[d.key]||!1,onChange:()=>c(d.key),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:d.label})]},d.key))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),r.jsx("textarea",{value:i.notes,onChange:d=>l({...i,notes:d.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:a,children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 btn btn-primary",disabled:a,children:a?"Saving...":e?"Save Changes":"Add Member"})]})]})]})})}function X4({member:e,onClose:t}){const n=vN(),s=async()=>{try{await n.mutateAsync(e.id),t()}catch(a){console.error("Failed to delete family member:",a)}};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:r.jsx(cn,{className:"w-6 h-6 text-red-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Remove Family Member?"}),r.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to remove ",r.jsx("strong",{children:e.name}),"? This action cannot be undone."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:n.isPending,children:"Cancel"}),r.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",disabled:n.isPending,children:n.isPending?"Removing...":"Remove"})]})]})})})}function J4(){return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-6"}),r.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[1,2,3].map(e=>r.jsx("div",{className:"card p-4",children:r.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse"})},e))}),r.jsx("div",{className:"space-y-4",children:[1,2].map(e=>r.jsx("div",{className:"card p-5",children:r.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"})},e))})]})}function ml({isPending:e,isSuccess:t,isError:n,errorMessage:s="Failed to save. Please try again.",label:a="Save Changes",pendingLabel:i="Saving...",successLabel:l="Saved!"}){return r.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200",children:[r.jsxs("button",{type:"submit",disabled:e,className:"btn btn-primary flex items-center gap-2","aria-busy":e,"aria-live":"polite",children:[e?r.jsx(_e,{className:"w-4 h-4 animate-spin","aria-hidden":"true"}):t?r.jsx(Or,{className:"w-4 h-4","aria-hidden":"true"}):r.jsx(cl,{className:"w-4 h-4","aria-hidden":"true"}),e?i:t?l:a]}),n&&r.jsx("span",{className:"text-sm text-red-600",role:"alert",children:s})]})}function e3({profile:e}){const t=Ta(),[n,s]=N.useState({legal_first_name:"",legal_middle_name:"",legal_last_name:"",date_of_birth:"",nationality:"",passport_number:"",passport_expiry:""}),[a,i]=N.useState(!1);N.useEffect(()=>{e&&!a&&(s({legal_first_name:e.legal_first_name||"",legal_middle_name:e.legal_middle_name||"",legal_last_name:e.legal_last_name||"",date_of_birth:e.date_of_birth||"",nationality:e.nationality||"",passport_number:e.passport_number||"",passport_expiry:e.passport_expiry||""}),i(!0))},[e,a]);const l=o=>{o.preventDefault(),t.mutate(n)};return r.jsxs("form",{onSubmit:l,className:"space-y-6 pt-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",role:"note",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ye,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium",children:"Important: Legal Names Required"}),r.jsx("p",{className:"mt-1",children:"Use your passport/legal names exactly as they appear on official documents."})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"legal_first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Legal First Name ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("input",{type:"text",id:"legal_first_name",name:"legal_first_name",value:n.legal_first_name,onChange:o=>s({...n,legal_first_name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,"aria-required":"true",autoComplete:"given-name"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"legal_middle_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Middle Name"}),r.jsx("input",{type:"text",id:"legal_middle_name",name:"legal_middle_name",value:n.legal_middle_name,onChange:o=>s({...n,legal_middle_name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoComplete:"additional-name"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"legal_last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Legal Last Name ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("input",{type:"text",id:"legal_last_name",name:"legal_last_name",value:n.legal_last_name,onChange:o=>s({...n,legal_last_name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,"aria-required":"true",autoComplete:"family-name"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Birth ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("input",{type:"date",id:"date_of_birth",name:"date_of_birth",value:n.date_of_birth,onChange:o=>s({...n,date_of_birth:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,"aria-required":"true",autoComplete:"bday"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"nationality",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nationality ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("input",{type:"text",id:"nationality",name:"nationality",value:n.nationality,onChange:o=>s({...n,nationality:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., American, Canadian",required:!0,"aria-required":"true"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"passport_number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Number"}),r.jsx("input",{type:"text",id:"passport_number",name:"passport_number",value:n.passport_number,onChange:o=>s({...n,passport_number:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoComplete:"off"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"passport_expiry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Passport Expiry Date"}),r.jsx("input",{type:"date",id:"passport_expiry",name:"passport_expiry",value:n.passport_expiry,onChange:o=>s({...n,passport_expiry:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),r.jsx(ml,{isPending:t.isPending,isSuccess:t.isSuccess,isError:t.isError})]})}const ql=[{value:"AL",label:"Alabama"},{value:"AK",label:"Alaska"},{value:"AZ",label:"Arizona"},{value:"AR",label:"Arkansas"},{value:"CA",label:"California"},{value:"CO",label:"Colorado"},{value:"CT",label:"Connecticut"},{value:"DE",label:"Delaware"},{value:"DC",label:"District of Columbia"},{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"HI",label:"Hawaii"},{value:"ID",label:"Idaho"},{value:"IL",label:"Illinois"},{value:"IN",label:"Indiana"},{value:"IA",label:"Iowa"},{value:"KS",label:"Kansas"},{value:"KY",label:"Kentucky"},{value:"LA",label:"Louisiana"},{value:"ME",label:"Maine"},{value:"MD",label:"Maryland"},{value:"MA",label:"Massachusetts"},{value:"MI",label:"Michigan"},{value:"MN",label:"Minnesota"},{value:"MS",label:"Mississippi"},{value:"MO",label:"Missouri"},{value:"MT",label:"Montana"},{value:"NE",label:"Nebraska"},{value:"NV",label:"Nevada"},{value:"NH",label:"New Hampshire"},{value:"NJ",label:"New Jersey"},{value:"NM",label:"New Mexico"},{value:"NY",label:"New York"},{value:"NC",label:"North Carolina"},{value:"ND",label:"North Dakota"},{value:"OH",label:"Ohio"},{value:"OK",label:"Oklahoma"},{value:"OR",label:"Oregon"},{value:"PA",label:"Pennsylvania"},{value:"PR",label:"Puerto Rico"},{value:"RI",label:"Rhode Island"},{value:"SC",label:"South Carolina"},{value:"SD",label:"South Dakota"},{value:"TN",label:"Tennessee"},{value:"TX",label:"Texas"},{value:"UT",label:"Utah"},{value:"VT",label:"Vermont"},{value:"VI",label:"Virgin Islands"},{value:"VA",label:"Virginia"},{value:"WA",label:"Washington"},{value:"WV",label:"West Virginia"},{value:"WI",label:"Wisconsin"},{value:"WY",label:"Wyoming"}],t3=[{value:"undecided",label:"Undecided",description:"Still exploring visa options"},{value:"visitor",label:"Visitor Visa",description:"Short-term stay (up to 90 days)"},{value:"talent_passport",label:"Talent Passport",description:"For highly skilled professionals"},{value:"employee",label:"Employee Visa",description:"Working for a French company"},{value:"entrepreneur",label:"Entrepreneur Visa",description:"Starting a business in France"},{value:"student",label:"Student Visa",description:"Studying at a French institution"},{value:"family",label:"Family Reunification",description:"Joining family members in France"},{value:"spouse_french",label:"Spouse of French Citizen",description:"Married to a French national"},{value:"retiree",label:"Retiree Visa",description:"Retiring in France"}],n3=[{value:"under_50k",label:"Under $50,000"},{value:"50k_100k",label:"$50,000 - $100,000"},{value:"100k_200k",label:"$100,000 - $200,000"},{value:"200k_500k",label:"$200,000 - $500,000"},{value:"over_500k",label:"Over $500,000"}],Uv=[{value:"employed",label:"Employed"},{value:"self_employed",label:"Self-Employed"},{value:"retired",label:"Retired"},{value:"not_working",label:"Not Working"}],r3=[{value:"alone",label:"Just me (alone)"},{value:"spouse",label:"Me and my spouse/partner"},{value:"spouse_kids",label:"Me, spouse/partner, and children"},{value:"kids_only",label:"Me and children (no spouse/partner)"}],s3=[{value:"no",label:"No pets"},{value:"dogs",label:"Dog(s)"},{value:"cats",label:"Cat(s)"},{value:"both",label:"Both dogs and cats"},{value:"other",label:"Other pets"}],a3=[{value:"undecided",label:"Undecided"},{value:"no",label:"No, not planning to work"},{value:"yes_local",label:"Yes, for a French company"},{value:"yes_remote",label:"Yes, remote work for non-French company"},{value:"yes_self",label:"Yes, self-employed/freelance"}],i3=[{value:"us",label:"United States (US Consulate)"},{value:"france",label:"France (Already in France)"}];function l3({profile:e}){const t=Ta(),[n,s]=N.useState({applicants:"alone",spouse_legal_first_name:"",spouse_legal_last_name:"",spouse_date_of_birth:"",spouse_name:"",spouse_work_status:"not_working",num_children:0,children_ages:"",has_pets:"no",pet_details:""}),[a,i]=N.useState(!1);N.useEffect(()=>{e&&!a&&(s({applicants:e.applicants||"alone",spouse_legal_first_name:e.spouse_legal_first_name||"",spouse_legal_last_name:e.spouse_legal_last_name||"",spouse_date_of_birth:e.spouse_date_of_birth||"",spouse_name:e.spouse_name||"",spouse_work_status:e.spouse_work_status||"not_working",num_children:e.num_children||0,children_ages:e.children_ages||"",has_pets:e.has_pets||"no",pet_details:e.pet_details||""}),i(!0))},[e,a]);const l=u=>{u.preventDefault(),t.mutate(n)},o=n.applicants==="spouse"||n.applicants==="spouse_kids",c=n.applicants==="spouse_kids"||n.applicants==="kids_only",d=n.has_pets!=="no";return r.jsxs("form",{onSubmit:l,className:"space-y-6 pt-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"applicants",className:"block text-sm font-medium text-gray-700 mb-1",children:["Who will be relocating? ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("select",{id:"applicants",name:"applicants",value:n.applicants,onChange:u=>s({...n,applicants:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,"aria-required":"true",children:r3.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]}),o&&r.jsxs("fieldset",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("legend",{className:"font-medium text-gray-900 px-2",children:"Spouse/Partner Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_legal_first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Legal First Name"}),r.jsx("input",{type:"text",id:"spouse_legal_first_name",name:"spouse_legal_first_name",value:n.spouse_legal_first_name,onChange:u=>s({...n,spouse_legal_first_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoComplete:"off"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_legal_last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Legal Last Name"}),r.jsx("input",{type:"text",id:"spouse_legal_last_name",name:"spouse_legal_last_name",value:n.spouse_legal_last_name,onChange:u=>s({...n,spouse_legal_last_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoComplete:"off"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_date_of_birth",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Date of Birth"}),r.jsx("input",{type:"date",id:"spouse_date_of_birth",name:"spouse_date_of_birth",value:n.spouse_date_of_birth,onChange:u=>s({...n,spouse_date_of_birth:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Preferred Name"}),r.jsx("input",{type:"text",id:"spouse_name",name:"spouse_name",value:n.spouse_name,onChange:u=>s({...n,spouse_name:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"If different from legal name",autoComplete:"off"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_work_status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Work Status"}),r.jsx("select",{id:"spouse_work_status",name:"spouse_work_status",value:n.spouse_work_status,onChange:u=>s({...n,spouse_work_status:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Uv.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),c&&r.jsxs("fieldset",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("legend",{className:"font-medium text-gray-900 px-2",children:"Children Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"num_children",className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Children"}),r.jsx("input",{type:"number",id:"num_children",name:"num_children",min:"0",max:"20",value:n.num_children,onChange:u=>s({...n,num_children:parseInt(u.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"children_ages",className:"block text-sm font-medium text-gray-700 mb-1",children:"Children Ages"}),r.jsx("input",{type:"text",id:"children_ages",name:"children_ages",value:n.children_ages,onChange:u=>s({...n,children_ages:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., 5, 8, 12","aria-describedby":"children_ages_hint"}),r.jsx("p",{id:"children_ages_hint",className:"mt-1 text-sm text-gray-500",children:"Separate ages with commas"})]})]})]}),r.jsxs("fieldset",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"has_pets",className:"block text-sm font-medium text-gray-700 mb-1",children:"Do you have pets?"}),r.jsx("select",{id:"has_pets",name:"has_pets",value:n.has_pets,onChange:u=>s({...n,has_pets:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:s3.map(u=>r.jsx("option",{value:u.value,children:u.label},u.value))})]}),d&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"pet_details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pet Details"}),r.jsx("textarea",{id:"pet_details",name:"pet_details",value:n.pet_details,onChange:u=>s({...n,pet_details:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Breed, size, age, etc.","aria-describedby":"pet_details_hint"}),r.jsx("p",{id:"pet_details_hint",className:"mt-1 text-sm text-gray-500",children:"This information helps with pet relocation planning"})]})]}),r.jsx(ml,{isPending:t.isPending,isSuccess:t.isSuccess,isError:t.isError})]})}function o3({profile:e}){const t=Ta(),[n,s]=N.useState({visa_type:"undecided",employment_status:"not_working",work_in_france:"undecided",industry:"",employer_name:""}),[a,i]=N.useState(!1);N.useEffect(()=>{e&&!a&&(s({visa_type:e.visa_type||"undecided",employment_status:e.employment_status||"not_working",work_in_france:e.work_in_france||"undecided",industry:e.industry||"",employer_name:e.employer_name||""}),i(!0))},[e,a]);const l=c=>{c.preventDefault(),t.mutate(n)},o=n.employment_status==="employed"||n.employment_status==="self_employed";return r.jsxs("form",{onSubmit:l,className:"space-y-6 pt-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"visa_type",className:"block text-sm font-medium text-gray-700 mb-1",children:["Visa Type ",r.jsx("span",{className:"text-red-500","aria-label":"required",children:"*"})]}),r.jsx("select",{id:"visa_type",name:"visa_type",value:n.visa_type,onChange:c=>s({...n,visa_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,"aria-required":"true","aria-describedby":"visa_type_hint",children:t3.map(c=>r.jsxs("option",{value:c.value,children:[c.label," - ",c.description]},c.value))}),r.jsx("p",{id:"visa_type_hint",className:"mt-1 text-sm text-gray-500",children:"Select the visa type that best matches your situation. We'll help you refine this choice."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"employment_status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Employment Status"}),r.jsx("select",{id:"employment_status",name:"employment_status",value:n.employment_status,onChange:c=>s({...n,employment_status:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Uv.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"work_in_france",className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Plans in France"}),r.jsx("select",{id:"work_in_france",name:"work_in_france",value:n.work_in_france,onChange:c=>s({...n,work_in_france:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:a3.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),o&&r.jsxs("fieldset",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry/Field"}),r.jsx("input",{type:"text",id:"industry",name:"industry",value:n.industry,onChange:c=>s({...n,industry:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Technology, Healthcare, Finance",autoComplete:"organization-title"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"employer_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Employer"}),r.jsx("input",{type:"text",id:"employer_name",name:"employer_name",value:n.employer_name,onChange:c=>s({...n,employer_name:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Company name",autoComplete:"organization"})]})]}),r.jsx(ml,{isPending:t.isPending,isSuccess:t.isSuccess,isError:t.isError})]})}function c3({profile:e}){const t=Ta(),[n,s]=N.useState({current_country:"",current_state:"",current_city:"",birth_state:"",spouse_birth_state:"",marriage_state:"",marriage_country:"",target_location:"",application_location:"us"}),[a,i]=N.useState(!1);N.useEffect(()=>{e&&!a&&(s({current_country:e.current_country||"",current_state:e.current_state||"",current_city:e.current_city||"",birth_state:e.birth_state||"",spouse_birth_state:e.spouse_birth_state||"",marriage_state:e.marriage_state||"",marriage_country:e.marriage_country||"",target_location:e.target_location||"",application_location:e.application_location||"us"}),i(!0))},[e,a]);const l=o=>{o.preventDefault(),t.mutate(n)};return r.jsxs("form",{onSubmit:l,className:"space-y-6 pt-6",children:[r.jsxs("fieldset",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("legend",{className:"font-medium text-gray-900 px-2",children:"Current Location"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"current_country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Country"}),r.jsx("input",{type:"text",id:"current_country",name:"current_country",value:n.current_country,onChange:o=>s({...n,current_country:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., United States",autoComplete:"country-name"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"current_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current State"}),r.jsxs("select",{id:"current_state",name:"current_state",value:n.current_state,onChange:o=>s({...n,current_state:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"Select a state"}),ql.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"current_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current City"}),r.jsx("input",{type:"text",id:"current_city",name:"current_city",value:n.current_city,onChange:o=>s({...n,current_city:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., New York",autoComplete:"address-level2"})]})]})]}),r.jsxs("fieldset",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("legend",{className:"font-medium text-gray-900 px-2",children:"Birth & Marriage Information"}),r.jsx("p",{className:"text-sm text-gray-600 -mt-2",children:"Required for apostille processing"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"birth_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Birth State (US)"}),r.jsxs("select",{id:"birth_state",name:"birth_state",value:n.birth_state,onChange:o=>s({...n,birth_state:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-describedby":"birth_state_hint",children:[r.jsx("option",{value:"",children:"Select a state"}),ql.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))]}),r.jsx("p",{id:"birth_state_hint",className:"mt-1 text-sm text-gray-500",children:"Used for birth certificate apostille routing"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"spouse_birth_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spouse Birth State (US)"}),r.jsxs("select",{id:"spouse_birth_state",name:"spouse_birth_state",value:n.spouse_birth_state,onChange:o=>s({...n,spouse_birth_state:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"Select a state"}),ql.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"If applicable"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"marriage_state",className:"block text-sm font-medium text-gray-700 mb-1",children:"Marriage State (US)"}),r.jsxs("select",{id:"marriage_state",name:"marriage_state",value:n.marriage_state,onChange:o=>s({...n,marriage_state:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[r.jsx("option",{value:"",children:"Select a state"}),ql.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"If married in the US"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"marriage_country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Marriage Country"}),r.jsx("input",{type:"text",id:"marriage_country",name:"marriage_country",value:n.marriage_country,onChange:o=>s({...n,marriage_country:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"If married outside the US"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"target_location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Location in France"}),r.jsx("input",{type:"text",id:"target_location",name:"target_location",value:n.target_location,onChange:o=>s({...n,target_location:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Paris, Lyon, Provence","aria-describedby":"target_location_hint"}),r.jsx("p",{id:"target_location_hint",className:"mt-1 text-sm text-gray-500",children:"Where in France are you planning to relocate?"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"application_location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Where will you apply for your visa?"}),r.jsx("select",{id:"application_location",name:"application_location",value:n.application_location,onChange:o=>s({...n,application_location:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-describedby":"application_location_hint",children:i3.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))}),r.jsx("p",{id:"application_location_hint",className:"mt-1 text-sm text-gray-500",children:"This affects the application process and requirements"})]})]}),r.jsx(ml,{isPending:t.isPending,isSuccess:t.isSuccess,isError:t.isError})]})}function u3({profile:e}){const t=Ta(),[n,s]=N.useState({financial_resources:"under_50k",income_sources:""}),[a,i]=N.useState(!1);N.useEffect(()=>{e&&!a&&(s({financial_resources:e.financial_resources||"under_50k",income_sources:e.income_sources||""}),i(!0))},[e,a]);const l=o=>{o.preventDefault(),t.mutate(n)};return r.jsxs("form",{onSubmit:l,className:"space-y-6 pt-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",role:"note",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ye,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5","aria-hidden":"true"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium",children:"Financial Information"}),r.jsx("p",{className:"mt-1",children:"This helps us provide accurate guidance on visa requirements and financial proof needed. Your information is confidential."})]})]})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"financial_resources",className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Financial Resources"}),r.jsx("select",{id:"financial_resources",name:"financial_resources",value:n.financial_resources,onChange:o=>s({...n,financial_resources:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-describedby":"financial_resources_hint",children:n3.map(o=>r.jsx("option",{value:o.value,children:o.label},o.value))}),r.jsx("p",{id:"financial_resources_hint",className:"mt-1 text-sm text-gray-500",children:"Combined savings, investments, and liquid assets available for relocation"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"income_sources",className:"block text-sm font-medium text-gray-700 mb-1",children:"Income Sources"}),r.jsx("textarea",{id:"income_sources",name:"income_sources",value:n.income_sources,onChange:o=>s({...n,income_sources:o.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g., Employment, investments, rental income, pension, retirement accounts, etc.","aria-describedby":"income_sources_hint"}),r.jsx("p",{id:"income_sources_hint",className:"mt-1 text-sm text-gray-500",children:"Describe your current and expected income sources to support your stay in France"})]}),r.jsx(ml,{isPending:t.isPending,isSuccess:t.isSuccess,isError:t.isError})]})}function d3(){return r.jsxs("div",{className:"p-6","aria-busy":"true","aria-label":"Loading profile",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-gray-200 rounded animate-pulse"})]}),r.jsxs("div",{className:"card p-6 mb-6",children:[r.jsx("div",{className:"h-6 w-64 bg-gray-200 rounded animate-pulse mb-4"}),r.jsx("div",{className:"h-3 w-full bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>r.jsx("div",{className:"card p-6",children:r.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse"})},e))})]})}const m3=[{id:"personal",label:"Personal Information",icon:st,component:e3},{id:"applicant",label:"Applicant & Family",icon:Qr,component:l3},{id:"visa",label:"Visa & Employment",icon:Oh,component:o3},{id:"location",label:"Location Information",icon:_n,component:c3},{id:"financial",label:"Financial Information",icon:qh,component:u3}];function h3(){const{data:e,isLoading:t}=Uc(),[n,s]=N.useState(new Set(["personal","applicant","visa","location","financial"])),a=i=>{s(l=>{const o=new Set(l);return o.has(i)?o.delete(i):o.add(i),o})};return t?r.jsx(d3,{}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Profile"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your personal information for visa applications"})]}),e&&r.jsx(p3,{profile:e}),r.jsx("div",{className:"space-y-4",children:m3.map(i=>r.jsx(f3,{section:i,profile:e,isOpen:n.has(i.id),onToggle:()=>a(i.id)},i.id))})]})}function p3({profile:e}){const t=e.profile_completion||0;return r.jsxs("div",{className:"card p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Profile Completion"}),r.jsxs("span",{className:"text-2xl font-bold text-primary-600","aria-label":`${t}% complete`,children:[t,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Profile completion progress",children:r.jsx("div",{className:Q("h-3 rounded-full transition-all duration-500",t>=80?"bg-green-500":t>=50?"bg-primary-500":"bg-yellow-500"),style:{width:`${t}%`}})}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Complete your profile to help us provide better guidance for your relocation"})]})}function f3({section:e,profile:t,isOpen:n,onToggle:s}){const a=e.icon,i=e.component;return r.jsxs("div",{className:"card overflow-hidden",children:[r.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-6 hover:bg-gray-50 transition-colors","aria-expanded":n,"aria-controls":`section-${e.id}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(a,{className:"w-5 h-5 text-primary-600","aria-hidden":"true"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.label})]}),n?r.jsx(ya,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"}):r.jsx(kn,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})]}),n&&r.jsx("div",{id:`section-${e.id}`,className:"px-6 pb-6 border-t border-gray-100",children:r.jsx(i,{profile:t})})]})}const g3={pending:{icon:Ar,color:"text-gray-400",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:"Not Started"},in_progress:{icon:Ar,color:"text-yellow-500",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",label:"In Progress"},complete:{icon:bv,color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",label:"Complete"}};function x3({item:e,onUpdate:t,isUpdating:n=!1}){const[s,a]=N.useState(!1),[i,l]=N.useState(!1),[o,c]=N.useState(e.notes||""),d=g3[e.status],u=d.icon,m=()=>{const j={pending:"in_progress",in_progress:"complete",complete:"pending"};t(e.id,{status:j[e.status]})},h=j=>{t(e.id,{status:j})},p=()=>{t(e.id,{handled_own:!e.handled_own})},y=()=>{t(e.id,{notes:o}),l(!1)},b=()=>{c(e.notes||""),l(!1)};return r.jsx("div",{className:Q("card transition-all",d.borderColor,"border-l-4",s&&"ring-2 ring-primary-100"),children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("button",{onClick:m,disabled:n,className:Q("flex-shrink-0 mt-0.5 transition-all hover:scale-110",d.color,n&&"opacity-50 cursor-not-allowed"),children:r.jsx(u,{className:Q("w-5 h-5",e.status==="in_progress"&&"fill-current")})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1",children:[r.jsx("h3",{className:Q("font-medium text-gray-900",e.status==="complete"&&"line-through text-gray-500"),children:e.title}),r.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full whitespace-nowrap",children:[r.jsx(Le,{className:"w-3 h-3"}),e.lead_time]})]}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[r.jsxs("select",{value:e.status,onChange:j=>h(j.target.value),disabled:n,className:Q("text-xs px-2 py-1 rounded-md border transition-colors",d.borderColor,d.bgColor,d.color,"font-medium cursor-pointer",n&&"opacity-50 cursor-not-allowed"),children:[r.jsx("option",{value:"pending",children:"Not Started"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"complete",children:"Complete"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.handled_own,onChange:p,disabled:n,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("span",{children:"I handled this myself"})]}),r.jsx("button",{onClick:()=>a(!s),className:"ml-auto text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1",children:s?r.jsxs(r.Fragment,{children:[r.jsx(ya,{className:"w-3 h-3"}),"Less"]}):r.jsxs(r.Fragment,{children:[r.jsx(kn,{className:"w-3 h-3"}),"Notes"]})})]})]})]}),s&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),!i&&r.jsxs("button",{onClick:()=>l(!0),className:"text-xs text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[r.jsx(Hh,{className:"w-3 h-3"}),"Edit"]})]}),i?r.jsxs("div",{className:"space-y-2",children:[r.jsx("textarea",{value:o,onChange:j=>c(j.target.value),placeholder:"Add notes about this item...",rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:y,disabled:n,className:"btn btn-primary btn-sm",children:[r.jsx(Or,{className:"w-3 h-3"}),"Save"]}),r.jsxs("button",{onClick:b,disabled:n,className:"btn btn-secondary btn-sm",children:[r.jsx(Ve,{className:"w-3 h-3"}),"Cancel"]})]})]}):r.jsx("div",{className:"text-sm text-gray-600",children:e.notes?r.jsx("p",{className:"whitespace-pre-wrap bg-gray-50 rounded-lg p-3",children:e.notes}):r.jsx("p",{className:"text-gray-400 italic",children:"No notes yet"})})]})]})})}function y3(){var v;const[e,t]=N.useState("all"),[n,s]=N.useState("default"),{data:a,isLoading:i}=Ns(),l=(v=a==null?void 0:a.project)==null?void 0:v.visa_type,{data:o=[],isLoading:c}=qj(l),d=Uj(),u=o.find(w=>w.type==="visa-application"),m=o.find(w=>w.type==="relocation"),h=w=>{let _=[...w];if(e==="pending"?_=_.filter(k=>k.status!=="complete"):e==="complete"&&(_=_.filter(k=>k.status==="complete")),n==="lead_time")_.sort((k,C)=>{const E=M=>M.includes("week")?parseInt(M)*7*24*60:M.includes("day")?parseInt(M)*24*60:M.includes("hour")||M.includes("min")?parseInt(M)*60:0;return E(C.lead_time)-E(k.lead_time)});else if(n==="status"){const k={pending:0,in_progress:1,complete:2};_.sort((C,E)=>k[C.status]-k[E.status])}else _.sort((k,C)=>k.sort_order-C.sort_order);return _},p=u?h(u.items):[],y=m?h(m.items):[],b=((u==null?void 0:u.items.length)||0)+((m==null?void 0:m.items.length)||0),j=((u==null?void 0:u.items.filter(w=>w.status==="complete").length)||0)+((m==null?void 0:m.items.filter(w=>w.status==="complete").length)||0),g=b>0?Math.round(j/b*100):0,f=(w,_,k)=>{d.mutate({checklistType:w,itemId:_,data:k})};if(i||c)return r.jsx(v3,{});if(!(a!=null&&a.project))return r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"card p-8 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Project Found"}),r.jsx("p",{className:"text-gray-600",children:"Please set up your relocation project first."})]})});const x=e!=="all"||n!=="default";return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Checklists"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track your visa application and relocation document preparation"})]}),r.jsx("div",{className:"card mb-6 bg-gradient-to-br from-primary-50 to-primary-100/50",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-600 flex items-center justify-center",children:r.jsx(Jp,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Overall Progress"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[j," of ",b," items complete"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-3xl font-bold text-primary-700",children:[g,"%"]}),r.jsx("div",{className:"text-xs text-gray-600",children:"Complete"})]})]}),r.jsx("div",{className:"h-3 bg-white/50 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-600 rounded-full transition-all duration-500",style:{width:`${g}%`}})})]})}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[r.jsx(Uh,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsx("button",{onClick:()=>t("all"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",e==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"All"}),r.jsx("button",{onClick:()=>t("pending"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",e==="pending"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Pending"}),r.jsx("button",{onClick:()=>t("complete"),className:Q("px-3 py-1.5 rounded-md text-sm font-medium transition-colors",e==="complete"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Complete"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(XN,{className:"w-4 h-4 text-gray-400"}),r.jsxs("select",{value:n,onChange:w=>s(w.target.value),className:"select text-sm py-1.5",children:[r.jsx("option",{value:"default",children:"Default Order"}),r.jsx("option",{value:"lead_time",children:"Lead Time"}),r.jsx("option",{value:"status",children:"Status"})]}),x&&r.jsxs("button",{onClick:()=>{t("all"),s("default")},className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[r.jsx(Ve,{className:"w-3 h-3"}),"Clear"]})]})]})})}),r.jsxs("div",{className:"space-y-6",children:[u&&r.jsx(yf,{checklist:u,filteredItems:p,icon:Dv,iconColor:"text-blue-600",iconBg:"bg-blue-100",onUpdateItem:(w,_)=>f("visa-application",w,_),isUpdating:d.isPending}),m&&r.jsx(yf,{checklist:m,filteredItems:y,icon:me,iconColor:"text-purple-600",iconBg:"bg-purple-100",onUpdateItem:(w,_)=>f("relocation",w,_),isUpdating:d.isPending})]}),p.length===0&&y.length===0&&b>0&&r.jsxs("div",{className:"card p-8 text-center mt-6",children:[r.jsx(Ar,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500 mb-2",children:"No items match your filters"}),r.jsx("button",{onClick:()=>{t("all"),s("default")},className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Clear filters"})]}),o.length===0&&r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:r.jsx(Jp,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No checklists available"}),r.jsx("p",{className:"text-gray-600",children:"Checklists will be available once your project is set up with a visa type."})]})]})}function yf({checklist:e,filteredItems:t,icon:n,iconColor:s,iconBg:a,onUpdateItem:i,isUpdating:l}){const o=e.items.filter(u=>u.status==="complete").length,c=e.items.length,d=c>0?Math.round(o/c*100):0;return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"p-6 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:Q("w-10 h-10 rounded-lg flex items-center justify-center",a),children:r.jsx(n,{className:Q("w-5 h-5",s)})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:[o," of ",c," items complete"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[d,"%"]})})]}),r.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:r.jsx("div",{className:Q("h-full rounded-full transition-all duration-500",s.replace("text-","bg-")),style:{width:`${d}%`}})})]}),r.jsx("div",{className:"p-6",children:t.length>0?r.jsx("div",{className:"space-y-3",children:t.map(u=>r.jsx(x3,{item:u,onUpdate:i,isUpdating:l},u.id))}):r.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"No items to show with current filters"})})]})}function v3(){return r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded-lg animate-pulse mb-6 w-48"}),r.jsx("div",{className:"card mb-6",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 animate-pulse"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-5 w-32 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-24 bg-gray-100 rounded animate-pulse"})]})]}),r.jsx("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"h-3 bg-gray-200 rounded-full animate-pulse"})]})}),r.jsx("div",{className:"card mb-6",children:r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"h-10 bg-gray-200 rounded-lg animate-pulse"})})}),[1,2].map(e=>r.jsxs("div",{className:"card mb-6",children:[r.jsxs("div",{className:"p-6 border-b border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-200 animate-pulse"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-5 w-40 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-28 bg-gray-100 rounded animate-pulse"})]})]}),r.jsx("div",{className:"h-8 w-12 bg-gray-200 rounded animate-pulse"})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full animate-pulse"})]}),r.jsx("div",{className:"p-6 space-y-3",children:[1,2,3].map(t=>r.jsx("div",{className:"card p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 animate-pulse flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded animate-pulse w-1/2"})]})]})},t))})]},e))]})}function b3(e){if(!e||!Array.isArray(e))return null;try{return e.map((t,n)=>({id:t.id||`category-${n}`,title:t.title||"Unknown Category",terms:(t.terms||[]).map((s,a)=>({id:`${t.id||"cat"}-${a}`,title:s.term||"Unknown Term",french:s.term||"",short:s.definition||"",full:s.pronunciation?`Pronunciation: ${s.pronunciation}`:void 0,category:t.id||`category-${n}`}))}))}catch{return null}}const vf=[{id:"document-legal",title:"Document & Legal Terms",terms:[{id:"apostille",title:"Apostille",french:"Apostille",short:"Official certificate authenticating documents for international use",full:"An apostille is a form of authentication issued to documents for use in countries that participate in the Hague Convention of 1961. It certifies that a document is a true copy of an original, making it legally valid in other member countries without additional certification.",category:"document-legal"},{id:"certified-copy",title:"Certified Copy",french:"Copie certifie conforme",short:"An official copy verified by the issuing authority",full:"A certified copy is an official copy of a document that has been verified as a true and accurate reproduction of the original by an authorized person or entity, such as a notary public, government official, or the issuing authority.",category:"document-legal"},{id:"attestation",title:"Sworn Statement",french:"Attestation sur l'honneur",short:"A sworn statement declaring something to be true",full:"A sworn statement or affidavit declaring that certain facts or statements are true to the best of your knowledge. In France, this is a legally binding document where you attest to the veracity of information under penalty of perjury. Commonly required for administrative procedures.",category:"document-legal"},{id:"compromis",title:"Preliminary Sales Agreement",french:"Compromis de vente",short:"Preliminary sales agreement for property purchase",full:"The preliminary contract for buying property in France, signed by both buyer and seller. This legally binding agreement sets out the terms of the sale and is typically signed several weeks before the final deed of sale (acte de vente). You have a 10-day cooling-off period after signing.",category:"document-legal"},{id:"acte-vente",title:"Final Deed of Sale",french:"Acte de vente",short:"Final deed of sale transferring property ownership",full:"The final deed of sale for property purchase in France, signed before a notary (notaire). This document officially transfers ownership from seller to buyer and must be registered with the land registry.",category:"document-legal"},{id:"procuration",title:"Power of Attorney",french:"Procuration",short:"Power of attorney authorizing someone to act on your behalf",full:"A legal document granting someone the authority to act on your behalf in specific matters. In France, procurations are commonly used for property purchases, bank transactions, or administrative procedures when you cannot be physically present.",category:"document-legal"},{id:"notaire",title:"Notary",french:"Notaire",short:"Public official who authenticates legal documents",full:"A notaire is a highly qualified legal professional appointed by the state. Unlike US notaries, French notaires have extensive legal training and are required for property transactions, inheritances, marriage contracts, and company formations. They ensure documents are legally valid and properly registered.",category:"document-legal"},{id:"livret-famille",title:"Family Record Book",french:"Livret de famille",short:"Official booklet recording family civil status events",full:"An official document issued at marriage or birth of a first child, recording all civil status events for a family (marriages, births, deaths, divorces). This booklet is frequently required for administrative procedures in France and serves as proof of family relationships.",category:"document-legal"},{id:"extrait-acte-naissance",title:"Birth Certificate Extract",french:"Extrait d'acte de naissance",short:"Official extract of birth certificate",full:'An official extract from the civil registry containing birth information. France distinguishes between "copie intgrale" (full copy) and "extrait" (extract with or without filiation). Many administrative procedures require a recent extract (less than 3-6 months old).',category:"document-legal"},{id:"casier-judiciaire",title:"Criminal Record",french:"Casier judiciaire",short:"Official criminal record certificate",full:"An official document showing criminal convictions. Bulletin n3 (the most common) shows only serious convictions and can be requested by the individual. Often required for employment, visa applications, or adopting. US equivalent would be an FBI background check.",category:"document-legal"},{id:"traducteur-assermente",title:"Sworn Translator",french:"Traducteur asserment",short:"Court-certified translator for official documents",full:"A translator officially recognized by French courts to provide certified translations of legal documents. Only translations by sworn translators are accepted for official procedures like visa applications, court cases, and administrative filings.",category:"document-legal"}]},{id:"visa-residency",title:"Visa & Residency Terms",terms:[{id:"vls-ts",title:"Long-Stay Visa (Residence Permit)",french:"Visa de Long Sjour valant Titre de Sjour (VLS-TS)",short:"Long-stay visa equivalent to residence permit",full:"A long-stay visa that serves as a residence permit for the first year in France. After entering France with a VLS-TS, you must validate it with OFII within 3 months. This validation makes the visa equivalent to a residence permit for one year.",category:"visa-residency"},{id:"titre-sejour",title:"Residence Permit",french:"Titre de sjour",short:"Residence permit card allowing you to live in France",full:"A residence permit card issued by the Prefecture that allows you to legally reside in France for a specified period. After your first year with a VLS-TS, you'll need to apply for a titre de sjour renewal at your local prefecture.",category:"visa-residency"},{id:"ofii",title:"Immigration Office",french:"Office Franais de l'Immigration et de l'Intgration (OFII)",short:"French Immigration and Integration Office",full:"The French Office for Immigration and Integration. OFII is responsible for validating long-stay visas, organizing mandatory integration programs, and managing certain aspects of legal immigration to France. You must complete OFII validation within 3 months of arrival.",category:"visa-residency"},{id:"prefecture",title:"Prefecture",french:"Prfecture",short:"Regional government office handling residence permits",full:"The prefecture is the local government office representing the French state in each department. It handles residence permit applications, renewals, driver's license exchanges, and various other administrative procedures for foreign residents.",category:"visa-residency"},{id:"recepisse",title:"Receipt/Temporary Permit",french:"Rcpiss",short:"Temporary receipt while waiting for documents",full:"A temporary document issued by the Prefecture acknowledging that you have submitted an application for a residence permit. It serves as proof that you are legally allowed to stay in France while your application is being processed and may authorize you to work.",category:"visa-residency"},{id:"carte-resident",title:"Resident Card",french:"Carte de rsident",short:"10-year residence permit",full:"A 10-year renewable residence permit granting extensive rights in France, including unlimited work authorization. Available after 5 years of legal residence (3 years in some cases) or through family ties to French citizens. Provides more stability than annual permits.",category:"visa-residency"},{id:"regroupement-familial",title:"Family Reunification",french:"Regroupement familial",short:"Process to bring family members to France",full:"The legal procedure allowing a foreign resident in France to bring their spouse and minor children to join them. Requires stable income, adequate housing, and at least 18 months of legal residence. Different from accompanying family on initial visa.",category:"visa-residency"},{id:"passeport-talent",title:"Talent Passport",french:"Passeport talent",short:"Multi-year residence permit for skilled workers",full:"A residence permit for highly skilled workers, researchers, artists, investors, and entrepreneurs. Valid up to 4 years and renewable. Categories include employees on assignment, researchers, company founders, investors, and artists. Family members receive automatic permits.",category:"visa-residency"},{id:"autorisation-travail",title:"Work Authorization",french:"Autorisation de travail",short:"Permission to work legally in France",full:"Official authorization to work in France. Some residence permits include automatic work authorization, while others require a separate application. Employers must verify work authorization before hiring. Working without authorization is illegal for both employee and employer.",category:"visa-residency"},{id:"cir",title:"Republican Integration Contract",french:"Contrat d'Intgration Rpublicaine (CIR)",short:"Mandatory integration program for new residents",full:"A mandatory integration program for most long-term visa holders. Includes civic training about French values, language assessment, and French classes if needed. Completion is required for residence permit renewal and eventual naturalization.",category:"visa-residency"}]},{id:"healthcare",title:"Healthcare Terms",terms:[{id:"puma",title:"Universal Health Coverage",french:"Protection Universelle Maladie (PUMA)",short:"Universal health coverage system",full:"Protection Universelle Maladie (Universal Health Protection) is France's universal healthcare coverage system. If you live in France in a stable and regular manner (at least 3 months per year), you are entitled to healthcare coverage under PUMA, managed by the national health insurance (Assurance Maladie).",category:"healthcare"},{id:"carte-vitale",title:"Health Insurance Card",french:"Carte Vitale",short:"French health insurance card",full:"The green electronic health insurance card containing your personal information and social security number. It allows healthcare providers to directly bill your treatments to the national health insurance system. You receive this card after registering with CPAM.",category:"healthcare"},{id:"mutuelle",title:"Supplementary Insurance",french:"Mutuelle / Complmentaire sant",short:"Supplementary private health insurance",full:'Complementary private health insurance that covers expenses not fully reimbursed by the national health insurance system (typically 70% of costs). A mutuelle typically covers the remaining 30% (called the "ticket modrateur") plus additional services like dental, optical, and alternative medicine.',category:"healthcare"},{id:"cpam",title:"Health Insurance Office",french:"Caisse Primaire d'Assurance Maladie (CPAM)",short:"Local health insurance office",full:"The local branch of the French national health insurance system. CPAM handles registration, reimbursements, and issues the Carte Vitale. Each department has its own CPAM office where you must register after obtaining your residence permit.",category:"healthcare"},{id:"medecin-traitant",title:"Primary Care Doctor",french:"Mdecin traitant",short:"Designated primary care physician",full:"Your designated primary care doctor who coordinates your healthcare. You must declare a mdecin traitant to receive full reimbursement rates. Seeing specialists without a referral from your mdecin traitant results in lower reimbursement (except for certain specialists like gynecologists and ophthalmologists).",category:"healthcare"},{id:"numero-secu",title:"Social Security Number",french:"Numro de scurit sociale",short:"French social security identification number",full:"A 15-digit number assigned to everyone registered with French social security. Unlike US SSN, it encodes gender, birth year/month, department, and commune of birth. Required for healthcare, employment, taxes, and most administrative procedures.",category:"healthcare"},{id:"pharmacie",title:"Pharmacy",french:"Pharmacie",short:"Regulated pharmacy with green cross sign",full:'French pharmacies (marked by green crosses) are the only places to buy medications, even common ones like ibuprofen. Pharmacists are highly trained and can provide medical advice, administer vaccines, and suggest treatments for minor ailments. A "pharmacie de garde" provides 24/7 service on rotation.',category:"healthcare"},{id:"ordonnance",title:"Prescription",french:"Ordonnance",short:"Medical prescription from a doctor",full:"A written prescription from a doctor required for most medications in France. Prescriptions are valid for varying periods (3-12 months) and often specify the number of renewals. Keep your ordonnance as it's needed for reimbursement and pharmacy refills.",category:"healthcare"},{id:"tiers-payant",title:"Third-Party Payment",french:"Tiers payant",short:"Direct billing to insurance (no upfront payment)",full:"A system where healthcare providers bill the insurance directly, so you don't pay upfront. Available at pharmacies (for prescriptions) and increasingly at doctors' offices. Without tiers payant, you pay the full amount and await reimbursement.",category:"healthcare"},{id:"arret-maladie",title:"Sick Leave Certificate",french:"Arrt maladie / Arrt de travail",short:"Official sick leave document from a doctor",full:"An official document from a doctor certifying you are unable to work due to illness. Must be sent to your employer within 48 hours. Social security pays daily allowances (indemnits journalires) after a 3-day waiting period, often supplemented by employer.",category:"healthcare"}]},{id:"banking",title:"Banking & Financial Terms",terms:[{id:"rib",title:"Bank Account Details",french:"Relev d'Identit Bancaire (RIB)",short:"Document with your bank account information",full:"A document containing your bank account details including IBAN and BIC/SWIFT codes. Essential for setting up direct debits, receiving salary, and any bank transfers. You can download it from online banking or get it from your bank branch.",category:"banking"},{id:"prelevement",title:"Direct Debit",french:"Prlvement automatique",short:"Automatic payment from your bank account",full:"Automatic recurring payments debited directly from your bank account. Common for utilities, rent, insurance, and subscriptions. You authorize by providing your RIB and signing a SEPA mandate. You can contest unauthorized debits within 13 months.",category:"banking"},{id:"virement",title:"Bank Transfer",french:"Virement bancaire",short:"Transfer money between bank accounts",full:"Transferring money from one bank account to another. SEPA transfers within Europe are typically free and take 1 business day. You need the recipient's IBAN to initiate a transfer. Can be one-time or set up as recurring (virement permanent).",category:"banking"},{id:"carte-bancaire",title:"Debit Card",french:"Carte bancaire (CB)",short:"French bank debit card",full:'French bank cards function as debit cards with immediate or deferred debit. "Dbit immdiat" debits immediately; "dbit diffr" accumulates purchases and debits monthly. Cards use chip-and-PIN exclusively. Contactless payment is standard for amounts under 50.',category:"banking"},{id:"chequier",title:"Checkbook",french:"Chquier / Carnet de chques",short:"Book of personal checks",full:"Despite declining use globally, checks remain common in France for rent, medical consultations, and some services. Banks provide checkbooks free of charge. Bouncing a check is a serious offense that can result in being banned from having a checkbook (interdit bancaire).",category:"banking"},{id:"livret-a",title:"Tax-Free Savings Account",french:"Livret A",short:"Regulated tax-free savings account",full:"A government-regulated savings account available to all French residents. Interest is tax-free with a current cap of 22,950. The interest rate is set by the government. Every bank offers Livret A, and you can only have one per person.",category:"banking"},{id:"impots",title:"Taxes",french:"Impts",short:"French tax system and tax office",full:"French income tax (impt sur le revenu) is now withheld at source (prlvement  la source). You must file an annual declaration even if tax is withheld. The tax office (Centre des Impts/Service des Impts des Particuliers) handles all tax matters.",category:"banking"},{id:"avis-imposition",title:"Tax Notice",french:"Avis d'imposition",short:"Official document showing your tax status",full:"An official document from the tax authority showing your declared income and tax calculated or paid. This crucial document is required for many administrative procedures: renting an apartment, applying for social benefits, obtaining a residence permit, and more.",category:"banking"},{id:"caf",title:"Family Allowance Office",french:"Caisse d'Allocations Familiales (CAF)",short:"Agency managing family and housing benefits",full:"Government agency managing various social benefits including housing assistance (APL/ALS), family allowances, childcare subsidies, and income support (RSA). Legal residents can apply for housing benefits which can significantly reduce rent costs.",category:"banking"},{id:"apl",title:"Housing Assistance",french:"Aide Personnalise au Logement (APL)",short:"Government housing benefit",full:"A housing subsidy paid to eligible residents to help cover rent costs. Amount depends on income, rent, location, and family situation. Paid directly to landlord or tenant monthly. Apply through CAF after signing your lease.",category:"banking"}]},{id:"housing",title:"Housing & Accommodation Terms",terms:[{id:"bail",title:"Lease Agreement",french:"Bail / Contrat de location",short:"Rental contract between landlord and tenant",full:"The rental agreement between landlord (bailleur) and tenant (locataire). Standard unfurnished leases are 3 years minimum; furnished leases are 1 year (9 months for students). The lease defines rent, charges, deposit, and conditions. Strong tenant protections exist in French law.",category:"housing"},{id:"depot-garantie",title:"Security Deposit",french:"Dpt de garantie",short:"Refundable deposit paid when signing lease",full:"A refundable deposit paid when signing a lease, limited by law to 1 month rent (unfurnished) or 2 months (furnished). Must be returned within 1-2 months after leaving, minus any justified deductions for damages or unpaid rent.",category:"housing"},{id:"charges",title:"Service Charges",french:"Charges locatives",short:"Additional costs on top of base rent",full:'Monthly costs in addition to base rent, covering shared building expenses like heating, water, elevator maintenance, cleaning, and trash collection. Can be "provisions" (estimated monthly, adjusted annually) or "forfait" (fixed amount). Listed separately from rent.',category:"housing"},{id:"etat-lieux",title:"Property Inspection Report",french:"tat des lieux",short:"Detailed inspection at move-in and move-out",full:"A detailed written report documenting the condition of a rental property at move-in and move-out. Both landlord and tenant sign it. Differences between entry and exit reports determine deposit deductions. Always be thorough and note any existing damage.",category:"housing"},{id:"garant",title:"Guarantor",french:"Garant / Caution",short:"Person who guarantees rent payment",full:"A person (or organization like Visale) who commits to paying rent if the tenant cannot. French landlords often require a guarantor earning 3-4x the rent. Non-French residents can use Visale (free government guarantee) or paid guarantee services.",category:"housing"},{id:"dossier-location",title:"Rental Application File",french:"Dossier de location",short:"Documents required to rent an apartment",full:"The complete set of documents required when applying for a rental: ID, proof of income (3 pay slips, tax notice, employment contract), proof of address, and guarantor documents. French landlords are legally limited in what they can request.",category:"housing"},{id:"preavis",title:"Notice Period",french:"Pravis",short:"Required notice before leaving a rental",full:'The advance notice required before terminating a lease. For tenants: 3 months (unfurnished) or 1 month (furnished, or unfurnished in "zone tendue" tight housing markets). Landlords have 6 months notice and can only terminate for specific legal reasons.',category:"housing"},{id:"copropriete",title:"Condominium/Co-ownership",french:"Coproprit",short:"Shared ownership of building common areas",full:"The legal structure for apartment buildings where individual units are privately owned but common areas are collectively owned. The coproprit has a syndic (management company), annual meetings, and charges for maintenance. Buyers receive the carnet d'entretien (maintenance log).",category:"housing"},{id:"syndic",title:"Building Management Company",french:"Syndic de coproprit",short:"Professional company managing a building",full:"A professional or volunteer entity managing a coproprit building: collecting charges, organizing maintenance, holding annual meetings, and enforcing building rules. The syndic is elected by co-owners and their fees are part of the charges.",category:"housing"},{id:"taxe-habitation",title:"Housing Tax",french:"Taxe d'habitation",short:"Annual tax on primary residence occupants",full:"An annual local tax paid by whoever occupies a residence on January 1st. Being phased out for primary residences but still applies to second homes. Separate from taxe foncire (property tax paid by owners). Amount varies by commune.",category:"housing"}]},{id:"daily-life",title:"Daily Life & Services",terms:[{id:"mairie",title:"Town Hall",french:"Mairie / Htel de ville",short:"Local government office for civil and administrative matters",full:"The local town hall handles birth/death/marriage certificates, voter registration, school enrollment, various permits, and local services. Many documents like certified copies and attestations must be obtained from your local mairie.",category:"daily-life"},{id:"carte-identite",title:"National ID Card",french:"Carte nationale d'identit",short:"Official French identity document",full:"The official French national ID card, available only to French citizens. Valid for 15 years. Unlike the US, France has a national ID separate from driver's licenses. For non-citizens, your residence permit serves as your ID in France.",category:"daily-life"},{id:"justificatif-domicile",title:"Proof of Address",french:"Justificatif de domicile",short:"Document proving where you live",full:"A recent document (less than 3-6 months old) proving your address. Accepted documents include utility bills (electricity, gas, internet), rent receipts, tax notices, or home insurance certificates. Required for nearly every administrative procedure.",category:"daily-life"},{id:"permis-conduire",title:"Driver's License",french:"Permis de conduire",short:"Official license to drive",full:"French driver's license, now a credit card-sized format. US licenses are valid for one year after establishing residence, then must be exchanged (no test required for most US states) or a French license obtained. Apply for exchange at ANTS website.",category:"daily-life"},{id:"carte-grise",title:"Vehicle Registration",french:"Carte grise / Certificat d'immatriculation",short:"Vehicle registration document",full:"The official vehicle registration certificate required to drive in France. Must be obtained within 1 month of purchasing a vehicle or moving to France with a foreign vehicle. Applied for online through ANTS. Includes technical inspection (contrle technique) requirements.",category:"daily-life"},{id:"la-poste",title:"Post Office",french:"La Poste",short:"French postal service",full:"The French postal service handles mail, packages, and basic banking services (Banque Postale). Post offices offer services like registered mail (recommand), which is required for many official communications. Yellow mailboxes are for regular mail.",category:"daily-life"},{id:"recommande",title:"Registered Mail",french:"Lettre recommande avec accus de rception",short:"Tracked mail with delivery confirmation",full:'A tracked letter with proof of delivery, required for important legal communications like lease termination, employer resignation, or formal complaints. The "accus de rception" (delivery receipt) provides legal proof the recipient received the letter.',category:"daily-life"},{id:"ants",title:"Online Government Services",french:"Agence Nationale des Titres Scuriss (ANTS)",short:"Website for official documents",full:"The official government website (ants.gouv.fr) for applying for driver's licenses, vehicle registration, and passports/ID cards (for French citizens). Most procedures are now done online through ANTS rather than at prefecture counters.",category:"daily-life"},{id:"france-connect",title:"Digital Identity Login",french:"FranceConnect",short:"Unified login for government websites",full:"A single sign-on system allowing access to many French government websites using one set of credentials (from your tax account, health insurance, or postal ID). Simplifies access to online administrative services.",category:"daily-life"},{id:"ameli",title:"Health Insurance Website",french:"Ameli",short:"Online portal for health insurance",full:"The online portal (ameli.fr) for the French health insurance system. Create an account to track reimbursements, download your attestation de droits (proof of coverage), update your information, and declare your mdecin traitant.",category:"daily-life"}]}],j3={"document-legal":{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",icon:"text-blue-600",hover:"hover:bg-blue-100"},"visa-residency":{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",icon:"text-purple-600",hover:"hover:bg-purple-100"},healthcare:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",icon:"text-red-600",hover:"hover:bg-red-100"},banking:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",icon:"text-green-600",hover:"hover:bg-green-100"},housing:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",icon:"text-amber-600",hover:"hover:bg-amber-100"},"daily-life":{bg:"bg-teal-50",border:"border-teal-200",text:"text-teal-700",icon:"text-teal-600",hover:"hover:bg-teal-100"}},N3={"document-legal":me,"visa-residency":ws,healthcare:Hc,banking:nw,housing:Go,"daily-life":ew};function w3(){const[e,t]=N.useState(""),[n,s]=N.useState(["document-legal","visa-residency","healthcare","banking","housing","daily-life"]),[a,i]=N.useState([]),[l,o]=N.useState(null),{data:c}=Gj(),d=b3(c),u=(d&&d.length>0,vf),m=!1,h=N.useMemo(()=>{const g=v=>!(v!=null&&v.terms)||!Array.isArray(v.terms)?[]:v.terms.filter(w=>w&&typeof w.title=="string"),f=v=>[...v].sort((w,_)=>{const k=(w==null?void 0:w.title)||"",C=(_==null?void 0:_.title)||"";return k.localeCompare(C)});if(!e)return u.map(v=>({...v,terms:f(g(v))}));const x=e.toLowerCase();return u.map(v=>{const _=g(v).filter(k=>{var C,E,M,A;return(((C=k.title)==null?void 0:C.toLowerCase())||"").includes(x)||(((E=k.french)==null?void 0:E.toLowerCase())||"").includes(x)||(((M=k.short)==null?void 0:M.toLowerCase())||"").includes(x)||(((A=k.full)==null?void 0:A.toLowerCase())||"").includes(x)});return{...v,terms:f(_)}}).filter(v=>v.terms.length>0)},[u,e]),p=g=>{s(f=>f.includes(g)?f.filter(x=>x!==g):[...f,g])},y=g=>{i(f=>f.includes(g)?f.filter(x=>x!==g):[...f,g])},b=async g=>{const f=g.french||g.title;try{await navigator.clipboard.writeText(f),o(g.id),setTimeout(()=>o(null),2e3)}catch(x){console.error("Failed to copy:",x)}},j=g=>{if(!e)return g;try{const f=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return g.split(new RegExp(`(${f})`,"gi")).map((v,w)=>v.toLowerCase()===e.toLowerCase()?r.jsx("mark",{className:"bg-yellow-200 text-gray-900",children:v},w):v)}catch{return g}};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(Xd,{className:"w-7 h-7 text-primary-600"}),"French Glossary"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Essential French terms and definitions for your relocation journey"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"relative max-w-2xl",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search terms across all categories...",value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e&&r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Found ",h.reduce((g,f)=>g+f.terms.length,0)," term(s) in ",h.length," categor",h.length===1?"y":"ies"]})]}),e&&m,h.length===0&&r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Ye,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No terms found"}),r.jsx("p",{className:"text-gray-500",children:e?`No glossary terms match "${e}". Try a different search term.`:"No glossary terms available at the moment."})]}),h.length>0&&r.jsx("div",{className:"space-y-4",children:h.map(g=>{const f=n.includes(g.id),x=j3[g.id]||{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",icon:"text-gray-600",hover:"hover:bg-gray-100"},v=N3[g.id]||me;return r.jsxs("div",{className:Q("card overflow-hidden",x.border),children:[r.jsxs("button",{onClick:()=>p(g.id),className:Q("w-full flex items-center justify-between px-6 py-4 transition-colors",x.bg,x.hover),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:Q("p-2 bg-white rounded-lg shadow-sm",x.border,"border"),children:r.jsx(v,{className:Q("w-5 h-5",x.icon)})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h2",{className:Q("text-lg font-semibold",x.text),children:g.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:[g.terms.length," term",g.terms.length!==1?"s":""]})]})]}),f?r.jsx(kn,{className:Q("w-5 h-5",x.icon)}):r.jsx(wt,{className:Q("w-5 h-5",x.icon)})]}),f&&r.jsx("div",{className:"p-4 space-y-3",children:g.terms.map(w=>r.jsx(k3,{term:w,isExpanded:a.includes(w.id),onToggle:()=>y(w.id),onCopy:()=>b(w),isCopied:l===w.id,highlightText:j,colors:x},w.id))})]},g.id)})}),!e&&!0&&h.length>0&&r.jsx("div",{className:"mt-8 p-4 bg-primary-50 border border-primary-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Xd,{className:"w-5 h-5 text-primary-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-primary-900 mb-1",children:"Need more information?"}),r.jsx("p",{className:"text-sm text-primary-700",children:"Use the search bar to find specific terms, or click on any category to browse all available terms. Click on a term to see its full definition."})]})]})})]})}function k3({term:e,isExpanded:t,onToggle:n,onCopy:s,isCopied:a,highlightText:i,colors:l}){return r.jsxs("div",{className:Q("border rounded-lg overflow-hidden transition-all",t?Q(l.border,l.bg):"border-gray-200 bg-white"),children:[r.jsxs("div",{className:"flex items-start gap-3 p-4",children:[r.jsx("button",{onClick:n,className:"flex-1 text-left min-w-0 group",children:r.jsxs("div",{className:"flex items-start gap-2",children:[t?r.jsx(kn,{className:Q("w-5 h-5 flex-shrink-0 mt-0.5",l.icon)}):r.jsx(wt,{className:"w-5 h-5 flex-shrink-0 mt-0.5 text-gray-400 group-hover:text-gray-600"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[e.french&&r.jsx("div",{className:"font-bold text-gray-900 mb-1",children:i(e.french)}),r.jsx("div",{className:Q(e.french?"text-sm text-gray-700":"font-semibold text-gray-900"),children:i(e.title)}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i(e.short)}),e.full&&!t&&r.jsx("span",{className:"text-xs text-primary-600 mt-2 inline-block group-hover:underline",children:"Click to read full definition"})]})]})}),r.jsx("button",{onClick:s,className:Q("p-2 rounded-lg transition-colors flex-shrink-0",a?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:`Copy "${e.french||e.title}"`,children:a?r.jsx(Or,{className:"w-4 h-4"}):r.jsx(Nv,{className:"w-4 h-4"})})]}),t&&e.full&&r.jsx("div",{className:"px-4 pb-4 pl-11",children:r.jsx("div",{className:"p-4 bg-white border border-gray-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.full})})})]})}const Bv={visas:me,property:ws,healthcare:Hc,taxes:qh,driving:vv,shipping:uw,banking:yv,settling:_n},_3=["What documents do I need for a long-stay visa?","How do I apply for a Carte Vitale?","What are the requirements for renting property in France?","How does the US-France tax treaty work?","Can I drive in France with my US license?","What are the steps to open a French bank account?"];function S3(){var k;const[e,t]=N.useState([]),[n,s]=N.useState(""),[a,i]=N.useState(null),[l,o]=N.useState(!0),[c,d]=N.useState(!0),[u,m]=N.useState(!1),h=N.useRef(null),p=N.useRef(null),y=N.useRef(null),{data:b,isLoading:j}=eN(),g=dv(),f=C=>{C!==a&&(t([]),s("")),i(C)};N.useEffect(()=>{e.length>0&&!u&&p.current&&setTimeout(()=>{var C;(C=p.current)==null||C.scrollIntoView({behavior:"smooth",block:"start"})},100)},[e,u]);const x=async()=>{if(!n.trim()||g.isPending)return;const C={id:Date.now().toString(),role:"user",content:n.trim(),timestamp:new Date().toISOString()};t(E=>[...E,C]),s(""),m(!0);try{const E=await g.mutateAsync({message:n.trim(),context:a||void 0,include_practice:l});if(E.success&&E.message){const M={id:(Date.now()+1).toString(),role:"assistant",content:E.message,timestamp:new Date().toISOString(),sources:E.sources};t(A=>[...A,M])}else throw new Error(E.error||"Failed to get response")}catch{const M={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date().toISOString()};t(A=>[...A,M])}finally{m(!1)}},v=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),x())},w=C=>{var E;s(C),(E=y.current)==null||E.focus()},_=()=>{var C;if(e.length>0){const E=[...e].reverse().find(M=>M.role==="user");E&&(s(E.content),(C=y.current)==null||C.focus())}};return r.jsxs("div",{className:"h-[calc(100vh-4rem)] flex bg-gray-50",children:[r.jsx(C3,{categories:b||[],selectedCategory:a,onSelectCategory:f,onSelectTopic:w,isOpen:c,onToggle:()=>d(!c),isLoading:j}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[r.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>d(!c),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg",children:c?r.jsx($h,{className:"w-5 h-5"}):r.jsx(wt,{className:"w-5 h-5"})}),r.jsx(rt,{className:"w-6 h-6 text-primary-600"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Knowledge Base Chat"}),r.jsx("p",{className:"text-sm text-gray-600",children:a?`Asking about ${((k=b==null?void 0:b.find(C=>C.id===a))==null?void 0:k.title)||a}`:"Ask anything about relocating to France"})]})]}),r.jsx("div",{ref:h,className:"flex-1 overflow-y-auto px-6 py-6",children:e.length===0?a?r.jsx(F3,{category:b==null?void 0:b.find(C=>C.id===a),onSelectTopic:w}):r.jsx(T3,{onSelectQuestion:w}):r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.map((C,E)=>{const M=C.role==="assistant"&&E===e.length-1;return r.jsx("div",{ref:M?p:void 0,children:r.jsx(E3,{message:C})},C.id)}),u&&r.jsxs("div",{role:"status","aria-live":"polite",className:"flex items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[r.jsx(_e,{className:"w-5 h-5 animate-spin text-primary-600","aria-hidden":"true"}),r.jsx("span",{className:"text-gray-600",children:"Generating response..."})]})]})}),r.jsx(A3,{value:n,onChange:s,onSend:x,onKeyPress:v,includePractice:l,onTogglePractice:()=>o(!l),isLoading:g.isPending||u,inputRef:y,onRetry:_,hasError:g.isError})]})]})}function C3({categories:e,selectedCategory:t,onSelectCategory:n,onSelectTopic:s,isOpen:a,isLoading:i}){var u,m;const[l,o]=N.useState(""),{data:c}=tN(l),d=(c==null?void 0:c.results)||(t?((u=e.find(h=>h.id===t))==null?void 0:u.topics.slice(0,6))||[]:e.flatMap(h=>h.topics.slice(0,2)).slice(0,6));return r.jsx("div",{className:Q("bg-white border-r border-gray-200 flex-shrink-0 transition-all duration-300",a?"w-80":"w-0 lg:w-0","overflow-hidden"),children:r.jsxs("div",{className:"p-6 h-full flex flex-col",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search topics...",value:l,onChange:h=>o(h.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2",children:[r.jsxs("button",{onClick:()=>n(null),className:Q("w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left",t===null?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[r.jsx(rt,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{children:"All Topics"})]}),i?r.jsx("div",{className:"space-y-2",children:[1,2,3,4,5,6].map(h=>r.jsx("div",{className:"h-12 bg-gray-100 rounded-lg animate-pulse"},h))}):e.map(h=>{const p=Bv[h.id]||rt;return r.jsxs("button",{onClick:()=>n(t===h.id?null:h.id),className:Q("w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left",t===h.id?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"),title:h.description,children:[r.jsx(p,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:h.title})]},h.id)})]}),!l&&d&&d.length>0&&r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Oi,{className:"w-4 h-4 text-yellow-500"}),t?`${((m=e.find(h=>h.id===t))==null?void 0:m.title)||"Category"} Topics`:"Popular Topics"]}),r.jsx("div",{className:"space-y-2",children:d.slice(0,6).map((h,p)=>r.jsx("button",{onClick:()=>s(`Tell me about ${h.title}`),className:"text-sm text-gray-600 hover:text-primary-600 cursor-pointer py-1 line-clamp-1 text-left w-full",title:`Ask about: ${h.title}`,children:h.title},p))})]})]})})}function E3({message:e}){const[t,n]=N.useState(!1),s=async()=>{try{await navigator.clipboard.writeText(e.content),n(!0),setTimeout(()=>n(!1),2e3)}catch(i){console.error("Failed to copy:",i)}},a=i=>new Date(i).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return e.role==="user"?r.jsxs("div",{className:"flex items-start gap-3 justify-end",children:[r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("div",{className:"bg-primary-600 text-white rounded-2xl rounded-tr-sm px-4 py-3",children:r.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:e.content})}),r.jsx("div",{className:"flex items-center justify-end gap-2 mt-1 px-2",children:r.jsx("span",{className:"text-xs text-gray-500",children:a(e.timestamp)})})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center flex-shrink-0",children:r.jsx(st,{className:"w-4 h-4 text-white"})})]}):r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0 shadow-sm",children:r.jsx(Ws,{className:"w-5 h-5 text-white"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5",children:r.jsx(P3,{content:e.content})}),e.sources&&e.sources.length>0&&r.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Sources"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.sources.map((i,l)=>r.jsx(M3,{source:i},l))})]}),r.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-100 flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-500",children:a(e.timestamp)}),r.jsx("button",{onClick:s,className:Q("flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors",t?"bg-green-100 text-green-700":"hover:bg-gray-200 text-gray-500 hover:text-gray-700"),title:"Copy to clipboard",children:t?r.jsxs(r.Fragment,{children:[r.jsx(Or,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Copied"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Nv,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Copy"})]})})]})]})})]})}function P3({content:e}){const t=e.split(`
`),n=[];let s=[],a=null;const i=o=>{const c=[];let d=o,u=0;for(;d.length>0;){const m=d.match(/\[([^\]]+)\]\(([^)]+)\)/),h=d.match(/\*\*([^*]+)\*\*/),p=d.match(/`([^`]+)`/),y=[m?{type:"link",match:m,index:d.indexOf(m[0])}:null,h?{type:"bold",match:h,index:d.indexOf(h[0])}:null,p?{type:"code",match:p,index:d.indexOf(p[0])}:null].filter(Boolean).sort((j,g)=>((j==null?void 0:j.index)??1/0)-((g==null?void 0:g.index)??1/0));if(y.length===0||y[0]===null){c.push(d);break}const b=y[0];b.index>0&&c.push(d.slice(0,b.index)),b.type==="link"&&b.match?(c.push(r.jsx("a",{href:b.match[2],target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 underline font-medium",children:b.match[1]},u++)),d=d.slice(b.index+b.match[0].length)):b.type==="bold"&&b.match?(c.push(r.jsx("strong",{className:"font-semibold text-gray-900",children:b.match[1]},u++)),d=d.slice(b.index+b.match[0].length)):b.type==="code"&&b.match&&(c.push(r.jsx("code",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-sm font-mono text-gray-800",children:b.match[1]},u++)),d=d.slice(b.index+b.match[0].length))}return r.jsx(r.Fragment,{children:c})},l=()=>{if(s.length>0){const o=a==="ol";n.push(o?r.jsx("ol",{className:"my-4 ml-6 space-y-2 list-decimal",children:s.map((c,d)=>r.jsx("li",{className:"text-gray-700 leading-relaxed pl-1",children:c.formatted},d))},n.length):r.jsx("ul",{className:"my-4 ml-6 space-y-2",children:s.map((c,d)=>r.jsxs("li",{className:"text-gray-700 leading-relaxed flex items-start gap-2",children:[r.jsx("span",{className:"text-primary-500 mt-1.5",children:""}),r.jsx("span",{children:c.formatted})]},d))},n.length)),s=[],a=null}};return t.forEach(o=>{const c=o.trim();if(c.startsWith("# "))l(),n.push(r.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-6 mb-3 pb-2 border-b border-gray-200",children:i(c.slice(2))},n.length));else if(c.startsWith("## "))l(),n.push(r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-5 mb-2",children:i(c.slice(3))},n.length));else if(c.startsWith("### ")||c.startsWith("**")&&c.endsWith("**")&&c.indexOf("**",2)===c.length-2){l();const d=c.startsWith("### ")?c.slice(4):c.slice(2,-2);n.push(r.jsx("h4",{className:"text-base font-semibold text-gray-800 mt-4 mb-2",children:d},n.length))}else if(c.match(/^[\-\*]\s/)){a!=="ul"&&l(),a="ul";const d=c.replace(/^[\-\*]\s/,"");s.push({text:d,formatted:i(d)})}else if(c.match(/^\d+\.\s/)){a!=="ol"&&l(),a="ol";const d=c.replace(/^\d+\.\s/,"");s.push({text:d,formatted:i(d)})}else c.startsWith("```")?(l(),n.push(r.jsx("pre",{className:"my-4 bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:r.jsx("code",{className:"text-sm font-mono",children:c.replace(/```/g,"")})},n.length))):c?(l(),n.push(r.jsx("p",{className:"text-gray-700 leading-relaxed mb-3",children:i(c)},n.length))):l()}),l(),r.jsx("div",{className:"prose-content",children:n})}function M3({source:e}){const t={official:"bg-blue-50 text-blue-700 border-blue-200",community:"bg-amber-50 text-amber-700 border-amber-200"},n={visas:"bg-blue-50 text-blue-700 border-blue-200",property:"bg-emerald-50 text-emerald-700 border-emerald-200",healthcare:"bg-rose-50 text-rose-700 border-rose-200",taxes:"bg-yellow-50 text-yellow-700 border-yellow-200",driving:"bg-violet-50 text-violet-700 border-violet-200",shipping:"bg-indigo-50 text-indigo-700 border-indigo-200",banking:"bg-pink-50 text-pink-700 border-pink-200",settling:"bg-orange-50 text-orange-700 border-orange-200"},s=e.type?t[e.type]||n[e.category]||"bg-gray-50 text-gray-700 border-gray-200":n[e.category]||"bg-gray-50 text-gray-700 border-gray-200",a=e.type==="official"?"Official":e.type==="community"?"Community":null;return e.url?r.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:Q("inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs border transition-colors hover:opacity-80",s),title:e.url,children:[a&&r.jsxs("span",{className:"font-semibold uppercase text-[10px] tracking-wide opacity-70",children:[a,":"]}),r.jsx("span",{className:"font-medium",children:e.title})]}):r.jsxs("span",{className:Q("inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs border",s),title:e.relevance?`Relevance: ${Math.round(e.relevance*100)}%`:void 0,children:[a&&r.jsxs("span",{className:"font-semibold uppercase text-[10px] tracking-wide opacity-70",children:[a,":"]}),r.jsx("span",{className:"font-medium",children:e.title})]})}function T3({onSelectQuestion:e}){return r.jsxs("div",{className:"max-w-3xl mx-auto text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:r.jsx(rt,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Welcome to Knowledge Base Chat"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Ask me anything about relocating to France! I can help with visas, healthcare, taxes, property, driving, banking, and more. Get answers based on our comprehensive knowledge base and real-world insights."}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center justify-center gap-2",children:[r.jsx(Oi,{className:"w-4 h-4 text-yellow-500"}),"Try asking:"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:_3.map((t,n)=>r.jsx("button",{onClick:()=>e(t),className:"p-3 bg-white border border-gray-200 rounded-lg text-left text-sm text-gray-700 hover:bg-gray-50 hover:border-primary-300 transition-colors",children:t},n))})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-left max-w-xl mx-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Oi,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Pro Tip"}),r.jsx("p",{className:"text-sm text-blue-700",children:'Toggle "Include real-world insights" to get practical advice from people who have actually gone through the relocation process, not just official requirements.'})]})]})})]})}function F3({category:e,onSelectTopic:t}){if(!e)return null;const n=Bv[e.id]||rt;return r.jsxs("div",{className:"max-w-3xl mx-auto py-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:r.jsx(n,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-gray-600",children:e.description})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-4 flex items-center justify-center gap-2",children:[r.jsx(Oi,{className:"w-4 h-4 text-yellow-500"}),"Topics in ",e.title]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.topics.map(s=>r.jsx("button",{onClick:()=>t(`Tell me about ${s.title}`),className:"p-4 bg-white border border-gray-200 rounded-lg text-left hover:bg-gray-50 hover:border-primary-300 transition-colors group",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0 group-hover:bg-primary-200 transition-colors",children:r.jsx(me,{className:"w-4 h-4 text-primary-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-1 line-clamp-1",children:s.title}),s.keywords.length>0&&r.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:s.keywords.slice(0,3).join("  ")})]})]})},s.id))})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-left max-w-xl mx-auto",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Oi,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Click a topic to ask about it"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Select any topic above to start a conversation, or type your own question below."})]})]})})]})}function A3({value:e,onChange:t,onSend:n,onKeyPress:s,includePractice:a,onTogglePractice:i,isLoading:l,inputRef:o,onRetry:c,hasError:d}){return r.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[d&&r.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-700",children:[r.jsx(Ye,{className:"w-4 h-4"}),r.jsx("span",{children:"Failed to send message. Please try again."})]}),r.jsx("button",{onClick:c,className:"text-sm font-medium text-red-700 hover:text-red-800",children:"Retry"})]}),r.jsx("div",{className:"flex items-center gap-3 mb-3",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:i,className:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),r.jsx("span",{children:"Include real-world insights"})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("textarea",{ref:o,value:e,onChange:m=>t(m.target.value),onKeyPress:s,placeholder:"Ask a question about relocating to France...",rows:3,maxLength:500,disabled:l,className:"w-full px-4 py-3 pr-24 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-50 disabled:text-gray-500"}),r.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2",children:[r.jsxs("span",{className:Q("text-xs",e.length>500*.9?"text-orange-600":"text-gray-400"),children:[e.length,"/",500]}),r.jsx("button",{onClick:n,disabled:!e.trim()||l,className:Q("p-2 rounded-lg transition-colors",e.trim()&&!l?"bg-primary-600 text-white hover:bg-primary-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),title:"Send message (Enter)",children:l?r.jsx(_e,{className:"w-4 h-4 animate-spin"}):r.jsx(ul,{className:"w-4 h-4"})})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Press ",r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs",children:"Enter"})," to send,"," ",r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs",children:"Shift+Enter"})," for new line"]})]})})}function D3({isOpen:e,onClose:t,onConfirm:n,title:s,message:a,confirmText:i,isLoading:l,isDangerous:o=!1}){return r.jsx(fs,{isOpen:e,onClose:t,title:s,size:"sm",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:a}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{onClick:t,disabled:l,className:"btn btn-secondary",children:"Cancel"}),r.jsxs("button",{onClick:n,disabled:l,className:Q("btn flex items-center gap-2",o?"bg-red-600 hover:bg-red-700 text-white":"btn-primary"),children:[l&&r.jsx(_e,{className:"w-4 h-4 animate-spin"}),i]})]})]})})}function Q3(){const{data:e,isLoading:t}=nN(),{data:n,isLoading:s}=rN(),{data:a,isLoading:i}=sN(),{data:l}=oN(),o=aN(),c=iN(),d=lN(),[u,m]=N.useState({isOpen:!1,type:null,subscriptionId:null}),[h,p]=N.useState({show:!1,type:"success",message:""}),[y,b]=N.useState(1),j=10,g=Math.ceil(((a==null?void 0:a.length)||0)/j),f=a==null?void 0:a.slice((y-1)*j,y*j),x=(E,M)=>{p({show:!0,type:E,message:M}),setTimeout(()=>{p({show:!1,type:"success",message:""})},5e3)},v=async()=>{if(!(!u.subscriptionId||!u.type))try{u.type==="cancel"?(await o.mutateAsync(u.subscriptionId),x("success","Subscription cancelled successfully")):u.type==="suspend"?(await c.mutateAsync(u.subscriptionId),x("success","Subscription suspended successfully")):u.type==="resume"&&(await d.mutateAsync(u.subscriptionId),x("success","Subscription resumed successfully")),m({isOpen:!1,type:null,subscriptionId:null})}catch{x("error","Action failed. Please try again.")}},w=E=>{const M={active:"bg-green-100 text-green-700",suspended:"bg-yellow-100 text-yellow-700",cancelled:"bg-red-100 text-red-700",expired:"bg-gray-100 text-gray-700",pending:"bg-blue-100 text-blue-700"},$={active:Ae,suspended:Le,cancelled:nf,expired:Ye,pending:Le}[E];return r.jsxs("span",{className:Q("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",M[E]),children:[r.jsx($,{className:"w-3.5 h-3.5"}),E.charAt(0).toUpperCase()+E.slice(1)]})},_=E=>{const M={complete:"bg-green-100 text-green-700",pending:"bg-yellow-100 text-yellow-700",failed:"bg-red-100 text-red-700",refunded:"bg-gray-100 text-gray-700"};return r.jsx("span",{className:Q("inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",M[E]),children:E.charAt(0).toUpperCase()+E.slice(1)})};if(t)return r.jsx(L3,{});const k=n==null?void 0:n[0],C=l&&l.length>0;return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Membership"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your subscription and payment information"})]}),h.show&&r.jsx("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:Q("fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg animate-in slide-in-from-top-5 duration-300",h.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="success"?r.jsx(Ae,{className:"w-5 h-5","aria-hidden":"true"}):r.jsx(nf,{className:"w-5 h-5","aria-hidden":"true"}),r.jsx("span",{className:"font-medium",children:h.message})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"card p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Ri,{className:"w-6 h-6 text-primary-600"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:(e==null?void 0:e.membership_level)||"No Active Membership"})]}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:"Status:"}),k?w(k.status):r.jsx("span",{className:"text-gray-500",children:"Inactive"})]}),(k==null?void 0:k.expires_at)&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qt,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[k.status==="active"?"Renews":"Expires"," on:"," ",new Date(k.expires_at).toLocaleDateString()]})]})]})]}),(k==null?void 0:k.can_upgrade)&&C&&r.jsxs("button",{className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Xp,{className:"w-4 h-4"}),"Upgrade"]})]})}),n&&n.length>0&&r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Active Subscriptions"}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"hidden md:table min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Membership"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Billing"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(E=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsx("div",{className:"font-medium text-gray-900",children:E.membership_title})}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:E.price}),r.jsx("div",{className:"text-xs text-gray-500",children:E.billing_period})]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:w(E.status)}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:E.next_billing_date?new Date(E.next_billing_date).toLocaleDateString():"N/A"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[E.can_resume&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"resume",subscriptionId:E.id}),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Resume"}),E.can_suspend&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"suspend",subscriptionId:E.id}),className:"text-sm text-yellow-600 hover:text-yellow-700 font-medium",children:"Suspend"}),E.can_cancel&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"cancel",subscriptionId:E.id}),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Cancel"})]})})]},E.id))})]}),r.jsx("div",{className:"md:hidden space-y-4",children:n.map(E=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:E.membership_title}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[E.price," / ",E.billing_period]})]}),w(E.status)]}),E.next_billing_date&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-3",children:[r.jsx(Qt,{className:"w-4 h-4"}),"Next billing: ",new Date(E.next_billing_date).toLocaleDateString()]}),r.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t border-gray-200",children:[E.can_resume&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"resume",subscriptionId:E.id}),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Resume"}),E.can_suspend&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"suspend",subscriptionId:E.id}),className:"text-sm text-yellow-600 hover:text-yellow-700 font-medium",children:"Suspend"}),E.can_cancel&&r.jsx("button",{onClick:()=>m({isOpen:!0,type:"cancel",subscriptionId:E.id}),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Cancel"})]})]},E.id))})]})]}),(!n||n.length===0)&&!s&&r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Ri,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Subscriptions"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any active subscriptions at the moment."}),C&&r.jsx("button",{className:"btn btn-primary",children:"View Membership Plans"})]}),a&&a.length>0&&r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"hidden md:table min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f==null?void 0:f.map(E=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(E.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.amount}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:_(E.status)}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:E.payment_method}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:E.transaction_id})]},E.id))})]}),r.jsx("div",{className:"md:hidden space-y-4",children:f==null?void 0:f.map(E=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:E.amount}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:new Date(E.created_at).toLocaleDateString()})]}),_(E.status)]}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("div",{children:["Payment method: ",E.payment_method]}),r.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["ID: ",E.transaction_id]})]})]},E.id))})]}),g>1&&r.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",y," of ",g]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>b(y-1),disabled:y===1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx($h,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>b(y+1),disabled:y===g,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(wt,{className:"w-5 h-5"})})]})]})]}),(!a||a.length===0)&&!i&&r.jsxs("div",{className:"card p-12 text-center",children:[r.jsx(Qt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment History"}),r.jsx("p",{className:"text-gray-600",children:"Your payment transactions will appear here."})]}),C&&(k==null?void 0:k.can_upgrade)&&r.jsxs("div",{className:"card p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upgrade Options"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(E=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-primary-300 hover:shadow-md transition-all",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:E.title}),r.jsx("div",{className:"text-3xl font-bold text-primary-600 mb-4",children:E.price}),r.jsx("ul",{className:"space-y-2 mb-6",children:E.features.map((M,A)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[r.jsx(Ae,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:M})]},A))}),r.jsxs("button",{className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[r.jsx(Xp,{className:"w-4 h-4"}),"Upgrade Now"]})]},E.id))})]})]}),r.jsx(D3,{isOpen:u.isOpen,onClose:()=>m({isOpen:!1,type:null,subscriptionId:null}),onConfirm:v,title:u.type==="cancel"?"Cancel Subscription":u.type==="suspend"?"Suspend Subscription":"Resume Subscription",message:u.type==="cancel"?"Are you sure you want to cancel this subscription? You will lose access to premium features at the end of your current billing period.":u.type==="suspend"?"Are you sure you want to suspend this subscription? Your subscription will be paused and you can resume it later.":"Are you sure you want to resume this subscription? Your next billing will be scheduled according to your billing period.",confirmText:u.type==="cancel"?"Cancel Subscription":u.type==="suspend"?"Suspend":"Resume",isLoading:o.isPending||c.isPending||d.isPending,isDangerous:u.type==="cancel"})]})}function L3(){return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse mb-2"}),r.jsx("div",{className:"h-4 w-64 bg-gray-200 rounded animate-pulse"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card p-6",children:[r.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-4"}),r.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded animate-pulse"})]}),r.jsxs("div",{className:"card p-6",children:[r.jsx("div",{className:"h-6 w-48 bg-gray-200 rounded animate-pulse mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>r.jsx("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},e))})]})]})]})}var Vv={exports:{}},R3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I3=R3,O3=I3;function Zv(){}function Hv(){}Hv.resetWarningCache=Zv;var z3=function(){function e(s,a,i,l,o,c){if(c!==O3){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Hv,resetWarningCache:Zv};return n.PropTypes=n,n};Vv.exports=z3();var $3=Vv.exports;const z=Dm($3);class tt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let s=0;for(let a=0;a<this._n&&a<32;a++){const i=n[a],l=t+i,o=Math.abs(t)<Math.abs(i)?t-(l-i):i-(l-t);o&&(n[s++]=o),t=l}return n[s]=t,this._n=s+1,this}valueOf(){const t=this._partials;let n=this._n,s,a,i,l=0;if(n>0){for(l=t[--n];n>0&&(s=l,a=t[--n],l=s+a,i=a-(l-s),!i););n>0&&(i<0&&t[n-1]<0||i>0&&t[n-1]>0)&&(a=i*2,s=l+a,a==s-l&&(l=s))}return l}}function*q3(e){for(const t of e)yield*t}function Gv(e){return Array.from(q3(e))}function zs(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}var ee=1e-6,zi=1e-12,re=Math.PI,Fe=re/2,Xo=re/4,ht=re*2,fe=180/re,te=re/180,ie=Math.abs,Fa=Math.atan,pt=Math.atan2,Y=Math.cos,Ul=Math.ceil,Wv=Math.exp,em=Math.hypot,Jo=Math.log,Du=Math.pow,H=Math.sin,Zt=Math.sign||function(e){return e>0?1:e<0?-1:0},Ze=Math.sqrt,Wh=Math.tan;function Kv(e){return e>1?0:e<-1?re:Math.acos(e)}function ft(e){return e>1?Fe:e<-1?-Fe:Math.asin(e)}function bf(e){return(e=H(e/2))*e}function ke(){}function ec(e,t){e&&Nf.hasOwnProperty(e.type)&&Nf[e.type](e,t)}var jf={Feature:function(e,t){ec(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,s=-1,a=n.length;++s<a;)ec(n[s].geometry,t)}},Nf={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)e=n[s],t.point(e[0],e[1],e[2])},LineString:function(e,t){tm(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)tm(n[s],t,0)},Polygon:function(e,t){wf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)wf(n[s],t)},GeometryCollection:function(e,t){for(var n=e.geometries,s=-1,a=n.length;++s<a;)ec(n[s],t)}};function tm(e,t,n){var s=-1,a=e.length-n,i;for(t.lineStart();++s<a;)i=e[s],t.point(i[0],i[1],i[2]);t.lineEnd()}function wf(e,t){var n=-1,s=e.length;for(t.polygonStart();++n<s;)tm(e[n],t,1);t.polygonEnd()}function rn(e,t){e&&jf.hasOwnProperty(e.type)?jf[e.type](e,t):ec(e,t)}var tc=new tt,nc=new tt,Yv,Xv,nm,rm,sm,Cn={point:ke,lineStart:ke,lineEnd:ke,polygonStart:function(){tc=new tt,Cn.lineStart=U3,Cn.lineEnd=B3},polygonEnd:function(){var e=+tc;nc.add(e<0?ht+e:e),this.lineStart=this.lineEnd=this.point=ke},sphere:function(){nc.add(ht)}};function U3(){Cn.point=V3}function B3(){Jv(Yv,Xv)}function V3(e,t){Cn.point=Jv,Yv=e,Xv=t,e*=te,t*=te,nm=e,rm=Y(t=t/2+Xo),sm=H(t)}function Jv(e,t){e*=te,t*=te,t=t/2+Xo;var n=e-nm,s=n>=0?1:-1,a=s*n,i=Y(t),l=H(t),o=sm*l,c=rm*i+o*Y(a),d=o*s*H(a);tc.add(pt(d,c)),nm=e,rm=i,sm=l}function Z3(e){return nc=new tt,rn(e,Cn),nc*2}function rc(e){return[pt(e[1],e[0]),ft(e[2])]}function gs(e){var t=e[0],n=e[1],s=Y(n);return[s*Y(t),s*H(t),H(n)]}function Bl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function va(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Qu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Vl(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function sc(e){var t=Ze(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ne,jt,Pe,Tt,Zr,e1,t1,Ks,hi,ir,Xn,Qn={point:am,lineStart:kf,lineEnd:_f,polygonStart:function(){Qn.point=r1,Qn.lineStart=H3,Qn.lineEnd=G3,hi=new tt,Cn.polygonStart()},polygonEnd:function(){Cn.polygonEnd(),Qn.point=am,Qn.lineStart=kf,Qn.lineEnd=_f,tc<0?(Ne=-(Pe=180),jt=-(Tt=90)):hi>ee?Tt=90:hi<-ee&&(jt=-90),Xn[0]=Ne,Xn[1]=Pe},sphere:function(){Ne=-(Pe=180),jt=-(Tt=90)}};function am(e,t){ir.push(Xn=[Ne=e,Pe=e]),t<jt&&(jt=t),t>Tt&&(Tt=t)}function n1(e,t){var n=gs([e*te,t*te]);if(Ks){var s=va(Ks,n),a=[s[1],-s[0],0],i=va(a,s);sc(i),i=rc(i);var l=e-Zr,o=l>0?1:-1,c=i[0]*fe*o,d,u=ie(l)>180;u^(o*Zr<c&&c<o*e)?(d=i[1]*fe,d>Tt&&(Tt=d)):(c=(c+360)%360-180,u^(o*Zr<c&&c<o*e)?(d=-i[1]*fe,d<jt&&(jt=d)):(t<jt&&(jt=t),t>Tt&&(Tt=t))),u?e<Zr?Mt(Ne,e)>Mt(Ne,Pe)&&(Pe=e):Mt(e,Pe)>Mt(Ne,Pe)&&(Ne=e):Pe>=Ne?(e<Ne&&(Ne=e),e>Pe&&(Pe=e)):e>Zr?Mt(Ne,e)>Mt(Ne,Pe)&&(Pe=e):Mt(e,Pe)>Mt(Ne,Pe)&&(Ne=e)}else ir.push(Xn=[Ne=e,Pe=e]);t<jt&&(jt=t),t>Tt&&(Tt=t),Ks=n,Zr=e}function kf(){Qn.point=n1}function _f(){Xn[0]=Ne,Xn[1]=Pe,Qn.point=am,Ks=null}function r1(e,t){if(Ks){var n=e-Zr;hi.add(ie(n)>180?n+(n>0?360:-360):n)}else e1=e,t1=t;Cn.point(e,t),n1(e,t)}function H3(){Cn.lineStart()}function G3(){r1(e1,t1),Cn.lineEnd(),ie(hi)>ee&&(Ne=-(Pe=180)),Xn[0]=Ne,Xn[1]=Pe,Ks=null}function Mt(e,t){return(t-=e)<0?t+360:t}function W3(e,t){return e[0]-t[0]}function Sf(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function K3(e){var t,n,s,a,i,l,o;if(Tt=Pe=-(Ne=jt=1/0),ir=[],rn(e,Qn),n=ir.length){for(ir.sort(W3),t=1,s=ir[0],i=[s];t<n;++t)a=ir[t],Sf(s,a[0])||Sf(s,a[1])?(Mt(s[0],a[1])>Mt(s[0],s[1])&&(s[1]=a[1]),Mt(a[0],s[1])>Mt(s[0],s[1])&&(s[0]=a[0])):i.push(s=a);for(l=-1/0,n=i.length-1,t=0,s=i[n];t<=n;s=a,++t)a=i[t],(o=Mt(s[1],a[0]))>l&&(l=o,Ne=a[0],Pe=s[1])}return ir=Xn=null,Ne===1/0||jt===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ne,jt],[Pe,Tt]]}var Wa,ac,ic,lc,oc,cc,uc,dc,im,lm,om,s1,a1,ct,ut,dt,sn={sphere:ke,point:Kh,lineStart:Cf,lineEnd:Ef,polygonStart:function(){sn.lineStart=J3,sn.lineEnd=ek},polygonEnd:function(){sn.lineStart=Cf,sn.lineEnd=Ef}};function Kh(e,t){e*=te,t*=te;var n=Y(t);hl(n*Y(e),n*H(e),H(t))}function hl(e,t,n){++Wa,ic+=(e-ic)/Wa,lc+=(t-lc)/Wa,oc+=(n-oc)/Wa}function Cf(){sn.point=Y3}function Y3(e,t){e*=te,t*=te;var n=Y(t);ct=n*Y(e),ut=n*H(e),dt=H(t),sn.point=X3,hl(ct,ut,dt)}function X3(e,t){e*=te,t*=te;var n=Y(t),s=n*Y(e),a=n*H(e),i=H(t),l=pt(Ze((l=ut*i-dt*a)*l+(l=dt*s-ct*i)*l+(l=ct*a-ut*s)*l),ct*s+ut*a+dt*i);ac+=l,cc+=l*(ct+(ct=s)),uc+=l*(ut+(ut=a)),dc+=l*(dt+(dt=i)),hl(ct,ut,dt)}function Ef(){sn.point=Kh}function J3(){sn.point=tk}function ek(){i1(s1,a1),sn.point=Kh}function tk(e,t){s1=e,a1=t,e*=te,t*=te,sn.point=i1;var n=Y(t);ct=n*Y(e),ut=n*H(e),dt=H(t),hl(ct,ut,dt)}function i1(e,t){e*=te,t*=te;var n=Y(t),s=n*Y(e),a=n*H(e),i=H(t),l=ut*i-dt*a,o=dt*s-ct*i,c=ct*a-ut*s,d=em(l,o,c),u=ft(d),m=d&&-u/d;im.add(m*l),lm.add(m*o),om.add(m*c),ac+=u,cc+=u*(ct+(ct=s)),uc+=u*(ut+(ut=a)),dc+=u*(dt+(dt=i)),hl(ct,ut,dt)}function nk(e){Wa=ac=ic=lc=oc=cc=uc=dc=0,im=new tt,lm=new tt,om=new tt,rn(e,sn);var t=+im,n=+lm,s=+om,a=em(t,n,s);return a<zi&&(t=cc,n=uc,s=dc,ac<ee&&(t=ic,n=lc,s=oc),a=em(t,n,s),a<zi)?[NaN,NaN]:[pt(n,t)*fe,ft(s/a)*fe]}function Cs(e){return function(){return e}}function cm(e,t){function n(s,a){return s=e(s,a),t(s[0],s[1])}return e.invert&&t.invert&&(n.invert=function(s,a){return s=t.invert(s,a),s&&e.invert(s[0],s[1])}),n}function um(e,t){return[ie(e)>re?e+Math.round(-e/ht)*ht:e,t]}um.invert=um;function Yh(e,t,n){return(e%=ht)?t||n?cm(Mf(e),Tf(t,n)):Mf(e):t||n?Tf(t,n):um}function Pf(e){return function(t,n){return t+=e,[t>re?t-ht:t<-re?t+ht:t,n]}}function Mf(e){var t=Pf(e);return t.invert=Pf(-e),t}function Tf(e,t){var n=Y(e),s=H(e),a=Y(t),i=H(t);function l(o,c){var d=Y(c),u=Y(o)*d,m=H(o)*d,h=H(c),p=h*n+u*s;return[pt(m*a-p*i,u*n-h*s),ft(p*a+m*i)]}return l.invert=function(o,c){var d=Y(c),u=Y(o)*d,m=H(o)*d,h=H(c),p=h*a-m*i;return[pt(m*a+h*i,u*n+p*s),ft(p*n-u*s)]},l}function l1(e){e=Yh(e[0]*te,e[1]*te,e.length>2?e[2]*te:0);function t(n){return n=e(n[0]*te,n[1]*te),n[0]*=fe,n[1]*=fe,n}return t.invert=function(n){return n=e.invert(n[0]*te,n[1]*te),n[0]*=fe,n[1]*=fe,n},t}function o1(e,t,n,s,a,i){if(n){var l=Y(t),o=H(t),c=s*n;a==null?(a=t+s*ht,i=t-c/2):(a=Ff(l,a),i=Ff(l,i),(s>0?a<i:a>i)&&(a+=s*ht));for(var d,u=a;s>0?u>i:u<i;u-=c)d=rc([l,-o*Y(u),-o*H(u)]),e.point(d[0],d[1])}}function Ff(e,t){t=gs(t),t[0]-=e,sc(t);var n=Kv(-t[1]);return((-t[2]<0?-n:n)+ht-ee)%ht}function rk(){var e=Cs([0,0]),t=Cs(90),n=Cs(6),s,a,i={point:l};function l(c,d){s.push(c=a(c,d)),c[0]*=fe,c[1]*=fe}function o(){var c=e.apply(this,arguments),d=t.apply(this,arguments)*te,u=n.apply(this,arguments)*te;return s=[],a=Yh(-c[0]*te,-c[1]*te,0).invert,o1(i,d,u,1),c={type:"Polygon",coordinates:[s]},s=a=null,c}return o.center=function(c){return arguments.length?(e=typeof c=="function"?c:Cs([+c[0],+c[1]]),o):e},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Cs(+c),o):t},o.precision=function(c){return arguments.length?(n=typeof c=="function"?c:Cs(+c),o):n},o}function c1(){var e=[],t;return{point:function(n,s,a){t.push([n,s,a])},lineStart:function(){e.push(t=[])},lineEnd:ke,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mo(e,t){return ie(e[0]-t[0])<ee&&ie(e[1]-t[1])<ee}function Zl(e,t,n,s){this.x=e,this.z=t,this.o=n,this.e=s,this.v=!1,this.n=this.p=null}function u1(e,t,n,s,a){var i=[],l=[],o,c;if(e.forEach(function(y){if(!((b=y.length-1)<=0)){var b,j=y[0],g=y[b],f;if(mo(j,g)){if(!j[2]&&!g[2]){for(a.lineStart(),o=0;o<b;++o)a.point((j=y[o])[0],j[1]);a.lineEnd();return}g[0]+=2*ee}i.push(f=new Zl(j,y,null,!0)),l.push(f.o=new Zl(j,null,f,!1)),i.push(f=new Zl(g,y,null,!1)),l.push(f.o=new Zl(g,null,f,!0))}}),!!i.length){for(l.sort(t),Af(i),Af(l),o=0,c=l.length;o<c;++o)l[o].e=n=!n;for(var d=i[0],u,m;;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;u=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,c=u.length;o<c;++o)a.point((m=u[o])[0],m[1]);else s(h.x,h.n.x,1,a);h=h.n}else{if(p)for(u=h.p.z,o=u.length-1;o>=0;--o)a.point((m=u[o])[0],m[1]);else s(h.x,h.p.x,-1,a);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);a.lineEnd()}}}function Af(e){if(t=e.length){for(var t,n=0,s=e[0],a;++n<t;)s.n=a=e[n],a.p=s,s=a;s.n=a=e[0],a.p=s}}function Lu(e){return ie(e[0])<=re?e[0]:Zt(e[0])*((ie(e[0])+re)%ht-re)}function d1(e,t){var n=Lu(t),s=t[1],a=H(s),i=[H(n),-Y(n),0],l=0,o=0,c=new tt;a===1?s=Fe+ee:a===-1&&(s=-Fe-ee);for(var d=0,u=e.length;d<u;++d)if(h=(m=e[d]).length)for(var m,h,p=m[h-1],y=Lu(p),b=p[1]/2+Xo,j=H(b),g=Y(b),f=0;f<h;++f,y=v,j=_,g=k,p=x){var x=m[f],v=Lu(x),w=x[1]/2+Xo,_=H(w),k=Y(w),C=v-y,E=C>=0?1:-1,M=E*C,A=M>re,$=j*_;if(c.add(pt($*E*H(M),g*k+$*Y(M))),l+=A?C+E*ht:C,A^y>=n^v>=n){var K=va(gs(p),gs(x));sc(K);var P=va(i,K);sc(P);var T=(A^C>=0?-1:1)*ft(P[2]);(s>T||s===T&&(K[0]||K[1]))&&(o+=A^C>=0?1:-1)}}return(l<-ee||l<ee&&c<-zi)^o&1}function m1(e,t,n,s){return function(a){var i=t(a),l=c1(),o=t(l),c=!1,d,u,m,h={point:p,lineStart:b,lineEnd:j,polygonStart:function(){h.point=g,h.lineStart=f,h.lineEnd=x,u=[],d=[]},polygonEnd:function(){h.point=p,h.lineStart=b,h.lineEnd=j,u=Gv(u);var v=d1(d,s);u.length?(c||(a.polygonStart(),c=!0),u1(u,ak,v,n,a)):v&&(c||(a.polygonStart(),c=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),c&&(a.polygonEnd(),c=!1),u=d=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(v,w){e(v,w)&&a.point(v,w)}function y(v,w){i.point(v,w)}function b(){h.point=y,i.lineStart()}function j(){h.point=p,i.lineEnd()}function g(v,w){m.push([v,w]),o.point(v,w)}function f(){o.lineStart(),m=[]}function x(){g(m[0][0],m[0][1]),o.lineEnd();var v=o.clean(),w=l.result(),_,k=w.length,C,E,M;if(m.pop(),d.push(m),m=null,!!k){if(v&1){if(E=w[0],(C=E.length-1)>0){for(c||(a.polygonStart(),c=!0),a.lineStart(),_=0;_<C;++_)a.point((M=E[_])[0],M[1]);a.lineEnd()}return}k>1&&v&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(sk))}}return h}}function sk(e){return e.length>1}function ak(e,t){return((e=e.x)[0]<0?e[1]-Fe-ee:Fe-e[1])-((t=t.x)[0]<0?t[1]-Fe-ee:Fe-t[1])}const dm=m1(function(){return!0},ik,ok,[-re,-Fe]);function ik(e){var t=NaN,n=NaN,s=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(i,l){var o=i>0?re:-re,c=ie(i-t);ie(c-re)<ee?(e.point(t,n=(n+l)/2>0?Fe:-Fe),e.point(s,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(i,n),a=0):s!==o&&c>=re&&(ie(t-s)<ee&&(t-=s*ee),ie(i-o)<ee&&(i-=o*ee),n=lk(t,n,i,l),e.point(s,n),e.lineEnd(),e.lineStart(),e.point(o,n),a=0),e.point(t=i,n=l),s=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-a}}}function lk(e,t,n,s){var a,i,l=H(e-n);return ie(l)>ee?Fa((H(t)*(i=Y(s))*H(n)-H(s)*(a=Y(t))*H(e))/(a*i*l)):(t+s)/2}function ok(e,t,n,s){var a;if(e==null)a=n*Fe,s.point(-re,a),s.point(0,a),s.point(re,a),s.point(re,0),s.point(re,-a),s.point(0,-a),s.point(-re,-a),s.point(-re,0),s.point(-re,a);else if(ie(e[0]-t[0])>ee){var i=e[0]<t[0]?re:-re;a=n*i/2,s.point(-i,a),s.point(0,a),s.point(i,a)}else s.point(t[0],t[1])}function h1(e){var t=Y(e),n=6*te,s=t>0,a=ie(t)>ee;function i(u,m,h,p){o1(p,e,n,h,u,m)}function l(u,m){return Y(u)*Y(m)>t}function o(u){var m,h,p,y,b;return{lineStart:function(){y=p=!1,b=1},point:function(j,g){var f=[j,g],x,v=l(j,g),w=s?v?0:d(j,g):v?d(j+(j<0?re:-re),g):0;if(!m&&(y=p=v)&&u.lineStart(),v!==p&&(x=c(m,f),(!x||mo(m,x)||mo(f,x))&&(f[2]=1)),v!==p)b=0,v?(u.lineStart(),x=c(f,m),u.point(x[0],x[1])):(x=c(m,f),u.point(x[0],x[1],2),u.lineEnd()),m=x;else if(a&&m&&s^v){var _;!(w&h)&&(_=c(f,m,!0))&&(b=0,s?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}v&&(!m||!mo(m,f))&&u.point(f[0],f[1]),m=f,p=v,h=w},lineEnd:function(){p&&u.lineEnd(),m=null},clean:function(){return b|(y&&p)<<1}}}function c(u,m,h){var p=gs(u),y=gs(m),b=[1,0,0],j=va(p,y),g=Bl(j,j),f=j[0],x=g-f*f;if(!x)return!h&&u;var v=t*g/x,w=-t*f/x,_=va(b,j),k=Vl(b,v),C=Vl(j,w);Qu(k,C);var E=_,M=Bl(k,E),A=Bl(E,E),$=M*M-A*(Bl(k,k)-1);if(!($<0)){var K=Ze($),P=Vl(E,(-M-K)/A);if(Qu(P,k),P=rc(P),!h)return P;var T=u[0],F=m[0],U=u[1],D=m[1],L;F<T&&(L=T,T=F,F=L);var O=F-T,W=ie(O-re)<ee,J=W||O<ee;if(!W&&D<U&&(L=U,U=D,D=L),J?W?U+D>0^P[1]<(ie(P[0]-T)<ee?U:D):U<=P[1]&&P[1]<=D:O>re^(T<=P[0]&&P[0]<=F)){var le=Vl(E,(-M+K)/A);return Qu(le,k),[P,rc(le)]}}}function d(u,m){var h=s?e:re-e,p=0;return u<-h?p|=1:u>h&&(p|=2),m<-h?p|=4:m>h&&(p|=8),p}return m1(l,o,i,s?[0,-e]:[-re,e-re])}function ck(e,t,n,s,a,i){var l=e[0],o=e[1],c=t[0],d=t[1],u=0,m=1,h=c-l,p=d-o,y;if(y=n-l,!(!h&&y>0)){if(y/=h,h<0){if(y<u)return;y<m&&(m=y)}else if(h>0){if(y>m)return;y>u&&(u=y)}if(y=a-l,!(!h&&y<0)){if(y/=h,h<0){if(y>m)return;y>u&&(u=y)}else if(h>0){if(y<u)return;y<m&&(m=y)}if(y=s-o,!(!p&&y>0)){if(y/=p,p<0){if(y<u)return;y<m&&(m=y)}else if(p>0){if(y>m)return;y>u&&(u=y)}if(y=i-o,!(!p&&y<0)){if(y/=p,p<0){if(y>m)return;y>u&&(u=y)}else if(p>0){if(y<u)return;y<m&&(m=y)}return u>0&&(e[0]=l+u*h,e[1]=o+u*p),m<1&&(t[0]=l+m*h,t[1]=o+m*p),!0}}}}}var Ka=1e9,Hl=-Ka;function Yc(e,t,n,s){function a(d,u){return e<=d&&d<=n&&t<=u&&u<=s}function i(d,u,m,h){var p=0,y=0;if(d==null||(p=l(d,m))!==(y=l(u,m))||c(d,u)<0^m>0)do h.point(p===0||p===3?e:n,p>1?s:t);while((p=(p+m+4)%4)!==y);else h.point(u[0],u[1])}function l(d,u){return ie(d[0]-e)<ee?u>0?0:3:ie(d[0]-n)<ee?u>0?2:1:ie(d[1]-t)<ee?u>0?1:0:u>0?3:2}function o(d,u){return c(d.x,u.x)}function c(d,u){var m=l(d,1),h=l(u,1);return m!==h?m-h:m===0?u[1]-d[1]:m===1?d[0]-u[0]:m===2?d[1]-u[1]:u[0]-d[0]}return function(d){var u=d,m=c1(),h,p,y,b,j,g,f,x,v,w,_,k={point:C,lineStart:$,lineEnd:K,polygonStart:M,polygonEnd:A};function C(T,F){a(T,F)&&u.point(T,F)}function E(){for(var T=0,F=0,U=p.length;F<U;++F)for(var D=p[F],L=1,O=D.length,W=D[0],J,le,B=W[0],oe=W[1];L<O;++L)J=B,le=oe,W=D[L],B=W[0],oe=W[1],le<=s?oe>s&&(B-J)*(s-le)>(oe-le)*(e-J)&&++T:oe<=s&&(B-J)*(s-le)<(oe-le)*(e-J)&&--T;return T}function M(){u=m,h=[],p=[],_=!0}function A(){var T=E(),F=_&&T,U=(h=Gv(h)).length;(F||U)&&(d.polygonStart(),F&&(d.lineStart(),i(null,null,1,d),d.lineEnd()),U&&u1(h,o,T,i,d),d.polygonEnd()),u=d,h=p=y=null}function $(){k.point=P,p&&p.push(y=[]),w=!0,v=!1,f=x=NaN}function K(){h&&(P(b,j),g&&v&&m.rejoin(),h.push(m.result())),k.point=C,v&&u.lineEnd()}function P(T,F){var U=a(T,F);if(p&&y.push([T,F]),w)b=T,j=F,g=U,w=!1,U&&(u.lineStart(),u.point(T,F));else if(U&&v)u.point(T,F);else{var D=[f=Math.max(Hl,Math.min(Ka,f)),x=Math.max(Hl,Math.min(Ka,x))],L=[T=Math.max(Hl,Math.min(Ka,T)),F=Math.max(Hl,Math.min(Ka,F))];ck(D,L,e,t,n,s)?(v||(u.lineStart(),u.point(D[0],D[1])),u.point(L[0],L[1]),U||u.lineEnd(),_=!1):U&&(u.lineStart(),u.point(T,F),_=!1)}f=T,x=F,v=U}return k}}function uk(){var e=0,t=0,n=960,s=500,a,i,l;return l={stream:function(o){return a&&i===o?a:a=Yc(e,t,n,s)(i=o)},extent:function(o){return arguments.length?(e=+o[0][0],t=+o[0][1],n=+o[1][0],s=+o[1][1],a=i=null,l):[[e,t],[n,s]]}}}var mm,hm,ho,po,ba={sphere:ke,point:ke,lineStart:dk,lineEnd:ke,polygonStart:ke,polygonEnd:ke};function dk(){ba.point=hk,ba.lineEnd=mk}function mk(){ba.point=ba.lineEnd=ke}function hk(e,t){e*=te,t*=te,hm=e,ho=H(t),po=Y(t),ba.point=pk}function pk(e,t){e*=te,t*=te;var n=H(t),s=Y(t),a=ie(e-hm),i=Y(a),l=H(a),o=s*l,c=po*n-ho*s*i,d=ho*n+po*s*i;mm.add(pt(Ze(o*o+c*c),d)),hm=e,ho=n,po=s}function p1(e){return mm=new tt,rn(e,ba),+mm}var pm=[null,null],fk={type:"LineString",coordinates:pm};function mc(e,t){return pm[0]=e,pm[1]=t,p1(fk)}var Df={Feature:function(e,t){return hc(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,s=-1,a=n.length;++s<a;)if(hc(n[s].geometry,t))return!0;return!1}},Qf={Sphere:function(){return!0},Point:function(e,t){return Lf(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)if(Lf(n[s],t))return!0;return!1},LineString:function(e,t){return Rf(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)if(Rf(n[s],t))return!0;return!1},Polygon:function(e,t){return If(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,s=-1,a=n.length;++s<a;)if(If(n[s],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,s=-1,a=n.length;++s<a;)if(hc(n[s],t))return!0;return!1}};function hc(e,t){return e&&Qf.hasOwnProperty(e.type)?Qf[e.type](e,t):!1}function Lf(e,t){return mc(e,t)===0}function Rf(e,t){for(var n,s,a,i=0,l=e.length;i<l;i++){if(s=mc(e[i],t),s===0||i>0&&(a=mc(e[i],e[i-1]),a>0&&n<=a&&s<=a&&(n+s-a)*(1-Math.pow((n-s)/a,2))<zi*a))return!0;n=s}return!1}function If(e,t){return!!d1(e.map(gk),f1(t))}function gk(e){return e=e.map(f1),e.pop(),e}function f1(e){return[e[0]*te,e[1]*te]}function xk(e,t){return(e&&Df.hasOwnProperty(e.type)?Df[e.type]:hc)(e,t)}function Of(e,t,n){var s=zs(e,t-ee,n).concat(t);return function(a){return s.map(function(i){return[a,i]})}}function zf(e,t,n){var s=zs(e,t-ee,n).concat(t);return function(a){return s.map(function(i){return[i,a]})}}function Xh(){var e,t,n,s,a,i,l,o,c=10,d=c,u=90,m=360,h,p,y,b,j=2.5;function g(){return{type:"MultiLineString",coordinates:f()}}function f(){return zs(Ul(s/u)*u,n,u).map(y).concat(zs(Ul(o/m)*m,l,m).map(b)).concat(zs(Ul(t/c)*c,e,c).filter(function(x){return ie(x%u)>ee}).map(h)).concat(zs(Ul(i/d)*d,a,d).filter(function(x){return ie(x%m)>ee}).map(p))}return g.lines=function(){return f().map(function(x){return{type:"LineString",coordinates:x}})},g.outline=function(){return{type:"Polygon",coordinates:[y(s).concat(b(l).slice(1),y(n).reverse().slice(1),b(o).reverse().slice(1))]}},g.extent=function(x){return arguments.length?g.extentMajor(x).extentMinor(x):g.extentMinor()},g.extentMajor=function(x){return arguments.length?(s=+x[0][0],n=+x[1][0],o=+x[0][1],l=+x[1][1],s>n&&(x=s,s=n,n=x),o>l&&(x=o,o=l,l=x),g.precision(j)):[[s,o],[n,l]]},g.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],i=+x[0][1],a=+x[1][1],t>e&&(x=t,t=e,e=x),i>a&&(x=i,i=a,a=x),g.precision(j)):[[t,i],[e,a]]},g.step=function(x){return arguments.length?g.stepMajor(x).stepMinor(x):g.stepMinor()},g.stepMajor=function(x){return arguments.length?(u=+x[0],m=+x[1],g):[u,m]},g.stepMinor=function(x){return arguments.length?(c=+x[0],d=+x[1],g):[c,d]},g.precision=function(x){return arguments.length?(j=+x,h=Of(i,a,90),p=zf(t,e,j),y=Of(o,l,90),b=zf(s,n,j),g):j},g.extentMajor([[-180,-90+ee],[180,90-ee]]).extentMinor([[-180,-80-ee],[180,80+ee]])}function yk(){return Xh()()}function vk(e,t){var n=e[0]*te,s=e[1]*te,a=t[0]*te,i=t[1]*te,l=Y(s),o=H(s),c=Y(i),d=H(i),u=l*Y(n),m=l*H(n),h=c*Y(a),p=c*H(a),y=2*ft(Ze(bf(i-s)+l*c*bf(a-n))),b=H(y),j=y?function(g){var f=H(g*=y)/b,x=H(y-g)/b,v=x*u+f*h,w=x*m+f*p,_=x*o+f*d;return[pt(w,v)*fe,pt(_,Ze(v*v+w*w))*fe]}:function(){return[n*fe,s*fe]};return j.distance=y,j}const $i=e=>e;var Ru=new tt,fm=new tt,g1,x1,gm,xm,zn={point:ke,lineStart:ke,lineEnd:ke,polygonStart:function(){zn.lineStart=bk,zn.lineEnd=Nk},polygonEnd:function(){zn.lineStart=zn.lineEnd=zn.point=ke,Ru.add(ie(fm)),fm=new tt},result:function(){var e=Ru/2;return Ru=new tt,e}};function bk(){zn.point=jk}function jk(e,t){zn.point=y1,g1=gm=e,x1=xm=t}function y1(e,t){fm.add(xm*e-gm*t),gm=e,xm=t}function Nk(){y1(g1,x1)}var ja=1/0,pc=ja,qi=-ja,fc=qi,gc={point:wk,lineStart:ke,lineEnd:ke,polygonStart:ke,polygonEnd:ke,result:function(){var e=[[ja,pc],[qi,fc]];return qi=fc=-(pc=ja=1/0),e}};function wk(e,t){e<ja&&(ja=e),e>qi&&(qi=e),t<pc&&(pc=t),t>fc&&(fc=t)}var ym=0,vm=0,Ya=0,xc=0,yc=0,$s=0,bm=0,jm=0,Xa=0,v1,b1,xn,yn,Bt={point:xs,lineStart:$f,lineEnd:qf,polygonStart:function(){Bt.lineStart=Sk,Bt.lineEnd=Ck},polygonEnd:function(){Bt.point=xs,Bt.lineStart=$f,Bt.lineEnd=qf},result:function(){var e=Xa?[bm/Xa,jm/Xa]:$s?[xc/$s,yc/$s]:Ya?[ym/Ya,vm/Ya]:[NaN,NaN];return ym=vm=Ya=xc=yc=$s=bm=jm=Xa=0,e}};function xs(e,t){ym+=e,vm+=t,++Ya}function $f(){Bt.point=kk}function kk(e,t){Bt.point=_k,xs(xn=e,yn=t)}function _k(e,t){var n=e-xn,s=t-yn,a=Ze(n*n+s*s);xc+=a*(xn+e)/2,yc+=a*(yn+t)/2,$s+=a,xs(xn=e,yn=t)}function qf(){Bt.point=xs}function Sk(){Bt.point=Ek}function Ck(){j1(v1,b1)}function Ek(e,t){Bt.point=j1,xs(v1=xn=e,b1=yn=t)}function j1(e,t){var n=e-xn,s=t-yn,a=Ze(n*n+s*s);xc+=a*(xn+e)/2,yc+=a*(yn+t)/2,$s+=a,a=yn*e-xn*t,bm+=a*(xn+e),jm+=a*(yn+t),Xa+=a*3,xs(xn=e,yn=t)}function N1(e){this._context=e}N1.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ht);break}}},result:ke};var Nm=new tt,Iu,w1,k1,Ja,ei,Ui={point:ke,lineStart:function(){Ui.point=Pk},lineEnd:function(){Iu&&_1(w1,k1),Ui.point=ke},polygonStart:function(){Iu=!0},polygonEnd:function(){Iu=null},result:function(){var e=+Nm;return Nm=new tt,e}};function Pk(e,t){Ui.point=_1,w1=Ja=e,k1=ei=t}function _1(e,t){Ja-=e,ei-=t,Nm.add(Ze(Ja*Ja+ei*ei)),Ja=e,ei=t}function S1(){this._string=[]}S1.prototype={_radius:4.5,_circle:Uf(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=Uf(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function Uf(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function C1(e,t){var n=4.5,s,a;function i(l){return l&&(typeof n=="function"&&a.pointRadius(+n.apply(this,arguments)),rn(l,s(a))),a.result()}return i.area=function(l){return rn(l,s(zn)),zn.result()},i.measure=function(l){return rn(l,s(Ui)),Ui.result()},i.bounds=function(l){return rn(l,s(gc)),gc.result()},i.centroid=function(l){return rn(l,s(Bt)),Bt.result()},i.projection=function(l){return arguments.length?(s=l==null?(e=null,$i):(e=l).stream,i):e},i.context=function(l){return arguments.length?(a=l==null?(t=null,new S1):new N1(t=l),typeof n!="function"&&a.pointRadius(n),i):t},i.pointRadius=function(l){return arguments.length?(n=typeof l=="function"?l:(a.pointRadius(+l),+l),i):n},i.projection(e).context(t)}function Mk(e){return{stream:pl(e)}}function pl(e){return function(t){var n=new wm;for(var s in e)n[s]=e[s];return n.stream=t,n}}function wm(){}wm.prototype={constructor:wm,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Jh(e,t,n){var s=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),rn(n,e.stream(gc)),t(gc.result()),s!=null&&e.clipExtent(s),e}function Xc(e,t,n){return Jh(e,function(s){var a=t[1][0]-t[0][0],i=t[1][1]-t[0][1],l=Math.min(a/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),o=+t[0][0]+(a-l*(s[1][0]+s[0][0]))/2,c=+t[0][1]+(i-l*(s[1][1]+s[0][1]))/2;e.scale(150*l).translate([o,c])},n)}function e0(e,t,n){return Xc(e,[[0,0],t],n)}function t0(e,t,n){return Jh(e,function(s){var a=+t,i=a/(s[1][0]-s[0][0]),l=(a-i*(s[1][0]+s[0][0]))/2,o=-i*s[0][1];e.scale(150*i).translate([l,o])},n)}function n0(e,t,n){return Jh(e,function(s){var a=+t,i=a/(s[1][1]-s[0][1]),l=-i*s[0][0],o=(a-i*(s[1][1]+s[0][1]))/2;e.scale(150*i).translate([l,o])},n)}var Bf=16,Tk=Y(30*te);function Vf(e,t){return+t?Ak(e,t):Fk(e)}function Fk(e){return pl({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ak(e,t){function n(s,a,i,l,o,c,d,u,m,h,p,y,b,j){var g=d-s,f=u-a,x=g*g+f*f;if(x>4*t&&b--){var v=l+h,w=o+p,_=c+y,k=Ze(v*v+w*w+_*_),C=ft(_/=k),E=ie(ie(_)-1)<ee||ie(i-m)<ee?(i+m)/2:pt(w,v),M=e(E,C),A=M[0],$=M[1],K=A-s,P=$-a,T=f*K-g*P;(T*T/x>t||ie((g*K+f*P)/x-.5)>.3||l*h+o*p+c*y<Tk)&&(n(s,a,i,l,o,c,A,$,E,v/=k,w/=k,_,b,j),j.point(A,$),n(A,$,E,v,w,_,d,u,m,h,p,y,b,j))}}return function(s){var a,i,l,o,c,d,u,m,h,p,y,b,j={point:g,lineStart:f,lineEnd:v,polygonStart:function(){s.polygonStart(),j.lineStart=w},polygonEnd:function(){s.polygonEnd(),j.lineStart=f}};function g(C,E){C=e(C,E),s.point(C[0],C[1])}function f(){m=NaN,j.point=x,s.lineStart()}function x(C,E){var M=gs([C,E]),A=e(C,E);n(m,h,u,p,y,b,m=A[0],h=A[1],u=C,p=M[0],y=M[1],b=M[2],Bf,s),s.point(m,h)}function v(){j.point=g,s.lineEnd()}function w(){f(),j.point=_,j.lineEnd=k}function _(C,E){x(a=C,E),i=m,l=h,o=p,c=y,d=b,j.point=x}function k(){n(m,h,u,p,y,b,i,l,a,o,c,d,Bf,s),j.lineEnd=v,v()}return j}}var Dk=pl({point:function(e,t){this.stream.point(e*te,t*te)}});function Qk(e){return pl({point:function(t,n){var s=e(t,n);return this.stream.point(s[0],s[1])}})}function Lk(e,t,n,s,a){function i(l,o){return l*=s,o*=a,[t+e*l,n-e*o]}return i.invert=function(l,o){return[(l-t)/e*s,(n-o)/e*a]},i}function Zf(e,t,n,s,a,i){if(!i)return Lk(e,t,n,s,a);var l=Y(i),o=H(i),c=l*e,d=o*e,u=l/e,m=o/e,h=(o*n-l*t)/e,p=(o*t+l*n)/e;function y(b,j){return b*=s,j*=a,[c*b-d*j+t,n-d*b-c*j]}return y.invert=function(b,j){return[s*(u*b-m*j+h),a*(p-m*b-u*j)]},y}function Pn(e){return r0(function(){return e})()}function r0(e){var t,n=150,s=480,a=250,i=0,l=0,o=0,c=0,d=0,u,m=0,h=1,p=1,y=null,b=dm,j=null,g,f,x,v=$i,w=.5,_,k,C,E,M;function A(T){return C(T[0]*te,T[1]*te)}function $(T){return T=C.invert(T[0],T[1]),T&&[T[0]*fe,T[1]*fe]}A.stream=function(T){return E&&M===T?E:E=Dk(Qk(u)(b(_(v(M=T)))))},A.preclip=function(T){return arguments.length?(b=T,y=void 0,P()):b},A.postclip=function(T){return arguments.length?(v=T,j=g=f=x=null,P()):v},A.clipAngle=function(T){return arguments.length?(b=+T?h1(y=T*te):(y=null,dm),P()):y*fe},A.clipExtent=function(T){return arguments.length?(v=T==null?(j=g=f=x=null,$i):Yc(j=+T[0][0],g=+T[0][1],f=+T[1][0],x=+T[1][1]),P()):j==null?null:[[j,g],[f,x]]},A.scale=function(T){return arguments.length?(n=+T,K()):n},A.translate=function(T){return arguments.length?(s=+T[0],a=+T[1],K()):[s,a]},A.center=function(T){return arguments.length?(i=T[0]%360*te,l=T[1]%360*te,K()):[i*fe,l*fe]},A.rotate=function(T){return arguments.length?(o=T[0]%360*te,c=T[1]%360*te,d=T.length>2?T[2]%360*te:0,K()):[o*fe,c*fe,d*fe]},A.angle=function(T){return arguments.length?(m=T%360*te,K()):m*fe},A.reflectX=function(T){return arguments.length?(h=T?-1:1,K()):h<0},A.reflectY=function(T){return arguments.length?(p=T?-1:1,K()):p<0},A.precision=function(T){return arguments.length?(_=Vf(k,w=T*T),P()):Ze(w)},A.fitExtent=function(T,F){return Xc(A,T,F)},A.fitSize=function(T,F){return e0(A,T,F)},A.fitWidth=function(T,F){return t0(A,T,F)},A.fitHeight=function(T,F){return n0(A,T,F)};function K(){var T=Zf(n,0,0,h,p,m).apply(null,t(i,l)),F=Zf(n,s-T[0],a-T[1],h,p,m);return u=Yh(o,c,d),k=cm(t,F),C=cm(u,k),_=Vf(k,w),P()}function P(){return E=M=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&$,K()}}function s0(e){var t=0,n=re/3,s=r0(e),a=s(t,n);return a.parallels=function(i){return arguments.length?s(t=i[0]*te,n=i[1]*te):[t*fe,n*fe]},a}function Rk(e){var t=Y(e);function n(s,a){return[s*t,H(a)/t]}return n.invert=function(s,a){return[s/t,ft(a*t)]},n}function E1(e,t){var n=H(e),s=(n+H(t))/2;if(ie(s)<ee)return Rk(e);var a=1+n*(2*s-n),i=Ze(a)/s;function l(o,c){var d=Ze(a-2*s*H(c))/s;return[d*H(o*=s),i-d*Y(o)]}return l.invert=function(o,c){var d=i-c,u=pt(o,ie(d))*Zt(d);return d*s<0&&(u-=re*Zt(o)*Zt(d)),[u/s,ft((a-(o*o+d*d)*s*s)/(2*s))]},l}function vc(){return s0(E1).scale(155.424).center([0,33.6442])}function P1(){return vc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ik(e){var t=e.length;return{point:function(n,s){for(var a=-1;++a<t;)e[a].point(n,s)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Ok(){var e,t,n=P1(),s,a=vc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),i,l=vc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,c,d={point:function(h,p){c=[h,p]}};function u(h){var p=h[0],y=h[1];return c=null,s.point(p,y),c||(i.point(p,y),c)||(o.point(p,y),c)}u.invert=function(h){var p=n.scale(),y=n.translate(),b=(h[0]-y[0])/p,j=(h[1]-y[1])/p;return(j>=.12&&j<.234&&b>=-.425&&b<-.214?a:j>=.166&&j<.234&&b>=-.214&&b<-.115?l:n).invert(h)},u.stream=function(h){return e&&t===h?e:e=Ik([n.stream(t=h),a.stream(h),l.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),a.precision(h),l.precision(h),m()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),a.scale(h*.35),l.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),y=+h[0],b=+h[1];return s=n.translate(h).clipExtent([[y-.455*p,b-.238*p],[y+.455*p,b+.238*p]]).stream(d),i=a.translate([y-.307*p,b+.201*p]).clipExtent([[y-.425*p+ee,b+.12*p+ee],[y-.214*p-ee,b+.234*p-ee]]).stream(d),o=l.translate([y-.205*p,b+.212*p]).clipExtent([[y-.214*p+ee,b+.166*p+ee],[y-.115*p-ee,b+.234*p-ee]]).stream(d),m()},u.fitExtent=function(h,p){return Xc(u,h,p)},u.fitSize=function(h,p){return e0(u,h,p)},u.fitWidth=function(h,p){return t0(u,h,p)},u.fitHeight=function(h,p){return n0(u,h,p)};function m(){return e=t=null,u}return u.scale(1070)}function M1(e){return function(t,n){var s=Y(t),a=Y(n),i=e(s*a);return i===1/0?[2,0]:[i*a*H(t),i*H(n)]}}function fl(e){return function(t,n){var s=Ze(t*t+n*n),a=e(s),i=H(a),l=Y(a);return[pt(t*i,s*l),ft(s&&n*i/s)]}}var a0=M1(function(e){return Ze(2/(1+e))});a0.invert=fl(function(e){return 2*ft(e/2)});function zk(){return Pn(a0).scale(124.75).clipAngle(180-.001)}var i0=M1(function(e){return(e=Kv(e))&&e/H(e)});i0.invert=fl(function(e){return e});function $k(){return Pn(i0).scale(79.4188).clipAngle(180-.001)}function gl(e,t){return[e,Jo(Wh((Fe+t)/2))]}gl.invert=function(e,t){return[e,2*Fa(Wv(t))-Fe]};function qk(){return T1(gl).scale(961/ht)}function T1(e){var t=Pn(e),n=t.center,s=t.scale,a=t.translate,i=t.clipExtent,l=null,o,c,d;t.scale=function(m){return arguments.length?(s(m),u()):s()},t.translate=function(m){return arguments.length?(a(m),u()):a()},t.center=function(m){return arguments.length?(n(m),u()):n()},t.clipExtent=function(m){return arguments.length?(m==null?l=o=c=d=null:(l=+m[0][0],o=+m[0][1],c=+m[1][0],d=+m[1][1]),u()):l==null?null:[[l,o],[c,d]]};function u(){var m=re*s(),h=t(l1(t.rotate()).invert([0,0]));return i(l==null?[[h[0]-m,h[1]-m],[h[0]+m,h[1]+m]]:e===gl?[[Math.max(h[0]-m,l),o],[Math.min(h[0]+m,c),d]]:[[l,Math.max(h[1]-m,o)],[c,Math.min(h[1]+m,d)]])}return u()}function Gl(e){return Wh((Fe+e)/2)}function F1(e,t){var n=Y(e),s=e===t?H(e):Jo(n/Y(t))/Jo(Gl(t)/Gl(e)),a=n*Du(Gl(e),s)/s;if(!s)return gl;function i(l,o){a>0?o<-Fe+ee&&(o=-Fe+ee):o>Fe-ee&&(o=Fe-ee);var c=a/Du(Gl(o),s);return[c*H(s*l),a-c*Y(s*l)]}return i.invert=function(l,o){var c=a-o,d=Zt(s)*Ze(l*l+c*c),u=pt(l,ie(c))*Zt(c);return c*s<0&&(u-=re*Zt(l)*Zt(c)),[u/s,2*Fa(Du(a/d,1/s))-Fe]},i}function Uk(){return s0(F1).scale(109.5).parallels([30,30])}function Bi(e,t){return[e,t]}Bi.invert=Bi;function Bk(){return Pn(Bi).scale(152.63)}function A1(e,t){var n=Y(e),s=e===t?H(e):(n-Y(t))/(t-e),a=n/s+e;if(ie(s)<ee)return Bi;function i(l,o){var c=a-o,d=s*l;return[c*H(d),a-c*Y(d)]}return i.invert=function(l,o){var c=a-o,d=pt(l,ie(c))*Zt(c);return c*s<0&&(d-=re*Zt(l)*Zt(c)),[d/s,a-Zt(s)*Ze(l*l+c*c)]},i}function Vk(){return s0(A1).scale(131.154).center([0,13.9389])}var pi=1.340264,fi=-.081106,gi=893e-6,xi=.003796,bc=Ze(3)/2,Zk=12;function l0(e,t){var n=ft(bc*H(t)),s=n*n,a=s*s*s;return[e*Y(n)/(bc*(pi+3*fi*s+a*(7*gi+9*xi*s))),n*(pi+fi*s+a*(gi+xi*s))]}l0.invert=function(e,t){for(var n=t,s=n*n,a=s*s*s,i=0,l,o,c;i<Zk&&(o=n*(pi+fi*s+a*(gi+xi*s))-t,c=pi+3*fi*s+a*(7*gi+9*xi*s),n-=l=o/c,s=n*n,a=s*s*s,!(ie(l)<zi));++i);return[bc*e*(pi+3*fi*s+a*(7*gi+9*xi*s))/Y(n),ft(H(n)/bc)]};function Hk(){return Pn(l0).scale(177.158)}function o0(e,t){var n=Y(t),s=Y(e)*n;return[n*H(e)/s,H(t)/s]}o0.invert=fl(Fa);function Gk(){return Pn(o0).scale(144.049).clipAngle(60)}function Wk(){var e=1,t=0,n=0,s=1,a=1,i=0,l,o,c=null,d,u,m,h=1,p=1,y=pl({point:function(v,w){var _=x([v,w]);this.stream.point(_[0],_[1])}}),b=$i,j,g;function f(){return h=e*s,p=e*a,j=g=null,x}function x(v){var w=v[0]*h,_=v[1]*p;if(i){var k=_*l-w*o;w=w*l+_*o,_=k}return[w+t,_+n]}return x.invert=function(v){var w=v[0]-t,_=v[1]-n;if(i){var k=_*l+w*o;w=w*l-_*o,_=k}return[w/h,_/p]},x.stream=function(v){return j&&g===v?j:j=y(b(g=v))},x.postclip=function(v){return arguments.length?(b=v,c=d=u=m=null,f()):b},x.clipExtent=function(v){return arguments.length?(b=v==null?(c=d=u=m=null,$i):Yc(c=+v[0][0],d=+v[0][1],u=+v[1][0],m=+v[1][1]),f()):c==null?null:[[c,d],[u,m]]},x.scale=function(v){return arguments.length?(e=+v,f()):e},x.translate=function(v){return arguments.length?(t=+v[0],n=+v[1],f()):[t,n]},x.angle=function(v){return arguments.length?(i=v%360*te,o=H(i),l=Y(i),f()):i*fe},x.reflectX=function(v){return arguments.length?(s=v?-1:1,f()):s<0},x.reflectY=function(v){return arguments.length?(a=v?-1:1,f()):a<0},x.fitExtent=function(v,w){return Xc(x,v,w)},x.fitSize=function(v,w){return e0(x,v,w)},x.fitWidth=function(v,w){return t0(x,v,w)},x.fitHeight=function(v,w){return n0(x,v,w)},x}function c0(e,t){var n=t*t,s=n*n;return[e*(.8707-.131979*n+s*(-.013791+s*(.003971*n-.001529*s))),t*(1.007226+n*(.015085+s*(-.044475+.028874*n-.005916*s)))]}c0.invert=function(e,t){var n=t,s=25,a;do{var i=n*n,l=i*i;n-=a=(n*(1.007226+i*(.015085+l*(-.044475+.028874*i-.005916*l)))-t)/(1.007226+i*(.015085*3+l*(-.044475*7+.028874*9*i-.005916*11*l)))}while(ie(a)>ee&&--s>0);return[e/(.8707+(i=n*n)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),n]};function Kk(){return Pn(c0).scale(175.295)}function u0(e,t){return[Y(t)*H(e),H(t)]}u0.invert=fl(ft);function Yk(){return Pn(u0).scale(249.5).clipAngle(90+ee)}function d0(e,t){var n=Y(t),s=1+Y(e)*n;return[n*H(e)/s,H(t)/s]}d0.invert=fl(function(e){return 2*Fa(e)});function Xk(){return Pn(d0).scale(250).clipAngle(142)}function m0(e,t){return[Jo(Wh((Fe+t)/2)),-e]}m0.invert=function(e,t){return[-t,2*Fa(Wv(e))-Fe]};function Jk(){var e=T1(m0),t=e.center,n=e.rotate;return e.center=function(s){return arguments.length?t([-s[1],s[0]]):(s=t(),[s[1],-s[0]])},e.rotate=function(s){return arguments.length?n([s[0],s[1],s.length>2?s[2]+90:90]):(s=n(),[s[0],s[1],s[2]-90])},n([0,0,90]).scale(159.155)}const e_=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:P1,geoAlbersUsa:Ok,geoArea:Z3,geoAzimuthalEqualArea:zk,geoAzimuthalEqualAreaRaw:a0,geoAzimuthalEquidistant:$k,geoAzimuthalEquidistantRaw:i0,geoBounds:K3,geoCentroid:nk,geoCircle:rk,geoClipAntimeridian:dm,geoClipCircle:h1,geoClipExtent:uk,geoClipRectangle:Yc,geoConicConformal:Uk,geoConicConformalRaw:F1,geoConicEqualArea:vc,geoConicEqualAreaRaw:E1,geoConicEquidistant:Vk,geoConicEquidistantRaw:A1,geoContains:xk,geoDistance:mc,geoEqualEarth:Hk,geoEqualEarthRaw:l0,geoEquirectangular:Bk,geoEquirectangularRaw:Bi,geoGnomonic:Gk,geoGnomonicRaw:o0,geoGraticule:Xh,geoGraticule10:yk,geoIdentity:Wk,geoInterpolate:vk,geoLength:p1,geoMercator:qk,geoMercatorRaw:gl,geoNaturalEarth1:Kk,geoNaturalEarth1Raw:c0,geoOrthographic:Yk,geoOrthographicRaw:u0,geoPath:C1,geoProjection:Pn,geoProjectionMutator:r0,geoRotation:l1,geoStereographic:Xk,geoStereographicRaw:d0,geoStream:rn,geoTransform:Mk,geoTransverseMercator:Jk,geoTransverseMercatorRaw:m0},Symbol.toStringTag,{value:"Module"}));function t_(e){return e}function n_(e){if(e==null)return t_;var t,n,s=e.scale[0],a=e.scale[1],i=e.translate[0],l=e.translate[1];return function(o,c){c||(t=n=0);var d=2,u=o.length,m=new Array(u);for(m[0]=(t+=o[0])*s+i,m[1]=(n+=o[1])*a+l;d<u;)m[d]=o[d],++d;return m}}function r_(e,t){for(var n,s=e.length,a=s-t;a<--s;)n=e[a],e[a++]=e[s],e[s]=n}function s_(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Hf(e,n)})}:Hf(e,t)}function Hf(e,t){var n=t.id,s=t.bbox,a=t.properties==null?{}:t.properties,i=D1(e,t);return n==null&&s==null?{type:"Feature",properties:a,geometry:i}:s==null?{type:"Feature",id:n,properties:a,geometry:i}:{type:"Feature",id:n,bbox:s,properties:a,geometry:i}}function D1(e,t){var n=n_(e.transform),s=e.arcs;function a(u,m){m.length&&m.pop();for(var h=s[u<0?~u:u],p=0,y=h.length;p<y;++p)m.push(n(h[p],p));u<0&&r_(m,y)}function i(u){return n(u)}function l(u){for(var m=[],h=0,p=u.length;h<p;++h)a(u[h],m);return m.length<2&&m.push(m[0]),m}function o(u){for(var m=l(u);m.length<4;)m.push(m[0]);return m}function c(u){return u.map(o)}function d(u){var m=u.type,h;switch(m){case"GeometryCollection":return{type:m,geometries:u.geometries.map(d)};case"Point":h=i(u.coordinates);break;case"MultiPoint":h=u.coordinates.map(i);break;case"LineString":h=l(u.arcs);break;case"MultiLineString":h=u.arcs.map(l);break;case"Polygon":h=c(u.arcs);break;case"MultiPolygon":h=u.arcs.map(c);break;default:return null}return{type:m,coordinates:h}}return d(t)}function a_(e,t){var n={},s={},a={},i=[],l=-1;t.forEach(function(d,u){var m=e.arcs[d<0?~d:d],h;m.length<3&&!m[1][0]&&!m[1][1]&&(h=t[++l],t[l]=d,t[u]=h)}),t.forEach(function(d){var u=o(d),m=u[0],h=u[1],p,y;if(p=a[m])if(delete a[p.end],p.push(d),p.end=h,y=s[h]){delete s[y.start];var b=y===p?p:p.concat(y);s[b.start=p.start]=a[b.end=y.end]=b}else s[p.start]=a[p.end]=p;else if(p=s[h])if(delete s[p.start],p.unshift(d),p.start=m,y=a[m]){delete a[y.end];var j=y===p?p:y.concat(p);s[j.start=y.start]=a[j.end=p.end]=j}else s[p.start]=a[p.end]=p;else p=[d],s[p.start=m]=a[p.end=h]=p});function o(d){var u=e.arcs[d<0?~d:d],m=u[0],h;return e.transform?(h=[0,0],u.forEach(function(p){h[0]+=p[0],h[1]+=p[1]})):h=u[u.length-1],d<0?[h,m]:[m,h]}function c(d,u){for(var m in d){var h=d[m];delete u[h.start],delete h.start,delete h.end,h.forEach(function(p){n[p<0?~p:p]=1}),i.push(h)}}return c(a,s),c(s,a),t.forEach(function(d){n[d<0?~d:d]||i.push([d])}),i}function Gf(e){return D1(e,i_.apply(this,arguments))}function i_(e,t,n){var s,a,i;if(arguments.length>1)s=l_(e,t,n);else for(a=0,s=new Array(i=e.arcs.length);a<i;++a)s[a]=a;return{type:"MultiLineString",arcs:a_(e,s)}}function l_(e,t,n){var s=[],a=[],i;function l(m){var h=m<0?~m:m;(a[h]||(a[h]=[])).push({i:m,g:i})}function o(m){m.forEach(l)}function c(m){m.forEach(o)}function d(m){m.forEach(c)}function u(m){switch(i=m,m.type){case"GeometryCollection":m.geometries.forEach(u);break;case"LineString":o(m.arcs);break;case"MultiLineString":case"Polygon":c(m.arcs);break;case"MultiPolygon":d(m.arcs);break}}return u(t),a.forEach(n==null?function(m){s.push(m[0].i)}:function(m){n(m[0].g,m[m.length-1].g)&&s.push(m[0].i)}),s}var o_={value:()=>{}};function h0(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new fo(n)}function fo(e){this._=e}function c_(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",a=n.indexOf(".");if(a>=0&&(s=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}fo.prototype=h0.prototype={constructor:fo,on:function(e,t){var n=this._,s=c_(e+"",n),a,i=-1,l=s.length;if(arguments.length<2){for(;++i<l;)if((a=(e=s[i]).type)&&(a=u_(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<l;)if(a=(e=s[i]).type)n[a]=Wf(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Wf(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fo(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),s=0,a,i;s<a;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,i=s.length;a<i;++a)s[a].value.apply(t,n)}};function u_(e,t){for(var n=0,s=e.length,a;n<s;++n)if((a=e[n]).name===t)return a.value}function Wf(e,t,n){for(var s=0,a=e.length;s<a;++s)if(e[s].name===t){e[s]=o_,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var km="http://www.w3.org/1999/xhtml";const Kf={svg:"http://www.w3.org/2000/svg",xhtml:km,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Jc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kf.hasOwnProperty(t)?{space:Kf[t],local:e}:e}function d_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===km&&t.documentElement.namespaceURI===km?t.createElement(e):t.createElementNS(n,e)}}function m_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Q1(e){var t=Jc(e);return(t.local?m_:d_)(t)}function h_(){}function p0(e){return e==null?h_:function(){return this.querySelector(e)}}function p_(e){typeof e!="function"&&(e=p0(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,o=s[a]=new Array(l),c,d,u=0;u<l;++u)(c=i[u])&&(d=e.call(c,c.__data__,u,i))&&("__data__"in c&&(d.__data__=c.__data__),o[u]=d);return new Ct(s,this._parents)}function L1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function f_(){return[]}function R1(e){return e==null?f_:function(){return this.querySelectorAll(e)}}function g_(e){return function(){var t=e.apply(this,arguments);return t==null?[]:L1(t)}}function x_(e){typeof e=="function"?e=g_(e):e=R1(e);for(var t=this._groups,n=t.length,s=[],a=[],i=0;i<n;++i)for(var l=t[i],o=l.length,c,d=0;d<o;++d)(c=l[d])&&(s.push(e.call(c,c.__data__,d,l)),a.push(c));return new Ct(s,a)}function I1(e){return function(){return this.matches(e)}}function O1(e){return function(t){return t.matches(e)}}var y_=Array.prototype.find;function v_(e){return function(){return y_.call(this.children,e)}}function b_(){return this.firstElementChild}function j_(e){return this.select(e==null?b_:v_(typeof e=="function"?e:O1(e)))}var N_=Array.prototype.filter;function w_(){return this.children}function k_(e){return function(){return N_.call(this.children,e)}}function __(e){return this.selectAll(e==null?w_:k_(typeof e=="function"?e:O1(e)))}function S_(e){typeof e!="function"&&(e=I1(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,o=s[a]=[],c,d=0;d<l;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&o.push(c);return new Ct(s,this._parents)}function z1(e){return new Array(e.length)}function C_(){return new Ct(this._enter||this._groups.map(z1),this._parents)}function jc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jc.prototype={constructor:jc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function E_(e){return function(){return e}}function P_(e,t,n,s,a,i){for(var l=0,o,c=t.length,d=i.length;l<d;++l)(o=t[l])?(o.__data__=i[l],s[l]=o):n[l]=new jc(e,i[l]);for(;l<c;++l)(o=t[l])&&(a[l]=o)}function M_(e,t,n,s,a,i,l){var o,c,d=new Map,u=t.length,m=i.length,h=new Array(u),p;for(o=0;o<u;++o)(c=t[o])&&(h[o]=p=l.call(c,c.__data__,o,t)+"",d.has(p)?a[o]=c:d.set(p,c));for(o=0;o<m;++o)p=l.call(e,i[o],o,i)+"",(c=d.get(p))?(s[o]=c,c.__data__=i[o],d.delete(p)):n[o]=new jc(e,i[o]);for(o=0;o<u;++o)(c=t[o])&&d.get(h[o])===c&&(a[o]=c)}function T_(e){return e.__data__}function F_(e,t){if(!arguments.length)return Array.from(this,T_);var n=t?M_:P_,s=this._parents,a=this._groups;typeof e!="function"&&(e=E_(e));for(var i=a.length,l=new Array(i),o=new Array(i),c=new Array(i),d=0;d<i;++d){var u=s[d],m=a[d],h=m.length,p=L1(e.call(u,u&&u.__data__,d,s)),y=p.length,b=o[d]=new Array(y),j=l[d]=new Array(y),g=c[d]=new Array(h);n(u,m,b,j,g,p,t);for(var f=0,x=0,v,w;f<y;++f)if(v=b[f]){for(f>=x&&(x=f+1);!(w=j[x])&&++x<y;);v._next=w||null}}return l=new Ct(l,s),l._enter=o,l._exit=c,l}function A_(){return new Ct(this._exit||this._groups.map(z1),this._parents)}function D_(e,t,n){var s=this.enter(),a=this,i=this.exit();return s=typeof e=="function"?e(s):s.append(e+""),t!=null&&(a=t(a)),n==null?i.remove():n(i),s&&a?s.merge(a).order():a}function Q_(e){if(!(e instanceof Ct))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,s=t.length,a=n.length,i=Math.min(s,a),l=new Array(s),o=0;o<i;++o)for(var c=t[o],d=n[o],u=c.length,m=l[o]=new Array(u),h,p=0;p<u;++p)(h=c[p]||d[p])&&(m[p]=h);for(;o<s;++o)l[o]=t[o];return new Ct(l,this._parents)}function L_(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],a=s.length-1,i=s[a],l;--a>=0;)(l=s[a])&&(i&&l.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(l,i),i=l);return this}function R_(e){e||(e=I_);function t(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var n=this._groups,s=n.length,a=new Array(s),i=0;i<s;++i){for(var l=n[i],o=l.length,c=a[i]=new Array(o),d,u=0;u<o;++u)(d=l[u])&&(c[u]=d);c.sort(t)}return new Ct(a,this._parents).order()}function I_(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function O_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function z_(){return Array.from(this)}function $_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],a=0,i=s.length;a<i;++a){var l=s[a];if(l)return l}return null}function q_(){let e=0;for(const t of this)++e;return e}function U_(){return!this.node()}function B_(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var a=t[n],i=0,l=a.length,o;i<l;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this}function V_(e){return function(){this.removeAttribute(e)}}function Z_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H_(e,t){return function(){this.setAttribute(e,t)}}function G_(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function K_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Y_(e,t){var n=Jc(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?Z_:V_:typeof t=="function"?n.local?K_:W_:n.local?G_:H_)(n,t))}function $1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function X_(e){return function(){this.style.removeProperty(e)}}function J_(e,t,n){return function(){this.style.setProperty(e,t,n)}}function eS(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function tS(e,t,n){return arguments.length>1?this.each((t==null?X_:typeof t=="function"?eS:J_)(e,t,n??"")):Na(this.node(),e)}function Na(e,t){return e.style.getPropertyValue(t)||$1(e).getComputedStyle(e,null).getPropertyValue(t)}function nS(e){return function(){delete this[e]}}function rS(e,t){return function(){this[e]=t}}function sS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aS(e,t){return arguments.length>1?this.each((t==null?nS:typeof t=="function"?sS:rS)(e,t)):this.node()[e]}function q1(e){return e.trim().split(/^|\s+/)}function f0(e){return e.classList||new U1(e)}function U1(e){this._node=e,this._names=q1(e.getAttribute("class")||"")}U1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function B1(e,t){for(var n=f0(e),s=-1,a=t.length;++s<a;)n.add(t[s])}function V1(e,t){for(var n=f0(e),s=-1,a=t.length;++s<a;)n.remove(t[s])}function iS(e){return function(){B1(this,e)}}function lS(e){return function(){V1(this,e)}}function oS(e,t){return function(){(t.apply(this,arguments)?B1:V1)(this,e)}}function cS(e,t){var n=q1(e+"");if(arguments.length<2){for(var s=f0(this.node()),a=-1,i=n.length;++a<i;)if(!s.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?oS:t?iS:lS)(n,t))}function uS(){this.textContent=""}function dS(e){return function(){this.textContent=e}}function mS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hS(e){return arguments.length?this.each(e==null?uS:(typeof e=="function"?mS:dS)(e)):this.node().textContent}function pS(){this.innerHTML=""}function fS(e){return function(){this.innerHTML=e}}function gS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xS(e){return arguments.length?this.each(e==null?pS:(typeof e=="function"?gS:fS)(e)):this.node().innerHTML}function yS(){this.nextSibling&&this.parentNode.appendChild(this)}function vS(){return this.each(yS)}function bS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jS(){return this.each(bS)}function NS(e){var t=typeof e=="function"?e:Q1(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wS(){return null}function kS(e,t){var n=typeof e=="function"?e:Q1(e),s=t==null?wS:typeof t=="function"?t:p0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function _S(){var e=this.parentNode;e&&e.removeChild(this)}function SS(){return this.each(_S)}function CS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ES(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PS(e){return this.select(e?ES:CS)}function MS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function TS(e){return function(t){e.call(this,t,this.__data__)}}function FS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function AS(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,a=t.length,i;n<a;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++s]=i;++s?t.length=s:delete this.__on}}}function DS(e,t,n){return function(){var s=this.__on,a,i=TS(t);if(s){for(var l=0,o=s.length;l<o;++l)if((a=s[l]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=n),a.value=t;return}}this.addEventListener(e.type,i,n),a={type:e.type,name:e.name,value:t,listener:i,options:n},s?s.push(a):this.__on=[a]}}function QS(e,t,n){var s=FS(e+""),a,i=s.length,l;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,d=o.length,u;c<d;++c)for(a=0,u=o[c];a<i;++a)if((l=s[a]).type===u.type&&l.name===u.name)return u.value}return}for(o=t?DS:AS,a=0;a<i;++a)this.each(o(s[a],t,n));return this}function Z1(e,t,n){var s=$1(e),a=s.CustomEvent;typeof a=="function"?a=new a(t,n):(a=s.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function LS(e,t){return function(){return Z1(this,e,t)}}function RS(e,t){return function(){return Z1(this,e,t.apply(this,arguments))}}function IS(e,t){return this.each((typeof t=="function"?RS:LS)(e,t))}function*OS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],a=0,i=s.length,l;a<i;++a)(l=s[a])&&(yield l)}var H1=[null];function Ct(e,t){this._groups=e,this._parents=t}function xl(){return new Ct([[document.documentElement]],H1)}function zS(){return this}Ct.prototype=xl.prototype={constructor:Ct,select:p_,selectAll:x_,selectChild:j_,selectChildren:__,filter:S_,data:F_,enter:C_,exit:A_,join:D_,merge:Q_,selection:zS,order:L_,sort:R_,call:O_,nodes:z_,node:$_,size:q_,empty:U_,each:B_,attr:Y_,style:tS,property:aS,classed:cS,text:hS,html:xS,raise:vS,lower:jS,append:NS,insert:kS,remove:SS,clone:PS,datum:MS,on:QS,dispatch:IS,[Symbol.iterator]:OS};function $n(e){return typeof e=="string"?new Ct([[document.querySelector(e)]],[document.documentElement]):new Ct([[e]],H1)}function $S(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $r(e,t){if(e=$S(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}function _m(e){e.preventDefault(),e.stopImmediatePropagation()}function qS(e){var t=e.document.documentElement,n=$n(e).on("dragstart.drag",_m,!0);"onselectstart"in t?n.on("selectstart.drag",_m,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function US(e,t){var n=e.document.documentElement,s=$n(e).on("dragstart.drag",null);t&&(s.on("click.drag",_m,!0),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function g0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function G1(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function yl(){}var Vi=.7,Nc=1/Vi,Ys="\\s*([+-]?\\d+)\\s*",Zi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BS=/^#([0-9a-f]{3,8})$/,VS=new RegExp("^rgb\\("+[Ys,Ys,Ys]+"\\)$"),ZS=new RegExp("^rgb\\("+[wn,wn,wn]+"\\)$"),HS=new RegExp("^rgba\\("+[Ys,Ys,Ys,Zi]+"\\)$"),GS=new RegExp("^rgba\\("+[wn,wn,wn,Zi]+"\\)$"),WS=new RegExp("^hsl\\("+[Zi,wn,wn]+"\\)$"),KS=new RegExp("^hsla\\("+[Zi,wn,wn,Zi]+"\\)$"),Yf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};g0(yl,Hi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Xf,formatHex:Xf,formatHsl:YS,formatRgb:Jf,toString:Jf});function Xf(){return this.rgb().formatHex()}function YS(){return W1(this).formatHsl()}function Jf(){return this.rgb().formatRgb()}function Hi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=BS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eg(t):n===3?new At(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=VS.exec(e))?new At(t[1],t[2],t[3],1):(t=ZS.exec(e))?new At(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HS.exec(e))?Wl(t[1],t[2],t[3],t[4]):(t=GS.exec(e))?Wl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WS.exec(e))?rg(t[1],t[2]/100,t[3]/100,1):(t=KS.exec(e))?rg(t[1],t[2]/100,t[3]/100,t[4]):Yf.hasOwnProperty(e)?eg(Yf[e]):e==="transparent"?new At(NaN,NaN,NaN,0):null}function eg(e){return new At(e>>16&255,e>>8&255,e&255,1)}function Wl(e,t,n,s){return s<=0&&(e=t=n=NaN),new At(e,t,n,s)}function XS(e){return e instanceof yl||(e=Hi(e)),e?(e=e.rgb(),new At(e.r,e.g,e.b,e.opacity)):new At}function Sm(e,t,n,s){return arguments.length===1?XS(e):new At(e,t,n,s??1)}function At(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}g0(At,Sm,G1(yl,{brighter:function(e){return e=e==null?Nc:Math.pow(Nc,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Vi:Math.pow(Vi,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tg,formatHex:tg,formatRgb:ng,toString:ng}));function tg(){return"#"+Ou(this.r)+Ou(this.g)+Ou(this.b)}function ng(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Ou(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function rg(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vn(e,t,n,s)}function W1(e){if(e instanceof vn)return new vn(e.h,e.s,e.l,e.opacity);if(e instanceof yl||(e=Hi(e)),!e)return new vn;if(e instanceof vn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(n-s)/o+(n<s)*6:n===i?l=(s-t)/o+2:l=(t-n)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new vn(l,o,c,e.opacity)}function JS(e,t,n,s){return arguments.length===1?W1(e):new vn(e,t,n,s??1)}function vn(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}g0(vn,JS,G1(yl,{brighter:function(e){return e=e==null?Nc:Math.pow(Nc,e),new vn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Vi:Math.pow(Vi,e),new vn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new At(zu(e>=240?e-240:e+120,a,s),zu(e,a,s),zu(e<120?e+240:e-120,a,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function zu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const K1=e=>()=>e;function e6(e,t){return function(n){return e+n*t}}function t6(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function n6(e){return(e=+e)==1?Y1:function(t,n){return n-t?t6(t,n,e):K1(isNaN(t)?n:t)}}function Y1(e,t){var n=t-e;return n?e6(e,n):K1(isNaN(e)?t:e)}const sg=function e(t){var n=n6(t);function s(a,i){var l=n((a=Sm(a)).r,(i=Sm(i)).r),o=n(a.g,i.g),c=n(a.b,i.b),d=Y1(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function lr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$u=new RegExp(Cm.source,"g");function r6(e){return function(){return e}}function s6(e){return function(t){return e(t)+""}}function a6(e,t){var n=Cm.lastIndex=$u.lastIndex=0,s,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=Cm.exec(e))&&(a=$u.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:lr(s,a)})),n=$u.lastIndex;return n<t.length&&(i=t.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?s6(c[0].x):r6(t):(t=c.length,function(d){for(var u=0,m;u<t;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}var ag=180/Math.PI,Em={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function X1(e,t,n,s,a,i){var l,o,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,c/=o),e*s<t*n&&(e=-e,t=-t,c=-c,l=-l),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*ag,skewX:Math.atan(c)*ag,scaleX:l,scaleY:o}}var Kl;function i6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Em:X1(t.a,t.b,t.c,t.d,t.e,t.f)}function l6(e){return e==null||(Kl||(Kl=document.createElementNS("http://www.w3.org/2000/svg","g")),Kl.setAttribute("transform",e),!(e=Kl.transform.baseVal.consolidate()))?Em:(e=e.matrix,X1(e.a,e.b,e.c,e.d,e.e,e.f))}function J1(e,t,n,s){function a(d){return d.length?d.pop()+" ":""}function i(d,u,m,h,p,y){if(d!==m||u!==h){var b=p.push("translate(",null,t,null,n);y.push({i:b-4,x:lr(d,m)},{i:b-2,x:lr(u,h)})}else(m||h)&&p.push("translate("+m+t+h+n)}function l(d,u,m,h){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),h.push({i:m.push(a(m)+"rotate(",null,s)-2,x:lr(d,u)})):u&&m.push(a(m)+"rotate("+u+s)}function o(d,u,m,h){d!==u?h.push({i:m.push(a(m)+"skewX(",null,s)-2,x:lr(d,u)}):u&&m.push(a(m)+"skewX("+u+s)}function c(d,u,m,h,p,y){if(d!==m||u!==h){var b=p.push(a(p)+"scale(",null,",",null,")");y.push({i:b-4,x:lr(d,m)},{i:b-2,x:lr(u,h)})}else(m!==1||h!==1)&&p.push(a(p)+"scale("+m+","+h+")")}return function(d,u){var m=[],h=[];return d=e(d),u=e(u),i(d.translateX,d.translateY,u.translateX,u.translateY,m,h),l(d.rotate,u.rotate,m,h),o(d.skewX,u.skewX,m,h),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,m,h),d=u=null,function(p){for(var y=-1,b=h.length,j;++y<b;)m[(j=h[y]).i]=j.x(p);return m.join("")}}}var o6=J1(i6,"px, ","px)","deg)"),c6=J1(l6,", ",")",")"),u6=1e-12;function ig(e){return((e=Math.exp(e))+1/e)/2}function d6(e){return((e=Math.exp(e))-1/e)/2}function m6(e){return((e=Math.exp(2*e))-1)/(e+1)}const h6=function e(t,n,s){function a(i,l){var o=i[0],c=i[1],d=i[2],u=l[0],m=l[1],h=l[2],p=u-o,y=m-c,b=p*p+y*y,j,g;if(b<u6)g=Math.log(h/d)/t,j=function(k){return[o+k*p,c+k*y,d*Math.exp(t*k*g)]};else{var f=Math.sqrt(b),x=(h*h-d*d+s*b)/(2*d*n*f),v=(h*h-d*d-s*b)/(2*h*n*f),w=Math.log(Math.sqrt(x*x+1)-x),_=Math.log(Math.sqrt(v*v+1)-v);g=(_-w)/t,j=function(k){var C=k*g,E=ig(w),M=d/(n*f)*(E*m6(t*C+w)-d6(w));return[o+M*p,c+M*y,d*E/ig(t*C+w)]}}return j.duration=g*1e3*t/Math.SQRT2,j}return a.rho=function(i){var l=Math.max(.001,+i),o=l*l,c=o*o;return e(l,o,c)},a}(Math.SQRT2,2,4);var wa=0,ti=0,qa=0,e2=1e3,wc,ni,kc=0,ys=0,eu=0,Gi=typeof performance=="object"&&performance.now?performance:Date,t2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function x0(){return ys||(t2(p6),ys=Gi.now()+eu)}function p6(){ys=0}function _c(){this._call=this._time=this._next=null}_c.prototype=n2.prototype={constructor:_c,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?x0():+n)+(t==null?0:+t),!this._next&&ni!==this&&(ni?ni._next=this:wc=this,ni=this),this._call=e,this._time=n,Pm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pm())}};function n2(e,t,n){var s=new _c;return s.restart(e,t,n),s}function f6(){x0(),++wa;for(var e=wc,t;e;)(t=ys-e._time)>=0&&e._call.call(null,t),e=e._next;--wa}function lg(){ys=(kc=Gi.now())+eu,wa=ti=0;try{f6()}finally{wa=0,x6(),ys=0}}function g6(){var e=Gi.now(),t=e-kc;t>e2&&(eu-=t,kc=e)}function x6(){for(var e,t=wc,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:wc=n);ni=e,Pm(s)}function Pm(e){if(!wa){ti&&(ti=clearTimeout(ti));var t=e-ys;t>24?(e<1/0&&(ti=setTimeout(lg,e-Gi.now()-eu)),qa&&(qa=clearInterval(qa))):(qa||(kc=Gi.now(),qa=setInterval(g6,e2)),wa=1,t2(lg))}}function og(e,t,n){var s=new _c;return t=t==null?0:+t,s.restart(a=>{s.stop(),e(a+t)},t,n),s}var y6=h0("start","end","cancel","interrupt"),v6=[],r2=0,cg=1,Mm=2,go=3,ug=4,Tm=5,xo=6;function tu(e,t,n,s,a,i){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;b6(e,n,{name:t,index:s,group:a,on:y6,tween:v6,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:r2})}function y0(e,t){var n=un(e,t);if(n.state>r2)throw new Error("too late; already scheduled");return n}function Mn(e,t){var n=un(e,t);if(n.state>go)throw new Error("too late; already running");return n}function un(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function b6(e,t,n){var s=e.__transition,a;s[t]=n,n.timer=n2(i,0,n.time);function i(d){n.state=cg,n.timer.restart(l,n.delay,n.time),n.delay<=d&&l(d-n.delay)}function l(d){var u,m,h,p;if(n.state!==cg)return c();for(u in s)if(p=s[u],p.name===n.name){if(p.state===go)return og(l);p.state===ug?(p.state=xo,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete s[u]):+u<t&&(p.state=xo,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete s[u])}if(og(function(){n.state===go&&(n.state=ug,n.timer.restart(o,n.delay,n.time),o(d))}),n.state=Mm,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mm){for(n.state=go,a=new Array(h=n.tween.length),u=0,m=-1;u<h;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(a[++m]=p);a.length=m+1}}function o(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Tm,1),m=-1,h=a.length;++m<h;)a[m].call(e,u);n.state===Tm&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=xo,n.timer.stop(),delete s[t];for(var d in s)return;delete e.__transition}}function yo(e,t){var n=e.__transition,s,a,i=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((s=n[l]).name!==t){i=!1;continue}a=s.state>Mm&&s.state<Tm,s.state=xo,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[l]}i&&delete e.__transition}}function j6(e){return this.each(function(){yo(this,e)})}function N6(e,t){var n,s;return function(){var a=Mn(this,e),i=a.tween;if(i!==n){s=n=i;for(var l=0,o=s.length;l<o;++l)if(s[l].name===t){s=s.slice(),s.splice(l,1);break}}a.tween=s}}function w6(e,t,n){var s,a;if(typeof n!="function")throw new Error;return function(){var i=Mn(this,e),l=i.tween;if(l!==s){a=(s=l).slice();for(var o={name:t,value:n},c=0,d=a.length;c<d;++c)if(a[c].name===t){a[c]=o;break}c===d&&a.push(o)}i.tween=a}}function k6(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=un(this.node(),n).tween,a=0,i=s.length,l;a<i;++a)if((l=s[a]).name===e)return l.value;return null}return this.each((t==null?N6:w6)(n,e,t))}function v0(e,t,n){var s=e._id;return e.each(function(){var a=Mn(this,s);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return un(a,s).value[t]}}function s2(e,t){var n;return(typeof t=="number"?lr:t instanceof Hi?sg:(n=Hi(t))?(t=n,sg):a6)(e,t)}function _6(e){return function(){this.removeAttribute(e)}}function S6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function C6(e,t,n){var s,a=n+"",i;return function(){var l=this.getAttribute(e);return l===a?null:l===s?i:i=t(s=l,n)}}function E6(e,t,n){var s,a=n+"",i;return function(){var l=this.getAttributeNS(e.space,e.local);return l===a?null:l===s?i:i=t(s=l,n)}}function P6(e,t,n){var s,a,i;return function(){var l,o=n(this),c;return o==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=o+"",l===c?null:l===s&&c===a?i:(a=c,i=t(s=l,o)))}}function M6(e,t,n){var s,a,i;return function(){var l,o=n(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=o+"",l===c?null:l===s&&c===a?i:(a=c,i=t(s=l,o)))}}function T6(e,t){var n=Jc(e),s=n==="transform"?c6:s2;return this.attrTween(e,typeof t=="function"?(n.local?M6:P6)(n,s,v0(this,"attr."+e,t)):t==null?(n.local?S6:_6)(n):(n.local?E6:C6)(n,s,t))}function F6(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function A6(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function D6(e,t){var n,s;function a(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&A6(e,i)),n}return a._value=t,a}function Q6(e,t){var n,s;function a(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&F6(e,i)),n}return a._value=t,a}function L6(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=Jc(e);return this.tween(n,(s.local?D6:Q6)(s,t))}function R6(e,t){return function(){y0(this,e).delay=+t.apply(this,arguments)}}function I6(e,t){return t=+t,function(){y0(this,e).delay=t}}function O6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?R6:I6)(t,e)):un(this.node(),t).delay}function z6(e,t){return function(){Mn(this,e).duration=+t.apply(this,arguments)}}function $6(e,t){return t=+t,function(){Mn(this,e).duration=t}}function q6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?z6:$6)(t,e)):un(this.node(),t).duration}function U6(e,t){if(typeof t!="function")throw new Error;return function(){Mn(this,e).ease=t}}function B6(e){var t=this._id;return arguments.length?this.each(U6(t,e)):un(this.node(),t).ease}function V6(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Mn(this,e).ease=n}}function Z6(e){if(typeof e!="function")throw new Error;return this.each(V6(this._id,e))}function H6(e){typeof e!="function"&&(e=I1(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var i=t[a],l=i.length,o=s[a]=[],c,d=0;d<l;++d)(c=i[d])&&e.call(c,c.__data__,d,i)&&o.push(c);return new Jn(s,this._parents,this._name,this._id)}function G6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,a=n.length,i=Math.min(s,a),l=new Array(s),o=0;o<i;++o)for(var c=t[o],d=n[o],u=c.length,m=l[o]=new Array(u),h,p=0;p<u;++p)(h=c[p]||d[p])&&(m[p]=h);for(;o<s;++o)l[o]=t[o];return new Jn(l,this._parents,this._name,this._id)}function W6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function K6(e,t,n){var s,a,i=W6(t)?y0:Mn;return function(){var l=i(this,e),o=l.on;o!==s&&(a=(s=o).copy()).on(t,n),l.on=a}}function Y6(e,t){var n=this._id;return arguments.length<2?un(this.node(),n).on.on(e):this.each(K6(n,e,t))}function X6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function J6(){return this.on("end.remove",X6(this._id))}function eC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=p0(e));for(var s=this._groups,a=s.length,i=new Array(a),l=0;l<a;++l)for(var o=s[l],c=o.length,d=i[l]=new Array(c),u,m,h=0;h<c;++h)(u=o[h])&&(m=e.call(u,u.__data__,h,o))&&("__data__"in u&&(m.__data__=u.__data__),d[h]=m,tu(d[h],t,n,h,d,un(u,n)));return new Jn(i,this._parents,t,n)}function tC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=R1(e));for(var s=this._groups,a=s.length,i=[],l=[],o=0;o<a;++o)for(var c=s[o],d=c.length,u,m=0;m<d;++m)if(u=c[m]){for(var h=e.call(u,u.__data__,m,c),p,y=un(u,n),b=0,j=h.length;b<j;++b)(p=h[b])&&tu(p,t,n,b,h,y);i.push(h),l.push(u)}return new Jn(i,l,t,n)}var nC=xl.prototype.constructor;function rC(){return new nC(this._groups,this._parents)}function sC(e,t){var n,s,a;return function(){var i=Na(this,e),l=(this.style.removeProperty(e),Na(this,e));return i===l?null:i===n&&l===s?a:a=t(n=i,s=l)}}function a2(e){return function(){this.style.removeProperty(e)}}function aC(e,t,n){var s,a=n+"",i;return function(){var l=Na(this,e);return l===a?null:l===s?i:i=t(s=l,n)}}function iC(e,t,n){var s,a,i;return function(){var l=Na(this,e),o=n(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),Na(this,e))),l===c?null:l===s&&c===a?i:(a=c,i=t(s=l,o))}}function lC(e,t){var n,s,a,i="style."+t,l="end."+i,o;return function(){var c=Mn(this,e),d=c.on,u=c.value[i]==null?o||(o=a2(t)):void 0;(d!==n||a!==u)&&(s=(n=d).copy()).on(l,a=u),c.on=s}}function oC(e,t,n){var s=(e+="")=="transform"?o6:s2;return t==null?this.styleTween(e,sC(e,s)).on("end.style."+e,a2(e)):typeof t=="function"?this.styleTween(e,iC(e,s,v0(this,"style."+e,t))).each(lC(this._id,e)):this.styleTween(e,aC(e,s,t),n).on("end.style."+e,null)}function cC(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function uC(e,t,n){var s,a;function i(){var l=t.apply(this,arguments);return l!==a&&(s=(a=l)&&cC(e,l,n)),s}return i._value=t,i}function dC(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,uC(e,t,n??""))}function mC(e){return function(){this.textContent=e}}function hC(e){return function(){var t=e(this);this.textContent=t??""}}function pC(e){return this.tween("text",typeof e=="function"?hC(v0(this,"text",e)):mC(e==null?"":e+""))}function fC(e){return function(t){this.textContent=e.call(this,t)}}function gC(e){var t,n;function s(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&fC(a)),t}return s._value=e,s}function xC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gC(e))}function yC(){for(var e=this._name,t=this._id,n=i2(),s=this._groups,a=s.length,i=0;i<a;++i)for(var l=s[i],o=l.length,c,d=0;d<o;++d)if(c=l[d]){var u=un(c,t);tu(c,e,n,d,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Jn(s,this._parents,e,n)}function vC(){var e,t,n=this,s=n._id,a=n.size();return new Promise(function(i,l){var o={value:l},c={value:function(){--a===0&&i()}};n.each(function(){var d=Mn(this,s),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),d.on=t}),a===0&&i()})}var bC=0;function Jn(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function i2(){return++bC}var qr=xl.prototype;Jn.prototype={constructor:Jn,select:eC,selectAll:tC,filter:H6,merge:G6,selection:rC,transition:yC,call:qr.call,nodes:qr.nodes,node:qr.node,size:qr.size,empty:qr.empty,each:qr.each,on:Y6,attr:T6,attrTween:L6,style:oC,styleTween:dC,text:pC,textTween:xC,remove:J6,tween:k6,delay:O6,duration:q6,ease:B6,easeVarying:Z6,end:vC,[Symbol.iterator]:qr[Symbol.iterator]};function jC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var NC={time:null,delay:0,duration:250,ease:jC};function wC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function kC(e){var t,n;e instanceof Jn?(t=e._id,e=e._name):(t=i2(),(n=NC).time=x0(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,i=0;i<a;++i)for(var l=s[i],o=l.length,c,d=0;d<o;++d)(c=l[d])&&tu(c,e,t,d,l,n||wC(c,t));return new Jn(s,this._parents,e,t)}xl.prototype.interrupt=j6;xl.prototype.transition=kC;const Yl=e=>()=>e;function _C(e,{sourceEvent:t,target:n,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Bn(e,t,n){this.k=e,this.x=t,this.y=n}Bn.prototype={constructor:Bn,scale:function(e){return e===1?this:new Bn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Bn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var b0=new Bn(1,0,0);Bn.prototype;function qu(e){e.stopImmediatePropagation()}function Ua(e){e.preventDefault(),e.stopImmediatePropagation()}function SC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function CC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function dg(){return this.__zoom||b0}function EC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function PC(){return navigator.maxTouchPoints||"ontouchstart"in this}function MC(e,t,n){var s=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l))}function TC(){var e=SC,t=CC,n=MC,s=EC,a=PC,i=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],o=250,c=h6,d=h0("start","zoom","end"),u,m,h,p=500,y=150,b=0,j=10;function g(P){P.property("__zoom",dg).on("wheel.zoom",C).on("mousedown.zoom",E).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",A).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(P,T,F,U){var D=P.selection?P.selection():P;D.property("__zoom",dg),P!==D?w(P,T,F,U):D.interrupt().each(function(){_(this,arguments).event(U).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},g.scaleBy=function(P,T,F,U){g.scaleTo(P,function(){var D=this.__zoom.k,L=typeof T=="function"?T.apply(this,arguments):T;return D*L},F,U)},g.scaleTo=function(P,T,F,U){g.transform(P,function(){var D=t.apply(this,arguments),L=this.__zoom,O=F==null?v(D):typeof F=="function"?F.apply(this,arguments):F,W=L.invert(O),J=typeof T=="function"?T.apply(this,arguments):T;return n(x(f(L,J),O,W),D,l)},F,U)},g.translateBy=function(P,T,F,U){g.transform(P,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof F=="function"?F.apply(this,arguments):F),t.apply(this,arguments),l)},null,U)},g.translateTo=function(P,T,F,U,D){g.transform(P,function(){var L=t.apply(this,arguments),O=this.__zoom,W=U==null?v(L):typeof U=="function"?U.apply(this,arguments):U;return n(b0.translate(W[0],W[1]).scale(O.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof F=="function"?-F.apply(this,arguments):-F),L,l)},U,D)};function f(P,T){return T=Math.max(i[0],Math.min(i[1],T)),T===P.k?P:new Bn(T,P.x,P.y)}function x(P,T,F){var U=T[0]-F[0]*P.k,D=T[1]-F[1]*P.k;return U===P.x&&D===P.y?P:new Bn(P.k,U,D)}function v(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function w(P,T,F,U){P.on("start.zoom",function(){_(this,arguments).event(U).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(U).end()}).tween("zoom",function(){var D=this,L=arguments,O=_(D,L).event(U),W=t.apply(D,L),J=F==null?v(W):typeof F=="function"?F.apply(D,L):F,le=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),B=D.__zoom,oe=typeof T=="function"?T.apply(D,L):T,be=c(B.invert(J).concat(le/B.k),oe.invert(J).concat(le/oe.k));return function($e){if($e===1)$e=oe;else{var Ot=be($e),De=le/Ot[2];$e=new Bn(De,J[0]-Ot[0]*De,J[1]-Ot[1]*De)}O.zoom(null,$e)}})}function _(P,T,F){return!F&&P.__zooming||new k(P,T)}function k(P,T){this.that=P,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,T),this.taps=0}k.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,T){return this.mouse&&P!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var T=$n(this.that).datum();d.call(P,this.that,new _C(P,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:d}),T)}};function C(P,...T){if(!e.apply(this,arguments))return;var F=_(this,T).event(P),U=this.__zoom,D=Math.max(i[0],Math.min(i[1],U.k*Math.pow(2,s.apply(this,arguments)))),L=$r(P);if(F.wheel)(F.mouse[0][0]!==L[0]||F.mouse[0][1]!==L[1])&&(F.mouse[1]=U.invert(F.mouse[0]=L)),clearTimeout(F.wheel);else{if(U.k===D)return;F.mouse=[L,U.invert(L)],yo(this),F.start()}Ua(P),F.wheel=setTimeout(O,y),F.zoom("mouse",n(x(f(U,D),F.mouse[0],F.mouse[1]),F.extent,l));function O(){F.wheel=null,F.end()}}function E(P,...T){if(h||!e.apply(this,arguments))return;var F=_(this,T,!0).event(P),U=$n(P.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",le,!0),D=$r(P,L),L=P.currentTarget,O=P.clientX,W=P.clientY;qS(P.view),qu(P),F.mouse=[D,this.__zoom.invert(D)],yo(this),F.start();function J(B){if(Ua(B),!F.moved){var oe=B.clientX-O,be=B.clientY-W;F.moved=oe*oe+be*be>b}F.event(B).zoom("mouse",n(x(F.that.__zoom,F.mouse[0]=$r(B,L),F.mouse[1]),F.extent,l))}function le(B){U.on("mousemove.zoom mouseup.zoom",null),US(B.view,F.moved),Ua(B),F.event(B).end()}}function M(P,...T){if(e.apply(this,arguments)){var F=this.__zoom,U=$r(P.changedTouches?P.changedTouches[0]:P,this),D=F.invert(U),L=F.k*(P.shiftKey?.5:2),O=n(x(f(F,L),U,D),t.apply(this,T),l);Ua(P),o>0?$n(this).transition().duration(o).call(w,O,U,P):$n(this).call(g.transform,O,U,P)}}function A(P,...T){if(e.apply(this,arguments)){var F=P.touches,U=F.length,D=_(this,T,P.changedTouches.length===U).event(P),L,O,W,J;for(qu(P),O=0;O<U;++O)W=F[O],J=$r(W,this),J=[J,this.__zoom.invert(J),W.identifier],D.touch0?!D.touch1&&D.touch0[2]!==J[2]&&(D.touch1=J,D.taps=0):(D.touch0=J,L=!0,D.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(D.taps<2&&(m=J[0],u=setTimeout(function(){u=null},p)),yo(this),D.start())}}function $(P,...T){if(this.__zooming){var F=_(this,T).event(P),U=P.changedTouches,D=U.length,L,O,W,J;for(Ua(P),L=0;L<D;++L)O=U[L],W=$r(O,this),F.touch0&&F.touch0[2]===O.identifier?F.touch0[0]=W:F.touch1&&F.touch1[2]===O.identifier&&(F.touch1[0]=W);if(O=F.that.__zoom,F.touch1){var le=F.touch0[0],B=F.touch0[1],oe=F.touch1[0],be=F.touch1[1],$e=($e=oe[0]-le[0])*$e+($e=oe[1]-le[1])*$e,Ot=(Ot=be[0]-B[0])*Ot+(Ot=be[1]-B[1])*Ot;O=f(O,Math.sqrt($e/Ot)),W=[(le[0]+oe[0])/2,(le[1]+oe[1])/2],J=[(B[0]+be[0])/2,(B[1]+be[1])/2]}else if(F.touch0)W=F.touch0[0],J=F.touch0[1];else return;F.zoom("touch",n(x(O,W,J),F.extent,l))}}function K(P,...T){if(this.__zooming){var F=_(this,T).event(P),U=P.changedTouches,D=U.length,L,O;for(qu(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),L=0;L<D;++L)O=U[L],F.touch0&&F.touch0[2]===O.identifier?delete F.touch0:F.touch1&&F.touch1[2]===O.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(O=$r(O,this),Math.hypot(m[0]-O[0],m[1]-O[1])<j)){var W=$n(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return g.wheelDelta=function(P){return arguments.length?(s=typeof P=="function"?P:Yl(+P),g):s},g.filter=function(P){return arguments.length?(e=typeof P=="function"?P:Yl(!!P),g):e},g.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:Yl(!!P),g):a},g.extent=function(P){return arguments.length?(t=typeof P=="function"?P:Yl([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),g):t},g.scaleExtent=function(P){return arguments.length?(i[0]=+P[0],i[1]=+P[1],g):[i[0],i[1]]},g.translateExtent=function(P){return arguments.length?(l[0][0]=+P[0][0],l[1][0]=+P[1][0],l[0][1]=+P[0][1],l[1][1]=+P[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(P){return arguments.length?(n=P,g):n},g.duration=function(P){return arguments.length?(o=+P,g):o},g.interpolate=function(P){return arguments.length?(c=P,g):c},g.on=function(){var P=d.on.apply(d,arguments);return P===d?g:P},g.clickDistance=function(P){return arguments.length?(b=(P=+P)*P,g):Math.sqrt(b)},g.tapDistance=function(P){return arguments.length?(j=+P,g):j},g}function mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mg(Object(n),!0).forEach(function(s){FC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mg(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function FC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Et.apply(this,arguments)}function AC(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Kt(e,t){if(e==null)return{};var n=AC(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ge(e,t){return DC(e)||QC(e,t)||LC(e,t)||RC()}function DC(e){if(Array.isArray(e))return e}function QC(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s=[],a=!0,i=!1,l,o;try{for(n=n.call(e);!(a=(l=n.next()).done)&&(s.push(l.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,o=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw o}}return s}}function LC(e,t){if(e){if(typeof e=="string")return hg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hg(e,t)}}function hg(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function RC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var IC=["width","height","projection","projectionConfig"],OC=C1,zC=Kt(e_,["geoPath"]),Tn=N.createContext(),$C=function(t){var n=t.projectionConfig,s=n===void 0?{}:n,a=t.projection,i=a===void 0?"geoEqualEarth":a,l=t.width,o=l===void 0?800:l,c=t.height,d=c===void 0?600:c,u=typeof i=="function";if(u)return i;var m=zC[i]().translate([o/2,d/2]),h=[m.center?"center":null,m.rotate?"rotate":null,m.scale?"scale":null,m.parallels?"parallels":null];return h.forEach(function(p){p&&(m=m[p](s[p]||m[p]()))}),m},l2=function(t){var n=t.width,s=t.height,a=t.projection,i=t.projectionConfig,l=Kt(t,IC),o=i.center||[],c=Ge(o,2),d=c[0],u=c[1],m=i.rotate||[],h=Ge(m,3),p=h[0],y=h[1],b=h[2],j=i.parallels||[],g=Ge(j,2),f=g[0],x=g[1],v=i.scale||null,w=N.useMemo(function(){return $C({projectionConfig:{center:d||d===0||u||u===0?[d,u]:null,rotate:p||p===0||y||y===0?[p,y,b]:null,parallels:f||f===0||x||x===0?[f,x]:null,scale:v},projection:a,width:n,height:s})},[n,s,a,d,u,p,y,b,f,x,v]),_=N.useCallback(w,[w]),k=N.useMemo(function(){return{width:n,height:s,projection:_,path:OC().projection(_)}},[n,s,_]);return Te.createElement(Tn.Provider,Et({value:k},l))};l2.propTypes={width:z.number,height:z.number,projection:z.oneOfType([z.string,z.func]),projectionConfig:z.object};var qC=["width","height","projection","projectionConfig","className"],vl=N.forwardRef(function(e,t){var n=e.width,s=n===void 0?800:n,a=e.height,i=a===void 0?600:a,l=e.projection,o=l===void 0?"geoEqualEarth":l,c=e.projectionConfig,d=c===void 0?{}:c,u=e.className,m=u===void 0?"":u,h=Kt(e,qC);return Te.createElement(l2,{width:s,height:i,projection:o,projectionConfig:d},Te.createElement("svg",Et({ref:t,viewBox:"0 0 ".concat(s," ").concat(i),className:"rsm-svg ".concat(m)},h)))});vl.displayName="ComposableMap";vl.propTypes={width:z.number,height:z.number,projection:z.oneOfType([z.string,z.func]),projectionConfig:z.object,className:z.string};function pg(e,t,n){var s=(e*n.k-e)/2,a=(t*n.k-t)/2;return[e/2-(s+n.x)/n.k,t/2-(a+n.y)/n.k]}function UC(e){return fetch(e).then(function(t){if(!t.ok)throw Error(t.statusText);return t.json()}).catch(function(t){console.log("There was a problem when fetching the data: ",t)})}function fg(e,t){var n=e.type==="Topology";if(!n)return t?t(e.features||e):e.features||e;var s=s_(e,e.objects[Object.keys(e.objects)[0]]).features;return t?t(s):s}function gg(e){var t=e.type==="Topology";if(!t)return null;var n=Gf(e,e.objects[Object.keys(e.objects)[0]],function(a,i){return a===i}),s=Gf(e,e.objects[Object.keys(e.objects)[0]],function(a,i){return a!==i});return{outline:n,borders:s}}function BC(e,t,n){return e&&t?{outline:qs(qs({},e),{},{rsmKey:"outline",svgPath:n(e)}),borders:qs(qs({},t),{},{rsmKey:"borders",svgPath:n(t)})}:{}}function VC(e,t){return e?e.map(function(n,s){return qs(qs({},n),{},{rsmKey:"geo-".concat(s),svgPath:t(n)})}):[]}function ZC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.5,s=Array.isArray(n)?n:[n,n],a=e/2*s[0],i=t/2*s[1];return"M".concat(0,",",0," Q",-e/2-a,",").concat(-t/2+i," ").concat(-e,",").concat(-t)}function HC(e){return typeof e=="string"}function GC(e){var t=e.geography,n=e.parseGeographies,s=N.useContext(Tn),a=s.path,i=N.useState({}),l=Ge(i,2),o=l[0],c=l[1];N.useEffect(function(){(typeof window>"u"?"undefined":Fm(window))!=="undefined"&&t&&(HC(t)?UC(t).then(function(p){p&&c({geographies:fg(p,n),mesh:gg(p)})}):c({geographies:fg(t,n),mesh:gg(t)}))},[t,n]);var d=N.useMemo(function(){var p=o.mesh||{},y=BC(p.outline,p.borders,a);return{geographies:VC(o.geographies,a),outline:y.outline,borders:y.borders}},[o,a]),u=d.geographies,m=d.outline,h=d.borders;return{geographies:u,outline:m,borders:h}}var WC=["geography","children","parseGeographies","className"],ka=N.forwardRef(function(e,t){var n=e.geography,s=e.children,a=e.parseGeographies,i=e.className,l=i===void 0?"":i,o=Kt(e,WC),c=N.useContext(Tn),d=c.path,u=c.projection,m=GC({geography:n,parseGeographies:a}),h=m.geographies,p=m.outline,y=m.borders;return Te.createElement("g",Et({ref:t,className:"rsm-geographies ".concat(l)},o),h&&h.length>0&&s({geographies:h,outline:p,borders:y,path:d,projection:u}))});ka.displayName="Geographies";ka.propTypes={geography:z.oneOfType([z.string,z.object,z.array]),children:z.func,parseGeographies:z.func,className:z.string};var KC=["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],j0=N.forwardRef(function(e,t){var n=e.geography,s=e.onMouseEnter,a=e.onMouseLeave,i=e.onMouseDown,l=e.onMouseUp,o=e.onFocus,c=e.onBlur,d=e.style,u=d===void 0?{}:d,m=e.className,h=m===void 0?"":m,p=Kt(e,KC),y=N.useState(!1),b=Ge(y,2),j=b[0],g=b[1],f=N.useState(!1),x=Ge(f,2),v=x[0],w=x[1];function _($){w(!0),s&&s($)}function k($){w(!1),j&&g(!1),a&&a($)}function C($){w(!0),o&&o($)}function E($){w(!1),j&&g(!1),c&&c($)}function M($){g(!0),i&&i($)}function A($){g(!1),l&&l($)}return Te.createElement("path",Et({ref:t,tabIndex:"0",className:"rsm-geography ".concat(h),d:n.svgPath,onMouseEnter:_,onMouseLeave:k,onFocus:C,onBlur:E,onMouseDown:M,onMouseUp:A,style:u[j||v?j?"pressed":"hover":"default"]},p))});j0.displayName="Geography";j0.propTypes={geography:z.object,onMouseEnter:z.func,onMouseLeave:z.func,onMouseDown:z.func,onMouseUp:z.func,onFocus:z.func,onBlur:z.func,style:z.object,className:z.string};var N0=N.memo(j0),YC=["fill","stroke","step","className"],w0=N.forwardRef(function(e,t){var n=e.fill,s=n===void 0?"transparent":n,a=e.stroke,i=a===void 0?"currentcolor":a,l=e.step,o=l===void 0?[10,10]:l,c=e.className,d=c===void 0?"":c,u=Kt(e,YC),m=N.useContext(Tn),h=m.path;return Te.createElement("path",Et({ref:t,d:h(Xh().step(o)()),fill:s,stroke:i,className:"rsm-graticule ".concat(d)},u))});w0.displayName="Graticule";w0.propTypes={fill:z.string,stroke:z.string,step:z.array,className:z.string};N.memo(w0);var XC=["value"],JC=N.createContext(),e8={x:0,y:0,k:1,transformString:"translate(0 0) scale(1)"},o2=function(t){var n=t.value,s=n===void 0?e8:n,a=Kt(t,XC);return Te.createElement(JC.Provider,Et({value:s},a))};o2.propTypes={x:z.number,y:z.number,k:z.number,transformString:z.string};function t8(e){var t=e.center,n=e.filterZoomEvent,s=e.onMoveStart,a=e.onMoveEnd,i=e.onMove,l=e.translateExtent,o=l===void 0?[[-1/0,-1/0],[1/0,1/0]]:l,c=e.scaleExtent,d=c===void 0?[1,8]:c,u=e.zoom,m=u===void 0?1:u,h=N.useContext(Tn),p=h.width,y=h.height,b=h.projection,j=Ge(t,2),g=j[0],f=j[1],x=N.useState({x:0,y:0,k:1}),v=Ge(x,2),w=v[0],_=v[1],k=N.useRef({x:0,y:0,k:1}),C=N.useRef(),E=N.useRef(),M=N.useRef(!1),A=Ge(o,2),$=A[0],K=A[1],P=Ge($,2),T=P[0],F=P[1],U=Ge(K,2),D=U[0],L=U[1],O=Ge(d,2),W=O[0],J=O[1];return N.useEffect(function(){var le=$n(C.current);function B(De){!s||M.current||s({coordinates:b.invert(pg(p,y,De.transform)),zoom:De.transform.k},De)}function oe(De){if(!M.current){var tr=De.transform,Aa=De.sourceEvent;_({x:tr.x,y:tr.y,k:tr.k,dragging:Aa}),i&&i({x:tr.x,y:tr.y,zoom:tr.k,dragging:Aa},De)}}function be(De){if(M.current){M.current=!1;return}var tr=b.invert(pg(p,y,De.transform)),Aa=Ge(tr,2),S0=Aa[0],C0=Aa[1];k.current={x:S0,y:C0,k:De.transform.k},a&&a({coordinates:[S0,C0],zoom:De.transform.k},De)}function $e(De){return n?n(De):De?!De.ctrlKey&&!De.button:!1}var Ot=TC().filter($e).scaleExtent([W,J]).translateExtent([[T,F],[D,L]]).on("start",B).on("zoom",oe).on("end",be);E.current=Ot,le.call(Ot)},[p,y,T,F,D,L,W,J,b,s,i,a,n]),N.useEffect(function(){if(!(g===k.current.x&&f===k.current.y&&m===k.current.k)){var le=b([g,f]),B=le[0]*m,oe=le[1]*m,be=$n(C.current);M.current=!0,be.call(E.current.transform,b0.translate(p/2-B,y/2-oe).scale(m)),_({x:p/2-B,y:y/2-oe,k:m}),k.current={x:g,y:f,k:m}}},[g,f,m,p,y,b]),{mapRef:C,position:w,transformString:"translate(".concat(w.x," ").concat(w.y,") scale(").concat(w.k,")")}}var n8=["center","zoom","minZoom","maxZoom","translateExtent","filterZoomEvent","onMoveStart","onMove","onMoveEnd","className"],nu=N.forwardRef(function(e,t){var n=e.center,s=n===void 0?[0,0]:n,a=e.zoom,i=a===void 0?1:a,l=e.minZoom,o=l===void 0?1:l,c=e.maxZoom,d=c===void 0?8:c,u=e.translateExtent,m=e.filterZoomEvent,h=e.onMoveStart,p=e.onMove,y=e.onMoveEnd,b=e.className,j=Kt(e,n8),g=N.useContext(Tn),f=g.width,x=g.height,v=t8({center:s,filterZoomEvent:m,onMoveStart:h,onMove:p,onMoveEnd:y,scaleExtent:[o,d],translateExtent:u,zoom:i}),w=v.mapRef,_=v.transformString,k=v.position;return Te.createElement(o2,{value:{x:k.x,y:k.y,k:k.k,transformString:_}},Te.createElement("g",{ref:w},Te.createElement("rect",{width:f,height:x,fill:"transparent"}),Te.createElement("g",Et({ref:t,transform:_,className:"rsm-zoomable-group ".concat(b)},j))))});nu.displayName="ZoomableGroup";nu.propTypes={center:z.array,zoom:z.number,minZoom:z.number,maxZoom:z.number,translateExtent:z.arrayOf(z.array),onMoveStart:z.func,onMove:z.func,onMoveEnd:z.func,className:z.string};var r8=["id","fill","stroke","strokeWidth","className"],k0=N.forwardRef(function(e,t){var n=e.id,s=n===void 0?"rsm-sphere":n,a=e.fill,i=a===void 0?"transparent":a,l=e.stroke,o=l===void 0?"currentcolor":l,c=e.strokeWidth,d=c===void 0?.5:c,u=e.className,m=u===void 0?"":u,h=Kt(e,r8),p=N.useContext(Tn),y=p.path,b=N.useMemo(function(){return y({type:"Sphere"})},[y]);return Te.createElement(N.Fragment,null,Te.createElement("defs",null,Te.createElement("clipPath",{id:s},Te.createElement("path",{d:b}))),Te.createElement("path",Et({ref:t,d:b,fill:i,stroke:o,strokeWidth:d,style:{pointerEvents:"none"},className:"rsm-sphere ".concat(m)},h)))});k0.displayName="Sphere";k0.propTypes={id:z.string,fill:z.string,stroke:z.string,strokeWidth:z.number,className:z.string};N.memo(k0);var s8=["coordinates","children","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"],ru=N.forwardRef(function(e,t){var n=e.coordinates,s=e.children,a=e.onMouseEnter,i=e.onMouseLeave,l=e.onMouseDown,o=e.onMouseUp,c=e.onFocus,d=e.onBlur,u=e.style,m=u===void 0?{}:u,h=e.className,p=h===void 0?"":h,y=Kt(e,s8),b=N.useContext(Tn),j=b.projection,g=N.useState(!1),f=Ge(g,2),x=f[0],v=f[1],w=N.useState(!1),_=Ge(w,2),k=_[0],C=_[1],E=j(n),M=Ge(E,2),A=M[0],$=M[1];function K(L){C(!0),a&&a(L)}function P(L){C(!1),x&&v(!1),i&&i(L)}function T(L){C(!0),c&&c(L)}function F(L){C(!1),x&&v(!1),d&&d(L)}function U(L){v(!0),l&&l(L)}function D(L){v(!1),o&&o(L)}return Te.createElement("g",Et({ref:t,transform:"translate(".concat(A,", ").concat($,")"),className:"rsm-marker ".concat(p),onMouseEnter:K,onMouseLeave:P,onFocus:T,onBlur:F,onMouseDown:U,onMouseUp:D,style:m[x||k?x?"pressed":"hover":"default"]},y),s)});ru.displayName="Marker";ru.propTypes={coordinates:z.array,children:z.oneOfType([z.node,z.arrayOf(z.node)]),onMouseEnter:z.func,onMouseLeave:z.func,onMouseDown:z.func,onMouseUp:z.func,onFocus:z.func,onBlur:z.func,style:z.object,className:z.string};var a8=["from","to","coordinates","stroke","strokeWidth","fill","className"],c2=N.forwardRef(function(e,t){var n=e.from,s=n===void 0?[0,0]:n,a=e.to,i=a===void 0?[0,0]:a,l=e.coordinates,o=e.stroke,c=o===void 0?"currentcolor":o,d=e.strokeWidth,u=d===void 0?3:d,m=e.fill,h=m===void 0?"transparent":m,p=e.className,y=p===void 0?"":p,b=Kt(e,a8),j=N.useContext(Tn),g=j.path,f={type:"LineString",coordinates:l||[s,i]};return Te.createElement("path",Et({ref:t,d:g(f),className:"rsm-line ".concat(y),stroke:c,strokeWidth:u,fill:h},b))});c2.displayName="Line";c2.propTypes={from:z.array,to:z.array,coordinates:z.array,stroke:z.string,strokeWidth:z.number,fill:z.string,className:z.string};var i8=["subject","children","connectorProps","dx","dy","curve","className"],u2=N.forwardRef(function(e,t){var n=e.subject,s=e.children,a=e.connectorProps,i=e.dx,l=i===void 0?30:i,o=e.dy,c=o===void 0?30:o,d=e.curve,u=d===void 0?0:d,m=e.className,h=m===void 0?"":m,p=Kt(e,i8),y=N.useContext(Tn),b=y.projection,j=b(n),g=Ge(j,2),f=g[0],x=g[1],v=ZC(l,c,u);return Te.createElement("g",Et({ref:t,transform:"translate(".concat(f+l,", ").concat(x+c,")"),className:"rsm-annotation ".concat(h)},p),Te.createElement("path",Et({d:v,fill:"transparent",stroke:"#000"},a)),s)});u2.displayName="Annotation";u2.propTypes={subject:z.array,children:z.oneOfType([z.node,z.arrayOf(z.node)]),dx:z.number,dy:z.number,curve:z.number,connectorProps:z.object,className:z.string};const vo=[{code:"84",name:"Auvergne-Rhne-Alpes",capital:"Lyon",population:8078652,area_km2:69711,departments:["01","03","07","15","26","38","42","43","63","69","73","74"],climate:"continental",description:"A diverse region featuring the French Alps, the Rhne Valley, and historic Lyon. Known for gastronomy, outdoor sports, and a strong economy."},{code:"27",name:"Bourgogne-Franche-Comt",capital:"Dijon",population:2805580,area_km2:47784,departments:["21","25","39","58","70","71","89","90"],climate:"continental",description:"Famous for Burgundy wines, medieval heritage, and the Jura mountains. A region of rolling hills, historic towns, and rich culinary traditions."},{code:"53",name:"Bretagne",capital:"Rennes",population:3373835,area_km2:27208,departments:["22","29","35","56"],climate:"oceanic",description:"A Celtic peninsula with dramatic coastlines, rich maritime heritage, and distinctive culture. Known for seafood, cider, and medieval villages."},{code:"24",name:"Centre-Val de Loire",capital:"Orlans",population:2576252,area_km2:39151,departments:["18","28","36","37","41","45"],climate:"semi-oceanic",description:"The heart of France featuring magnificent Loire Valley chteaux, vineyards, and a gentle landscape. Rich in history and royal heritage."},{code:"94",name:"Corse",capital:"Ajaccio",population:344679,area_km2:8680,departments:["2A","2B"],climate:"mediterranean",description:'The "Island of Beauty" with stunning mountains, beaches, and unique culture. A Mediterranean paradise with strong local traditions.'},{code:"44",name:"Grand Est",capital:"Strasbourg",population:5561287,area_km2:57433,departments:["08","10","51","52","54","55","57","67","68","88"],climate:"continental",description:"A region blending French and Germanic influences. Home to Strasbourg, Alsatian wine routes, and the Vosges mountains."},{code:"32",name:"Hauts-de-France",capital:"Lille",population:6009976,area_km2:31813,departments:["02","59","60","62","80"],climate:"oceanic",description:"Northern France with Flemish heritage, cathedral cities, and WWI memorial sites. A dynamic region close to Paris, Belgium, and the UK."},{code:"11",name:"le-de-France",capital:"Paris",population:12271794,area_km2:12012,departments:["75","77","78","91","92","93","94","95"],climate:"semi-oceanic",description:"The Paris region - the economic, cultural, and political heart of France. World-class museums, historic monuments, and cosmopolitan lifestyle."},{code:"28",name:"Normandie",capital:"Rouen",population:3327477,area_km2:29907,departments:["14","27","50","61","76"],climate:"oceanic",description:"Historic region of D-Day beaches, medieval abbeys, and apple orchards. Known for Camembert, cider, and impressionist landscapes."},{code:"75",name:"Nouvelle-Aquitaine",capital:"Bordeaux",population:6033952,area_km2:84036,departments:["16","17","19","23","24","33","40","47","64","79","86","87"],climate:"oceanic",description:"The largest region in France, featuring Bordeaux wines, Atlantic beaches, the Dordogne, and the Basque Country. Excellent quality of life."},{code:"76",name:"Occitanie",capital:"Toulouse",population:5973969,area_km2:72724,departments:["09","11","12","30","31","32","34","46","48","65","66","81","82"],climate:"mediterranean",description:"Southern France from the Pyrenees to the Mediterranean. Toulouse aerospace, Cathar castles, beaches, and vibrant cities."},{code:"52",name:"Pays de la Loire",capital:"Nantes",population:3838614,area_km2:32082,departments:["44","49","53","72","85"],climate:"oceanic",description:"Atlantic coast region with dynamic Nantes, Loire Valley vineyards, and charming coastal towns. Growing tech hub with high quality of life."},{code:"93",name:"Provence-Alpes-Cte d'Azur",capital:"Marseille",population:5081101,area_km2:31400,departments:["04","05","06","13","83","84"],climate:"mediterranean",description:"The French Riviera, lavender fields of Provence, and Alpine peaks. Mediterranean lifestyle, historic cities, and world-famous coastline."}],_0=[{code:"01",name:"Ain",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Bourg-en-Bresse",population:656955,area_km2:5762,major_cities:["Bourg-en-Bresse","Oyonnax","Ambrieu-en-Bugey"]},{code:"03",name:"Allier",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Moulins",population:337171,area_km2:7340,major_cities:["Montluon","Vichy","Moulins"]},{code:"07",name:"Ardche",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Privas",population:328278,area_km2:5529,major_cities:["Annonay","Aubenas","Privas"]},{code:"15",name:"Cantal",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Aurillac",population:144692,area_km2:5726,major_cities:["Aurillac","Saint-Flour","Mauriac"]},{code:"26",name:"Drme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Valence",population:516762,area_km2:6530,major_cities:["Valence","Montlimar","Romans-sur-Isre"]},{code:"38",name:"Isre",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Grenoble",population:1271166,area_km2:7431,major_cities:["Grenoble","Saint-Martin-d'Hres","chirolles"]},{code:"42",name:"Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Saint-tienne",population:765634,area_km2:4781,major_cities:["Saint-tienne","Roanne","Saint-Chamond"]},{code:"43",name:"Haute-Loire",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Le Puy-en-Velay",population:227339,area_km2:4977,major_cities:["Le Puy-en-Velay","Monistrol-sur-Loire","Yssingeaux"]},{code:"63",name:"Puy-de-Dme",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Clermont-Ferrand",population:662152,area_km2:7970,major_cities:["Clermont-Ferrand","Cournon-d'Auvergne","Riom"]},{code:"69",name:"Rhne",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Lyon",population:1876051,area_km2:3249,major_cities:["Lyon","Villeurbanne","Vnissieux"]},{code:"73",name:"Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Chambry",population:440347,area_km2:6028,major_cities:["Chambry","Aix-les-Bains","Albertville"]},{code:"74",name:"Haute-Savoie",region_code:"84",region_name:"Auvergne-Rhne-Alpes",prefecture:"Annecy",population:826105,area_km2:4388,major_cities:["Annecy","Thonon-les-Bains","Annemasse"]},{code:"21",name:"Cte-d'Or",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Dijon",population:534124,area_km2:8763,major_cities:["Dijon","Beaune","Chenve"]},{code:"25",name:"Doubs",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Besanon",population:543974,area_km2:5234,major_cities:["Besanon","Montbliard","Pontarlier"]},{code:"39",name:"Jura",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Lons-le-Saunier",population:260681,area_km2:4999,major_cities:["Lons-le-Saunier","Dole","Saint-Claude"]},{code:"58",name:"Nivre",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Nevers",population:204452,area_km2:6817,major_cities:["Nevers","Cosne-Cours-sur-Loire","Varennes-Vauzelles"]},{code:"70",name:"Haute-Sane",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Vesoul",population:235313,area_km2:5360,major_cities:["Vesoul","Hricourt","Lure"]},{code:"71",name:"Sane-et-Loire",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Mcon",population:551493,area_km2:8575,major_cities:["Chalon-sur-Sane","Mcon","Le Creusot"]},{code:"89",name:"Yonne",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Auxerre",population:338291,area_km2:7427,major_cities:["Auxerre","Sens","Joigny"]},{code:"90",name:"Territoire de Belfort",region_code:"27",region_name:"Bourgogne-Franche-Comt",prefecture:"Belfort",population:137252,area_km2:610,major_cities:["Belfort","Delle","Valdoie"]},{code:"22",name:"Ctes-d'Armor",region_code:"53",region_name:"Bretagne",prefecture:"Saint-Brieuc",population:598953,area_km2:6878,major_cities:["Saint-Brieuc","Lannion","Dinan"]},{code:"29",name:"Finistre",region_code:"53",region_name:"Bretagne",prefecture:"Quimper",population:915090,area_km2:6733,major_cities:["Brest","Quimper","Concarneau"]},{code:"35",name:"Ille-et-Vilaine",region_code:"53",region_name:"Bretagne",prefecture:"Rennes",population:1082052,area_km2:6775,major_cities:["Rennes","Saint-Malo","Fougres"]},{code:"56",name:"Morbihan",region_code:"53",region_name:"Bretagne",prefecture:"Vannes",population:777740,area_km2:6823,major_cities:["Lorient","Vannes","Lanester"]},{code:"18",name:"Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Bourges",population:302306,area_km2:7235,major_cities:["Bourges","Vierzon","Saint-Amand-Montrond"]},{code:"28",name:"Eure-et-Loir",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chartres",population:433233,area_km2:5880,major_cities:["Chartres","Dreux","Luc"]},{code:"36",name:"Indre",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Chteauroux",population:220530,area_km2:6791,major_cities:["Chteauroux","Issoudun","Dols"]},{code:"37",name:"Indre-et-Loire",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Tours",population:610079,area_km2:6127,major_cities:["Tours","Jou-ls-Tours","Saint-Cyr-sur-Loire"]},{code:"41",name:"Loir-et-Cher",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Blois",population:331915,area_km2:6343,major_cities:["Blois","Vendme","Romorantin-Lanthenay"]},{code:"45",name:"Loiret",region_code:"24",region_name:"Centre-Val de Loire",prefecture:"Orlans",population:678189,area_km2:6775,major_cities:["Orlans","Olivet","Saint-Jean-de-Braye"]},{code:"2A",name:"Corse-du-Sud",region_code:"94",region_name:"Corse",prefecture:"Ajaccio",population:159622,area_km2:4014,major_cities:["Ajaccio","Porto-Vecchio","Propriano"]},{code:"2B",name:"Haute-Corse",region_code:"94",region_name:"Corse",prefecture:"Bastia",population:185057,area_km2:4666,major_cities:["Bastia","Calvi","Corte"]},{code:"08",name:"Ardennes",region_code:"44",region_name:"Grand Est",prefecture:"Charleville-Mzires",population:270582,area_km2:5229,major_cities:["Charleville-Mzires","Sedan","Rethel"]},{code:"10",name:"Aube",region_code:"44",region_name:"Grand Est",prefecture:"Troyes",population:310242,area_km2:6004,major_cities:["Troyes","Romilly-sur-Seine","La Chapelle-Saint-Luc"]},{code:"51",name:"Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chlons-en-Champagne",population:566855,area_km2:8162,major_cities:["Reims","Chlons-en-Champagne","pernay"]},{code:"52",name:"Haute-Marne",region_code:"44",region_name:"Grand Est",prefecture:"Chaumont",population:172512,area_km2:6211,major_cities:["Chaumont","Saint-Dizier","Langres"]},{code:"54",name:"Meurthe-et-Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Nancy",population:733481,area_km2:5246,major_cities:["Nancy","Vanduvre-ls-Nancy","Lunville"]},{code:"55",name:"Meuse",region_code:"44",region_name:"Grand Est",prefecture:"Bar-le-Duc",population:184083,area_km2:6211,major_cities:["Bar-le-Duc","Verdun","Commercy"]},{code:"57",name:"Moselle",region_code:"44",region_name:"Grand Est",prefecture:"Metz",population:1043522,area_km2:6216,major_cities:["Metz","Thionville","Forbach"]},{code:"67",name:"Bas-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Strasbourg",population:1140939,area_km2:4755,major_cities:["Strasbourg","Haguenau","Schiltigheim"]},{code:"68",name:"Haut-Rhin",region_code:"44",region_name:"Grand Est",prefecture:"Colmar",population:764030,area_km2:3525,major_cities:["Mulhouse","Colmar","Saint-Louis"]},{code:"88",name:"Vosges",region_code:"44",region_name:"Grand Est",prefecture:"pinal",population:367673,area_km2:5874,major_cities:["pinal","Saint-Di-des-Vosges","Grardmer"]},{code:"02",name:"Aisne",region_code:"32",region_name:"Hauts-de-France",prefecture:"Laon",population:531345,area_km2:7369,major_cities:["Saint-Quentin","Soissons","Laon"]},{code:"59",name:"Nord",region_code:"32",region_name:"Hauts-de-France",prefecture:"Lille",population:2608346,area_km2:5743,major_cities:["Lille","Roubaix","Tourcoing"]},{code:"60",name:"Oise",region_code:"32",region_name:"Hauts-de-France",prefecture:"Beauvais",population:829419,area_km2:5860,major_cities:["Beauvais","Compigne","Creil"]},{code:"62",name:"Pas-de-Calais",region_code:"32",region_name:"Hauts-de-France",prefecture:"Arras",population:1465278,area_km2:6671,major_cities:["Calais","Boulogne-sur-Mer","Arras"]},{code:"80",name:"Somme",region_code:"32",region_name:"Hauts-de-France",prefecture:"Amiens",population:571632,area_km2:6170,major_cities:["Amiens","Abbeville","Albert"]},{code:"75",name:"Paris",region_code:"11",region_name:"le-de-France",prefecture:"Paris",population:2145906,area_km2:105,major_cities:["Paris"]},{code:"77",name:"Seine-et-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Melun",population:1421197,area_km2:5915,major_cities:["Meaux","Chelles","Melun"]},{code:"78",name:"Yvelines",region_code:"11",region_name:"le-de-France",prefecture:"Versailles",population:1441398,area_km2:2284,major_cities:["Versailles","Sartrouville","Mantes-la-Jolie"]},{code:"91",name:"Essonne",region_code:"11",region_name:"le-de-France",prefecture:"vry-Courcouronnes",population:1301659,area_km2:1804,major_cities:["vry-Courcouronnes","Corbeil-Essonnes","Massy"]},{code:"92",name:"Hauts-de-Seine",region_code:"11",region_name:"le-de-France",prefecture:"Nanterre",population:1624357,area_km2:176,major_cities:["Boulogne-Billancourt","Nanterre","Courbevoie"]},{code:"93",name:"Seine-Saint-Denis",region_code:"11",region_name:"le-de-France",prefecture:"Bobigny",population:1644903,area_km2:236,major_cities:["Montreuil","Saint-Denis","Aubervilliers"]},{code:"94",name:"Val-de-Marne",region_code:"11",region_name:"le-de-France",prefecture:"Crteil",population:1407124,area_km2:245,major_cities:["Crteil","Vitry-sur-Seine","Saint-Maur-des-Fosss"]},{code:"95",name:"Val-d'Oise",region_code:"11",region_name:"le-de-France",prefecture:"Cergy",population:1249674,area_km2:1246,major_cities:["Argenteuil","Sarcelles","Cergy"]},{code:"14",name:"Calvados",region_code:"28",region_name:"Normandie",prefecture:"Caen",population:695536,area_km2:5548,major_cities:["Caen","Hrouville-Saint-Clair","Lisieux"]},{code:"27",name:"Eure",region_code:"28",region_name:"Normandie",prefecture:"vreux",population:601843,area_km2:6040,major_cities:["vreux","Vernon","Louviers"]},{code:"50",name:"Manche",region_code:"28",region_name:"Normandie",prefecture:"Saint-L",population:495045,area_km2:5938,major_cities:["Cherbourg-en-Cotentin","Saint-L","Granville"]},{code:"61",name:"Orne",region_code:"28",region_name:"Normandie",prefecture:"Alenon",population:279942,area_km2:6103,major_cities:["Alenon","Flers","Argentan"]},{code:"76",name:"Seine-Maritime",region_code:"28",region_name:"Normandie",prefecture:"Rouen",population:1254378,area_km2:6278,major_cities:["Le Havre","Rouen","Dieppe"]},{code:"16",name:"Charente",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Angoulme",population:352015,area_km2:5956,major_cities:["Angoulme","Cognac","Soyaux"]},{code:"17",name:"Charente-Maritime",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"La Rochelle",population:651358,area_km2:6864,major_cities:["La Rochelle","Saintes","Rochefort"]},{code:"19",name:"Corrze",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Tulle",population:240336,area_km2:5857,major_cities:["Brive-la-Gaillarde","Tulle","Ussel"]},{code:"23",name:"Creuse",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Guret",population:116617,area_km2:5565,major_cities:["Guret","La Souterraine","Aubusson"]},{code:"24",name:"Dordogne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Prigueux",population:413223,area_km2:9060,major_cities:["Prigueux","Bergerac","Sarlat-la-Canda"]},{code:"33",name:"Gironde",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Bordeaux",population:1623749,area_km2:1e4,major_cities:["Bordeaux","Mrignac","Pessac"]},{code:"40",name:"Landes",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Mont-de-Marsan",population:413690,area_km2:9243,major_cities:["Mont-de-Marsan","Dax","Biscarrosse"]},{code:"47",name:"Lot-et-Garonne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Agen",population:331271,area_km2:5361,major_cities:["Agen","Villeneuve-sur-Lot","Marmande"]},{code:"64",name:"Pyrnes-Atlantiques",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Pau",population:687240,area_km2:7645,major_cities:["Pau","Bayonne","Anglet"]},{code:"79",name:"Deux-Svres",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Niort",population:374351,area_km2:5999,major_cities:["Niort","Bressuire","Thouars"]},{code:"86",name:"Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Poitiers",population:438435,area_km2:6990,major_cities:["Poitiers","Chtellerault","Buxerolles"]},{code:"87",name:"Haute-Vienne",region_code:"75",region_name:"Nouvelle-Aquitaine",prefecture:"Limoges",population:374426,area_km2:5520,major_cities:["Limoges","Saint-Junien","Panazol"]},{code:"09",name:"Arige",region_code:"76",region_name:"Occitanie",prefecture:"Foix",population:153287,area_km2:4890,major_cities:["Pamiers","Foix","Saint-Girons"]},{code:"11",name:"Aude",region_code:"76",region_name:"Occitanie",prefecture:"Carcassonne",population:374070,area_km2:6139,major_cities:["Narbonne","Carcassonne","Castelnaudary"]},{code:"12",name:"Aveyron",region_code:"76",region_name:"Occitanie",prefecture:"Rodez",population:279595,area_km2:8735,major_cities:["Rodez","Millau","Villefranche-de-Rouergue"]},{code:"30",name:"Gard",region_code:"76",region_name:"Occitanie",prefecture:"Nmes",population:748437,area_km2:5853,major_cities:["Nmes","Als","Bagnols-sur-Cze"]},{code:"31",name:"Haute-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Toulouse",population:1415757,area_km2:6309,major_cities:["Toulouse","Colomiers","Tournefeuille"]},{code:"32",name:"Gers",region_code:"76",region_name:"Occitanie",prefecture:"Auch",population:191377,area_km2:6257,major_cities:["Auch","Condom","Fleurance"]},{code:"34",name:"Hrault",region_code:"76",region_name:"Occitanie",prefecture:"Montpellier",population:1176145,area_km2:6101,major_cities:["Montpellier","Bziers","Ste"]},{code:"46",name:"Lot",region_code:"76",region_name:"Occitanie",prefecture:"Cahors",population:174094,area_km2:5217,major_cities:["Cahors","Figeac","Gourdon"]},{code:"48",name:"Lozre",region_code:"76",region_name:"Occitanie",prefecture:"Mende",population:76601,area_km2:5167,major_cities:["Mende","Marvejols","Saint-Chly-d'Apcher"]},{code:"65",name:"Hautes-Pyrnes",region_code:"76",region_name:"Occitanie",prefecture:"Tarbes",population:229567,area_km2:4464,major_cities:["Tarbes","Lourdes","Bagnres-de-Bigorre"]},{code:"66",name:"Pyrnes-Orientales",region_code:"76",region_name:"Occitanie",prefecture:"Perpignan",population:479979,area_km2:4116,major_cities:["Perpignan","Canet-en-Roussillon","Saint-Estve"]},{code:"81",name:"Tarn",region_code:"76",region_name:"Occitanie",prefecture:"Albi",population:389844,area_km2:5758,major_cities:["Albi","Castres","Gaillac"]},{code:"82",name:"Tarn-et-Garonne",region_code:"76",region_name:"Occitanie",prefecture:"Montauban",population:262618,area_km2:3718,major_cities:["Montauban","Castelsarrasin","Moissac"]},{code:"44",name:"Loire-Atlantique",region_code:"52",region_name:"Pays de la Loire",prefecture:"Nantes",population:1429272,area_km2:6815,major_cities:["Nantes","Saint-Nazaire","Saint-Herblain"]},{code:"49",name:"Maine-et-Loire",region_code:"52",region_name:"Pays de la Loire",prefecture:"Angers",population:818273,area_km2:7107,major_cities:["Angers","Cholet","Saumur"]},{code:"53",name:"Mayenne",region_code:"52",region_name:"Pays de la Loire",prefecture:"Laval",population:307445,area_km2:5175,major_cities:["Laval","Mayenne","Chteau-Gontier-sur-Mayenne"]},{code:"72",name:"Sarthe",region_code:"52",region_name:"Pays de la Loire",prefecture:"Le Mans",population:566506,area_km2:6206,major_cities:["Le Mans","La Flche","Sabl-sur-Sarthe"]},{code:"85",name:"Vende",region_code:"52",region_name:"Pays de la Loire",prefecture:"La Roche-sur-Yon",population:698118,area_km2:6720,major_cities:["La Roche-sur-Yon","Les Sables-d'Olonne","Challans"]},{code:"04",name:"Alpes-de-Haute-Provence",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Digne-les-Bains",population:164308,area_km2:6925,major_cities:["Manosque","Digne-les-Bains","Sisteron"]},{code:"05",name:"Hautes-Alpes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Gap",population:141756,area_km2:5549,major_cities:["Gap","Brianon","Embrun"]},{code:"06",name:"Alpes-Maritimes",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Nice",population:1083310,area_km2:4299,major_cities:["Nice","Antibes","Cannes"]},{code:"13",name:"Bouches-du-Rhne",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Marseille",population:2043110,area_km2:5087,major_cities:["Marseille","Aix-en-Provence","Arles"]},{code:"83",name:"Var",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Toulon",population:1076711,area_km2:5973,major_cities:["Toulon","Frjus","Hyres"]},{code:"84",name:"Vaucluse",region_code:"93",region_name:"Provence-Alpes-Cte d'Azur",prefecture:"Avignon",population:559479,area_km2:3567,major_cities:["Avignon","Orange","Carpentras"]}],l8=e=>_0.filter(t=>t.region_code===e),o8="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/regions.geojson",xg={11:{fill:"#818CF8",hover:"#6366F1"},24:{fill:"#22D3EE",hover:"#06B6D4"},27:{fill:"#34D399",hover:"#10B981"},28:{fill:"#A78BFA",hover:"#8B5CF6"},32:{fill:"#F472B6",hover:"#EC4899"},44:{fill:"#FB923C",hover:"#F97316"},52:{fill:"#4ADE80",hover:"#22C55E"},53:{fill:"#60A5FA",hover:"#3B82F6"},75:{fill:"#F87171",hover:"#EF4444"},76:{fill:"#FCD34D",hover:"#FBBF24"},84:{fill:"#C084FC",hover:"#A855F7"},93:{fill:"#2DD4BF",hover:"#14B8A6"},94:{fill:"#A5B4FC",hover:"#818CF8"}},c8=[{name:"Paris",coordinates:[2.3522,48.8566],size:"large"},{name:"Lyon",coordinates:[4.8357,45.764],size:"large"},{name:"Marseille",coordinates:[5.3698,43.2965],size:"large"},{name:"Toulouse",coordinates:[1.4442,43.6047],size:"large"},{name:"Bordeaux",coordinates:[-.5792,44.8378],size:"large"},{name:"Nantes",coordinates:[-1.5536,47.2184],size:"medium"},{name:"Lille",coordinates:[3.0573,50.6292],size:"medium"},{name:"Strasbourg",coordinates:[7.7521,48.5734],size:"medium"},{name:"Nice",coordinates:[7.262,43.7102],size:"medium"},{name:"Rennes",coordinates:[-1.6778,48.1173],size:"medium"}];function u8({onRegionSelect:e,onGenerateReport:t}){const[n,s]=N.useState(null),[a,i]=N.useState(null),[l,o]=N.useState({x:0,y:0}),c=h=>{const p=vo.find(y=>y.code===h);p&&e(p)},d=(h,p)=>{var j;const y=h.properties.code;s(y);const b=vo.find(g=>g.code===y);if(b){i(b);const g=(j=p.currentTarget.closest(".map-container"))==null?void 0:j.getBoundingClientRect();g&&o({x:p.clientX-g.left,y:p.clientY-g.top})}},u=()=>{s(null),i(null)},m=h=>{var y;const p=(y=h.currentTarget.closest(".map-container"))==null?void 0:y.getBoundingClientRect();p&&o({x:h.clientX-p.left,y:h.clientY-p.top})};return r.jsxs("div",{className:"relative h-full flex flex-col",children:[r.jsxs("div",{className:"mb-3 px-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Metropolitan France"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Click on a region to explore its departments and communes"})]}),r.jsxs("div",{className:"map-container relative flex-1 bg-gradient-to-b from-sky-50 to-blue-100 rounded-xl mx-4 overflow-hidden shadow-inner border border-blue-200",children:[r.jsxs(vl,{projection:"geoMercator",projectionConfig:{center:[2.5,46.5],scale:3200},style:{width:"100%",height:"auto",minHeight:"500px",aspectRatio:"4/3"},children:[r.jsx(ka,{geography:o8,children:({geographies:h})=>h.map(p=>{const y=p.properties.code,b=xg[y]||{fill:"#CBD5E1",hover:"#94A3B8"},j=n===y;return r.jsx(N0,{geography:p,fill:j?b.hover:b.fill,stroke:"#FFFFFF",strokeWidth:1,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>c(y),onMouseEnter:g=>d(p,g),onMouseLeave:u,onMouseMove:m},p.rsmKey)})}),c8.map(h=>{const p=h.size==="large"?5:h.size==="medium"?4:3;return r.jsxs(ru,{coordinates:h.coordinates,children:[r.jsx("circle",{r:p,fill:"#1F2937",stroke:"#FFFFFF",strokeWidth:1.5}),r.jsx("text",{textAnchor:"middle",y:-p-5,style:{fontFamily:"system-ui",fontSize:h.size==="large"?10:9,fontWeight:h.size==="large"?600:500,fill:"#1F2937"},children:h.name})]},h.name)})]}),a&&r.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-4 pointer-events-none z-20 min-w-[240px]",style:{left:Math.min(Math.max(l.x,120),360),top:Math.max(l.y-10,60),transform:"translate(-50%, -100%)"},children:[r.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:a.name}),r.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Capital: ",a.capital]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[(a.population/1e6).toFixed(1),"M"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-xs block",children:"Departments"}),r.jsx("span",{className:"font-semibold text-gray-900",children:a.departments.length})]})]}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:r.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore "})})]})]}),r.jsxs("div",{className:"mt-3 px-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Regions of France"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-1.5",children:vo.map(h=>{const p=xg[h.code],y=n===h.code;return r.jsxs("button",{onClick:()=>e(h),onMouseEnter:()=>s(h.code),onMouseLeave:()=>s(null),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all text-left ${y?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[r.jsx("span",{className:"w-4 h-4 rounded flex-shrink-0 border",style:{backgroundColor:(p==null?void 0:p.fill)||"#6B7280",borderColor:(p==null?void 0:p.hover)||"#4B5563"}}),r.jsx("span",{className:`text-sm truncate ${y?"text-gray-900 font-medium":"text-gray-700"}`,children:h.name})]},h.code)})})]}),r.jsx("div",{className:"mt-4 px-4 pb-4 flex flex-wrap gap-3",children:r.jsxs("button",{onClick:()=>t("FR","France"),className:"btn btn-outline flex items-center gap-2",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate France Overview Report"]})})]})}const d8=N.memo(u8),m8={viewBox:"0 0 400 350",departments:[{code:"75",name:"Paris",path:"M 180,140 Q 195,130 215,130 Q 235,135 245,150 Q 250,170 240,185 Q 225,198 205,195 Q 185,190 175,175 Q 172,158 180,145 Z",labelPosition:{x:210,y:165},cities:[{name:"Paris",x:210,y:162,isCapital:!0}]},{code:"92",name:"Hauts-de-Seine",path:"M 145,145 Q 160,135 175,140 Q 182,150 180,165 Q 175,180 160,185 Q 145,182 138,170 Q 135,155 145,145 Z",labelPosition:{x:160,y:165},cities:[{name:"Nanterre",x:155,y:158,isCapital:!0}]},{code:"93",name:"Seine-Saint-Denis",path:"M 215,120 Q 240,115 260,125 Q 272,140 268,160 Q 258,175 240,180 Q 222,178 215,165 Q 212,145 215,125 Z",labelPosition:{x:242,y:148},cities:[{name:"Bobigny",x:248,y:145,isCapital:!0}]},{code:"94",name:"Val-de-Marne",path:"M 205,195 Q 225,192 245,200 Q 258,215 255,235 Q 242,252 220,250 Q 198,245 190,228 Q 188,210 200,198 Z",labelPosition:{x:225,y:225},cities:[{name:"Crteil",x:230,y:225,isCapital:!0}]},{code:"77",name:"Seine-et-Marne",path:"M 260,125 Q 300,110 340,120 Q 375,140 385,180 Q 388,225 370,270 Q 340,305 290,310 Q 250,300 230,265 Q 220,230 235,195 Q 250,160 260,130 Z",labelPosition:{x:310,y:210},cities:[{name:"Melun",x:295,y:250,isCapital:!0},{name:"Meaux",x:300,y:145},{name:"Fontainebleau",x:290,y:290}]},{code:"78",name:"Yvelines",path:"M 50,120 Q 90,100 130,110 Q 155,125 160,150 Q 158,180 140,205 Q 115,225 80,220 Q 45,208 30,175 Q 25,142 45,120 Z",labelPosition:{x:95,y:165},cities:[{name:"Versailles",x:130,y:175,isCapital:!0},{name:"St-Germain",x:100,y:140}]},{code:"91",name:"Essonne",path:"M 100,225 Q 140,215 180,225 Q 210,245 215,280 Q 205,315 170,330 Q 125,335 90,315 Q 65,290 70,255 Q 80,232 100,225 Z",labelPosition:{x:145,y:275},cities:[{name:"vry",x:160,y:265,isCapital:!0}]},{code:"95",name:"Val-d'Oise",path:"M 120,50 Q 170,35 220,45 Q 260,60 275,95 Q 278,125 260,145 Q 235,160 200,158 Q 165,155 140,140 Q 115,120 110,90 Q 108,65 120,50 Z",labelPosition:{x:190,y:95},cities:[{name:"Pontoise",x:140,y:85,isCapital:!0}]}]},h8={viewBox:"0 0 500 400",departments:[{code:"13",name:"Bouches-du-Rhne",path:"M 80,200 Q 120,180 170,190 Q 210,205 230,240 Q 235,280 210,310 Q 170,335 120,325 Q 75,305 60,265 Q 55,225 75,200 Z",labelPosition:{x:145,y:260},cities:[{name:"Marseille",x:175,y:295,isCapital:!0},{name:"Aix-en-Provence",x:160,y:235},{name:"Arles",x:90,y:270}]},{code:"83",name:"Var",path:"M 230,240 Q 280,220 330,235 Q 375,255 395,295 Q 400,340 370,370 Q 325,390 275,375 Q 235,355 220,315 Q 215,275 230,245 Z",labelPosition:{x:305,y:305},cities:[{name:"Toulon",x:290,y:355,isCapital:!0},{name:"Draguignan",x:340,y:280},{name:"St-Tropez",x:365,y:340}]},{code:"06",name:"Alpes-Maritimes",path:"M 380,180 Q 420,160 460,175 Q 490,200 495,245 Q 485,290 455,320 Q 415,345 375,330 Q 345,305 345,265 Q 350,220 375,190 Z",labelPosition:{x:420,y:255},cities:[{name:"Nice",x:455,y:290,isCapital:!0},{name:"Cannes",x:395,y:315},{name:"Antibes",x:420,y:305}]},{code:"84",name:"Vaucluse",path:"M 80,90 Q 130,70 175,85 Q 210,105 220,145 Q 218,185 190,210 Q 150,230 105,215 Q 65,195 55,155 Q 50,115 75,90 Z",labelPosition:{x:140,y:150},cities:[{name:"Avignon",x:105,y:175,isCapital:!0},{name:"Orange",x:115,y:105}]},{code:"04",name:"Alpes-de-Haute-Provence",path:"M 220,80 Q 280,55 340,75 Q 385,100 395,150 Q 390,200 355,230 Q 310,255 260,240 Q 220,220 210,175 Q 205,125 220,85 Z",labelPosition:{x:300,y:155},cities:[{name:"Digne",x:310,y:165,isCapital:!0}]},{code:"05",name:"Hautes-Alpes",path:"M 290,20 Q 345,10 390,35 Q 425,65 430,115 Q 420,160 385,185 Q 340,205 295,190 Q 255,170 250,125 Q 252,75 285,40 Z",labelPosition:{x:345,y:105},cities:[{name:"Gap",x:340,y:130,isCapital:!0}]}]},p8={viewBox:"0 0 450 320",departments:[{code:"29",name:"Finistre",path:"M 20,100 Q 60,70 110,80 Q 155,95 175,135 Q 180,175 155,210 Q 115,240 65,235 Q 25,220 15,175 Q 10,135 20,100 Z",labelPosition:{x:95,y:155},cities:[{name:"Quimper",x:85,y:195,isCapital:!0},{name:"Brest",x:55,y:115}]},{code:"22",name:"Ctes-d'Armor",path:"M 155,60 Q 210,45 265,60 Q 310,80 325,125 Q 328,170 300,200 Q 255,225 200,215 Q 155,200 145,160 Q 140,115 155,70 Z",labelPosition:{x:235,y:135},cities:[{name:"St-Brieuc",x:255,y:105,isCapital:!0},{name:"Dinan",x:290,y:135}]},{code:"56",name:"Morbihan",path:"M 90,215 Q 145,200 200,215 Q 245,235 260,280 Q 255,320 215,340 Q 160,355 105,335 Q 60,310 55,265 Q 60,225 90,215 Z",labelPosition:{x:160,y:275},cities:[{name:"Vannes",x:175,y:285,isCapital:!0},{name:"Lorient",x:105,y:260}]},{code:"35",name:"Ille-et-Vilaine",path:"M 265,60 Q 330,50 385,75 Q 430,105 440,160 Q 438,215 400,255 Q 350,285 290,275 Q 245,260 235,215 Q 230,170 245,125 Q 255,85 265,65 Z",labelPosition:{x:345,y:165},cities:[{name:"Rennes",x:365,y:180,isCapital:!0},{name:"St-Malo",x:355,y:90}]}]},f8={viewBox:"0 0 450 500",departments:[{code:"33",name:"Gironde",path:"M 40,150 Q 90,130 140,145 Q 180,165 190,210 Q 185,260 150,295 Q 100,320 50,305 Q 15,280 10,230 Q 15,180 40,150 Z",labelPosition:{x:100,y:220},cities:[{name:"Bordeaux",x:115,y:200,isCapital:!0},{name:"Arcachon",x:55,y:260}]},{code:"40",name:"Landes",path:"M 30,295 Q 80,280 130,300 Q 165,330 170,380 Q 160,435 115,465 Q 60,485 20,455 Q -5,415 5,360 Q 15,315 30,295 Z",labelPosition:{x:90,y:380},cities:[{name:"Mont-de-Marsan",x:115,y:365,isCapital:!0}]},{code:"64",name:"Pyrnes-Atlantiques",path:"M 25,455 Q 75,440 125,460 Q 165,485 175,530 Q 165,575 120,595 Q 65,605 25,575 Q -5,545 5,500 Q 15,465 25,455 Z",labelPosition:{x:95,y:520},cities:[{name:"Pau",x:125,y:510,isCapital:!0},{name:"Bayonne",x:45,y:530}]},{code:"24",name:"Dordogne",path:"M 140,130 Q 200,115 255,135 Q 300,160 310,210 Q 305,265 265,300 Q 215,325 160,310 Q 115,290 110,240 Q 115,185 140,145 Z",labelPosition:{x:210,y:220},cities:[{name:"Prigueux",x:210,y:200,isCapital:!0}]},{code:"47",name:"Lot-et-Garonne",path:"M 165,305 Q 220,290 270,310 Q 310,340 315,390 Q 305,440 260,465 Q 205,480 155,455 Q 120,425 125,375 Q 135,325 165,305 Z",labelPosition:{x:220,y:385},cities:[{name:"Agen",x:215,y:395,isCapital:!0}]},{code:"17",name:"Charente-Maritime",path:"M 45,40 Q 100,25 150,45 Q 190,70 195,120 Q 185,170 145,195 Q 95,210 50,190 Q 15,165 15,115 Q 20,65 45,40 Z",labelPosition:{x:110,y:120},cities:[{name:"La Rochelle",x:70,y:95,isCapital:!0}]},{code:"16",name:"Charente",path:"M 150,45 Q 210,30 265,55 Q 305,85 310,140 Q 300,195 255,220 Q 200,238 150,215 Q 115,185 115,135 Q 125,80 150,50 Z",labelPosition:{x:215,y:135},cities:[{name:"Angoulme",x:225,y:145,isCapital:!0}]},{code:"86",name:"Vienne",path:"M 215,20 Q 275,5 330,30 Q 375,60 380,115 Q 370,170 325,200 Q 270,222 215,200 Q 175,175 175,125 Q 182,70 215,30 Z",labelPosition:{x:280,y:115},cities:[{name:"Poitiers",x:295,y:100,isCapital:!0}]}]},g8={viewBox:"0 0 450 400",departments:[{code:"45",name:"Loiret",path:"M 200,30 Q 270,20 330,45 Q 380,80 390,140 Q 385,200 340,240 Q 280,270 215,255 Q 160,235 150,180 Q 150,115 185,65 Z",labelPosition:{x:270,y:145},cities:[{name:"Orlans",x:240,y:130,isCapital:!0}]},{code:"28",name:"Eure-et-Loir",path:"M 80,25 Q 145,15 200,35 Q 240,60 245,110 Q 235,160 190,185 Q 135,200 85,180 Q 45,155 40,105 Q 45,55 80,30 Z",labelPosition:{x:145,y:110},cities:[{name:"Chartres",x:145,y:100,isCapital:!0}]},{code:"41",name:"Loir-et-Cher",path:"M 60,180 Q 120,165 175,185 Q 220,210 225,265 Q 215,320 165,350 Q 105,370 55,345 Q 20,310 25,255 Q 35,200 60,180 Z",labelPosition:{x:125,y:265},cities:[{name:"Blois",x:140,y:245,isCapital:!0}]},{code:"37",name:"Indre-et-Loire",path:"M 15,270 Q 65,250 115,270 Q 155,295 160,350 Q 150,405 100,430 Q 45,445 10,415 Q -15,380 -5,325 Q 5,285 15,270 Z",labelPosition:{x:80,y:350},cities:[{name:"Tours",x:95,y:340,isCapital:!0}]},{code:"36",name:"Indre",path:"M 115,350 Q 175,335 230,360 Q 275,390 280,445 Q 270,500 220,525 Q 160,540 110,515 Q 70,485 75,430 Q 85,375 115,355 Z",labelPosition:{x:180,y:440},cities:[{name:"Chteauroux",x:185,y:430,isCapital:!0}]},{code:"18",name:"Cher",path:"M 230,240 Q 300,225 360,255 Q 410,295 415,360 Q 400,425 345,460 Q 280,485 220,460 Q 175,425 180,365 Q 195,300 230,250 Z",labelPosition:{x:300,y:355},cities:[{name:"Bourges",x:300,y:345,isCapital:!0}]}]},x8={viewBox:"0 0 450 300",departments:[{code:"76",name:"Seine-Maritime",path:"M 230,20 Q 300,10 360,35 Q 410,70 420,130 Q 415,185 370,215 Q 315,240 255,225 Q 205,205 200,150 Q 200,90 230,45 Z",labelPosition:{x:315,y:125},cities:[{name:"Rouen",x:305,y:140,isCapital:!0},{name:"Le Havre",x:255,y:85}]},{code:"27",name:"Eure",path:"M 200,150 Q 255,135 305,155 Q 345,180 350,235 Q 340,285 290,305 Q 235,320 185,295 Q 150,265 155,215 Q 165,170 200,150 Z",labelPosition:{x:255,y:230},cities:[{name:"vreux",x:240,y:215,isCapital:!0}]},{code:"14",name:"Calvados",path:"M 60,100 Q 125,85 185,105 Q 230,130 235,185 Q 225,240 175,265 Q 115,280 60,255 Q 20,225 20,170 Q 30,120 60,100 Z",labelPosition:{x:135,y:180},cities:[{name:"Caen",x:135,y:165,isCapital:!0},{name:"Deauville",x:175,y:145}]},{code:"50",name:"Manche",path:"M 10,60 Q 55,40 100,55 Q 135,80 140,130 Q 130,185 85,215 Q 35,235 0,205 Q -25,170 -15,115 Q -5,75 10,60 Z",labelPosition:{x:60,y:140},cities:[{name:"Saint-L",x:75,y:145,isCapital:!0},{name:"Cherbourg",x:40,y:70}]},{code:"61",name:"Orne",path:"M 85,210 Q 145,195 200,220 Q 245,250 250,305 Q 240,360 190,385 Q 130,400 80,375 Q 45,345 50,290 Q 60,235 85,215 Z",labelPosition:{x:155,y:295},cities:[{name:"Alenon",x:175,y:305,isCapital:!0}]}]},y8={viewBox:"0 0 400 400",departments:[{code:"59",name:"Nord",path:"M 120,15 Q 195,5 260,30 Q 315,65 325,130 Q 320,195 270,235 Q 205,265 140,250 Q 85,225 80,165 Q 85,100 115,50 Z",labelPosition:{x:205,y:135},cities:[{name:"Lille",x:205,y:115,isCapital:!0},{name:"Dunkerque",x:185,y:45},{name:"Valenciennes",x:260,y:175}]},{code:"62",name:"Pas-de-Calais",path:"M 20,50 Q 75,30 130,50 Q 170,80 175,140 Q 165,200 120,230 Q 65,250 25,220 Q -10,185 0,130 Q 10,75 20,55 Z",labelPosition:{x:95,y:145},cities:[{name:"Arras",x:110,y:170,isCapital:!0},{name:"Calais",x:70,y:55},{name:"Boulogne",x:35,y:95}]},{code:"80",name:"Somme",path:"M 25,220 Q 85,200 145,225 Q 195,255 200,315 Q 190,370 140,395 Q 80,410 35,380 Q 5,345 10,290 Q 15,240 25,220 Z",labelPosition:{x:110,y:305},cities:[{name:"Amiens",x:120,y:290,isCapital:!0}]},{code:"60",name:"Oise",path:"M 145,300 Q 210,285 270,310 Q 320,345 325,405 Q 310,460 255,485 Q 190,500 140,470 Q 105,435 110,380 Q 120,325 145,305 Z",labelPosition:{x:220,y:390},cities:[{name:"Beauvais",x:200,y:370,isCapital:!0}]},{code:"02",name:"Aisne",path:"M 270,230 Q 335,215 390,245 Q 435,285 440,350 Q 425,415 370,450 Q 305,475 250,450 Q 210,415 215,355 Q 230,290 270,240 Z",labelPosition:{x:335,y:345},cities:[{name:"Laon",x:335,y:320,isCapital:!0}]}]},v8={viewBox:"0 0 450 400",departments:[{code:"44",name:"Loire-Atlantique",path:"M 30,130 Q 95,110 155,135 Q 200,165 205,225 Q 195,285 145,315 Q 85,335 35,305 Q 0,270 5,210 Q 15,155 30,130 Z",labelPosition:{x:110,y:220},cities:[{name:"Nantes",x:125,y:215,isCapital:!0},{name:"St-Nazaire",x:55,y:185}]},{code:"49",name:"Maine-et-Loire",path:"M 155,135 Q 225,120 290,150 Q 340,185 345,250 Q 335,315 280,350 Q 215,375 155,350 Q 110,315 115,255 Q 125,190 155,150 Z",labelPosition:{x:230,y:245},cities:[{name:"Angers",x:225,y:230,isCapital:!0}]},{code:"53",name:"Mayenne",path:"M 170,25 Q 235,15 295,45 Q 340,80 345,145 Q 335,210 280,245 Q 220,270 165,245 Q 125,210 130,150 Q 140,90 170,45 Z",labelPosition:{x:240,y:145},cities:[{name:"Laval",x:240,y:135,isCapital:!0}]},{code:"72",name:"Sarthe",path:"M 290,45 Q 360,30 420,65 Q 465,105 470,175 Q 460,245 405,285 Q 340,315 280,290 Q 240,255 245,195 Q 255,130 290,70 Z",labelPosition:{x:365,y:175},cities:[{name:"Le Mans",x:365,y:165,isCapital:!0}]},{code:"85",name:"Vende",path:"M 25,290 Q 90,270 150,300 Q 195,335 200,400 Q 185,460 130,490 Q 65,510 20,475 Q -10,435 0,375 Q 10,315 25,295 Z",labelPosition:{x:105,y:390},cities:[{name:"La Roche-sur-Yon",x:105,y:375,isCapital:!0}]}]},b8={viewBox:"0 0 500 450",departments:[{code:"67",name:"Bas-Rhin",path:"M 380,50 Q 430,40 470,70 Q 500,105 500,160 Q 490,215 450,245 Q 400,270 355,250 Q 320,225 325,175 Q 335,115 365,75 Z",labelPosition:{x:415,y:155},cities:[{name:"Strasbourg",x:455,y:165,isCapital:!0}]},{code:"68",name:"Haut-Rhin",path:"M 360,245 Q 410,230 455,260 Q 490,295 490,355 Q 475,410 425,435 Q 370,455 325,430 Q 295,400 300,345 Q 315,285 355,255 Z",labelPosition:{x:395,y:345},cities:[{name:"Colmar",x:425,y:325,isCapital:!0}]},{code:"57",name:"Moselle",path:"M 260,25 Q 325,15 380,50 Q 420,90 420,155 Q 405,220 350,255 Q 285,280 225,255 Q 185,220 190,160 Q 205,95 250,50 Z",labelPosition:{x:305,y:145},cities:[{name:"Metz",x:320,y:145,isCapital:!0}]},{code:"54",name:"Meurthe-et-Moselle",path:"M 175,155 Q 230,140 280,165 Q 320,195 325,255 Q 315,315 265,345 Q 205,365 150,340 Q 115,305 120,250 Q 135,195 175,160 Z",labelPosition:{x:225,y:255},cities:[{name:"Nancy",x:225,y:245,isCapital:!0}]},{code:"88",name:"Vosges",path:"M 265,295 Q 320,280 370,310 Q 410,345 410,410 Q 395,470 340,495 Q 280,510 230,480 Q 200,445 205,390 Q 220,335 265,305 Z",labelPosition:{x:310,y:395},cities:[{name:"pinal",x:315,y:385,isCapital:!0}]},{code:"55",name:"Meuse",path:"M 90,145 Q 145,130 195,155 Q 235,185 235,245 Q 220,305 170,335 Q 115,355 70,330 Q 40,295 45,240 Q 60,180 90,150 Z",labelPosition:{x:145,y:245},cities:[{name:"Bar-le-Duc",x:130,y:275,isCapital:!0}]},{code:"08",name:"Ardennes",path:"M 75,20 Q 135,10 185,40 Q 225,75 225,135 Q 210,195 160,225 Q 105,245 60,220 Q 30,185 35,130 Q 50,70 75,35 Z",labelPosition:{x:135,y:125},cities:[{name:"Charleville",x:140,y:115,isCapital:!0}]},{code:"51",name:"Marne",path:"M 10,180 Q 65,165 115,190 Q 155,220 155,280 Q 140,340 90,370 Q 35,390 0,360 Q -25,325 -15,270 Q 0,210 10,185 Z",labelPosition:{x:70,y:275},cities:[{name:"Chlons",x:75,y:270,isCapital:!0},{name:"Reims",x:50,y:215}]},{code:"52",name:"Haute-Marne",path:"M 115,330 Q 170,315 220,345 Q 260,380 260,440 Q 245,495 195,520 Q 140,535 100,505 Q 70,470 75,420 Q 90,365 115,340 Z",labelPosition:{x:170,y:425},cities:[{name:"Chaumont",x:180,y:420,isCapital:!0}]},{code:"10",name:"Aube",path:"M 15,345 Q 70,330 120,360 Q 160,395 160,455 Q 145,510 95,535 Q 45,550 10,520 Q -15,485 -5,430 Q 5,375 15,350 Z",labelPosition:{x:80,y:440},cities:[{name:"Troyes",x:85,y:430,isCapital:!0}]}]},j8={viewBox:"0 0 450 500",departments:[{code:"21",name:"Cte-d'Or",path:"M 50,100 Q 115,85 175,115 Q 225,150 230,215 Q 220,280 165,315 Q 100,340 50,310 Q 15,275 20,215 Q 30,150 50,105 Z",labelPosition:{x:130,y:210},cities:[{name:"Dijon",x:155,y:185,isCapital:!0}]},{code:"89",name:"Yonne",path:"M 15,15 Q 75,5 130,35 Q 175,70 175,135 Q 160,200 105,230 Q 45,250 10,220 Q -15,185 -5,125 Q 5,65 15,30 Z",labelPosition:{x:90,y:125},cities:[{name:"Auxerre",x:95,y:120,isCapital:!0}]},{code:"58",name:"Nivre",path:"M 5,205 Q 60,190 110,220 Q 150,255 150,315 Q 135,375 80,405 Q 25,425 -5,395 Q -25,360 -15,305 Q -5,250 5,215 Z",labelPosition:{x:75,y:310},cities:[{name:"Nevers",x:70,y:350,isCapital:!0}]},{code:"71",name:"Sane-et-Loire",path:"M 55,310 Q 120,295 180,325 Q 230,360 235,425 Q 220,490 165,520 Q 100,540 50,510 Q 20,475 25,420 Q 40,360 55,320 Z",labelPosition:{x:140,y:420},cities:[{name:"Mcon",x:175,y:475,isCapital:!0}]},{code:"25",name:"Doubs",path:"M 280,190 Q 345,175 400,210 Q 445,250 450,320 Q 435,390 380,425 Q 315,450 260,420 Q 225,385 230,325 Q 245,260 280,205 Z",labelPosition:{x:345,y:310},cities:[{name:"Besanon",x:335,y:295,isCapital:!0}]},{code:"39",name:"Jura",path:"M 210,345 Q 265,330 315,360 Q 355,395 355,460 Q 340,520 285,550 Q 225,570 180,540 Q 150,505 155,450 Q 170,395 210,355 Z",labelPosition:{x:260,y:450},cities:[{name:"Lons-le-Saunier",x:265,y:445,isCapital:!0}]},{code:"70",name:"Haute-Sane",path:"M 215,95 Q 275,80 330,115 Q 375,155 375,220 Q 360,285 305,315 Q 245,335 200,305 Q 170,270 175,215 Q 185,155 215,110 Z",labelPosition:{x:280,y:205},cities:[{name:"Vesoul",x:290,y:190,isCapital:!0}]},{code:"90",name:"Territoire de Belfort",path:"M 365,145 Q 400,135 430,160 Q 455,190 455,235 Q 445,280 415,300 Q 380,315 350,295 Q 330,265 335,220 Q 345,175 365,155 Z",labelPosition:{x:395,y:225},cities:[{name:"Belfort",x:400,y:220,isCapital:!0}]}]},N8={viewBox:"0 0 550 400",departments:[{code:"31",name:"Haute-Garonne",path:"M 120,150 Q 170,135 220,160 Q 260,190 265,250 Q 255,310 205,340 Q 150,360 105,335 Q 75,300 80,245 Q 90,190 120,160 Z",labelPosition:{x:170,y:250},cities:[{name:"Toulouse",x:175,y:235,isCapital:!0}]},{code:"34",name:"Hrault",path:"M 320,200 Q 375,185 425,215 Q 465,250 465,315 Q 450,375 395,400 Q 335,415 290,385 Q 260,350 265,295 Q 280,240 320,210 Z",labelPosition:{x:370,y:300},cities:[{name:"Montpellier",x:400,y:310,isCapital:!0},{name:"Bziers",x:340,y:335}]},{code:"30",name:"Gard",path:"M 425,145 Q 480,130 525,165 Q 555,205 555,270 Q 540,330 485,360 Q 425,380 380,350 Q 355,315 360,260 Q 375,200 420,160 Z",labelPosition:{x:465,y:255},cities:[{name:"Nmes",x:490,y:280,isCapital:!0}]},{code:"11",name:"Aude",path:"M 225,275 Q 280,260 330,290 Q 370,325 370,385 Q 355,440 300,465 Q 240,480 195,450 Q 170,415 175,360 Q 190,305 225,280 Z",labelPosition:{x:275,y:370},cities:[{name:"Carcassonne",x:275,y:360,isCapital:!0}]},{code:"66",name:"Pyrnes-Orientales",path:"M 270,380 Q 325,365 375,395 Q 415,430 415,490 Q 400,545 345,570 Q 285,585 240,555 Q 215,520 220,465 Q 235,410 270,385 Z",labelPosition:{x:325,y:475},cities:[{name:"Perpignan",x:350,y:460,isCapital:!0}]},{code:"09",name:"Arige",path:"M 115,330 Q 165,315 215,345 Q 255,380 255,440 Q 240,495 185,520 Q 125,535 85,505 Q 60,470 65,420 Q 80,365 115,340 Z",labelPosition:{x:165,y:430},cities:[{name:"Foix",x:170,y:425,isCapital:!0}]},{code:"65",name:"Hautes-Pyrnes",path:"M 30,280 Q 80,265 130,295 Q 170,330 170,390 Q 155,445 100,470 Q 45,485 15,455 Q -5,420 0,370 Q 15,315 30,290 Z",labelPosition:{x:90,y:375},cities:[{name:"Tarbes",x:95,y:365,isCapital:!0}]},{code:"32",name:"Gers",path:"M 40,135 Q 95,120 145,150 Q 185,185 185,245 Q 170,300 115,330 Q 55,350 20,320 Q -5,285 0,230 Q 15,175 40,145 Z",labelPosition:{x:95,y:235},cities:[{name:"Auch",x:100,y:225,isCapital:!0}]},{code:"81",name:"Tarn",path:"M 215,130 Q 270,115 325,145 Q 365,180 365,245 Q 350,305 295,335 Q 235,355 190,325 Q 165,290 170,235 Q 185,175 215,145 Z",labelPosition:{x:270,y:235},cities:[{name:"Albi",x:295,y:205,isCapital:!0}]},{code:"82",name:"Tarn-et-Garonne",path:"M 125,65 Q 175,50 225,80 Q 265,115 265,175 Q 250,230 195,260 Q 135,280 95,250 Q 70,215 75,160 Q 90,105 125,75 Z",labelPosition:{x:175,y:165},cities:[{name:"Montauban",x:180,y:155,isCapital:!0}]},{code:"12",name:"Aveyron",path:"M 280,45 Q 345,30 405,65 Q 450,105 455,175 Q 440,245 385,280 Q 320,305 265,275 Q 230,240 235,180 Q 250,115 280,65 Z",labelPosition:{x:350,y:165},cities:[{name:"Rodez",x:355,y:155,isCapital:!0}]},{code:"46",name:"Lot",path:"M 180,5 Q 240,-5 295,25 Q 340,60 345,125 Q 330,190 275,220 Q 215,240 170,210 Q 140,175 145,120 Q 160,60 180,20 Z",labelPosition:{x:250,y:120},cities:[{name:"Cahors",x:250,y:145,isCapital:!0}]},{code:"48",name:"Lozre",path:"M 390,65 Q 445,50 490,85 Q 525,125 525,190 Q 510,250 455,280 Q 395,300 350,270 Q 325,235 330,180 Q 345,120 385,80 Z",labelPosition:{x:435,y:175},cities:[{name:"Mende",x:440,y:170,isCapital:!0}]}]},w8={viewBox:"0 0 500 500",departments:[{code:"69",name:"Rhne",path:"M 145,175 Q 195,160 245,190 Q 285,225 285,290 Q 270,350 215,380 Q 155,400 115,370 Q 90,335 95,280 Q 110,220 145,185 Z",labelPosition:{x:195,y:280},cities:[{name:"Lyon",x:200,y:305,isCapital:!0}]},{code:"42",name:"Loire",path:"M 55,200 Q 110,185 160,215 Q 200,250 200,315 Q 185,375 130,405 Q 70,425 35,395 Q 15,360 20,305 Q 35,250 55,210 Z",labelPosition:{x:115,y:305},cities:[{name:"St-tienne",x:105,y:340,isCapital:!0}]},{code:"63",name:"Puy-de-Dme",path:"M 15,145 Q 70,130 125,160 Q 170,195 170,260 Q 155,320 100,350 Q 40,370 5,340 Q -20,305 -10,250 Q 0,195 15,155 Z",labelPosition:{x:85,y:250},cities:[{name:"Clermont-Fd",x:90,y:240,isCapital:!0}]},{code:"03",name:"Allier",path:"M 45,40 Q 110,25 170,60 Q 220,100 220,170 Q 200,235 145,265 Q 80,285 35,255 Q 5,220 10,160 Q 25,100 45,55 Z",labelPosition:{x:125,y:155},cities:[{name:"Moulins",x:135,y:120,isCapital:!0}]},{code:"43",name:"Haute-Loire",path:"M 60,365 Q 115,350 165,380 Q 205,415 205,475 Q 190,530 135,555 Q 75,570 40,540 Q 20,505 25,455 Q 40,405 60,370 Z",labelPosition:{x:120,y:460},cities:[{name:"Le Puy",x:130,y:445,isCapital:!0}]},{code:"15",name:"Cantal",path:"M 5,305 Q 60,290 110,320 Q 150,355 150,415 Q 135,470 80,495 Q 25,510 -5,480 Q -25,445 -15,395 Q -5,345 5,315 Z",labelPosition:{x:70,y:400},cities:[{name:"Aurillac",x:60,y:420,isCapital:!0}]},{code:"01",name:"Ain",path:"M 200,105 Q 260,90 315,125 Q 360,165 360,235 Q 345,300 290,335 Q 225,360 180,330 Q 155,295 160,240 Q 175,175 200,125 Z",labelPosition:{x:265,y:220},cities:[{name:"Bourg-en-B.",x:270,y:210,isCapital:!0}]},{code:"74",name:"Haute-Savoie",path:"M 330,75 Q 385,60 435,95 Q 475,135 475,200 Q 460,260 405,290 Q 345,310 305,280 Q 280,245 285,195 Q 300,140 330,95 Z",labelPosition:{x:385,y:185},cities:[{name:"Annecy",x:380,y:210,isCapital:!0},{name:"Chamonix",x:435,y:160}]},{code:"73",name:"Savoie",path:"M 305,280 Q 365,265 420,300 Q 465,340 465,410 Q 450,475 395,505 Q 330,525 285,495 Q 260,460 265,405 Q 280,345 305,295 Z",labelPosition:{x:370,y:390},cities:[{name:"Chambry",x:360,y:365,isCapital:!0}]},{code:"38",name:"Isre",path:"M 230,300 Q 295,285 355,320 Q 405,360 405,430 Q 385,495 325,525 Q 260,545 210,515 Q 180,480 185,425 Q 200,365 230,315 Z",labelPosition:{x:305,y:415},cities:[{name:"Grenoble",x:320,y:420,isCapital:!0}]},{code:"26",name:"Drme",path:"M 155,415 Q 215,400 270,435 Q 315,475 315,545 Q 295,605 240,635 Q 175,655 130,625 Q 105,590 110,535 Q 125,475 155,430 Z",labelPosition:{x:220,y:530},cities:[{name:"Valence",x:190,y:495,isCapital:!0}]},{code:"07",name:"Ardche",path:"M 100,455 Q 155,440 205,475 Q 245,515 245,585 Q 225,645 170,675 Q 110,695 70,665 Q 50,630 55,575 Q 70,515 100,470 Z",labelPosition:{x:155,y:570},cities:[{name:"Privas",x:170,y:540,isCapital:!0}]}]},k8={viewBox:"0 0 200 350",departments:[{code:"2B",name:"Haute-Corse",path:"M 55,20 Q 100,10 140,35 Q 170,70 175,125 Q 165,180 125,210 Q 80,235 45,210 Q 20,180 25,125 Q 35,70 55,35 Z",labelPosition:{x:100,y:120},cities:[{name:"Bastia",x:140,y:75,isCapital:!0},{name:"Corte",x:95,y:155}]},{code:"2A",name:"Corse-du-Sud",path:"M 45,200 Q 95,185 140,215 Q 175,250 175,315 Q 160,375 110,405 Q 55,425 25,395 Q 5,360 10,305 Q 25,250 45,210 Z",labelPosition:{x:100,y:305},cities:[{name:"Ajaccio",x:55,y:290,isCapital:!0},{name:"Porto-Vecchio",x:145,y:355}]}]},_8={11:m8,24:g8,27:j8,28:x8,32:y8,44:b8,52:v8,53:p8,75:f8,76:N8,84:w8,93:h8,94:k8};function yg(e){return e in _8}const S8="https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements.geojson",vg=[{fill:"#93C5FD",hover:"#60A5FA"},{fill:"#86EFAC",hover:"#4ADE80"},{fill:"#FCA5A5",hover:"#F87171"},{fill:"#FCD34D",hover:"#FBBF24"},{fill:"#C4B5FD",hover:"#A78BFA"},{fill:"#67E8F9",hover:"#22D3EE"},{fill:"#FDBA74",hover:"#FB923C"},{fill:"#F9A8D4",hover:"#F472B6"},{fill:"#A5B4FC",hover:"#818CF8"},{fill:"#99F6E4",hover:"#5EEAD4"},{fill:"#FDE68A",hover:"#FCD34D"},{fill:"#D8B4FE",hover:"#C084FC"}],C8={11:{center:[2.5,48.7],scale:18e3},24:{center:[1.7,47.3],scale:8e3},27:{center:[5,47],scale:7e3},28:{center:[-.3,49],scale:9e3},32:{center:[2.8,49.9],scale:9e3},44:{center:[5.5,48.7],scale:6e3},52:{center:[-.8,47.5],scale:9e3},53:{center:[-3,48.2],scale:1e4},75:{center:[0,45.5],scale:5500},76:{center:[2,43.8],scale:5500},84:{center:[4.5,45.5],scale:5500},93:{center:[6,44],scale:8e3},94:{center:[9.1,42],scale:12e3}};function E8({regionCode:e,regionName:t,departments:n,onDepartmentSelect:s}){const[a,i]=N.useState(null),[l,o]=N.useState(null),[c,d]=N.useState({x:0,y:0}),u=C8[e]||{center:[2.5,46.5],scale:5e3},m=N.useMemo(()=>n.map(g=>g.code),[n]),h=g=>{const f=m.indexOf(g);return vg[f%vg.length]},p=g=>{const f=n.find(x=>x.code===g);f&&s(f)},y=(g,f)=>{var w;const x=g.properties.code;i(x);const v=n.find(_=>_.code===x);if(v){o(v);const _=(w=f.currentTarget.closest(".map-container"))==null?void 0:w.getBoundingClientRect();_&&d({x:f.clientX-_.left,y:f.clientY-_.top})}},b=()=>{i(null),o(null)},j=g=>{var x;const f=(x=g.currentTarget.closest(".map-container"))==null?void 0:x.getBoundingClientRect();f&&d({x:g.clientX-f.left,y:g.clientY-f.top})};return r.jsxs("div",{className:"relative mb-6",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Departments of ",t]}),r.jsxs("div",{className:"map-container relative bg-gradient-to-br from-sky-50 to-blue-100 rounded-xl overflow-hidden shadow-inner border border-blue-200",children:[r.jsx(vl,{projection:"geoMercator",projectionConfig:{center:u.center,scale:u.scale},style:{width:"100%",height:"auto",minHeight:"350px",maxHeight:"450px"},children:r.jsx(nu,{center:u.center,zoom:1,children:r.jsx(ka,{geography:S8,children:({geographies:g})=>g.filter(f=>m.includes(f.properties.code)).map(f=>{const x=f.properties.code,v=h(x),w=a===x;return r.jsx(N0,{geography:f,fill:w?v.hover:v.fill,stroke:"#FFFFFF",strokeWidth:1.5,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>p(x),onMouseEnter:_=>y(f,_),onMouseLeave:b,onMouseMove:j},f.rsmKey)})})})}),l&&(()=>{const f=c.x<240?{left:c.x+15,top:c.y}:{left:c.x-15,top:c.y,transform:"translateX(-100%)"};return r.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 w-[220px]",style:f,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-xs font-mono bg-gray-100 px-1.5 py-0.5 rounded",children:l.code}),r.jsx("h4",{className:"font-bold text-gray-900",children:l.name})]}),r.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Prefecture: ",l.prefecture]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-xs block",children:"Population"}),r.jsx("span",{className:"font-semibold text-gray-900",children:l.population.toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-400 text-xs block",children:"Area"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[l.area_km2.toLocaleString()," km"]})]})]}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:r.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to explore cities "})})]})})()]}),r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.map(g=>{const f=h(g.code),x=a===g.code;return r.jsxs("button",{onClick:()=>s(g),onMouseEnter:()=>i(g.code),onMouseLeave:()=>i(null),className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all ${x?"bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,children:[r.jsx("span",{className:"w-3 h-3 rounded-sm border border-white shadow-sm",style:{backgroundColor:f.fill}}),r.jsx("span",{className:"font-mono text-gray-500",children:g.code}),r.jsx("span",{className:`truncate ${x?"font-medium":""}`,children:g.name})]},g.code)})})]})}const bg={oceanic:{label:"Oceanic",description:"Mild winters, cool summers, regular rainfall"},continental:{label:"Continental",description:"Cold winters, warm summers, moderate rainfall"},mediterranean:{label:"Mediterranean",description:"Mild winters, hot dry summers, sunny"},mountain:{label:"Mountain",description:"Cold winters with snow, cool summers"},"semi-oceanic":{label:"Semi-Oceanic",description:"Mix of oceanic and continental influences"}},jg=["bg-blue-100 hover:bg-blue-200 border-blue-200","bg-emerald-100 hover:bg-emerald-200 border-emerald-200","bg-purple-100 hover:bg-purple-200 border-purple-200","bg-amber-100 hover:bg-amber-200 border-amber-200","bg-rose-100 hover:bg-rose-200 border-rose-200","bg-cyan-100 hover:bg-cyan-200 border-cyan-200","bg-indigo-100 hover:bg-indigo-200 border-indigo-200","bg-teal-100 hover:bg-teal-200 border-teal-200"];function P8({region:e,onDepartmentSelect:t,onGenerateReport:n,onBack:s}){const[a,i]=N.useState([]),[l,o]=N.useState(!0);N.useEffect(()=>{o(!0);const d=l8(e.code);i(d),o(!1)},[e.code]);const c=bg[e.climate]||bg.oceanic;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("button",{onClick:s,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[r.jsx(Vc,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Back to map"})]}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),r.jsx("p",{className:"text-gray-600 mt-1",children:e.description})]}),r.jsxs("button",{onClick:()=>n(e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate Report"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(_n,{className:"w-4 h-4"}),"Capital"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.capital})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(Qr,{className:"w-4 h-4"}),"Population"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(Go,{className:"w-4 h-4"}),"Departments"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.departments.length})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(dw,{className:"w-4 h-4"}),"Climate"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c.label}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.description})]})]}),!l&&yg(e.code)&&r.jsx(E8,{regionCode:e.code,regionName:e.name,departments:a,onDepartmentSelect:t}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:yg(e.code)?"All Departments":`Departments in ${e.name}`}),l?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(_e,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((d,u)=>r.jsxs("button",{onClick:()=>t(d),className:`text-left p-4 rounded-lg border transition-all ${jg[u%jg.length]}`,children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{children:[r.jsx("span",{className:"text-xs font-mono text-gray-500 bg-white/50 px-1.5 py-0.5 rounded",children:d.code}),r.jsx("h4",{className:"font-semibold text-gray-900 mt-1",children:d.name}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Prefecture: ",d.prefecture]})]})}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-500",children:["Pop: ",d.population.toLocaleString()]}),r.jsx("span",{className:"text-primary-600 font-medium",children:"Explore "})]})]},d.code))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Go,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsxs("p",{children:["Department data coming soon for ",e.name]})]})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Region Reports"}),r.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a comprehensive AI-researched report about ",e.name," including cost of living, healthcare, education, cultural highlights, and practical relocation information. Reports are cached for faster access and updated when regenerated."]})]})]})}const M8=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),T8=(e,t)=>{const n=M8(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},Uu=["#93C5FD","#86EFAC","#FDE68A","#C4B5FD","#67E8F9","#FDBA74","#F9A8D4","#A5B4FC","#99F6E4","#FCA5A5","#D8B4FE","#FCD34D","#6EE7B7","#A5F3FC","#FBBF24"],F8="#3B82F6",A8={75:{center:[2.35,48.86],scale:25e4,minZoom:1,maxZoom:8},77:{center:[2.97,48.55],scale:25e3,minZoom:1,maxZoom:8},78:{center:[1.85,48.8],scale:35e3,minZoom:1,maxZoom:8},91:{center:[2.25,48.53],scale:4e4,minZoom:1,maxZoom:8},92:{center:[2.22,48.86],scale:7e4,minZoom:1,maxZoom:8},93:{center:[2.45,48.92],scale:7e4,minZoom:1,maxZoom:8},94:{center:[2.47,48.78],scale:6e4,minZoom:1,maxZoom:8},95:{center:[2.15,49.05],scale:4e4,minZoom:1,maxZoom:8},22:{center:[-2.98,48.45],scale:18e3,minZoom:1,maxZoom:8},29:{center:[-4.15,48.35],scale:16e3,minZoom:1,maxZoom:8},35:{center:[-1.68,48.1],scale:18e3,minZoom:1,maxZoom:8},56:{center:[-2.85,47.75],scale:18e3,minZoom:1,maxZoom:8},"04":{center:[6.25,44.05],scale:14e3,minZoom:1,maxZoom:8},"05":{center:[6.35,44.65],scale:18e3,minZoom:1,maxZoom:8},"06":{center:[7.2,43.85],scale:2e4,minZoom:1,maxZoom:8},13:{center:[5.05,43.55],scale:2e4,minZoom:1,maxZoom:8},83:{center:[6.25,43.45],scale:18e3,minZoom:1,maxZoom:8},84:{center:[5.15,44],scale:22e3,minZoom:1,maxZoom:8},"01":{center:[5.35,46.1],scale:18e3,minZoom:1,maxZoom:8},"03":{center:[3.35,46.35],scale:16e3,minZoom:1,maxZoom:8},"07":{center:[4.45,44.75],scale:18e3,minZoom:1,maxZoom:8},15:{center:[2.7,45.05],scale:18e3,minZoom:1,maxZoom:8},26:{center:[5.15,44.65],scale:16e3,minZoom:1,maxZoom:8},38:{center:[5.75,45.25],scale:14e3,minZoom:1,maxZoom:8},42:{center:[4.25,45.75],scale:2e4,minZoom:1,maxZoom:8},43:{center:[3.85,45.05],scale:2e4,minZoom:1,maxZoom:8},63:{center:[3.1,45.75],scale:14e3,minZoom:1,maxZoom:8},69:{center:[4.65,45.85],scale:25e3,minZoom:1,maxZoom:8},73:{center:[6.45,45.5],scale:16e3,minZoom:1,maxZoom:8},74:{center:[6.45,46],scale:18e3,minZoom:1,maxZoom:8},"09":{center:[1.55,42.95],scale:2e4,minZoom:1,maxZoom:8},11:{center:[2.35,43.15],scale:18e3,minZoom:1,maxZoom:8},12:{center:[2.65,44.25],scale:14e3,minZoom:1,maxZoom:8},30:{center:[4.2,44],scale:18e3,minZoom:1,maxZoom:8},31:{center:[1.45,43.35],scale:16e3,minZoom:1,maxZoom:8},32:{center:[.55,43.7],scale:18e3,minZoom:1,maxZoom:8},34:{center:[3.55,43.6],scale:18e3,minZoom:1,maxZoom:8},46:{center:[1.65,44.55],scale:2e4,minZoom:1,maxZoom:8},48:{center:[3.5,44.5],scale:2e4,minZoom:1,maxZoom:8},65:{center:[.15,43.05],scale:2e4,minZoom:1,maxZoom:8},66:{center:[2.55,42.6],scale:2e4,minZoom:1,maxZoom:8},81:{center:[2.15,43.85],scale:2e4,minZoom:1,maxZoom:8},82:{center:[1.35,44.05],scale:25e3,minZoom:1,maxZoom:8},16:{center:[.2,45.7],scale:2e4,minZoom:1,maxZoom:8},17:{center:[-.9,45.9],scale:16e3,minZoom:1,maxZoom:8},19:{center:[1.85,45.3],scale:2e4,minZoom:1,maxZoom:8},23:{center:[2.05,46.15],scale:2e4,minZoom:1,maxZoom:8},24:{center:[.85,45.1],scale:14e3,minZoom:1,maxZoom:8},33:{center:[-.6,44.85],scale:14e3,minZoom:1,maxZoom:8},40:{center:[-.85,43.9],scale:14e3,minZoom:1,maxZoom:8},47:{center:[.5,44.35],scale:2e4,minZoom:1,maxZoom:8},64:{center:[-.85,43.25],scale:16e3,minZoom:1,maxZoom:8},79:{center:[-.4,46.55],scale:2e4,minZoom:1,maxZoom:8},86:{center:[.55,46.55],scale:18e3,minZoom:1,maxZoom:8},87:{center:[1.3,45.9],scale:2e4,minZoom:1,maxZoom:8},"08":{center:[4.65,49.75],scale:2e4,minZoom:1,maxZoom:8},10:{center:[4.1,48.3],scale:2e4,minZoom:1,maxZoom:8},51:{center:[4.2,49],scale:14e3,minZoom:1,maxZoom:8},52:{center:[5.2,48.1],scale:18e3,minZoom:1,maxZoom:8},54:{center:[6.2,48.75],scale:2e4,minZoom:1,maxZoom:8},55:{center:[5.4,49],scale:18e3,minZoom:1,maxZoom:8},57:{center:[6.65,49.1],scale:18e3,minZoom:1,maxZoom:8},67:{center:[7.55,48.65],scale:2e4,minZoom:1,maxZoom:8},68:{center:[7.25,47.85],scale:22e3,minZoom:1,maxZoom:8},88:{center:[6.4,48.2],scale:2e4,minZoom:1,maxZoom:8},21:{center:[4.85,47.35],scale:14e3,minZoom:1,maxZoom:8},25:{center:[6.35,47.15],scale:2e4,minZoom:1,maxZoom:8},39:{center:[5.7,46.75],scale:2e4,minZoom:1,maxZoom:8},58:{center:[3.5,47.1],scale:16e3,minZoom:1,maxZoom:8},70:{center:[6.15,47.65],scale:2e4,minZoom:1,maxZoom:8},71:{center:[4.55,46.65],scale:14e3,minZoom:1,maxZoom:8},89:{center:[3.55,47.8],scale:16e3,minZoom:1,maxZoom:8},90:{center:[6.9,47.65],scale:5e4,minZoom:1,maxZoom:8},18:{center:[2.45,46.95],scale:16e3,minZoom:1,maxZoom:8},28:{center:[1.45,48.3],scale:18e3,minZoom:1,maxZoom:8},36:{center:[1.7,46.75],scale:18e3,minZoom:1,maxZoom:8},37:{center:[.75,47.25],scale:18e3,minZoom:1,maxZoom:8},41:{center:[1.35,47.55],scale:18e3,minZoom:1,maxZoom:8},45:{center:[2.35,47.9],scale:16e3,minZoom:1,maxZoom:8},14:{center:[-.4,49.1],scale:2e4,minZoom:1,maxZoom:8},27:{center:[.95,49.1],scale:18e3,minZoom:1,maxZoom:8},50:{center:[-1.3,49.1],scale:18e3,minZoom:1,maxZoom:8},61:{center:[.15,48.55],scale:18e3,minZoom:1,maxZoom:8},76:{center:[.95,49.65],scale:18e3,minZoom:1,maxZoom:8},"02":{center:[3.65,49.55],scale:16e3,minZoom:1,maxZoom:8},59:{center:[3.25,50.35],scale:16e3,minZoom:1,maxZoom:8},60:{center:[2.45,49.4],scale:2e4,minZoom:1,maxZoom:8},62:{center:[2.35,50.5],scale:16e3,minZoom:1,maxZoom:8},80:{center:[2.35,49.9],scale:18e3,minZoom:1,maxZoom:8},44:{center:[-1.7,47.25],scale:16e3,minZoom:1,maxZoom:8},49:{center:[-.55,47.35],scale:16e3,minZoom:1,maxZoom:8},53:{center:[-.8,48.1],scale:2e4,minZoom:1,maxZoom:8},72:{center:[.25,47.95],scale:18e3,minZoom:1,maxZoom:8},85:{center:[-1.35,46.7],scale:18e3,minZoom:1,maxZoom:8},"2A":{center:[8.95,41.9],scale:22e3,minZoom:1,maxZoom:8},"2B":{center:[9.25,42.45],scale:2e4,minZoom:1,maxZoom:8}},D8={center:[2.5,46.5],scale:18e3,minZoom:1,maxZoom:8};function Q8({departmentCode:e,departmentName:t,communes:n,onCommuneSelect:s}){const[a,i]=N.useState(null),[l,o]=N.useState({x:0,y:0}),[c,d]=N.useState(1),u=A8[e]||D8,m=N.useMemo(()=>T8(e,t),[e,t]),h=N.useCallback(C=>Uu[C%Uu.length],[]),p=N.useCallback(C=>n.find(E=>E.name.toLowerCase()===C.toLowerCase()),[n]),y=N.useMemo(()=>_0.find(C=>C.code===e),[e]),b=N.useCallback((C,E)=>{const M=p(C);if(M){s(M);return}const A={code:E,name:C,department_code:e,department_name:t,region_code:(y==null?void 0:y.region_code)||"",region_name:(y==null?void 0:y.region_name)||"",population:0,postal_codes:[],type:"town"};s(A)},[p,s,e,t,y]),j=N.useCallback((C,E)=>{var A;i(C);const M=(A=E.currentTarget.closest(".map-container"))==null?void 0:A.getBoundingClientRect();M&&o({x:E.clientX-M.left,y:E.clientY-M.top})},[]),g=N.useCallback(C=>{var M;const E=(M=C.currentTarget.closest(".map-container"))==null?void 0:M.getBoundingClientRect();E&&o({x:C.clientX-E.left,y:C.clientY-E.top})},[]),f=N.useCallback(()=>{d(C=>Math.min(C*1.5,u.maxZoom))},[u.maxZoom]),x=N.useCallback(()=>{d(C=>Math.max(C/1.5,u.minZoom))},[u.minZoom]),v=N.useCallback(()=>{d(1)},[]),w=N.useCallback(C=>{d(C.zoom)},[]),_=N.useMemo(()=>a?p(a):null,[a,p]),k=N.useMemo(()=>c>=4?8:c>=2.5?6:c>=1.5?5:0,[c]);return r.jsxs("div",{className:"relative mb-6",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Communes of ",t]}),r.jsxs("div",{className:"map-container relative bg-gradient-to-br from-emerald-50 to-green-100 rounded-xl overflow-hidden shadow-inner border border-green-200",children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 flex flex-col gap-1",children:[r.jsx("button",{onClick:f,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom in",children:"+"}),r.jsx("button",{onClick:x,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-700 font-bold","aria-label":"Zoom out",children:""}),r.jsx("button",{onClick:v,className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-200 flex items-center justify-center hover:bg-gray-50 transition-colors text-gray-500 text-xs","aria-label":"Reset zoom",children:""})]}),r.jsxs("div",{className:"absolute bottom-3 right-3 z-10 bg-white/80 backdrop-blur-sm px-2 py-1 rounded text-xs text-gray-600",children:[c.toFixed(1),"x"]}),r.jsxs("div",{className:"absolute top-3 left-3 z-10 bg-white/90 backdrop-blur-sm px-3 py-2 rounded-lg text-xs text-gray-600 max-w-[200px]",children:[r.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Navigate the map:"}),r.jsxs("ul",{className:"space-y-0.5",children:[r.jsx("li",{children:" Zoom in to see commune names"}),r.jsx("li",{children:" Click any commune for details"}),r.jsx("li",{children:" Drag to pan around"})]})]}),r.jsx(vl,{projection:"geoMercator",projectionConfig:{center:u.center,scale:u.scale},style:{width:"100%",height:"auto",minHeight:"450px",maxHeight:"550px"},children:r.jsxs(nu,{center:u.center,zoom:c,minZoom:u.minZoom,maxZoom:u.maxZoom,onMoveEnd:w,children:[r.jsx(ka,{geography:m,children:({geographies:C})=>C.map((E,M)=>{const A=E.properties.nom,$=E.properties.code,P=a===A?F8:h(M);return r.jsx(N0,{geography:E,fill:P,stroke:"#FFFFFF",strokeWidth:.5/c,style:{default:{outline:"none"},hover:{outline:"none",cursor:"pointer"},pressed:{outline:"none"}},onClick:()=>b(A,$),onMouseEnter:T=>j(A,T),onMouseLeave:()=>i(null),onMouseMove:g},E.rsmKey)})}),k>0&&r.jsx(ka,{geography:m,children:({geographies:C})=>C.map(E=>{const M=E.properties.nom,A=E.geometry.coordinates;let $=0,K=0;try{const P=E.geometry.type==="MultiPolygon"?A[0][0]:A[0];if(P&&P.length>0){const T=P.map(U=>U[0]),F=P.map(U=>U[1]);$=(Math.min(...T)+Math.max(...T))/2,K=(Math.min(...F)+Math.max(...F))/2}}catch{return null}return r.jsx(ru,{coordinates:[$,K],children:r.jsx("text",{textAnchor:"middle",fontSize:k/c,fontWeight:"500",fill:"#1F2937",dy:".3em",className:"pointer-events-none select-none",style:{textShadow:"0 0 3px white, 0 0 3px white, 0 0 3px white"},children:M})},`label-${E.rsmKey}`)})})]})}),a&&r.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-3 pointer-events-none z-20 min-w-[180px]",style:{left:Math.min(Math.max(l.x,90),320),top:Math.max(l.y-10,60),transform:"translate(-50%, -100%)"},children:[r.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:a}),_?r.jsxs(r.Fragment,{children:[_.population>0&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Population: ",_.population.toLocaleString()]}),_.postal_codes.length>0&&r.jsxs("p",{className:"text-sm text-gray-500",children:["Postal: ",_.postal_codes[0]]})]}):r.jsx("p",{className:"text-sm text-gray-500",children:t}),r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:r.jsx("span",{className:"text-xs text-primary-600 font-medium",children:"Click to generate report "})})]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-4 text-xs text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:"#3B82F6"}}),r.jsx("span",{children:"Hovered"})]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"flex gap-0.5",children:Uu.slice(0,4).map((C,E)=>r.jsx("span",{className:"w-2 h-3 rounded-sm",style:{backgroundColor:C}},E))}),r.jsx("span",{children:"Communes"})]})]}),r.jsx("div",{className:"text-gray-500",children:"Click any commune to view details and generate a relocation report"})]})]})}const L8=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['']/g,"-").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),R8=(e,t)=>{const n=L8(t);return`https://raw.githubusercontent.com/gregoiredavid/france-geojson/master/departements/${e}-${n}/communes-${e}-${n}.geojson`},I8={city:{icon:yv,label:"City",color:"text-blue-600 bg-blue-100"},town:{icon:ws,label:"Town",color:"text-amber-600 bg-amber-100"},village:{icon:hw,label:"Village",color:"text-emerald-600 bg-emerald-100"}};function O8({department:e,onCommuneSelect:t,onGenerateReport:n,onBack:s}){const[a,i]=N.useState([]),[l,o]=N.useState([]),[c,d]=N.useState(!0),[u,m]=N.useState(""),[h,p]=N.useState("all");N.useEffect(()=>{(async()=>{d(!0);try{const g=R8(e.code,e.name),f=await fetch(g);if(!f.ok)throw new Error(`Failed to fetch GeoJSON: ${f.status}`);const v=(await f.json()).features.map(w=>{const{code:_,nom:k}=w.properties,C=e.major_cities.some(M=>M.toLowerCase()===k.toLowerCase());let E="village";return C?E="city":(k.includes("-")||k.length>15)&&(E="town"),{code:_,name:k,postal_codes:[e.code+"000"],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:E}});v.sort((w,_)=>w.name.localeCompare(_.name,"fr")),i(v),o(v)}catch(g){console.error("Failed to fetch communes from GeoJSON:",g);const f=e.major_cities.map((x,v)=>({code:`${e.code}${String(v+1).padStart(3,"0")}`,name:x,postal_codes:[`${e.code}000`],department_code:e.code,department_name:e.name,region_code:e.region_code,region_name:e.region_name,population:0,type:"city"}));i(f),o(f)}finally{d(!1)}})()},[e]),N.useEffect(()=>{let j=a;if(u.trim()){const g=u.toLowerCase();j=j.filter(f=>f.name.toLowerCase().includes(g)||f.postal_codes.some(x=>x.includes(g)))}h!=="all"&&(j=j.filter(g=>g.type===h)),o(j)},[a,u,h]);const y=N.useCallback(j=>{m(j.target.value)},[]),b={city:l.filter(j=>j.type==="city"),town:l.filter(j=>j.type==="town"),village:l.filter(j=>j.type==="village")};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("button",{onClick:s,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 mb-2 transition-colors",children:[r.jsx(Vc,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:["Back to ",e.region_name]})]}),r.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[e.name," ",r.jsxs("span",{className:"text-gray-400 font-normal",children:["(",e.code,")"]})]}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[e.region_name," region"]})]}),r.jsxs("button",{onClick:()=>n("department",e.code,e.name),className:"btn btn-primary flex items-center gap-2",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate Report"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(_n,{className:"w-4 h-4"}),"Prefecture"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.prefecture})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:[r.jsx(Qr,{className:"w-4 h-4"}),"Population"]}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.population.toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Area"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.area_km2.toLocaleString()," km"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-1",children:"Density"}),r.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[Math.round(e.population/e.area_km2),"/km"]})]})]}),!c&&r.jsx(Q8,{departmentCode:e.code,departmentName:e.name,communes:a,onCommuneSelect:t}),e.major_cities.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Major Cities"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.major_cities.map(j=>{const g=a.find(f=>f.name.toLowerCase()===j.toLowerCase());return r.jsx("button",{onClick:()=>{g&&t(g)},disabled:!g,className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${g?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:j},j)})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",value:u,onChange:y,placeholder:"Search communes by name or postal code...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),r.jsx("div",{className:"flex gap-2",children:["all","city","town","village"].map(j=>r.jsxs("button",{onClick:()=>p(j),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h===j?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[j==="all"?"All":j.charAt(0).toUpperCase()+j.slice(1),"s"]},j))})]}),c?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(_e,{className:"w-6 h-6 animate-spin text-primary-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading communes..."})]}):l.length>0?r.jsxs("div",{className:"space-y-6",children:[b.city.length>0&&(h==="all"||h==="city")&&r.jsx(Bu,{title:"Cities",communes:b.city,type:"city",onSelect:t}),b.town.length>0&&(h==="all"||h==="town")&&r.jsx(Bu,{title:"Towns",communes:b.town,type:"town",onSelect:t}),b.village.length>0&&(h==="all"||h==="village")&&r.jsx(Bu,{title:"Villages",communes:b.village,type:"village",onSelect:t})]}):r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(Sn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No communes found matching your search"}),u&&r.jsx("button",{onClick:()=>m(""),className:"mt-2 text-primary-600 hover:underline",children:"Clear search"})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"About Department Reports"}),r.jsxs("p",{className:"text-blue-700 text-sm",children:["Generate a detailed AI-researched report about ",e.name," including local economy, housing market, transportation, healthcare facilities, schools, and practical information for relocating to this area."]})]})]})}function Bu({title:e,communes:t,type:n,onSelect:s}){const[a,i]=N.useState(!1),l=I8[n],o=l.icon,c=12,d=a?t:t.slice(0,c),u=t.length>c;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:`p-1.5 rounded-lg ${l.color}`,children:r.jsx(o,{className:"w-4 h-4"})}),r.jsx("h3",{className:"font-medium text-gray-900",children:e}),r.jsxs("span",{className:"text-sm text-gray-500",children:["(",t.length,")"]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:d.map(m=>r.jsx("button",{onClick:()=>s(m),className:"text-left p-3 rounded-lg border border-gray-200 hover:border-primary-300 hover:bg-primary-50 transition-all group",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 group-hover:text-primary-700",children:m.name}),r.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:m.postal_codes[0]})]}),m.population>0&&r.jsx("span",{className:"text-xs text-gray-400",children:m.population.toLocaleString()})]})},m.code))}),u&&r.jsx("div",{className:"mt-3 text-center",children:r.jsx("button",{onClick:()=>i(!a),className:"text-sm text-primary-600 hover:text-primary-700 hover:underline font-medium",children:a?"Show less":`Show all ${t.length} ${n==="city"?"cities":`${n}s`}`})})]})}function z8({onSelect:e}){const[t,n]=N.useState(""),[s,a]=N.useState([]),[i,l]=N.useState(!1),[o,c]=N.useState(!1),[d,u]=N.useState(-1),m=N.useRef(null),h=N.useRef(null),p=N.useRef(),y=N.useCallback(async f=>{if(!f.trim()){a([]);return}l(!0);const x=[],v=f.toLowerCase();if(vo.forEach(_=>{(_.name.toLowerCase().includes(v)||_.capital.toLowerCase().includes(v))&&x.push({type:"region",code:_.code,name:_.name,subtitle:`Region  ${_.capital}`,data:_})}),_0.forEach(_=>{(_.name.toLowerCase().includes(v)||_.prefecture.toLowerCase().includes(v)||_.code.includes(v))&&x.push({type:"department",code:_.code,name:_.name,subtitle:`Department  ${_.region_name}`,data:_})}),f.length>=3)try{const _=await Ho.searchCommunes({q:f,limit:10});_.communes&&_.communes.forEach(k=>{x.push({type:"commune",code:k.code,name:k.name,subtitle:`${k.type.charAt(0).toUpperCase()+k.type.slice(1)}  ${k.department_name}`,data:k})})}catch(_){console.error("Commune search failed:",_)}const w={region:0,department:1,commune:2};x.sort((_,k)=>{const C=w[_.type]-w[k.type];return C!==0?C:_.name.localeCompare(k.name)}),a(x.slice(0,15)),l(!1)},[]);N.useEffect(()=>(p.current&&clearTimeout(p.current),t.trim()?p.current=setTimeout(()=>{y(t)},300):a([]),()=>{p.current&&clearTimeout(p.current)}),[t,y]);const b=f=>{e(f.data,f.type),n(""),a([]),c(!1),u(-1)},j=f=>{if(!(!o||s.length===0))switch(f.key){case"ArrowDown":f.preventDefault(),u(x=>x<s.length-1?x+1:0);break;case"ArrowUp":f.preventDefault(),u(x=>x>0?x-1:s.length-1);break;case"Enter":f.preventDefault(),d>=0&&d<s.length&&b(s[d]);break;case"Escape":f.preventDefault(),c(!1),u(-1);break}};N.useEffect(()=>{const f=x=>{var v;h.current&&!h.current.contains(x.target)&&!((v=m.current)!=null&&v.contains(x.target))&&c(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const g=f=>{switch(f){case"region":return r.jsx(_n,{className:"w-4 h-4 text-primary-600"});case"department":return r.jsx(Go,{className:"w-4 h-4 text-amber-600"});case"commune":return r.jsx(ws,{className:"w-4 h-4 text-emerald-600"})}};return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{ref:m,type:"text",value:t,onChange:f=>{n(f.target.value),c(!0),u(-1)},onFocus:()=>c(!0),onKeyDown:j,placeholder:"Search regions, departments, towns...",className:"w-64 pl-10 pr-8 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500","aria-label":"Search locations","aria-expanded":o,"aria-haspopup":"listbox","aria-controls":"location-search-results",role:"combobox"}),t&&r.jsx("button",{onClick:()=>{var f;n(""),a([]),(f=m.current)==null||f.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:r.jsx(Ve,{className:"w-4 h-4"})})]}),o&&(t||s.length>0)&&r.jsx("div",{ref:h,id:"location-search-results",role:"listbox",className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:i?r.jsxs("div",{className:"flex items-center justify-center py-4",children:[r.jsx(_e,{className:"w-5 h-5 animate-spin text-primary-600"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Searching..."})]}):s.length>0?r.jsx("ul",{className:"max-h-80 overflow-y-auto",children:s.map((f,x)=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>b(f),onMouseEnter:()=>u(x),className:`w-full text-left px-4 py-3 flex items-start gap-3 transition-colors ${x===d?"bg-primary-50":"hover:bg-gray-50"}`,role:"option","aria-selected":x===d,children:[r.jsx("span",{className:"mt-0.5",children:g(f.type)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:f.name}),r.jsx("p",{className:"text-sm text-gray-500",children:f.subtitle})]})]})},`${f.type}-${f.code}`))}):t.length>=2?r.jsxs("div",{className:"py-4 text-center text-gray-500 text-sm",children:['No results found for "',t,'"']}):r.jsx("div",{className:"py-4 text-center text-gray-500 text-sm",children:"Type to search locations..."})})]})}function $8(e){switch(e){case"api_key_missing":return"The AI service is not configured. Please contact support to enable AI-generated reports with specific local data.";case"api_error":return"Unable to connect to the AI service. Please try again later or contact support.";case"parse_error":return"The AI response could not be processed. Please try regenerating the report.";default:return'This is a template report with generic information. Click "Generate AI Report" to get location-specific data.'}}function q8({isOpen:e,onClose:t,locationType:n,locationCode:s,locationName:a}){const[i,l]=N.useState("initial"),[o,c]=N.useState(null),[d,u]=N.useState(null),[m,h]=N.useState(!1),[p,y]=N.useState(null),[b,j]=N.useState(!1),[g,f]=N.useState(null);N.useEffect(()=>{e&&(l("initial"),c(null),u(null),h(!1),y(null),j(!1),f(null))},[e,s]);const x=async(_=!1)=>{l("generating"),u(null);try{const k=await Ho.generateReport({location_type:n,location_code:s,location_name:a,force_refresh:_});c(k.report),h(k.cached),y(k.cache_age||null),j(k.is_placeholder||!1),f(k.placeholder_reason||null),l("ready")}catch(k){console.error("Report generation failed:",k),u(k instanceof Error?k.message:"Failed to generate report. Please try again."),l("error")}},v=async()=>{if(o){l("saving");try{await Ho.saveReport(o.id),l("saved")}catch(_){console.error("Failed to save report:",_),u("Failed to save report to your documents."),l("ready")}}},w=()=>{if(!(o!=null&&o.id))return;const _=window.fraPortalData||{nonce:"",apiUrl:"/wp-json/fra-portal/v1"},k=`${_.apiUrl}/research/report/${o.id}/html?_wpnonce=${_.nonce}`;window.open(k,"_blank")};return e?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:_=>{_.target===_.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:"Generate Relocation Report"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:r.jsx(Ve,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6",children:[i==="initial"&&r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(me,{className:"w-8 h-8 text-primary-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a}),r.jsxs("p",{className:"text-gray-600 mb-6",children:["Generate a comprehensive AI-researched relocation report for"," ",n==="region"?"this region":n==="department"?"this department":"this area","."]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Report includes:"}),r.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[r.jsx("li",{children:" Geography & landscape overview"}),r.jsx("li",{children:" Climate and weather patterns"}),r.jsx("li",{children:" Economy and job market"}),r.jsx("li",{children:" Housing and real estate"}),r.jsx("li",{children:" Food and wine culture"}),r.jsx("li",{children:" Culture and lifestyle"}),r.jsx("li",{children:" Quality of life (healthcare, education)"}),r.jsx("li",{children:" Transportation options"}),r.jsx("li",{children:" Environment and outdoor activities"}),r.jsx("li",{children:" Practical information"})]})]}),r.jsxs("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate Report"]})]}),i==="generating"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_e,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Generating Report"}),r.jsxs("p",{className:"text-gray-600",children:["Our AI is researching and compiling information about ",a,"..."]}),r.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"This may take a minute or two."})]}),i==="ready"&&o&&r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Report Ready"}),m&&!b&&r.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-full mb-2",children:[r.jsx(Le,{className:"w-3 h-3"}),r.jsxs("span",{children:["Cached report ",p&&`(${p})`]})]}),b&&r.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-700 text-sm rounded-full mb-2",children:[r.jsx(Ye,{className:"w-3 h-3"}),r.jsx("span",{children:"Template report (generic data)"})]}),r.jsx("p",{className:"text-gray-600",children:b?$8(g):`Your relocation report for ${a} is ready.`})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:o.location_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Version ",o.version]})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[n.charAt(0).toUpperCase()+n.slice(1)," Report"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(o.updated_at).toLocaleDateString()]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:w,className:"btn btn-primary w-full",children:[r.jsx(me,{className:"w-4 h-4"}),"View Report"]}),r.jsxs("button",{onClick:v,className:"btn btn-outline w-full",children:[r.jsx(cl,{className:"w-4 h-4"}),"Save to My Documents"]}),(m||b)&&r.jsxs("button",{onClick:()=>x(!0),className:`btn w-full text-sm ${b?"btn-primary":"btn-ghost"}`,children:[r.jsx(Qv,{className:"w-4 h-4"}),b?"Generate AI Report":"Regenerate with fresh data"]})]})]}),i==="saving"&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_e,{className:"w-12 h-12 animate-spin text-primary-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Saving to Documents"}),r.jsx("p",{className:"text-gray-600",children:"Adding this report to your document library..."})]}),i==="saved"&&o&&r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ae,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Saved to Documents"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"This report is now linked in your documents. You'll always have access to the latest version."}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Note:"})," When this report is updated, your saved link will automatically point to the newest version with the latest information."]})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:w,className:"btn btn-primary w-full",children:[r.jsx(me,{className:"w-4 h-4"}),"View Report"]}),r.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Close"})]})]}),i==="error"&&r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ye,{className:"w-8 h-8 text-red-600"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Generation Failed"}),r.jsx("p",{className:"text-gray-600 mb-2",children:d}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the issue persists."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>x(!1),className:"btn btn-primary w-full",children:"Try Again"}),r.jsx("button",{onClick:t,className:"btn btn-outline w-full",children:"Cancel"})]})]})]})]})}):null}function U8(){const[e,t]=N.useState({level:"france"}),[n,s]=N.useState([]),[a,i]=N.useState(!1),[l,o]=N.useState(null),c=N.useCallback(y=>{t({level:"region",region:y}),s([{level:"region",code:y.code,name:y.name}])},[]),d=N.useCallback(y=>{t(b=>({...b,level:"department",department:y})),s(b=>[...b.slice(0,1),{level:"department",code:y.code,name:y.name}])},[]),u=N.useCallback(y=>{t(b=>({...b,level:"commune",commune:y})),s(b=>[...b.slice(0,2),{level:"commune",code:y.code,name:y.name}])},[]),m=N.useCallback(y=>{if(y===-1)t({level:"france"}),s([]);else{const b=n[y],j=n.slice(0,y+1);s(j),b.level==="region"?t(g=>({level:"region",region:g.region})):b.level==="department"&&t(g=>({level:"department",region:g.region,department:g.department}))}},[n]),h=N.useCallback((y,b,j)=>{o({type:y,code:b,name:j}),i(!0)},[]),p=N.useCallback((y,b)=>{if(b==="region")c(y);else if(b==="department"){const j=y;t({level:"department",region:{code:j.region_code,name:j.region_name},department:j}),s([{level:"region",code:j.region_code,name:j.region_name},{level:"department",code:j.code,name:j.name}])}else if(b==="commune"){const j=y;t({level:"commune",region:{code:j.region_code,name:j.region_name},department:{code:j.department_code,name:j.department_name},commune:j}),s([{level:"region",code:j.region_code,name:j.region_name},{level:"department",code:j.department_code,name:j.department_name},{level:"commune",code:j.code,name:j.name}])}},[c]);return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(_n,{className:"w-6 h-6 text-primary-600"}),"Explore France"]}),r.jsx("p",{className:"mt-1 text-gray-600",children:"Discover regions, departments, and towns. Generate detailed relocation reports."})]}),r.jsx(z8,{onSelect:p})]})}),r.jsx("nav",{className:"mb-6","aria-label":"Location breadcrumb",children:r.jsxs("ol",{className:"flex items-center gap-2 text-sm",children:[r.jsx("li",{children:r.jsxs("button",{onClick:()=>m(-1),className:`flex items-center gap-1 px-3 py-1.5 rounded-lg transition-colors ${e.level==="france"?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx(_n,{className:"w-4 h-4"}),"France"]})}),n.map((y,b)=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(wt,{className:"w-4 h-4 text-gray-400"}),r.jsx("button",{onClick:()=>m(b),className:`px-3 py-1.5 rounded-lg transition-colors ${b===n.length-1?"bg-primary-100 text-primary-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:y.name})]},y.code))]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.level==="france"&&r.jsx(d8,{onRegionSelect:c,onGenerateReport:(y,b)=>h("region",y,b)}),e.level==="region"&&e.region&&r.jsx(P8,{region:e.region,onDepartmentSelect:d,onGenerateReport:(y,b)=>h("region",y,b),onBack:()=>m(-1)}),e.level==="department"&&e.department&&r.jsx(O8,{department:e.department,onCommuneSelect:u,onGenerateReport:(y,b,j)=>h(y,b,j),onBack:()=>m(0)}),e.level==="commune"&&e.commune&&r.jsx(B8,{commune:e.commune,onGenerateReport:(y,b)=>h("commune",y,b)})]}),a&&l&&r.jsx(q8,{isOpen:a,onClose:()=>i(!1),locationType:l.type,locationCode:l.code,locationName:l.name})]})}function B8({commune:e,onGenerateReport:t}){return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),r.jsxs("p",{className:"text-gray-600",children:[e.department_name,", ",e.region_name]})]}),r.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate Report"]})]}),r.jsxs("div",{className:`grid grid-cols-1 gap-4 mb-6 ${e.population>0?"md:grid-cols-3":"md:grid-cols-2"}`,children:[e.population>0&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Population"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.population.toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Type"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 capitalize",children:e.type})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Department"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.department_name})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Generate a Detailed Report"}),r.jsxs("p",{className:"text-blue-700 text-sm mb-4",children:["Get a comprehensive AI-researched guide about ",e.name,", including local history, cost of living, healthcare facilities, schools, transportation, and practical information for relocating to this area."]}),r.jsxs("button",{onClick:()=>t(e.code,e.name),className:"btn btn-primary",children:[r.jsx(me,{className:"w-4 h-4"}),"Generate ",e.name," Report"]})]})]})}function V8(){const{activeView:e}=En();switch(e){case"dashboard":return r.jsx(sf,{});case"tasks":return r.jsx(Yw,{});case"messages":return r.jsx(g4,{});case"documents":return r.jsx(uf,{});case"timeline":return r.jsx(C4,{});case"guides":return r.jsx(z4,{});case"files":return r.jsx(uf,{});case"family":return r.jsx(W4,{});case"settings":return r.jsx(T4,{});case"help":return r.jsx(I4,{});case"profile":return r.jsx(h3,{});case"checklists":return r.jsx(y3,{});case"glossary":return r.jsx(w3,{});case"chat":return r.jsx(S3,{});case"membership":return r.jsx(Q3,{});case"research":return r.jsx(U8,{});default:return r.jsx(sf,{})}}function Z8(){const{sidebarCollapsed:e,setUser:t}=En(),{data:n}=Lh();return N.useEffect(()=>{n&&t(n)},[n,t]),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(vw,{}),r.jsxs("div",{className:Q("transition-all duration-300",e?"ml-16":"ml-64"),children:[r.jsx(jw,{}),r.jsx("main",{className:"min-h-[calc(100vh-4rem)]",children:r.jsx(pw,{children:r.jsx(V8,{})})})]})]})}const H8=new lj({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),Ng=document.getElementById("fra-portal-root");Ng&&Vu.createRoot(Ng).render(r.jsx(Te.StrictMode,{children:r.jsx(oj,{client:H8,children:r.jsx(Z8,{})})}));
